var nE=t=>{throw TypeError(t)};var Op=(t,e,n)=>e.has(t)||nE("Cannot "+n);var te=(t,e,n)=>(Op(t,e,"read from private field"),n?n.call(t):e.get(t)),rt=(t,e,n)=>e.has(t)?nE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ue=(t,e,n,r)=>(Op(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),It=(t,e,n)=>(Op(t,e,"access private method"),n);var O0=(t,e,n,r)=>({set _(s){Ue(t,e,s,n)},get _(){return te(t,e,r)}});function IT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ST={exports:{}},om={},NT={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf=Symbol.for("react.element"),AP=Symbol.for("react.portal"),TP=Symbol.for("react.fragment"),IP=Symbol.for("react.strict_mode"),SP=Symbol.for("react.profiler"),NP=Symbol.for("react.provider"),RP=Symbol.for("react.context"),kP=Symbol.for("react.forward_ref"),PP=Symbol.for("react.suspense"),OP=Symbol.for("react.memo"),DP=Symbol.for("react.lazy"),rE=Symbol.iterator;function MP(t){return t===null||typeof t!="object"?null:(t=rE&&t[rE]||t["@@iterator"],typeof t=="function"?t:null)}var RT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kT=Object.assign,PT={};function vd(t,e,n){this.props=t,this.context=e,this.refs=PT,this.updater=n||RT}vd.prototype.isReactComponent={};vd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function OT(){}OT.prototype=vd.prototype;function Yw(t,e,n){this.props=t,this.context=e,this.refs=PT,this.updater=n||RT}var Qw=Yw.prototype=new OT;Qw.constructor=Yw;kT(Qw,vd.prototype);Qw.isPureReactComponent=!0;var sE=Array.isArray,DT=Object.prototype.hasOwnProperty,Zw={current:null},MT={key:!0,ref:!0,__self:!0,__source:!0};function LT(t,e,n){var r,s={},i=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)DT.call(e,r)&&!MT.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var f=Array(u),m=0;m<u;m++)f[m]=arguments[m+2];s.children=f}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Wf,type:t,key:i,ref:l,props:s,_owner:Zw.current}}function LP(t,e){return{$$typeof:Wf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wf}function FP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iE=/\/+/g;function Dp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FP(""+t.key):e.toString(36)}function m1(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Wf:case AP:l=!0}}if(l)return l=t,s=s(l),t=r===""?"."+Dp(l,0):r,sE(s)?(n="",t!=null&&(n=t.replace(iE,"$&/")+"/"),m1(s,e,n,"",function(m){return m})):s!=null&&(Jw(s)&&(s=LP(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(iE,"$&/")+"/")+t)),e.push(s)),1;if(l=0,r=r===""?".":r+":",sE(t))for(var u=0;u<t.length;u++){i=t[u];var f=r+Dp(i,u);l+=m1(i,e,n,f,s)}else if(f=MP(t),typeof f=="function")for(t=f.call(t),u=0;!(i=t.next()).done;)i=i.value,f=r+Dp(i,u++),l+=m1(i,e,n,f,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function D0(t,e,n){if(t==null)return t;var r=[],s=0;return m1(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rs={current:null},p1={transition:null},BP={ReactCurrentDispatcher:rs,ReactCurrentBatchConfig:p1,ReactCurrentOwner:Zw};function FT(){throw Error("act(...) is not supported in production builds of React.")}wt.Children={map:D0,forEach:function(t,e,n){D0(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return D0(t,function(){e++}),e},toArray:function(t){return D0(t,function(e){return e})||[]},only:function(t){if(!Jw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};wt.Component=vd;wt.Fragment=TP;wt.Profiler=SP;wt.PureComponent=Yw;wt.StrictMode=IP;wt.Suspense=PP;wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BP;wt.act=FT;wt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=kT({},t.props),s=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=Zw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(f in e)DT.call(e,f)&&!MT.hasOwnProperty(f)&&(r[f]=e[f]===void 0&&u!==void 0?u[f]:e[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){u=Array(f);for(var m=0;m<f;m++)u[m]=arguments[m+2];r.children=u}return{$$typeof:Wf,type:t.type,key:s,ref:i,props:r,_owner:l}};wt.createContext=function(t){return t={$$typeof:RP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NP,_context:t},t.Consumer=t};wt.createElement=LT;wt.createFactory=function(t){var e=LT.bind(null,t);return e.type=t,e};wt.createRef=function(){return{current:null}};wt.forwardRef=function(t){return{$$typeof:kP,render:t}};wt.isValidElement=Jw;wt.lazy=function(t){return{$$typeof:DP,_payload:{_status:-1,_result:t},_init:jP}};wt.memo=function(t,e){return{$$typeof:OP,type:t,compare:e===void 0?null:e}};wt.startTransition=function(t){var e=p1.transition;p1.transition={};try{t()}finally{p1.transition=e}};wt.unstable_act=FT;wt.useCallback=function(t,e){return rs.current.useCallback(t,e)};wt.useContext=function(t){return rs.current.useContext(t)};wt.useDebugValue=function(){};wt.useDeferredValue=function(t){return rs.current.useDeferredValue(t)};wt.useEffect=function(t,e){return rs.current.useEffect(t,e)};wt.useId=function(){return rs.current.useId()};wt.useImperativeHandle=function(t,e,n){return rs.current.useImperativeHandle(t,e,n)};wt.useInsertionEffect=function(t,e){return rs.current.useInsertionEffect(t,e)};wt.useLayoutEffect=function(t,e){return rs.current.useLayoutEffect(t,e)};wt.useMemo=function(t,e){return rs.current.useMemo(t,e)};wt.useReducer=function(t,e,n){return rs.current.useReducer(t,e,n)};wt.useRef=function(t){return rs.current.useRef(t)};wt.useState=function(t){return rs.current.useState(t)};wt.useSyncExternalStore=function(t,e,n){return rs.current.useSyncExternalStore(t,e,n)};wt.useTransition=function(){return rs.current.useTransition()};wt.version="18.3.1";NT.exports=wt;var O=NT.exports;const dt=Xw(O),jT=IT({__proto__:null,default:dt},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VP=O,UP=Symbol.for("react.element"),zP=Symbol.for("react.fragment"),HP=Object.prototype.hasOwnProperty,WP=VP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GP={key:!0,ref:!0,__self:!0,__source:!0};function BT(t,e,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)HP.call(e,r)&&!GP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:UP,type:t,key:i,ref:l,props:s,_owner:WP.current}}om.Fragment=zP;om.jsx=BT;om.jsxs=BT;ST.exports=om;var p=ST.exports,VT={exports:{}},Hs={},UT={exports:{}},zT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(oe,ue){var Ie=oe.length;oe.push(ue);e:for(;0<Ie;){var Ge=Ie-1>>>1,He=oe[Ge];if(0<s(He,ue))oe[Ge]=ue,oe[Ie]=He,Ie=Ge;else break e}}function n(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var ue=oe[0],Ie=oe.pop();if(Ie!==ue){oe[0]=Ie;e:for(var Ge=0,He=oe.length,at=He>>>1;Ge<at;){var _t=2*(Ge+1)-1,Vn=oe[_t],Oe=_t+1,Zt=oe[Oe];if(0>s(Vn,Ie))Oe<He&&0>s(Zt,Vn)?(oe[Ge]=Zt,oe[Oe]=Ie,Ge=Oe):(oe[Ge]=Vn,oe[_t]=Ie,Ge=_t);else if(Oe<He&&0>s(Zt,Ie))oe[Ge]=Zt,oe[Oe]=Ie,Ge=Oe;else break e}}return ue}function s(oe,ue){var Ie=oe.sortIndex-ue.sortIndex;return Ie!==0?Ie:oe.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],m=[],w=1,v=null,E=3,I=!1,P=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(oe){for(var ue=n(m);ue!==null;){if(ue.callback===null)r(m);else if(ue.startTime<=oe)r(m),ue.sortIndex=ue.expirationTime,e(f,ue);else break;ue=n(m)}}function V(oe){if(C=!1,S(oe),!P)if(n(f)!==null)P=!0,xe($);else{var ue=n(m);ue!==null&&we(V,ue.startTime-oe)}}function $(oe,ue){P=!1,C&&(C=!1,N(j),j=-1),I=!0;var Ie=E;try{for(S(ue),v=n(f);v!==null&&(!(v.expirationTime>ue)||oe&&!X());){var Ge=v.callback;if(typeof Ge=="function"){v.callback=null,E=v.priorityLevel;var He=Ge(v.expirationTime<=ue);ue=t.unstable_now(),typeof He=="function"?v.callback=He:v===n(f)&&r(f),S(ue)}else r(f);v=n(f)}if(v!==null)var at=!0;else{var _t=n(m);_t!==null&&we(V,_t.startTime-ue),at=!1}return at}finally{v=null,E=Ie,I=!1}}var Y=!1,M=null,j=-1,L=5,G=-1;function X(){return!(t.unstable_now()-G<L)}function H(){if(M!==null){var oe=t.unstable_now();G=oe;var ue=!0;try{ue=M(!0,oe)}finally{ue?z():(Y=!1,M=null)}}else Y=!1}var z;if(typeof T=="function")z=function(){T(H)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,ee=de.port2;de.port1.onmessage=H,z=function(){ee.postMessage(null)}}else z=function(){k(H,0)};function xe(oe){M=oe,Y||(Y=!0,z())}function we(oe,ue){j=k(function(){oe(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(oe){oe.callback=null},t.unstable_continueExecution=function(){P||I||(P=!0,xe($))},t.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<oe?Math.floor(1e3/oe):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(oe){switch(E){case 1:case 2:case 3:var ue=3;break;default:ue=E}var Ie=E;E=ue;try{return oe()}finally{E=Ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(oe,ue){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var Ie=E;E=oe;try{return ue()}finally{E=Ie}},t.unstable_scheduleCallback=function(oe,ue,Ie){var Ge=t.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Ge+Ie:Ge):Ie=Ge,oe){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=Ie+He,oe={id:w++,callback:ue,priorityLevel:oe,startTime:Ie,expirationTime:He,sortIndex:-1},Ie>Ge?(oe.sortIndex=Ie,e(m,oe),n(f)===null&&oe===n(m)&&(C?(N(j),j=-1):C=!0,we(V,Ie-Ge))):(oe.sortIndex=He,e(f,oe),P||I||(P=!0,xe($))),oe},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(oe){var ue=E;return function(){var Ie=E;E=ue;try{return oe.apply(this,arguments)}finally{E=Ie}}}})(zT);UT.exports=zT;var $P=UT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qP=O,Us=$P;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HT=new Set,Lh={};function kc(t,e){qu(t,e),qu(t+"Capture",e)}function qu(t,e){for(Lh[t]=e,t=0;t<e.length;t++)HT.add(e[t])}var qo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wy=Object.prototype.hasOwnProperty,KP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oE={},aE={};function XP(t){return Wy.call(aE,t)?!0:Wy.call(oE,t)?!1:KP.test(t)?aE[t]=!0:(oE[t]=!0,!1)}function YP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QP(t,e,n,r){if(e===null||typeof e>"u"||YP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ss(t,e,n,r,s,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var Sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Sr[t]=new ss(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Sr[e]=new ss(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Sr[t]=new ss(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Sr[t]=new ss(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Sr[t]=new ss(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Sr[t]=new ss(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Sr[t]=new ss(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Sr[t]=new ss(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Sr[t]=new ss(t,5,!1,t.toLowerCase(),null,!1,!1)});var ev=/[\-:]([a-z])/g;function tv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ev,tv);Sr[e]=new ss(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ev,tv);Sr[e]=new ss(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ev,tv);Sr[e]=new ss(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Sr[t]=new ss(t,1,!1,t.toLowerCase(),null,!1,!1)});Sr.xlinkHref=new ss("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Sr[t]=new ss(t,1,!1,t.toLowerCase(),null,!0,!0)});function nv(t,e,n,r){var s=Sr.hasOwnProperty(e)?Sr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QP(e,n,s,r)&&(n=null),r||s===null?XP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sa=qP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M0=Symbol.for("react.element"),su=Symbol.for("react.portal"),iu=Symbol.for("react.fragment"),rv=Symbol.for("react.strict_mode"),Gy=Symbol.for("react.profiler"),WT=Symbol.for("react.provider"),GT=Symbol.for("react.context"),sv=Symbol.for("react.forward_ref"),$y=Symbol.for("react.suspense"),qy=Symbol.for("react.suspense_list"),iv=Symbol.for("react.memo"),_a=Symbol.for("react.lazy"),$T=Symbol.for("react.offscreen"),lE=Symbol.iterator;function Hd(t){return t===null||typeof t!="object"?null:(t=lE&&t[lE]||t["@@iterator"],typeof t=="function"?t:null)}var Rn=Object.assign,Mp;function nh(t){if(Mp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mp=e&&e[1]||""}return`
`+Mp+t}var Lp=!1;function Fp(t,e){if(!t||Lp)return"";Lp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var r=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){r=m}t.call(e.prototype)}else{try{throw Error()}catch(m){r=m}t()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),i=r.stack.split(`
`),l=s.length-1,u=i.length-1;1<=l&&0<=u&&s[l]!==i[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==i[u]){if(l!==1||u!==1)do if(l--,u--,0>u||s[l]!==i[u]){var f=`
`+s[l].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=l&&0<=u);break}}}finally{Lp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nh(t):""}function ZP(t){switch(t.tag){case 5:return nh(t.type);case 16:return nh("Lazy");case 13:return nh("Suspense");case 19:return nh("SuspenseList");case 0:case 2:case 15:return t=Fp(t.type,!1),t;case 11:return t=Fp(t.type.render,!1),t;case 1:return t=Fp(t.type,!0),t;default:return""}}function Ky(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case iu:return"Fragment";case su:return"Portal";case Gy:return"Profiler";case rv:return"StrictMode";case $y:return"Suspense";case qy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GT:return(t.displayName||"Context")+".Consumer";case WT:return(t._context.displayName||"Context")+".Provider";case sv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case iv:return e=t.displayName||null,e!==null?e:Ky(t.type)||"Memo";case _a:e=t._payload,t=t._init;try{return Ky(t(e))}catch{}}return null}function JP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ky(e);case 8:return e===rv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function el(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eO(t){var e=qT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function L0(t){t._valueTracker||(t._valueTracker=eO(t))}function KT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function H1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xy(t,e){var n=e.checked;return Rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=el(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function XT(t,e){e=e.checked,e!=null&&nv(t,"checked",e,!1)}function Yy(t,e){XT(t,e);var n=el(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Qy(t,e.type,el(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Qy(t,e,n){(e!=="number"||H1(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rh=Array.isArray;function wu(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+el(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Zy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return Rn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(rh(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:el(n)}}function YT(t,e){var n=el(e.value),r=el(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function QT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?QT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var F0,ZT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(F0=F0||document.createElement("div"),F0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=F0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tO=["Webkit","ms","Moz","O"];Object.keys(ph).forEach(function(t){tO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ph[e]=ph[t]})});function JT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ph.hasOwnProperty(t)&&ph[t]?(""+e).trim():e+"px"}function eI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=JT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var nO=Rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ex(t,e){if(e){if(nO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function tx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nx=null;function ov(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rx=null,vu=null,_u=null;function fE(t){if(t=qf(t)){if(typeof rx!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=dm(e),rx(t.stateNode,t.type,e))}}function tI(t){vu?_u?_u.push(t):_u=[t]:vu=t}function nI(){if(vu){var t=vu,e=_u;if(_u=vu=null,fE(t),e)for(t=0;t<e.length;t++)fE(e[t])}}function rI(t,e){return t(e)}function sI(){}var jp=!1;function iI(t,e,n){if(jp)return t(e,n);jp=!0;try{return rI(t,e,n)}finally{jp=!1,(vu!==null||_u!==null)&&(sI(),nI())}}function jh(t,e){var n=t.stateNode;if(n===null)return null;var r=dm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var sx=!1;if(qo)try{var Wd={};Object.defineProperty(Wd,"passive",{get:function(){sx=!0}}),window.addEventListener("test",Wd,Wd),window.removeEventListener("test",Wd,Wd)}catch{sx=!1}function rO(t,e,n,r,s,i,l,u,f){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(w){this.onError(w)}}var yh=!1,W1=null,G1=!1,ix=null,sO={onError:function(t){yh=!0,W1=t}};function iO(t,e,n,r,s,i,l,u,f){yh=!1,W1=null,rO.apply(sO,arguments)}function oO(t,e,n,r,s,i,l,u,f){if(iO.apply(this,arguments),yh){if(yh){var m=W1;yh=!1,W1=null}else throw Error(Ee(198));G1||(G1=!0,ix=m)}}function Pc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gE(t){if(Pc(t)!==t)throw Error(Ee(188))}function aO(t){var e=t.alternate;if(!e){if(e=Pc(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gE(s),t;if(i===r)return gE(s),e;i=i.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var l=!1,u=s.child;u;){if(u===n){l=!0,n=s,r=i;break}if(u===r){l=!0,r=s,n=i;break}u=u.sibling}if(!l){for(u=i.child;u;){if(u===n){l=!0,n=i,r=s;break}if(u===r){l=!0,r=i,n=s;break}u=u.sibling}if(!l)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function aI(t){return t=aO(t),t!==null?lI(t):null}function lI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lI(t);if(e!==null)return e;t=t.sibling}return null}var cI=Us.unstable_scheduleCallback,mE=Us.unstable_cancelCallback,lO=Us.unstable_shouldYield,cO=Us.unstable_requestPaint,$n=Us.unstable_now,uO=Us.unstable_getCurrentPriorityLevel,av=Us.unstable_ImmediatePriority,uI=Us.unstable_UserBlockingPriority,$1=Us.unstable_NormalPriority,dO=Us.unstable_LowPriority,dI=Us.unstable_IdlePriority,am=null,ro=null;function hO(t){if(ro&&typeof ro.onCommitFiberRoot=="function")try{ro.onCommitFiberRoot(am,t,void 0,(t.current.flags&128)===128)}catch{}}var Ai=Math.clz32?Math.clz32:mO,fO=Math.log,gO=Math.LN2;function mO(t){return t>>>=0,t===0?32:31-(fO(t)/gO|0)|0}var j0=64,B0=4194304;function sh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function q1(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,l=n&268435455;if(l!==0){var u=l&~s;u!==0?r=sh(u):(i&=l,i!==0&&(r=sh(i)))}else l=n&~s,l!==0?r=sh(l):i!==0&&(r=sh(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ai(e),s=1<<n,r|=t[n],e&=~s;return r}function pO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-Ai(i),u=1<<l,f=s[l];f===-1?(!(u&n)||u&r)&&(s[l]=pO(u,e)):f<=e&&(t.expiredLanes|=u),i&=~u}}function ox(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hI(){var t=j0;return j0<<=1,!(j0&4194240)&&(j0=64),t}function Bp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ai(e),t[e]=n}function xO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ai(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function lv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ai(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $t=0;function fI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gI,cv,mI,pI,yI,ax=!1,V0=[],Ua=null,za=null,Ha=null,Bh=new Map,Vh=new Map,ba=[],wO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pE(t,e){switch(t){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":Bh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vh.delete(e.pointerId)}}function Gd(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=qf(e),e!==null&&cv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vO(t,e,n,r,s){switch(e){case"focusin":return Ua=Gd(Ua,t,e,n,r,s),!0;case"dragenter":return za=Gd(za,t,e,n,r,s),!0;case"mouseover":return Ha=Gd(Ha,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Bh.set(i,Gd(Bh.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vh.set(i,Gd(Vh.get(i)||null,t,e,n,r,s)),!0}return!1}function xI(t){var e=$l(t.target);if(e!==null){var n=Pc(e);if(n!==null){if(e=n.tag,e===13){if(e=oI(n),e!==null){t.blockedOn=e,yI(t.priority,function(){mI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function y1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);nx=r,n.target.dispatchEvent(r),nx=null}else return e=qf(n),e!==null&&cv(e),t.blockedOn=n,!1;e.shift()}return!0}function yE(t,e,n){y1(t)&&n.delete(e)}function _O(){ax=!1,Ua!==null&&y1(Ua)&&(Ua=null),za!==null&&y1(za)&&(za=null),Ha!==null&&y1(Ha)&&(Ha=null),Bh.forEach(yE),Vh.forEach(yE)}function $d(t,e){t.blockedOn===e&&(t.blockedOn=null,ax||(ax=!0,Us.unstable_scheduleCallback(Us.unstable_NormalPriority,_O)))}function Uh(t){function e(s){return $d(s,t)}if(0<V0.length){$d(V0[0],t);for(var n=1;n<V0.length;n++){var r=V0[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ua!==null&&$d(Ua,t),za!==null&&$d(za,t),Ha!==null&&$d(Ha,t),Bh.forEach(e),Vh.forEach(e),n=0;n<ba.length;n++)r=ba[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ba.length&&(n=ba[0],n.blockedOn===null);)xI(n),n.blockedOn===null&&ba.shift()}var Eu=sa.ReactCurrentBatchConfig,K1=!0;function EO(t,e,n,r){var s=$t,i=Eu.transition;Eu.transition=null;try{$t=1,uv(t,e,n,r)}finally{$t=s,Eu.transition=i}}function bO(t,e,n,r){var s=$t,i=Eu.transition;Eu.transition=null;try{$t=4,uv(t,e,n,r)}finally{$t=s,Eu.transition=i}}function uv(t,e,n,r){if(K1){var s=lx(t,e,n,r);if(s===null)Xp(t,e,r,X1,n),pE(t,r);else if(vO(s,t,e,n,r))r.stopPropagation();else if(pE(t,r),e&4&&-1<wO.indexOf(t)){for(;s!==null;){var i=qf(s);if(i!==null&&gI(i),i=lx(t,e,n,r),i===null&&Xp(t,e,r,X1,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xp(t,e,r,null,n)}}var X1=null;function lx(t,e,n,r){if(X1=null,t=ov(r),t=$l(t),t!==null)if(e=Pc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return X1=t,null}function wI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uO()){case av:return 1;case uI:return 4;case $1:case dO:return 16;case dI:return 536870912;default:return 16}default:return 16}}var Fa=null,dv=null,x1=null;function vI(){if(x1)return x1;var t,e=dv,n=e.length,r,s="value"in Fa?Fa.value:Fa.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===s[i-r];r++);return x1=s.slice(t,1<r?1-r:void 0)}function w1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function U0(){return!0}function xE(){return!1}function Ws(t){function e(n,r,s,i,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?U0:xE,this.isPropagationStopped=xE,this}return Rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=U0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=U0)},persist:function(){},isPersistent:U0}),e}var _d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hv=Ws(_d),$f=Rn({},_d,{view:0,detail:0}),CO=Ws($f),Vp,Up,qd,lm=Rn({},$f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qd&&(qd&&t.type==="mousemove"?(Vp=t.screenX-qd.screenX,Up=t.screenY-qd.screenY):Up=Vp=0,qd=t),Vp)},movementY:function(t){return"movementY"in t?t.movementY:Up}}),wE=Ws(lm),AO=Rn({},lm,{dataTransfer:0}),TO=Ws(AO),IO=Rn({},$f,{relatedTarget:0}),zp=Ws(IO),SO=Rn({},_d,{animationName:0,elapsedTime:0,pseudoElement:0}),NO=Ws(SO),RO=Rn({},_d,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kO=Ws(RO),PO=Rn({},_d,{data:0}),vE=Ws(PO),OO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MO[t])?!!e[t]:!1}function fv(){return LO}var FO=Rn({},$f,{key:function(t){if(t.key){var e=OO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=w1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fv,charCode:function(t){return t.type==="keypress"?w1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?w1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jO=Ws(FO),BO=Rn({},lm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_E=Ws(BO),VO=Rn({},$f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fv}),UO=Ws(VO),zO=Rn({},_d,{propertyName:0,elapsedTime:0,pseudoElement:0}),HO=Ws(zO),WO=Rn({},lm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GO=Ws(WO),$O=[9,13,27,32],gv=qo&&"CompositionEvent"in window,xh=null;qo&&"documentMode"in document&&(xh=document.documentMode);var qO=qo&&"TextEvent"in window&&!xh,_I=qo&&(!gv||xh&&8<xh&&11>=xh),EE=" ",bE=!1;function EI(t,e){switch(t){case"keyup":return $O.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ou=!1;function KO(t,e){switch(t){case"compositionend":return bI(e);case"keypress":return e.which!==32?null:(bE=!0,EE);case"textInput":return t=e.data,t===EE&&bE?null:t;default:return null}}function XO(t,e){if(ou)return t==="compositionend"||!gv&&EI(t,e)?(t=vI(),x1=dv=Fa=null,ou=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _I&&e.locale!=="ko"?null:e.data;default:return null}}var YO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YO[t.type]:e==="textarea"}function CI(t,e,n,r){tI(r),e=Y1(e,"onChange"),0<e.length&&(n=new hv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wh=null,zh=null;function QO(t){MI(t,0)}function cm(t){var e=cu(t);if(KT(e))return t}function ZO(t,e){if(t==="change")return e}var AI=!1;if(qo){var Hp;if(qo){var Wp="oninput"in document;if(!Wp){var AE=document.createElement("div");AE.setAttribute("oninput","return;"),Wp=typeof AE.oninput=="function"}Hp=Wp}else Hp=!1;AI=Hp&&(!document.documentMode||9<document.documentMode)}function TE(){wh&&(wh.detachEvent("onpropertychange",TI),zh=wh=null)}function TI(t){if(t.propertyName==="value"&&cm(zh)){var e=[];CI(e,zh,t,ov(t)),iI(QO,e)}}function JO(t,e,n){t==="focusin"?(TE(),wh=e,zh=n,wh.attachEvent("onpropertychange",TI)):t==="focusout"&&TE()}function e5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cm(zh)}function t5(t,e){if(t==="click")return cm(e)}function n5(t,e){if(t==="input"||t==="change")return cm(e)}function r5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ri=typeof Object.is=="function"?Object.is:r5;function Hh(t,e){if(Ri(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Wy.call(e,s)||!Ri(t[s],e[s]))return!1}return!0}function IE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function SE(t,e){var n=IE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=IE(n)}}function II(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?II(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SI(){for(var t=window,e=H1();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=H1(t.document)}return e}function mv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function s5(t){var e=SI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&II(n.ownerDocument.documentElement,n)){if(r!==null&&mv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=SE(n,i);var l=SE(n,r);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var i5=qo&&"documentMode"in document&&11>=document.documentMode,au=null,cx=null,vh=null,ux=!1;function NE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ux||au==null||au!==H1(r)||(r=au,"selectionStart"in r&&mv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vh&&Hh(vh,r)||(vh=r,r=Y1(cx,"onSelect"),0<r.length&&(e=new hv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=au)))}function z0(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lu={animationend:z0("Animation","AnimationEnd"),animationiteration:z0("Animation","AnimationIteration"),animationstart:z0("Animation","AnimationStart"),transitionend:z0("Transition","TransitionEnd")},Gp={},NI={};qo&&(NI=document.createElement("div").style,"AnimationEvent"in window||(delete lu.animationend.animation,delete lu.animationiteration.animation,delete lu.animationstart.animation),"TransitionEvent"in window||delete lu.transitionend.transition);function um(t){if(Gp[t])return Gp[t];if(!lu[t])return t;var e=lu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in NI)return Gp[t]=e[n];return t}var RI=um("animationend"),kI=um("animationiteration"),PI=um("animationstart"),OI=um("transitionend"),DI=new Map,RE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vl(t,e){DI.set(t,e),kc(e,[t])}for(var $p=0;$p<RE.length;$p++){var qp=RE[$p],o5=qp.toLowerCase(),a5=qp[0].toUpperCase()+qp.slice(1);vl(o5,"on"+a5)}vl(RI,"onAnimationEnd");vl(kI,"onAnimationIteration");vl(PI,"onAnimationStart");vl("dblclick","onDoubleClick");vl("focusin","onFocus");vl("focusout","onBlur");vl(OI,"onTransitionEnd");qu("onMouseEnter",["mouseout","mouseover"]);qu("onMouseLeave",["mouseout","mouseover"]);qu("onPointerEnter",["pointerout","pointerover"]);qu("onPointerLeave",["pointerout","pointerover"]);kc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kc("onBeforeInput",["compositionend","keypress","textInput","paste"]);kc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l5=new Set("cancel close invalid load scroll toggle".split(" ").concat(ih));function kE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oO(r,e,void 0,t),t.currentTarget=null}function MI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var l=r.length-1;0<=l;l--){var u=r[l],f=u.instance,m=u.currentTarget;if(u=u.listener,f!==i&&s.isPropagationStopped())break e;kE(s,u,m),i=f}else for(l=0;l<r.length;l++){if(u=r[l],f=u.instance,m=u.currentTarget,u=u.listener,f!==i&&s.isPropagationStopped())break e;kE(s,u,m),i=f}}}if(G1)throw t=ix,G1=!1,ix=null,t}function fn(t,e){var n=e[mx];n===void 0&&(n=e[mx]=new Set);var r=t+"__bubble";n.has(r)||(LI(e,t,2,!1),n.add(r))}function Kp(t,e,n){var r=0;e&&(r|=4),LI(n,t,r,e)}var H0="_reactListening"+Math.random().toString(36).slice(2);function Wh(t){if(!t[H0]){t[H0]=!0,HT.forEach(function(n){n!=="selectionchange"&&(l5.has(n)||Kp(n,!1,t),Kp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[H0]||(e[H0]=!0,Kp("selectionchange",!1,e))}}function LI(t,e,n,r){switch(wI(e)){case 1:var s=EO;break;case 4:s=bO;break;default:s=uv}n=s.bind(null,e,n,t),s=void 0,!sx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var f=l.tag;if((f===3||f===4)&&(f=l.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;l=l.return}for(;u!==null;){if(l=$l(u),l===null)return;if(f=l.tag,f===5||f===6){r=i=l;continue e}u=u.parentNode}}r=r.return}iI(function(){var m=i,w=ov(n),v=[];e:{var E=DI.get(t);if(E!==void 0){var I=hv,P=t;switch(t){case"keypress":if(w1(n)===0)break e;case"keydown":case"keyup":I=jO;break;case"focusin":P="focus",I=zp;break;case"focusout":P="blur",I=zp;break;case"beforeblur":case"afterblur":I=zp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=wE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=TO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=UO;break;case RI:case kI:case PI:I=NO;break;case OI:I=HO;break;case"scroll":I=CO;break;case"wheel":I=GO;break;case"copy":case"cut":case"paste":I=kO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=_E}var C=(e&4)!==0,k=!C&&t==="scroll",N=C?E!==null?E+"Capture":null:E;C=[];for(var T=m,S;T!==null;){S=T;var V=S.stateNode;if(S.tag===5&&V!==null&&(S=V,N!==null&&(V=jh(T,N),V!=null&&C.push(Gh(T,V,S)))),k)break;T=T.return}0<C.length&&(E=new I(E,P,null,n,w),v.push({event:E,listeners:C}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",E&&n!==nx&&(P=n.relatedTarget||n.fromElement)&&($l(P)||P[Ko]))break e;if((I||E)&&(E=w.window===w?w:(E=w.ownerDocument)?E.defaultView||E.parentWindow:window,I?(P=n.relatedTarget||n.toElement,I=m,P=P?$l(P):null,P!==null&&(k=Pc(P),P!==k||P.tag!==5&&P.tag!==6)&&(P=null)):(I=null,P=m),I!==P)){if(C=wE,V="onMouseLeave",N="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(C=_E,V="onPointerLeave",N="onPointerEnter",T="pointer"),k=I==null?E:cu(I),S=P==null?E:cu(P),E=new C(V,T+"leave",I,n,w),E.target=k,E.relatedTarget=S,V=null,$l(w)===m&&(C=new C(N,T+"enter",P,n,w),C.target=S,C.relatedTarget=k,V=C),k=V,I&&P)t:{for(C=I,N=P,T=0,S=C;S;S=Kc(S))T++;for(S=0,V=N;V;V=Kc(V))S++;for(;0<T-S;)C=Kc(C),T--;for(;0<S-T;)N=Kc(N),S--;for(;T--;){if(C===N||N!==null&&C===N.alternate)break t;C=Kc(C),N=Kc(N)}C=null}else C=null;I!==null&&PE(v,E,I,C,!1),P!==null&&k!==null&&PE(v,k,P,C,!0)}}e:{if(E=m?cu(m):window,I=E.nodeName&&E.nodeName.toLowerCase(),I==="select"||I==="input"&&E.type==="file")var $=ZO;else if(CE(E))if(AI)$=n5;else{$=e5;var Y=JO}else(I=E.nodeName)&&I.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&($=t5);if($&&($=$(t,m))){CI(v,$,n,w);break e}Y&&Y(t,E,m),t==="focusout"&&(Y=E._wrapperState)&&Y.controlled&&E.type==="number"&&Qy(E,"number",E.value)}switch(Y=m?cu(m):window,t){case"focusin":(CE(Y)||Y.contentEditable==="true")&&(au=Y,cx=m,vh=null);break;case"focusout":vh=cx=au=null;break;case"mousedown":ux=!0;break;case"contextmenu":case"mouseup":case"dragend":ux=!1,NE(v,n,w);break;case"selectionchange":if(i5)break;case"keydown":case"keyup":NE(v,n,w)}var M;if(gv)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else ou?EI(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(_I&&n.locale!=="ko"&&(ou||j!=="onCompositionStart"?j==="onCompositionEnd"&&ou&&(M=vI()):(Fa=w,dv="value"in Fa?Fa.value:Fa.textContent,ou=!0)),Y=Y1(m,j),0<Y.length&&(j=new vE(j,t,null,n,w),v.push({event:j,listeners:Y}),M?j.data=M:(M=bI(n),M!==null&&(j.data=M)))),(M=qO?KO(t,n):XO(t,n))&&(m=Y1(m,"onBeforeInput"),0<m.length&&(w=new vE("onBeforeInput","beforeinput",null,n,w),v.push({event:w,listeners:m}),w.data=M))}MI(v,e)})}function Gh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Y1(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=jh(t,n),i!=null&&r.unshift(Gh(t,i,s)),i=jh(t,e),i!=null&&r.push(Gh(t,i,s))),t=t.return}return r}function Kc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function PE(t,e,n,r,s){for(var i=e._reactName,l=[];n!==null&&n!==r;){var u=n,f=u.alternate,m=u.stateNode;if(f!==null&&f===r)break;u.tag===5&&m!==null&&(u=m,s?(f=jh(n,i),f!=null&&l.unshift(Gh(n,f,u))):s||(f=jh(n,i),f!=null&&l.push(Gh(n,f,u)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var c5=/\r\n?/g,u5=/\u0000|\uFFFD/g;function OE(t){return(typeof t=="string"?t:""+t).replace(c5,`
`).replace(u5,"")}function W0(t,e,n){if(e=OE(e),OE(t)!==e&&n)throw Error(Ee(425))}function Q1(){}var dx=null,hx=null;function fx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gx=typeof setTimeout=="function"?setTimeout:void 0,d5=typeof clearTimeout=="function"?clearTimeout:void 0,DE=typeof Promise=="function"?Promise:void 0,h5=typeof queueMicrotask=="function"?queueMicrotask:typeof DE<"u"?function(t){return DE.resolve(null).then(t).catch(f5)}:gx;function f5(t){setTimeout(function(){throw t})}function Yp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Uh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Uh(e)}function Wa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ME(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ed=Math.random().toString(36).slice(2),Zi="__reactFiber$"+Ed,$h="__reactProps$"+Ed,Ko="__reactContainer$"+Ed,mx="__reactEvents$"+Ed,g5="__reactListeners$"+Ed,m5="__reactHandles$"+Ed;function $l(t){var e=t[Zi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ko]||n[Zi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ME(t);t!==null;){if(n=t[Zi])return n;t=ME(t)}return e}t=n,n=t.parentNode}return null}function qf(t){return t=t[Zi]||t[Ko],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function dm(t){return t[$h]||null}var px=[],uu=-1;function _l(t){return{current:t}}function pn(t){0>uu||(t.current=px[uu],px[uu]=null,uu--)}function rn(t,e){uu++,px[uu]=t.current,t.current=e}var tl={},Vr=_l(tl),xs=_l(!1),fc=tl;function Ku(t,e){var n=t.type.contextTypes;if(!n)return tl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ws(t){return t=t.childContextTypes,t!=null}function Z1(){pn(xs),pn(Vr)}function LE(t,e,n){if(Vr.current!==tl)throw Error(Ee(168));rn(Vr,e),rn(xs,n)}function FI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ee(108,JP(t)||"Unknown",s));return Rn({},n,r)}function J1(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tl,fc=Vr.current,rn(Vr,t),rn(xs,xs.current),!0}function FE(t,e,n){var r=t.stateNode;if(!r)throw Error(Ee(169));n?(t=FI(t,e,fc),r.__reactInternalMemoizedMergedChildContext=t,pn(xs),pn(Vr),rn(Vr,t)):pn(xs),rn(xs,n)}var Fo=null,hm=!1,Qp=!1;function jI(t){Fo===null?Fo=[t]:Fo.push(t)}function p5(t){hm=!0,jI(t)}function El(){if(!Qp&&Fo!==null){Qp=!0;var t=0,e=$t;try{var n=Fo;for($t=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fo=null,hm=!1}catch(s){throw Fo!==null&&(Fo=Fo.slice(t+1)),cI(av,El),s}finally{$t=e,Qp=!1}}return null}var du=[],hu=0,eg=null,tg=0,ei=[],ti=0,gc=null,Vo=1,Uo="";function Hl(t,e){du[hu++]=tg,du[hu++]=eg,eg=t,tg=e}function BI(t,e,n){ei[ti++]=Vo,ei[ti++]=Uo,ei[ti++]=gc,gc=t;var r=Vo;t=Uo;var s=32-Ai(r)-1;r&=~(1<<s),n+=1;var i=32-Ai(e)+s;if(30<i){var l=s-s%5;i=(r&(1<<l)-1).toString(32),r>>=l,s-=l,Vo=1<<32-Ai(e)+s|n<<s|r,Uo=i+t}else Vo=1<<i|n<<s|r,Uo=t}function pv(t){t.return!==null&&(Hl(t,1),BI(t,1,0))}function yv(t){for(;t===eg;)eg=du[--hu],du[hu]=null,tg=du[--hu],du[hu]=null;for(;t===gc;)gc=ei[--ti],ei[ti]=null,Uo=ei[--ti],ei[ti]=null,Vo=ei[--ti],ei[ti]=null}var Fs=null,Ds=null,vn=!1,wi=null;function VI(t,e){var n=ni(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function jE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Fs=t,Ds=Wa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Fs=t,Ds=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gc!==null?{id:Vo,overflow:Uo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ni(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Fs=t,Ds=null,!0):!1;default:return!1}}function yx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xx(t){if(vn){var e=Ds;if(e){var n=e;if(!jE(t,e)){if(yx(t))throw Error(Ee(418));e=Wa(n.nextSibling);var r=Fs;e&&jE(t,e)?VI(r,n):(t.flags=t.flags&-4097|2,vn=!1,Fs=t)}}else{if(yx(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,vn=!1,Fs=t}}}function BE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Fs=t}function G0(t){if(t!==Fs)return!1;if(!vn)return BE(t),vn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fx(t.type,t.memoizedProps)),e&&(e=Ds)){if(yx(t))throw UI(),Error(Ee(418));for(;e;)VI(t,e),e=Wa(e.nextSibling)}if(BE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ds=Wa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ds=null}}else Ds=Fs?Wa(t.stateNode.nextSibling):null;return!0}function UI(){for(var t=Ds;t;)t=Wa(t.nextSibling)}function Xu(){Ds=Fs=null,vn=!1}function xv(t){wi===null?wi=[t]:wi.push(t)}var y5=sa.ReactCurrentBatchConfig;function Kd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var u=s.refs;l===null?delete u[i]:u[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function $0(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function VE(t){var e=t._init;return e(t._payload)}function zI(t){function e(N,T){if(t){var S=N.deletions;S===null?(N.deletions=[T],N.flags|=16):S.push(T)}}function n(N,T){if(!t)return null;for(;T!==null;)e(N,T),T=T.sibling;return null}function r(N,T){for(N=new Map;T!==null;)T.key!==null?N.set(T.key,T):N.set(T.index,T),T=T.sibling;return N}function s(N,T){return N=Ka(N,T),N.index=0,N.sibling=null,N}function i(N,T,S){return N.index=S,t?(S=N.alternate,S!==null?(S=S.index,S<T?(N.flags|=2,T):S):(N.flags|=2,T)):(N.flags|=1048576,T)}function l(N){return t&&N.alternate===null&&(N.flags|=2),N}function u(N,T,S,V){return T===null||T.tag!==6?(T=sy(S,N.mode,V),T.return=N,T):(T=s(T,S),T.return=N,T)}function f(N,T,S,V){var $=S.type;return $===iu?w(N,T,S.props.children,V,S.key):T!==null&&(T.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===_a&&VE($)===T.type)?(V=s(T,S.props),V.ref=Kd(N,T,S),V.return=N,V):(V=T1(S.type,S.key,S.props,null,N.mode,V),V.ref=Kd(N,T,S),V.return=N,V)}function m(N,T,S,V){return T===null||T.tag!==4||T.stateNode.containerInfo!==S.containerInfo||T.stateNode.implementation!==S.implementation?(T=iy(S,N.mode,V),T.return=N,T):(T=s(T,S.children||[]),T.return=N,T)}function w(N,T,S,V,$){return T===null||T.tag!==7?(T=uc(S,N.mode,V,$),T.return=N,T):(T=s(T,S),T.return=N,T)}function v(N,T,S){if(typeof T=="string"&&T!==""||typeof T=="number")return T=sy(""+T,N.mode,S),T.return=N,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case M0:return S=T1(T.type,T.key,T.props,null,N.mode,S),S.ref=Kd(N,null,T),S.return=N,S;case su:return T=iy(T,N.mode,S),T.return=N,T;case _a:var V=T._init;return v(N,V(T._payload),S)}if(rh(T)||Hd(T))return T=uc(T,N.mode,S,null),T.return=N,T;$0(N,T)}return null}function E(N,T,S,V){var $=T!==null?T.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return $!==null?null:u(N,T,""+S,V);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case M0:return S.key===$?f(N,T,S,V):null;case su:return S.key===$?m(N,T,S,V):null;case _a:return $=S._init,E(N,T,$(S._payload),V)}if(rh(S)||Hd(S))return $!==null?null:w(N,T,S,V,null);$0(N,S)}return null}function I(N,T,S,V,$){if(typeof V=="string"&&V!==""||typeof V=="number")return N=N.get(S)||null,u(T,N,""+V,$);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case M0:return N=N.get(V.key===null?S:V.key)||null,f(T,N,V,$);case su:return N=N.get(V.key===null?S:V.key)||null,m(T,N,V,$);case _a:var Y=V._init;return I(N,T,S,Y(V._payload),$)}if(rh(V)||Hd(V))return N=N.get(S)||null,w(T,N,V,$,null);$0(T,V)}return null}function P(N,T,S,V){for(var $=null,Y=null,M=T,j=T=0,L=null;M!==null&&j<S.length;j++){M.index>j?(L=M,M=null):L=M.sibling;var G=E(N,M,S[j],V);if(G===null){M===null&&(M=L);break}t&&M&&G.alternate===null&&e(N,M),T=i(G,T,j),Y===null?$=G:Y.sibling=G,Y=G,M=L}if(j===S.length)return n(N,M),vn&&Hl(N,j),$;if(M===null){for(;j<S.length;j++)M=v(N,S[j],V),M!==null&&(T=i(M,T,j),Y===null?$=M:Y.sibling=M,Y=M);return vn&&Hl(N,j),$}for(M=r(N,M);j<S.length;j++)L=I(M,N,j,S[j],V),L!==null&&(t&&L.alternate!==null&&M.delete(L.key===null?j:L.key),T=i(L,T,j),Y===null?$=L:Y.sibling=L,Y=L);return t&&M.forEach(function(X){return e(N,X)}),vn&&Hl(N,j),$}function C(N,T,S,V){var $=Hd(S);if(typeof $!="function")throw Error(Ee(150));if(S=$.call(S),S==null)throw Error(Ee(151));for(var Y=$=null,M=T,j=T=0,L=null,G=S.next();M!==null&&!G.done;j++,G=S.next()){M.index>j?(L=M,M=null):L=M.sibling;var X=E(N,M,G.value,V);if(X===null){M===null&&(M=L);break}t&&M&&X.alternate===null&&e(N,M),T=i(X,T,j),Y===null?$=X:Y.sibling=X,Y=X,M=L}if(G.done)return n(N,M),vn&&Hl(N,j),$;if(M===null){for(;!G.done;j++,G=S.next())G=v(N,G.value,V),G!==null&&(T=i(G,T,j),Y===null?$=G:Y.sibling=G,Y=G);return vn&&Hl(N,j),$}for(M=r(N,M);!G.done;j++,G=S.next())G=I(M,N,j,G.value,V),G!==null&&(t&&G.alternate!==null&&M.delete(G.key===null?j:G.key),T=i(G,T,j),Y===null?$=G:Y.sibling=G,Y=G);return t&&M.forEach(function(H){return e(N,H)}),vn&&Hl(N,j),$}function k(N,T,S,V){if(typeof S=="object"&&S!==null&&S.type===iu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case M0:e:{for(var $=S.key,Y=T;Y!==null;){if(Y.key===$){if($=S.type,$===iu){if(Y.tag===7){n(N,Y.sibling),T=s(Y,S.props.children),T.return=N,N=T;break e}}else if(Y.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===_a&&VE($)===Y.type){n(N,Y.sibling),T=s(Y,S.props),T.ref=Kd(N,Y,S),T.return=N,N=T;break e}n(N,Y);break}else e(N,Y);Y=Y.sibling}S.type===iu?(T=uc(S.props.children,N.mode,V,S.key),T.return=N,N=T):(V=T1(S.type,S.key,S.props,null,N.mode,V),V.ref=Kd(N,T,S),V.return=N,N=V)}return l(N);case su:e:{for(Y=S.key;T!==null;){if(T.key===Y)if(T.tag===4&&T.stateNode.containerInfo===S.containerInfo&&T.stateNode.implementation===S.implementation){n(N,T.sibling),T=s(T,S.children||[]),T.return=N,N=T;break e}else{n(N,T);break}else e(N,T);T=T.sibling}T=iy(S,N.mode,V),T.return=N,N=T}return l(N);case _a:return Y=S._init,k(N,T,Y(S._payload),V)}if(rh(S))return P(N,T,S,V);if(Hd(S))return C(N,T,S,V);$0(N,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,T!==null&&T.tag===6?(n(N,T.sibling),T=s(T,S),T.return=N,N=T):(n(N,T),T=sy(S,N.mode,V),T.return=N,N=T),l(N)):n(N,T)}return k}var Yu=zI(!0),HI=zI(!1),ng=_l(null),rg=null,fu=null,wv=null;function vv(){wv=fu=rg=null}function _v(t){var e=ng.current;pn(ng),t._currentValue=e}function wx(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bu(t,e){rg=t,wv=fu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ys=!0),t.firstContext=null)}function oi(t){var e=t._currentValue;if(wv!==t)if(t={context:t,memoizedValue:e,next:null},fu===null){if(rg===null)throw Error(Ee(308));fu=t,rg.dependencies={lanes:0,firstContext:t}}else fu=fu.next=t;return e}var ql=null;function Ev(t){ql===null?ql=[t]:ql.push(t)}function WI(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ev(e)):(n.next=s.next,s.next=n),e.interleaved=n,Xo(t,r)}function Xo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ea=!1;function bv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Go(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ga(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Mt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Xo(t,n)}return s=r.interleaved,s===null?(e.next=e,Ev(r)):(e.next=s.next,s.next=e),r.interleaved=e,Xo(t,n)}function v1(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lv(t,n)}}function UE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sg(t,e,n,r){var s=t.updateQueue;Ea=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var f=u,m=f.next;f.next=null,l===null?i=m:l.next=m,l=f;var w=t.alternate;w!==null&&(w=w.updateQueue,u=w.lastBaseUpdate,u!==l&&(u===null?w.firstBaseUpdate=m:u.next=m,w.lastBaseUpdate=f))}if(i!==null){var v=s.baseState;l=0,w=m=f=null,u=i;do{var E=u.lane,I=u.eventTime;if((r&E)===E){w!==null&&(w=w.next={eventTime:I,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var P=t,C=u;switch(E=e,I=n,C.tag){case 1:if(P=C.payload,typeof P=="function"){v=P.call(I,v,E);break e}v=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=C.payload,E=typeof P=="function"?P.call(I,v,E):P,E==null)break e;v=Rn({},v,E);break e;case 2:Ea=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,E=s.effects,E===null?s.effects=[u]:E.push(u))}else I={eventTime:I,lane:E,tag:u.tag,payload:u.payload,callback:u.callback,next:null},w===null?(m=w=I,f=v):w=w.next=I,l|=E;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;E=u,u=E.next,E.next=null,s.lastBaseUpdate=E,s.shared.pending=null}}while(!0);if(w===null&&(f=v),s.baseState=f,s.firstBaseUpdate=m,s.lastBaseUpdate=w,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);pc|=l,t.lanes=l,t.memoizedState=v}}function zE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ee(191,s));s.call(r)}}}var Kf={},so=_l(Kf),qh=_l(Kf),Kh=_l(Kf);function Kl(t){if(t===Kf)throw Error(Ee(174));return t}function Cv(t,e){switch(rn(Kh,e),rn(qh,t),rn(so,Kf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Jy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Jy(e,t)}pn(so),rn(so,e)}function Qu(){pn(so),pn(qh),pn(Kh)}function $I(t){Kl(Kh.current);var e=Kl(so.current),n=Jy(e,t.type);e!==n&&(rn(qh,t),rn(so,n))}function Av(t){qh.current===t&&(pn(so),pn(qh))}var Sn=_l(0);function ig(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zp=[];function Tv(){for(var t=0;t<Zp.length;t++)Zp[t]._workInProgressVersionPrimary=null;Zp.length=0}var _1=sa.ReactCurrentDispatcher,Jp=sa.ReactCurrentBatchConfig,mc=0,Nn=null,or=null,gr=null,og=!1,_h=!1,Xh=0,x5=0;function Pr(){throw Error(Ee(321))}function Iv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ri(t[n],e[n]))return!1;return!0}function Sv(t,e,n,r,s,i){if(mc=i,Nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_1.current=t===null||t.memoizedState===null?E5:b5,t=n(r,s),_h){i=0;do{if(_h=!1,Xh=0,25<=i)throw Error(Ee(301));i+=1,gr=or=null,e.updateQueue=null,_1.current=C5,t=n(r,s)}while(_h)}if(_1.current=ag,e=or!==null&&or.next!==null,mc=0,gr=or=Nn=null,og=!1,e)throw Error(Ee(300));return t}function Nv(){var t=Xh!==0;return Xh=0,t}function $i(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gr===null?Nn.memoizedState=gr=t:gr=gr.next=t,gr}function ai(){if(or===null){var t=Nn.alternate;t=t!==null?t.memoizedState:null}else t=or.next;var e=gr===null?Nn.memoizedState:gr.next;if(e!==null)gr=e,or=t;else{if(t===null)throw Error(Ee(310));or=t,t={memoizedState:or.memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},gr===null?Nn.memoizedState=gr=t:gr=gr.next=t}return gr}function Yh(t,e){return typeof e=="function"?e(t):e}function ey(t){var e=ai(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=or,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=l=null,f=null,m=i;do{var w=m.lane;if((mc&w)===w)f!==null&&(f=f.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:t(r,m.action);else{var v={lane:w,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};f===null?(u=f=v,l=r):f=f.next=v,Nn.lanes|=w,pc|=w}m=m.next}while(m!==null&&m!==i);f===null?l=r:f.next=u,Ri(r,e.memoizedState)||(ys=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=f,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Nn.lanes|=i,pc|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ty(t){var e=ai(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=t(i,l.action),l=l.next;while(l!==s);Ri(i,e.memoizedState)||(ys=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function qI(){}function KI(t,e){var n=Nn,r=ai(),s=e(),i=!Ri(r.memoizedState,s);if(i&&(r.memoizedState=s,ys=!0),r=r.queue,Rv(QI.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||gr!==null&&gr.memoizedState.tag&1){if(n.flags|=2048,Qh(9,YI.bind(null,n,r,s,e),void 0,null),mr===null)throw Error(Ee(349));mc&30||XI(n,e,s)}return s}function XI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Nn.updateQueue,e===null?(e={lastEffect:null,stores:null},Nn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function YI(t,e,n,r){e.value=n,e.getSnapshot=r,ZI(e)&&JI(t)}function QI(t,e,n){return n(function(){ZI(e)&&JI(t)})}function ZI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ri(t,n)}catch{return!0}}function JI(t){var e=Xo(t,1);e!==null&&Ti(e,t,1,-1)}function HE(t){var e=$i();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yh,lastRenderedState:t},e.queue=t,t=t.dispatch=_5.bind(null,Nn,t),[e.memoizedState,t]}function Qh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Nn.updateQueue,e===null?(e={lastEffect:null,stores:null},Nn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eS(){return ai().memoizedState}function E1(t,e,n,r){var s=$i();Nn.flags|=t,s.memoizedState=Qh(1|e,n,void 0,r===void 0?null:r)}function fm(t,e,n,r){var s=ai();r=r===void 0?null:r;var i=void 0;if(or!==null){var l=or.memoizedState;if(i=l.destroy,r!==null&&Iv(r,l.deps)){s.memoizedState=Qh(e,n,i,r);return}}Nn.flags|=t,s.memoizedState=Qh(1|e,n,i,r)}function WE(t,e){return E1(8390656,8,t,e)}function Rv(t,e){return fm(2048,8,t,e)}function tS(t,e){return fm(4,2,t,e)}function nS(t,e){return fm(4,4,t,e)}function rS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sS(t,e,n){return n=n!=null?n.concat([t]):null,fm(4,4,rS.bind(null,e,t),n)}function kv(){}function iS(t,e){var n=ai();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Iv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function oS(t,e){var n=ai();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Iv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aS(t,e,n){return mc&21?(Ri(n,e)||(n=hI(),Nn.lanes|=n,pc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ys=!0),t.memoizedState=n)}function w5(t,e){var n=$t;$t=n!==0&&4>n?n:4,t(!0);var r=Jp.transition;Jp.transition={};try{t(!1),e()}finally{$t=n,Jp.transition=r}}function lS(){return ai().memoizedState}function v5(t,e,n){var r=qa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cS(t))uS(e,n);else if(n=WI(t,e,n,r),n!==null){var s=ts();Ti(n,t,r,s),dS(n,e,r)}}function _5(t,e,n){var r=qa(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cS(t))uS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,u=i(l,n);if(s.hasEagerState=!0,s.eagerState=u,Ri(u,l)){var f=e.interleaved;f===null?(s.next=s,Ev(e)):(s.next=f.next,f.next=s),e.interleaved=s;return}}catch{}finally{}n=WI(t,e,s,r),n!==null&&(s=ts(),Ti(n,t,r,s),dS(n,e,r))}}function cS(t){var e=t.alternate;return t===Nn||e!==null&&e===Nn}function uS(t,e){_h=og=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lv(t,n)}}var ag={readContext:oi,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},E5={readContext:oi,useCallback:function(t,e){return $i().memoizedState=[t,e===void 0?null:e],t},useContext:oi,useEffect:WE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,E1(4194308,4,rS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return E1(4194308,4,t,e)},useInsertionEffect:function(t,e){return E1(4,2,t,e)},useMemo:function(t,e){var n=$i();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$i();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=v5.bind(null,Nn,t),[r.memoizedState,t]},useRef:function(t){var e=$i();return t={current:t},e.memoizedState=t},useState:HE,useDebugValue:kv,useDeferredValue:function(t){return $i().memoizedState=t},useTransition:function(){var t=HE(!1),e=t[0];return t=w5.bind(null,t[1]),$i().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Nn,s=$i();if(vn){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),mr===null)throw Error(Ee(349));mc&30||XI(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,WE(QI.bind(null,r,i,t),[t]),r.flags|=2048,Qh(9,YI.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=$i(),e=mr.identifierPrefix;if(vn){var n=Uo,r=Vo;n=(r&~(1<<32-Ai(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=x5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},b5={readContext:oi,useCallback:iS,useContext:oi,useEffect:Rv,useImperativeHandle:sS,useInsertionEffect:tS,useLayoutEffect:nS,useMemo:oS,useReducer:ey,useRef:eS,useState:function(){return ey(Yh)},useDebugValue:kv,useDeferredValue:function(t){var e=ai();return aS(e,or.memoizedState,t)},useTransition:function(){var t=ey(Yh)[0],e=ai().memoizedState;return[t,e]},useMutableSource:qI,useSyncExternalStore:KI,useId:lS,unstable_isNewReconciler:!1},C5={readContext:oi,useCallback:iS,useContext:oi,useEffect:Rv,useImperativeHandle:sS,useInsertionEffect:tS,useLayoutEffect:nS,useMemo:oS,useReducer:ty,useRef:eS,useState:function(){return ty(Yh)},useDebugValue:kv,useDeferredValue:function(t){var e=ai();return or===null?e.memoizedState=t:aS(e,or.memoizedState,t)},useTransition:function(){var t=ty(Yh)[0],e=ai().memoizedState;return[t,e]},useMutableSource:qI,useSyncExternalStore:KI,useId:lS,unstable_isNewReconciler:!1};function pi(t,e){if(t&&t.defaultProps){e=Rn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vx(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Rn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gm={isMounted:function(t){return(t=t._reactInternals)?Pc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ts(),s=qa(t),i=Go(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ga(t,i,s),e!==null&&(Ti(e,t,s,r),v1(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ts(),s=qa(t),i=Go(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ga(t,i,s),e!==null&&(Ti(e,t,s,r),v1(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ts(),r=qa(t),s=Go(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ga(t,s,r),e!==null&&(Ti(e,t,r,n),v1(e,t,r))}};function GE(t,e,n,r,s,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,l):e.prototype&&e.prototype.isPureReactComponent?!Hh(n,r)||!Hh(s,i):!0}function hS(t,e,n){var r=!1,s=tl,i=e.contextType;return typeof i=="object"&&i!==null?i=oi(i):(s=ws(e)?fc:Vr.current,r=e.contextTypes,i=(r=r!=null)?Ku(t,s):tl),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $E(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gm.enqueueReplaceState(e,e.state,null)}function _x(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},bv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=oi(i):(i=ws(e)?fc:Vr.current,s.context=Ku(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(vx(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gm.enqueueReplaceState(s,s.state,null),sg(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zu(t,e){try{var n="",r=e;do n+=ZP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ny(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ex(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var A5=typeof WeakMap=="function"?WeakMap:Map;function fS(t,e,n){n=Go(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cg||(cg=!0,Px=r),Ex(t,e)},n}function gS(t,e,n){n=Go(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ex(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ex(t,e),typeof r!="function"&&($a===null?$a=new Set([this]):$a.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function qE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new A5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=B5.bind(null,t,e,n),e.then(t,t))}function KE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function XE(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Go(-1,1),e.tag=2,Ga(n,e,1))),n.lanes|=1),t)}var T5=sa.ReactCurrentOwner,ys=!1;function Qr(t,e,n,r){e.child=t===null?HI(e,null,n,r):Yu(e,t.child,n,r)}function YE(t,e,n,r,s){n=n.render;var i=e.ref;return bu(e,s),r=Sv(t,e,n,r,i,s),n=Nv(),t!==null&&!ys?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yo(t,e,s)):(vn&&n&&pv(e),e.flags|=1,Qr(t,e,r,s),e.child)}function QE(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Bv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,mS(t,e,i,r,s)):(t=T1(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Hh,n(l,r)&&t.ref===e.ref)return Yo(t,e,s)}return e.flags|=1,t=Ka(i,r),t.ref=e.ref,t.return=e,e.child=t}function mS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Hh(i,r)&&t.ref===e.ref)if(ys=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ys=!0);else return e.lanes=t.lanes,Yo(t,e,s)}return bx(t,e,n,r,s)}function pS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(mu,ks),ks|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rn(mu,ks),ks|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,rn(mu,ks),ks|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,rn(mu,ks),ks|=r;return Qr(t,e,s,n),e.child}function yS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bx(t,e,n,r,s){var i=ws(n)?fc:Vr.current;return i=Ku(e,i),bu(e,s),n=Sv(t,e,n,r,i,s),r=Nv(),t!==null&&!ys?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yo(t,e,s)):(vn&&r&&pv(e),e.flags|=1,Qr(t,e,n,s),e.child)}function ZE(t,e,n,r,s){if(ws(n)){var i=!0;J1(e)}else i=!1;if(bu(e,s),e.stateNode===null)b1(t,e),hS(e,n,r),_x(e,n,r,s),r=!0;else if(t===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var f=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=oi(m):(m=ws(n)?fc:Vr.current,m=Ku(e,m));var w=n.getDerivedStateFromProps,v=typeof w=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||f!==m)&&$E(e,l,r,m),Ea=!1;var E=e.memoizedState;l.state=E,sg(e,r,l,s),f=e.memoizedState,u!==r||E!==f||xs.current||Ea?(typeof w=="function"&&(vx(e,n,w,r),f=e.memoizedState),(u=Ea||GE(e,n,u,r,E,f,m))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=f),l.props=r,l.state=f,l.context=m,r=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,GI(t,e),u=e.memoizedProps,m=e.type===e.elementType?u:pi(e.type,u),l.props=m,v=e.pendingProps,E=l.context,f=n.contextType,typeof f=="object"&&f!==null?f=oi(f):(f=ws(n)?fc:Vr.current,f=Ku(e,f));var I=n.getDerivedStateFromProps;(w=typeof I=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==v||E!==f)&&$E(e,l,r,f),Ea=!1,E=e.memoizedState,l.state=E,sg(e,r,l,s);var P=e.memoizedState;u!==v||E!==P||xs.current||Ea?(typeof I=="function"&&(vx(e,n,I,r),P=e.memoizedState),(m=Ea||GE(e,n,m,r,E,P,f)||!1)?(w||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,P,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,P,f)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),l.props=r,l.state=P,l.context=f,r=m):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),r=!1)}return Cx(t,e,n,r,i,s)}function Cx(t,e,n,r,s,i){yS(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return s&&FE(e,n,!1),Yo(t,e,i);r=e.stateNode,T5.current=e;var u=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=Yu(e,t.child,null,i),e.child=Yu(e,null,u,i)):Qr(t,e,u,i),e.memoizedState=r.state,s&&FE(e,n,!0),e.child}function xS(t){var e=t.stateNode;e.pendingContext?LE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&LE(t,e.context,!1),Cv(t,e.containerInfo)}function JE(t,e,n,r,s){return Xu(),xv(s),e.flags|=256,Qr(t,e,n,r),e.child}var Ax={dehydrated:null,treeContext:null,retryLane:0};function Tx(t){return{baseLanes:t,cachePool:null,transitions:null}}function wS(t,e,n){var r=e.pendingProps,s=Sn.current,i=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),rn(Sn,s&1),t===null)return xx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,i?(r=e.mode,i=e.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=ym(l,r,0,null),t=uc(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Tx(n),e.memoizedState=Ax,t):Pv(e,l));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return I5(t,e,l,r,u,s,n);if(i){i=r.fallback,l=e.mode,s=t.child,u=s.sibling;var f={mode:"hidden",children:r.children};return!(l&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=f,e.deletions=null):(r=Ka(s,f),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Ka(u,i):(i=uc(i,l,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,l=t.child.memoizedState,l=l===null?Tx(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~n,e.memoizedState=Ax,r}return i=t.child,t=i.sibling,r=Ka(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pv(t,e){return e=ym({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function q0(t,e,n,r){return r!==null&&xv(r),Yu(e,t.child,null,n),t=Pv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function I5(t,e,n,r,s,i,l){if(n)return e.flags&256?(e.flags&=-257,r=ny(Error(Ee(422))),q0(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ym({mode:"visible",children:r.children},s,0,null),i=uc(i,s,l,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Yu(e,t.child,null,l),e.child.memoizedState=Tx(l),e.memoizedState=Ax,i);if(!(e.mode&1))return q0(t,e,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(Ee(419)),r=ny(i,r,void 0),q0(t,e,l,r)}if(u=(l&t.childLanes)!==0,ys||u){if(r=mr,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xo(t,s),Ti(r,t,s,-1))}return jv(),r=ny(Error(Ee(421))),q0(t,e,l,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=V5.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ds=Wa(s.nextSibling),Fs=e,vn=!0,wi=null,t!==null&&(ei[ti++]=Vo,ei[ti++]=Uo,ei[ti++]=gc,Vo=t.id,Uo=t.overflow,gc=e),e=Pv(e,r.children),e.flags|=4096,e)}function eb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wx(t.return,e,n)}function ry(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function vS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Qr(t,e,r.children,n),r=Sn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eb(t,n,e);else if(t.tag===19)eb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rn(Sn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ig(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ry(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ig(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ry(e,!0,n,null,i);break;case"together":ry(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function b1(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=Ka(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ka(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function S5(t,e,n){switch(e.tag){case 3:xS(e),Xu();break;case 5:$I(e);break;case 1:ws(e.type)&&J1(e);break;case 4:Cv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;rn(ng,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rn(Sn,Sn.current&1),e.flags|=128,null):n&e.child.childLanes?wS(t,e,n):(rn(Sn,Sn.current&1),t=Yo(t,e,n),t!==null?t.sibling:null);rn(Sn,Sn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rn(Sn,Sn.current),r)break;return null;case 22:case 23:return e.lanes=0,pS(t,e,n)}return Yo(t,e,n)}var _S,Ix,ES,bS;_S=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ix=function(){};ES=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Kl(so.current);var i=null;switch(n){case"input":s=Xy(t,s),r=Xy(t,r),i=[];break;case"select":s=Rn({},s,{value:void 0}),r=Rn({},r,{value:void 0}),i=[];break;case"textarea":s=Zy(t,s),r=Zy(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Q1)}ex(n,r);var l;n=null;for(m in s)if(!r.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var u=s[m];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Lh.hasOwnProperty(m)?i||(i=[]):(i=i||[]).push(m,null));for(m in r){var f=r[m];if(u=s!=null?s[m]:void 0,r.hasOwnProperty(m)&&f!==u&&(f!=null||u!=null))if(m==="style")if(u){for(l in u)!u.hasOwnProperty(l)||f&&f.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in f)f.hasOwnProperty(l)&&u[l]!==f[l]&&(n||(n={}),n[l]=f[l])}else n||(i||(i=[]),i.push(m,n)),n=f;else m==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,u=u?u.__html:void 0,f!=null&&u!==f&&(i=i||[]).push(m,f)):m==="children"?typeof f!="string"&&typeof f!="number"||(i=i||[]).push(m,""+f):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Lh.hasOwnProperty(m)?(f!=null&&m==="onScroll"&&fn("scroll",t),i||u===f||(i=[])):(i=i||[]).push(m,f))}n&&(i=i||[]).push("style",n);var m=i;(e.updateQueue=m)&&(e.flags|=4)}};bS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xd(t,e){if(!vn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Or(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function N5(t,e,n){var r=e.pendingProps;switch(yv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Or(e),null;case 1:return ws(e.type)&&Z1(),Or(e),null;case 3:return r=e.stateNode,Qu(),pn(xs),pn(Vr),Tv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(G0(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wi!==null&&(Mx(wi),wi=null))),Ix(t,e),Or(e),null;case 5:Av(e);var s=Kl(Kh.current);if(n=e.type,t!==null&&e.stateNode!=null)ES(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ee(166));return Or(e),null}if(t=Kl(so.current),G0(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Zi]=e,r[$h]=i,t=(e.mode&1)!==0,n){case"dialog":fn("cancel",r),fn("close",r);break;case"iframe":case"object":case"embed":fn("load",r);break;case"video":case"audio":for(s=0;s<ih.length;s++)fn(ih[s],r);break;case"source":fn("error",r);break;case"img":case"image":case"link":fn("error",r),fn("load",r);break;case"details":fn("toggle",r);break;case"input":cE(r,i),fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},fn("invalid",r);break;case"textarea":dE(r,i),fn("invalid",r)}ex(n,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&W0(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&W0(r.textContent,u,t),s=["children",""+u]):Lh.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&fn("scroll",r)}switch(n){case"input":L0(r),uE(r,i,!0);break;case"textarea":L0(r),hE(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Q1)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=QT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Zi]=e,t[$h]=r,_S(t,e,!1,!1),e.stateNode=t;e:{switch(l=tx(n,r),n){case"dialog":fn("cancel",t),fn("close",t),s=r;break;case"iframe":case"object":case"embed":fn("load",t),s=r;break;case"video":case"audio":for(s=0;s<ih.length;s++)fn(ih[s],t);s=r;break;case"source":fn("error",t),s=r;break;case"img":case"image":case"link":fn("error",t),fn("load",t),s=r;break;case"details":fn("toggle",t),s=r;break;case"input":cE(t,r),s=Xy(t,r),fn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Rn({},r,{value:void 0}),fn("invalid",t);break;case"textarea":dE(t,r),s=Zy(t,r),fn("invalid",t);break;default:s=r}ex(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var f=u[i];i==="style"?eI(t,f):i==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&ZT(t,f)):i==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&Fh(t,f):typeof f=="number"&&Fh(t,""+f):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lh.hasOwnProperty(i)?f!=null&&i==="onScroll"&&fn("scroll",t):f!=null&&nv(t,i,f,l))}switch(n){case"input":L0(t),uE(t,r,!1);break;case"textarea":L0(t),hE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+el(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?wu(t,!!r.multiple,i,!1):r.defaultValue!=null&&wu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Q1)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Or(e),null;case 6:if(t&&e.stateNode!=null)bS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=Kl(Kh.current),Kl(so.current),G0(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zi]=e,(i=r.nodeValue!==n)&&(t=Fs,t!==null))switch(t.tag){case 3:W0(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&W0(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zi]=e,e.stateNode=r}return Or(e),null;case 13:if(pn(Sn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vn&&Ds!==null&&e.mode&1&&!(e.flags&128))UI(),Xu(),e.flags|=98560,i=!1;else if(i=G0(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ee(317));i[Zi]=e}else Xu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Or(e),i=!1}else wi!==null&&(Mx(wi),wi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Sn.current&1?ar===0&&(ar=3):jv())),e.updateQueue!==null&&(e.flags|=4),Or(e),null);case 4:return Qu(),Ix(t,e),t===null&&Wh(e.stateNode.containerInfo),Or(e),null;case 10:return _v(e.type._context),Or(e),null;case 17:return ws(e.type)&&Z1(),Or(e),null;case 19:if(pn(Sn),i=e.memoizedState,i===null)return Or(e),null;if(r=(e.flags&128)!==0,l=i.rendering,l===null)if(r)Xd(i,!1);else{if(ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=ig(t),l!==null){for(e.flags|=128,Xd(i,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rn(Sn,Sn.current&1|2),e.child}t=t.sibling}i.tail!==null&&$n()>Ju&&(e.flags|=128,r=!0,Xd(i,!1),e.lanes=4194304)}else{if(!r)if(t=ig(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!vn)return Or(e),null}else 2*$n()-i.renderingStartTime>Ju&&n!==1073741824&&(e.flags|=128,r=!0,Xd(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(n=i.last,n!==null?n.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$n(),e.sibling=null,n=Sn.current,rn(Sn,r?n&1|2:n&1),e):(Or(e),null);case 22:case 23:return Fv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ks&1073741824&&(Or(e),e.subtreeFlags&6&&(e.flags|=8192)):Or(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function R5(t,e){switch(yv(e),e.tag){case 1:return ws(e.type)&&Z1(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qu(),pn(xs),pn(Vr),Tv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Av(e),null;case 13:if(pn(Sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));Xu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pn(Sn),null;case 4:return Qu(),null;case 10:return _v(e.type._context),null;case 22:case 23:return Fv(),null;case 24:return null;default:return null}}var K0=!1,Fr=!1,k5=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function gu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ln(t,e,r)}else n.current=null}function Sx(t,e,n){try{n()}catch(r){Ln(t,e,r)}}var tb=!1;function P5(t,e){if(dx=K1,t=SI(),mv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,u=-1,f=-1,m=0,w=0,v=t,E=null;t:for(;;){for(var I;v!==n||s!==0&&v.nodeType!==3||(u=l+s),v!==i||r!==0&&v.nodeType!==3||(f=l+r),v.nodeType===3&&(l+=v.nodeValue.length),(I=v.firstChild)!==null;)E=v,v=I;for(;;){if(v===t)break t;if(E===n&&++m===s&&(u=l),E===i&&++w===r&&(f=l),(I=v.nextSibling)!==null)break;v=E,E=v.parentNode}v=I}n=u===-1||f===-1?null:{start:u,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(hx={focusedElem:t,selectionRange:n},K1=!1,Ve=e;Ve!==null;)if(e=Ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ve=t;else for(;Ve!==null;){e=Ve;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var C=P.memoizedProps,k=P.memoizedState,N=e.stateNode,T=N.getSnapshotBeforeUpdate(e.elementType===e.type?C:pi(e.type,C),k);N.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(V){Ln(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,Ve=t;break}Ve=e.return}return P=tb,tb=!1,P}function Eh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Sx(e,n,i)}s=s.next}while(s!==r)}}function mm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function CS(t){var e=t.alternate;e!==null&&(t.alternate=null,CS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zi],delete e[$h],delete e[mx],delete e[g5],delete e[m5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function AS(t){return t.tag===5||t.tag===3||t.tag===4}function nb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||AS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Q1));else if(r!==4&&(t=t.child,t!==null))for(Rx(t,e,n),t=t.sibling;t!==null;)Rx(t,e,n),t=t.sibling}function kx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kx(t,e,n),t=t.sibling;t!==null;)kx(t,e,n),t=t.sibling}var Er=null,xi=!1;function ma(t,e,n){for(n=n.child;n!==null;)TS(t,e,n),n=n.sibling}function TS(t,e,n){if(ro&&typeof ro.onCommitFiberUnmount=="function")try{ro.onCommitFiberUnmount(am,n)}catch{}switch(n.tag){case 5:Fr||gu(n,e);case 6:var r=Er,s=xi;Er=null,ma(t,e,n),Er=r,xi=s,Er!==null&&(xi?(t=Er,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Er.removeChild(n.stateNode));break;case 18:Er!==null&&(xi?(t=Er,n=n.stateNode,t.nodeType===8?Yp(t.parentNode,n):t.nodeType===1&&Yp(t,n),Uh(t)):Yp(Er,n.stateNode));break;case 4:r=Er,s=xi,Er=n.stateNode.containerInfo,xi=!0,ma(t,e,n),Er=r,xi=s;break;case 0:case 11:case 14:case 15:if(!Fr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Sx(n,e,l),s=s.next}while(s!==r)}ma(t,e,n);break;case 1:if(!Fr&&(gu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ln(n,e,u)}ma(t,e,n);break;case 21:ma(t,e,n);break;case 22:n.mode&1?(Fr=(r=Fr)||n.memoizedState!==null,ma(t,e,n),Fr=r):ma(t,e,n);break;default:ma(t,e,n)}}function rb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new k5),e.forEach(function(r){var s=U5.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function mi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:Er=u.stateNode,xi=!1;break e;case 3:Er=u.stateNode.containerInfo,xi=!0;break e;case 4:Er=u.stateNode.containerInfo,xi=!0;break e}u=u.return}if(Er===null)throw Error(Ee(160));TS(i,l,s),Er=null,xi=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(m){Ln(s,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IS(e,t),e=e.sibling}function IS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mi(e,t),Gi(t),r&4){try{Eh(3,t,t.return),mm(3,t)}catch(C){Ln(t,t.return,C)}try{Eh(5,t,t.return)}catch(C){Ln(t,t.return,C)}}break;case 1:mi(e,t),Gi(t),r&512&&n!==null&&gu(n,n.return);break;case 5:if(mi(e,t),Gi(t),r&512&&n!==null&&gu(n,n.return),t.flags&32){var s=t.stateNode;try{Fh(s,"")}catch(C){Ln(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,l=n!==null?n.memoizedProps:i,u=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&XT(s,i),tx(u,l);var m=tx(u,i);for(l=0;l<f.length;l+=2){var w=f[l],v=f[l+1];w==="style"?eI(s,v):w==="dangerouslySetInnerHTML"?ZT(s,v):w==="children"?Fh(s,v):nv(s,w,v,m)}switch(u){case"input":Yy(s,i);break;case"textarea":YT(s,i);break;case"select":var E=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?wu(s,!!i.multiple,I,!1):E!==!!i.multiple&&(i.defaultValue!=null?wu(s,!!i.multiple,i.defaultValue,!0):wu(s,!!i.multiple,i.multiple?[]:"",!1))}s[$h]=i}catch(C){Ln(t,t.return,C)}}break;case 6:if(mi(e,t),Gi(t),r&4){if(t.stateNode===null)throw Error(Ee(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){Ln(t,t.return,C)}}break;case 3:if(mi(e,t),Gi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Uh(e.containerInfo)}catch(C){Ln(t,t.return,C)}break;case 4:mi(e,t),Gi(t);break;case 13:mi(e,t),Gi(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Mv=$n())),r&4&&rb(t);break;case 22:if(w=n!==null&&n.memoizedState!==null,t.mode&1?(Fr=(m=Fr)||w,mi(e,t),Fr=m):mi(e,t),Gi(t),r&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!w&&t.mode&1)for(Ve=t,w=t.child;w!==null;){for(v=Ve=w;Ve!==null;){switch(E=Ve,I=E.child,E.tag){case 0:case 11:case 14:case 15:Eh(4,E,E.return);break;case 1:gu(E,E.return);var P=E.stateNode;if(typeof P.componentWillUnmount=="function"){r=E,n=E.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(C){Ln(r,n,C)}}break;case 5:gu(E,E.return);break;case 22:if(E.memoizedState!==null){ib(v);continue}}I!==null?(I.return=E,Ve=I):ib(v)}w=w.sibling}e:for(w=null,v=t;;){if(v.tag===5){if(w===null){w=v;try{s=v.stateNode,m?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=v.stateNode,f=v.memoizedProps.style,l=f!=null&&f.hasOwnProperty("display")?f.display:null,u.style.display=JT("display",l))}catch(C){Ln(t,t.return,C)}}}else if(v.tag===6){if(w===null)try{v.stateNode.nodeValue=m?"":v.memoizedProps}catch(C){Ln(t,t.return,C)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;w===v&&(w=null),v=v.return}w===v&&(w=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:mi(e,t),Gi(t),r&4&&rb(t);break;case 21:break;default:mi(e,t),Gi(t)}}function Gi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(AS(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Fh(s,""),r.flags&=-33);var i=nb(t);kx(t,i,s);break;case 3:case 4:var l=r.stateNode.containerInfo,u=nb(t);Rx(t,u,l);break;default:throw Error(Ee(161))}}catch(f){Ln(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function O5(t,e,n){Ve=t,SS(t)}function SS(t,e,n){for(var r=(t.mode&1)!==0;Ve!==null;){var s=Ve,i=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||K0;if(!l){var u=s.alternate,f=u!==null&&u.memoizedState!==null||Fr;u=K0;var m=Fr;if(K0=l,(Fr=f)&&!m)for(Ve=s;Ve!==null;)l=Ve,f=l.child,l.tag===22&&l.memoizedState!==null?ob(s):f!==null?(f.return=l,Ve=f):ob(s);for(;i!==null;)Ve=i,SS(i),i=i.sibling;Ve=s,K0=u,Fr=m}sb(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ve=i):sb(t)}}function sb(t){for(;Ve!==null;){var e=Ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fr||mm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pi(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&zE(e,i,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zE(e,l,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var w=m.memoizedState;if(w!==null){var v=w.dehydrated;v!==null&&Uh(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}Fr||e.flags&512&&Nx(e)}catch(E){Ln(e,e.return,E)}}if(e===t){Ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function ib(t){for(;Ve!==null;){var e=Ve;if(e===t){Ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function ob(t){for(;Ve!==null;){var e=Ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mm(4,e)}catch(f){Ln(e,n,f)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(f){Ln(e,s,f)}}var i=e.return;try{Nx(e)}catch(f){Ln(e,i,f)}break;case 5:var l=e.return;try{Nx(e)}catch(f){Ln(e,l,f)}}}catch(f){Ln(e,e.return,f)}if(e===t){Ve=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Ve=u;break}Ve=e.return}}var D5=Math.ceil,lg=sa.ReactCurrentDispatcher,Ov=sa.ReactCurrentOwner,si=sa.ReactCurrentBatchConfig,Mt=0,mr=null,Qn=null,Ir=0,ks=0,mu=_l(0),ar=0,Zh=null,pc=0,pm=0,Dv=0,bh=null,ms=null,Mv=0,Ju=1/0,Lo=null,cg=!1,Px=null,$a=null,X0=!1,ja=null,ug=0,Ch=0,Ox=null,C1=-1,A1=0;function ts(){return Mt&6?$n():C1!==-1?C1:C1=$n()}function qa(t){return t.mode&1?Mt&2&&Ir!==0?Ir&-Ir:y5.transition!==null?(A1===0&&(A1=hI()),A1):(t=$t,t!==0||(t=window.event,t=t===void 0?16:wI(t.type)),t):1}function Ti(t,e,n,r){if(50<Ch)throw Ch=0,Ox=null,Error(Ee(185));Gf(t,n,r),(!(Mt&2)||t!==mr)&&(t===mr&&(!(Mt&2)&&(pm|=n),ar===4&&Ca(t,Ir)),vs(t,r),n===1&&Mt===0&&!(e.mode&1)&&(Ju=$n()+500,hm&&El()))}function vs(t,e){var n=t.callbackNode;yO(t,e);var r=q1(t,t===mr?Ir:0);if(r===0)n!==null&&mE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&mE(n),e===1)t.tag===0?p5(ab.bind(null,t)):jI(ab.bind(null,t)),h5(function(){!(Mt&6)&&El()}),n=null;else{switch(fI(r)){case 1:n=av;break;case 4:n=uI;break;case 16:n=$1;break;case 536870912:n=dI;break;default:n=$1}n=LS(n,NS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function NS(t,e){if(C1=-1,A1=0,Mt&6)throw Error(Ee(327));var n=t.callbackNode;if(Cu()&&t.callbackNode!==n)return null;var r=q1(t,t===mr?Ir:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dg(t,r);else{e=r;var s=Mt;Mt|=2;var i=kS();(mr!==t||Ir!==e)&&(Lo=null,Ju=$n()+500,cc(t,e));do try{F5();break}catch(u){RS(t,u)}while(!0);vv(),lg.current=i,Mt=s,Qn!==null?e=0:(mr=null,Ir=0,e=ar)}if(e!==0){if(e===2&&(s=ox(t),s!==0&&(r=s,e=Dx(t,s))),e===1)throw n=Zh,cc(t,0),Ca(t,r),vs(t,$n()),n;if(e===6)Ca(t,r);else{if(s=t.current.alternate,!(r&30)&&!M5(s)&&(e=dg(t,r),e===2&&(i=ox(t),i!==0&&(r=i,e=Dx(t,i))),e===1))throw n=Zh,cc(t,0),Ca(t,r),vs(t,$n()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ee(345));case 2:Wl(t,ms,Lo);break;case 3:if(Ca(t,r),(r&130023424)===r&&(e=Mv+500-$n(),10<e)){if(q1(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ts(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=gx(Wl.bind(null,t,ms,Lo),e);break}Wl(t,ms,Lo);break;case 4:if(Ca(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var l=31-Ai(r);i=1<<l,l=e[l],l>s&&(s=l),r&=~i}if(r=s,r=$n()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*D5(r/1960))-r,10<r){t.timeoutHandle=gx(Wl.bind(null,t,ms,Lo),r);break}Wl(t,ms,Lo);break;case 5:Wl(t,ms,Lo);break;default:throw Error(Ee(329))}}}return vs(t,$n()),t.callbackNode===n?NS.bind(null,t):null}function Dx(t,e){var n=bh;return t.current.memoizedState.isDehydrated&&(cc(t,e).flags|=256),t=dg(t,e),t!==2&&(e=ms,ms=n,e!==null&&Mx(e)),t}function Mx(t){ms===null?ms=t:ms.push.apply(ms,t)}function M5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ri(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ca(t,e){for(e&=~Dv,e&=~pm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ai(e),r=1<<n;t[n]=-1,e&=~r}}function ab(t){if(Mt&6)throw Error(Ee(327));Cu();var e=q1(t,0);if(!(e&1))return vs(t,$n()),null;var n=dg(t,e);if(t.tag!==0&&n===2){var r=ox(t);r!==0&&(e=r,n=Dx(t,r))}if(n===1)throw n=Zh,cc(t,0),Ca(t,e),vs(t,$n()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wl(t,ms,Lo),vs(t,$n()),null}function Lv(t,e){var n=Mt;Mt|=1;try{return t(e)}finally{Mt=n,Mt===0&&(Ju=$n()+500,hm&&El())}}function yc(t){ja!==null&&ja.tag===0&&!(Mt&6)&&Cu();var e=Mt;Mt|=1;var n=si.transition,r=$t;try{if(si.transition=null,$t=1,t)return t()}finally{$t=r,si.transition=n,Mt=e,!(Mt&6)&&El()}}function Fv(){ks=mu.current,pn(mu)}function cc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,d5(n)),Qn!==null)for(n=Qn.return;n!==null;){var r=n;switch(yv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Z1();break;case 3:Qu(),pn(xs),pn(Vr),Tv();break;case 5:Av(r);break;case 4:Qu();break;case 13:pn(Sn);break;case 19:pn(Sn);break;case 10:_v(r.type._context);break;case 22:case 23:Fv()}n=n.return}if(mr=t,Qn=t=Ka(t.current,null),Ir=ks=e,ar=0,Zh=null,Dv=pm=pc=0,ms=bh=null,ql!==null){for(e=0;e<ql.length;e++)if(n=ql[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=s,r.next=l}n.pending=r}ql=null}return t}function RS(t,e){do{var n=Qn;try{if(vv(),_1.current=ag,og){for(var r=Nn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}og=!1}if(mc=0,gr=or=Nn=null,_h=!1,Xh=0,Ov.current=null,n===null||n.return===null){ar=1,Zh=e,Qn=null;break}e:{var i=t,l=n.return,u=n,f=e;if(e=Ir,u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var m=f,w=u,v=w.tag;if(!(w.mode&1)&&(v===0||v===11||v===15)){var E=w.alternate;E?(w.updateQueue=E.updateQueue,w.memoizedState=E.memoizedState,w.lanes=E.lanes):(w.updateQueue=null,w.memoizedState=null)}var I=KE(l);if(I!==null){I.flags&=-257,XE(I,l,u,i,e),I.mode&1&&qE(i,m,e),e=I,f=m;var P=e.updateQueue;if(P===null){var C=new Set;C.add(f),e.updateQueue=C}else P.add(f);break e}else{if(!(e&1)){qE(i,m,e),jv();break e}f=Error(Ee(426))}}else if(vn&&u.mode&1){var k=KE(l);if(k!==null){!(k.flags&65536)&&(k.flags|=256),XE(k,l,u,i,e),xv(Zu(f,u));break e}}i=f=Zu(f,u),ar!==4&&(ar=2),bh===null?bh=[i]:bh.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var N=fS(i,f,e);UE(i,N);break e;case 1:u=f;var T=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&($a===null||!$a.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var V=gS(i,u,e);UE(i,V);break e}}i=i.return}while(i!==null)}OS(n)}catch($){e=$,Qn===n&&n!==null&&(Qn=n=n.return);continue}break}while(!0)}function kS(){var t=lg.current;return lg.current=ag,t===null?ag:t}function jv(){(ar===0||ar===3||ar===2)&&(ar=4),mr===null||!(pc&268435455)&&!(pm&268435455)||Ca(mr,Ir)}function dg(t,e){var n=Mt;Mt|=2;var r=kS();(mr!==t||Ir!==e)&&(Lo=null,cc(t,e));do try{L5();break}catch(s){RS(t,s)}while(!0);if(vv(),Mt=n,lg.current=r,Qn!==null)throw Error(Ee(261));return mr=null,Ir=0,ar}function L5(){for(;Qn!==null;)PS(Qn)}function F5(){for(;Qn!==null&&!lO();)PS(Qn)}function PS(t){var e=MS(t.alternate,t,ks);t.memoizedProps=t.pendingProps,e===null?OS(t):Qn=e,Ov.current=null}function OS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=R5(n,e),n!==null){n.flags&=32767,Qn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ar=6,Qn=null;return}}else if(n=N5(n,e,ks),n!==null){Qn=n;return}if(e=e.sibling,e!==null){Qn=e;return}Qn=e=t}while(e!==null);ar===0&&(ar=5)}function Wl(t,e,n){var r=$t,s=si.transition;try{si.transition=null,$t=1,j5(t,e,n,r)}finally{si.transition=s,$t=r}return null}function j5(t,e,n,r){do Cu();while(ja!==null);if(Mt&6)throw Error(Ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(xO(t,i),t===mr&&(Qn=mr=null,Ir=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||X0||(X0=!0,LS($1,function(){return Cu(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=si.transition,si.transition=null;var l=$t;$t=1;var u=Mt;Mt|=4,Ov.current=null,P5(t,n),IS(n,t),s5(hx),K1=!!dx,hx=dx=null,t.current=n,O5(n),cO(),Mt=u,$t=l,si.transition=i}else t.current=n;if(X0&&(X0=!1,ja=t,ug=s),i=t.pendingLanes,i===0&&($a=null),hO(n.stateNode),vs(t,$n()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(cg)throw cg=!1,t=Px,Px=null,t;return ug&1&&t.tag!==0&&Cu(),i=t.pendingLanes,i&1?t===Ox?Ch++:(Ch=0,Ox=t):Ch=0,El(),null}function Cu(){if(ja!==null){var t=fI(ug),e=si.transition,n=$t;try{if(si.transition=null,$t=16>t?16:t,ja===null)var r=!1;else{if(t=ja,ja=null,ug=0,Mt&6)throw Error(Ee(331));var s=Mt;for(Mt|=4,Ve=t.current;Ve!==null;){var i=Ve,l=i.child;if(Ve.flags&16){var u=i.deletions;if(u!==null){for(var f=0;f<u.length;f++){var m=u[f];for(Ve=m;Ve!==null;){var w=Ve;switch(w.tag){case 0:case 11:case 15:Eh(8,w,i)}var v=w.child;if(v!==null)v.return=w,Ve=v;else for(;Ve!==null;){w=Ve;var E=w.sibling,I=w.return;if(CS(w),w===m){Ve=null;break}if(E!==null){E.return=I,Ve=E;break}Ve=I}}}var P=i.alternate;if(P!==null){var C=P.child;if(C!==null){P.child=null;do{var k=C.sibling;C.sibling=null,C=k}while(C!==null)}}Ve=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Ve=l;else e:for(;Ve!==null;){if(i=Ve,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Eh(9,i,i.return)}var N=i.sibling;if(N!==null){N.return=i.return,Ve=N;break e}Ve=i.return}}var T=t.current;for(Ve=T;Ve!==null;){l=Ve;var S=l.child;if(l.subtreeFlags&2064&&S!==null)S.return=l,Ve=S;else e:for(l=T;Ve!==null;){if(u=Ve,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:mm(9,u)}}catch($){Ln(u,u.return,$)}if(u===l){Ve=null;break e}var V=u.sibling;if(V!==null){V.return=u.return,Ve=V;break e}Ve=u.return}}if(Mt=s,El(),ro&&typeof ro.onPostCommitFiberRoot=="function")try{ro.onPostCommitFiberRoot(am,t)}catch{}r=!0}return r}finally{$t=n,si.transition=e}}return!1}function lb(t,e,n){e=Zu(n,e),e=fS(t,e,1),t=Ga(t,e,1),e=ts(),t!==null&&(Gf(t,1,e),vs(t,e))}function Ln(t,e,n){if(t.tag===3)lb(t,t,n);else for(;e!==null;){if(e.tag===3){lb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($a===null||!$a.has(r))){t=Zu(n,t),t=gS(e,t,1),e=Ga(e,t,1),t=ts(),e!==null&&(Gf(e,1,t),vs(e,t));break}}e=e.return}}function B5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ts(),t.pingedLanes|=t.suspendedLanes&n,mr===t&&(Ir&n)===n&&(ar===4||ar===3&&(Ir&130023424)===Ir&&500>$n()-Mv?cc(t,0):Dv|=n),vs(t,e)}function DS(t,e){e===0&&(t.mode&1?(e=B0,B0<<=1,!(B0&130023424)&&(B0=4194304)):e=1);var n=ts();t=Xo(t,e),t!==null&&(Gf(t,e,n),vs(t,n))}function V5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),DS(t,n)}function U5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(e),DS(t,n)}var MS;MS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xs.current)ys=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ys=!1,S5(t,e,n);ys=!!(t.flags&131072)}else ys=!1,vn&&e.flags&1048576&&BI(e,tg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;b1(t,e),t=e.pendingProps;var s=Ku(e,Vr.current);bu(e,n),s=Sv(null,e,r,t,s,n);var i=Nv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ws(r)?(i=!0,J1(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bv(e),s.updater=gm,e.stateNode=s,s._reactInternals=e,_x(e,r,t,n),e=Cx(null,e,r,!0,i,n)):(e.tag=0,vn&&i&&pv(e),Qr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(b1(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=H5(r),t=pi(r,t),s){case 0:e=bx(null,e,r,t,n);break e;case 1:e=ZE(null,e,r,t,n);break e;case 11:e=YE(null,e,r,t,n);break e;case 14:e=QE(null,e,r,pi(r.type,t),n);break e}throw Error(Ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pi(r,s),bx(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pi(r,s),ZE(t,e,r,s,n);case 3:e:{if(xS(e),t===null)throw Error(Ee(387));r=e.pendingProps,i=e.memoizedState,s=i.element,GI(t,e),sg(e,r,null,n);var l=e.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Zu(Error(Ee(423)),e),e=JE(t,e,r,n,s);break e}else if(r!==s){s=Zu(Error(Ee(424)),e),e=JE(t,e,r,n,s);break e}else for(Ds=Wa(e.stateNode.containerInfo.firstChild),Fs=e,vn=!0,wi=null,n=HI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xu(),r===s){e=Yo(t,e,n);break e}Qr(t,e,r,n)}e=e.child}return e;case 5:return $I(e),t===null&&xx(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,l=s.children,fx(r,s)?l=null:i!==null&&fx(r,i)&&(e.flags|=32),yS(t,e),Qr(t,e,l,n),e.child;case 6:return t===null&&xx(e),null;case 13:return wS(t,e,n);case 4:return Cv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yu(e,null,r,n):Qr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pi(r,s),YE(t,e,r,s,n);case 7:return Qr(t,e,e.pendingProps,n),e.child;case 8:return Qr(t,e,e.pendingProps.children,n),e.child;case 12:return Qr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,l=s.value,rn(ng,r._currentValue),r._currentValue=l,i!==null)if(Ri(i.value,l)){if(i.children===s.children&&!xs.current){e=Yo(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){l=i.child;for(var f=u.firstContext;f!==null;){if(f.context===r){if(i.tag===1){f=Go(-1,n&-n),f.tag=2;var m=i.updateQueue;if(m!==null){m=m.shared;var w=m.pending;w===null?f.next=f:(f.next=w.next,w.next=f),m.pending=f}}i.lanes|=n,f=i.alternate,f!==null&&(f.lanes|=n),wx(i.return,n,e),u.lanes|=n;break}f=f.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Ee(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),wx(l,n,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Qr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,bu(e,n),s=oi(s),r=r(s),e.flags|=1,Qr(t,e,r,n),e.child;case 14:return r=e.type,s=pi(r,e.pendingProps),s=pi(r.type,s),QE(t,e,r,s,n);case 15:return mS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pi(r,s),b1(t,e),e.tag=1,ws(r)?(t=!0,J1(e)):t=!1,bu(e,n),hS(e,r,s),_x(e,r,s,n),Cx(null,e,r,!0,t,n);case 19:return vS(t,e,n);case 22:return pS(t,e,n)}throw Error(Ee(156,e.tag))};function LS(t,e){return cI(t,e)}function z5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(t,e,n,r){return new z5(t,e,n,r)}function Bv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function H5(t){if(typeof t=="function")return Bv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sv)return 11;if(t===iv)return 14}return 2}function Ka(t,e){var n=t.alternate;return n===null?(n=ni(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function T1(t,e,n,r,s,i){var l=2;if(r=t,typeof t=="function")Bv(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case iu:return uc(n.children,s,i,e);case rv:l=8,s|=8;break;case Gy:return t=ni(12,n,e,s|2),t.elementType=Gy,t.lanes=i,t;case $y:return t=ni(13,n,e,s),t.elementType=$y,t.lanes=i,t;case qy:return t=ni(19,n,e,s),t.elementType=qy,t.lanes=i,t;case $T:return ym(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case WT:l=10;break e;case GT:l=9;break e;case sv:l=11;break e;case iv:l=14;break e;case _a:l=16,r=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=ni(l,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function uc(t,e,n,r){return t=ni(7,t,r,e),t.lanes=n,t}function ym(t,e,n,r){return t=ni(22,t,r,e),t.elementType=$T,t.lanes=n,t.stateNode={isHidden:!1},t}function sy(t,e,n){return t=ni(6,t,null,e),t.lanes=n,t}function iy(t,e,n){return e=ni(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function W5(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bp(0),this.expirationTimes=Bp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vv(t,e,n,r,s,i,l,u,f){return t=new W5(t,e,n,u,f),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ni(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bv(i),t}function G5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:su,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function FS(t){if(!t)return tl;t=t._reactInternals;e:{if(Pc(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ws(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(ws(n))return FI(t,n,e)}return e}function jS(t,e,n,r,s,i,l,u,f){return t=Vv(n,r,!0,t,s,i,l,u,f),t.context=FS(null),n=t.current,r=ts(),s=qa(n),i=Go(r,s),i.callback=e??null,Ga(n,i,s),t.current.lanes=s,Gf(t,s,r),vs(t,r),t}function xm(t,e,n,r){var s=e.current,i=ts(),l=qa(s);return n=FS(n),e.context===null?e.context=n:e.pendingContext=n,e=Go(i,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ga(s,e,l),t!==null&&(Ti(t,s,l,i),v1(t,s,l)),l}function hg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Uv(t,e){cb(t,e),(t=t.alternate)&&cb(t,e)}function $5(){return null}var BS=typeof reportError=="function"?reportError:function(t){console.error(t)};function zv(t){this._internalRoot=t}wm.prototype.render=zv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));xm(t,e,null,null)};wm.prototype.unmount=zv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yc(function(){xm(null,t,null,null)}),e[Ko]=null}};function wm(t){this._internalRoot=t}wm.prototype.unstable_scheduleHydration=function(t){if(t){var e=pI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ba.length&&e!==0&&e<ba[n].priority;n++);ba.splice(n,0,t),n===0&&xI(t)}};function Hv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ub(){}function q5(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var m=hg(l);i.call(m)}}var l=jS(e,r,t,0,null,!1,!1,"",ub);return t._reactRootContainer=l,t[Ko]=l.current,Wh(t.nodeType===8?t.parentNode:t),yc(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var m=hg(f);u.call(m)}}var f=Vv(t,0,!1,null,null,!1,!1,"",ub);return t._reactRootContainer=f,t[Ko]=f.current,Wh(t.nodeType===8?t.parentNode:t),yc(function(){xm(e,f,n,r)}),f}function _m(t,e,n,r,s){var i=n._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var u=s;s=function(){var f=hg(l);u.call(f)}}xm(e,l,t,s)}else l=q5(n,e,t,s,r);return hg(l)}gI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=sh(e.pendingLanes);n!==0&&(lv(e,n|1),vs(e,$n()),!(Mt&6)&&(Ju=$n()+500,El()))}break;case 13:yc(function(){var r=Xo(t,1);if(r!==null){var s=ts();Ti(r,t,1,s)}}),Uv(t,1)}};cv=function(t){if(t.tag===13){var e=Xo(t,134217728);if(e!==null){var n=ts();Ti(e,t,134217728,n)}Uv(t,134217728)}};mI=function(t){if(t.tag===13){var e=qa(t),n=Xo(t,e);if(n!==null){var r=ts();Ti(n,t,e,r)}Uv(t,e)}};pI=function(){return $t};yI=function(t,e){var n=$t;try{return $t=t,e()}finally{$t=n}};rx=function(t,e,n){switch(e){case"input":if(Yy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=dm(r);if(!s)throw Error(Ee(90));KT(r),Yy(r,s)}}}break;case"textarea":YT(t,n);break;case"select":e=n.value,e!=null&&wu(t,!!n.multiple,e,!1)}};rI=Lv;sI=yc;var K5={usingClientEntryPoint:!1,Events:[qf,cu,dm,tI,nI,Lv]},Yd={findFiberByHostInstance:$l,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X5={bundleType:Yd.bundleType,version:Yd.version,rendererPackageName:Yd.rendererPackageName,rendererConfig:Yd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aI(t),t===null?null:t.stateNode},findFiberByHostInstance:Yd.findFiberByHostInstance||$5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Y0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Y0.isDisabled&&Y0.supportsFiber)try{am=Y0.inject(X5),ro=Y0}catch{}}Hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K5;Hs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hv(e))throw Error(Ee(200));return G5(t,e,null,n)};Hs.createRoot=function(t,e){if(!Hv(t))throw Error(Ee(299));var n=!1,r="",s=BS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Vv(t,1,!1,null,null,n,!1,r,s),t[Ko]=e.current,Wh(t.nodeType===8?t.parentNode:t),new zv(e)};Hs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=aI(e),t=t===null?null:t.stateNode,t};Hs.flushSync=function(t){return yc(t)};Hs.hydrate=function(t,e,n){if(!vm(e))throw Error(Ee(200));return _m(null,t,e,!0,n)};Hs.hydrateRoot=function(t,e,n){if(!Hv(t))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",l=BS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=jS(e,null,t,1,n??null,s,!1,i,l),t[Ko]=e.current,Wh(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wm(e)};Hs.render=function(t,e,n){if(!vm(e))throw Error(Ee(200));return _m(null,t,e,!1,n)};Hs.unmountComponentAtNode=function(t){if(!vm(t))throw Error(Ee(40));return t._reactRootContainer?(yc(function(){_m(null,null,t,!1,function(){t._reactRootContainer=null,t[Ko]=null})}),!0):!1};Hs.unstable_batchedUpdates=Lv;Hs.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vm(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return _m(t,e,n,!1,r)};Hs.version="18.3.1-next-f1338f8080-20240426";function VS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VS)}catch(t){console.error(t)}}VS(),VT.exports=Hs;var Xf=VT.exports;const Y5=Xw(Xf);var US,db=Xf;US=db.createRoot,db.hydrateRoot;function Q5(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,l=[],u="",f=t.split("/");for(f[0]||f.shift();s=f.shift();)n=s[0],n==="*"?(l.push(n),u+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),l.push(s.substring(1,~r?r:~i?i:s.length)),u+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(u+=(~r?"?":"")+"\\"+s.substring(i))):u+="/"+s;return{keys:l,pattern:new RegExp("^"+u+(e?"(?=$|/)":"/?$"),"i")}}var zS={exports:{}},HS={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ed=O;function Z5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var J5=typeof Object.is=="function"?Object.is:Z5,eD=ed.useState,tD=ed.useEffect,nD=ed.useLayoutEffect,rD=ed.useDebugValue;function sD(t,e){var n=e(),r=eD({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return nD(function(){s.value=n,s.getSnapshot=e,oy(s)&&i({inst:s})},[t,n,e]),tD(function(){return oy(s)&&i({inst:s}),t(function(){oy(s)&&i({inst:s})})},[t]),rD(n),n}function oy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!J5(t,n)}catch{return!0}}function iD(t,e){return e()}var oD=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?iD:sD;HS.useSyncExternalStore=ed.useSyncExternalStore!==void 0?ed.useSyncExternalStore:oD;zS.exports=HS;var aD=zS.exports;const lD=jT.useInsertionEffect,cD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uD=cD?O.useLayoutEffect:O.useEffect,dD=lD||uD,WS=t=>{const e=O.useRef([t,(...n)=>e[0](...n)]).current;return dD(()=>{e[0]=t}),e[1]},hD="popstate",Wv="pushState",Gv="replaceState",fD="hashchange",hb=[hD,Wv,Gv,fD],gD=t=>{for(const e of hb)addEventListener(e,t);return()=>{for(const e of hb)removeEventListener(e,t)}},GS=(t,e)=>aD.useSyncExternalStore(gD,t,e),mD=()=>location.search,pD=({ssrSearch:t=""}={})=>GS(mD,()=>t),fb=()=>location.pathname,yD=({ssrPath:t}={})=>GS(fb,t?()=>t:fb),xD=(t,{replace:e=!1,state:n=null}={})=>history[e?Gv:Wv](n,"",t),wD=(t={})=>[yD(t),xD],gb=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[gb]>"u"){for(const t of[Wv,Gv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,gb,{value:!0})}const vD=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",$S=(t="")=>t==="/"?"":t,_D=(t,e)=>t[0]==="~"?t.slice(1):$S(e)+t,ED=(t="",e)=>vD(mb($S(t)),mb(e)),mb=t=>{try{return decodeURI(t)}catch{return t}},qS={hook:wD,searchHook:pD,parser:Q5,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},KS=O.createContext(qS),bd=()=>O.useContext(KS),XS={},YS=O.createContext(XS),Yf=()=>O.useContext(YS),Em=t=>{const[e,n]=t.hook(t);return[ED(t.base,e),WS((r,s)=>n(_D(r,t.base),s))]},bl=()=>Em(bd()),$v=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),l=s.exec(n)||[],[u,...f]=l;return u!==void 0?[!0,(()=>{const m=i!==!1?Object.fromEntries(i.map((v,E)=>[v,f[E]])):l.groups;let w={...f};return m&&Object.assign(w,m),w})(),...r?[u]:[]]:[!1,null]},bD=t=>$v(bd().parser,t,bl()[0]),CD=({children:t,...e})=>{var w,v;const n=bd(),r=e.hook?qS:n;let s=r;const[i,l]=((w=e.ssrPath)==null?void 0:w.split("?"))??[];l&&(e.ssrSearch=l,e.ssrPath=i),e.hrefs=e.hrefs??((v=e.hook)==null?void 0:v.hrefs);let u=O.useRef({}),f=u.current,m=f;for(let E in r){const I=E==="base"?r[E]+(e[E]||""):e[E]||r[E];f===m&&I!==m[E]&&(u.current=m={...m}),m[E]=I,I!==r[E]&&(s=m)}return O.createElement(KS.Provider,{value:s,children:t})},pb=({children:t,component:e},n)=>e?O.createElement(e,{params:n}):typeof t=="function"?t(n):t,AD=t=>{let e=O.useRef(XS),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Qs=({path:t,nest:e,match:n,...r})=>{const s=bd(),[i]=Em(s),[l,u,f]=n??$v(s.parser,t,i,e),m=AD({...Yf(),...u});if(!l)return null;const w=f?O.createElement(CD,{base:f},pb(r,m)):pb(r,m);return O.createElement(YS.Provider,{value:m,children:w})},sn=O.forwardRef((t,e)=>{const n=bd(),[r,s]=Em(n),{to:i="",href:l=i,onClick:u,asChild:f,children:m,className:w,replace:v,state:E,...I}=t,P=WS(k=>{k.ctrlKey||k.metaKey||k.altKey||k.shiftKey||k.button!==0||(u==null||u(k),k.defaultPrevented||(k.preventDefault(),s(l,t)))}),C=n.hrefs(l[0]==="~"?l.slice(1):n.base+l,n);return f&&O.isValidElement(m)?O.cloneElement(m,{onClick:P,href:C}):O.createElement("a",{...I,onClick:P,href:C,className:w!=null&&w.call?w(r===l):w,children:m,ref:e})}),QS=t=>Array.isArray(t)?t.flatMap(e=>QS(e&&e.type===O.Fragment?e.props.children:e)):[t],TD=({children:t,location:e})=>{const n=bd(),[r]=Em(n);for(const s of QS(t)){let i=0;if(O.isValidElement(s)&&(i=$v(n.parser,s.props.path,e||r,s.props.nest))[0])return O.cloneElement(s,{match:i})}return null},ID=1,SD=1e6;let ay=0;function ND(){return ay=(ay+1)%Number.MAX_SAFE_INTEGER,ay.toString()}const ly=new Map,yb=t=>{if(ly.has(t))return;const e=setTimeout(()=>{ly.delete(t),Ah({type:"REMOVE_TOAST",toastId:t})},SD);ly.set(t,e)},RD=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,ID)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?yb(n):t.toasts.forEach(r=>{yb(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},I1=[];let S1={toasts:[]};function Ah(t){S1=RD(S1,t),I1.forEach(e=>{e(S1)})}function kD({...t}){const e=ND(),n=s=>Ah({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Ah({type:"DISMISS_TOAST",toastId:e});return Ah({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function ci(){const[t,e]=O.useState(S1);return O.useEffect(()=>(I1.push(e),()=>{const n=I1.indexOf(e);n>-1&&I1.splice(n,1)}),[t]),{...t,toast:kD,dismiss:n=>Ah({type:"DISMISS_TOAST",toastId:n})}}function Xe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function xb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function bm(...t){return e=>{let n=!1;const r=t.map(s=>{const i=xb(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():xb(t[s],null)}}}}function pr(...t){return O.useCallback(bm(...t),t)}function ia(t,e=[]){let n=[];function r(i,l){const u=O.createContext(l),f=n.length;n=[...n,l];const m=v=>{var N;const{scope:E,children:I,...P}=v,C=((N=E==null?void 0:E[t])==null?void 0:N[f])||u,k=O.useMemo(()=>P,Object.values(P));return p.jsx(C.Provider,{value:k,children:I})};m.displayName=i+"Provider";function w(v,E){var C;const I=((C=E==null?void 0:E[t])==null?void 0:C[f])||u,P=O.useContext(I);if(P)return P;if(l!==void 0)return l;throw new Error(`\`${v}\` must be used within \`${i}\``)}return[m,w]}const s=()=>{const i=n.map(l=>O.createContext(l));return function(u){const f=(u==null?void 0:u[t])||i;return O.useMemo(()=>({[`__scope${t}`]:{...u,[t]:f}}),[u,f])}};return s.scopeName=t,[r,PD(s,...e)]}function PD(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const l=r.reduce((u,{useScope:f,scopeName:m})=>{const v=f(i)[`__scope${m}`];return{...u,...v}},{});return O.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return n.scopeName=e.scopeName,n}function Jh(t){const e=OD(t),n=O.forwardRef((r,s)=>{const{children:i,...l}=r,u=O.Children.toArray(i),f=u.find(MD);if(f){const m=f.props.children,w=u.map(v=>v===f?O.Children.count(m)>1?O.Children.only(null):O.isValidElement(m)?m.props.children:null:v);return p.jsx(e,{...l,ref:s,children:O.isValidElement(m)?O.cloneElement(m,void 0,w):null})}return p.jsx(e,{...l,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var ZS=Jh("Slot");function OD(t){const e=O.forwardRef((n,r)=>{const{children:s,...i}=n;if(O.isValidElement(s)){const l=FD(s),u=LD(i,s.props);return s.type!==O.Fragment&&(u.ref=r?bm(r,l):l),O.cloneElement(s,u)}return O.Children.count(s)>1?O.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var JS=Symbol("radix.slottable");function DD(t){const e=({children:n})=>p.jsx(p.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=JS,e}function MD(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===JS}function LD(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...u)=>{i(...u),s(...u)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function FD(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function qv(t){const e=t+"CollectionProvider",[n,r]=ia(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),l=C=>{const{scope:k,children:N}=C,T=dt.useRef(null),S=dt.useRef(new Map).current;return p.jsx(s,{scope:k,itemMap:S,collectionRef:T,children:N})};l.displayName=e;const u=t+"CollectionSlot",f=Jh(u),m=dt.forwardRef((C,k)=>{const{scope:N,children:T}=C,S=i(u,N),V=pr(k,S.collectionRef);return p.jsx(f,{ref:V,children:T})});m.displayName=u;const w=t+"CollectionItemSlot",v="data-radix-collection-item",E=Jh(w),I=dt.forwardRef((C,k)=>{const{scope:N,children:T,...S}=C,V=dt.useRef(null),$=pr(k,V),Y=i(w,N);return dt.useEffect(()=>(Y.itemMap.set(V,{ref:V,...S}),()=>void Y.itemMap.delete(V))),p.jsx(E,{[v]:"",ref:$,children:T})});I.displayName=w;function P(C){const k=i(t+"CollectionConsumer",C);return dt.useCallback(()=>{const T=k.collectionRef.current;if(!T)return[];const S=Array.from(T.querySelectorAll(`[${v}]`));return Array.from(k.itemMap.values()).sort((Y,M)=>S.indexOf(Y.ref.current)-S.indexOf(M.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:l,Slot:m,ItemSlot:I},P,r]}var jD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],jt=jD.reduce((t,e)=>{const n=Jh(`Primitive.${e}`),r=O.forwardRef((s,i)=>{const{asChild:l,...u}=s,f=l?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(f,{...u,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Kv(t,e){t&&Xf.flushSync(()=>t.dispatchEvent(e))}function Ur(t){const e=O.useRef(t);return O.useEffect(()=>{e.current=t}),O.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function BD(t,e=globalThis==null?void 0:globalThis.document){const n=Ur(t);O.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var VD="DismissableLayer",Lx="dismissableLayer.update",UD="dismissableLayer.pointerDownOutside",zD="dismissableLayer.focusOutside",wb,e3=O.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cm=O.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:l,onDismiss:u,...f}=t,m=O.useContext(e3),[w,v]=O.useState(null),E=(w==null?void 0:w.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,I]=O.useState({}),P=pr(e,M=>v(M)),C=Array.from(m.layers),[k]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),N=C.indexOf(k),T=w?C.indexOf(w):-1,S=m.layersWithOutsidePointerEventsDisabled.size>0,V=T>=N,$=WD(M=>{const j=M.target,L=[...m.branches].some(G=>G.contains(j));!V||L||(s==null||s(M),l==null||l(M),M.defaultPrevented||u==null||u())},E),Y=GD(M=>{const j=M.target;[...m.branches].some(G=>G.contains(j))||(i==null||i(M),l==null||l(M),M.defaultPrevented||u==null||u())},E);return BD(M=>{T===m.layers.size-1&&(r==null||r(M),!M.defaultPrevented&&u&&(M.preventDefault(),u()))},E),O.useEffect(()=>{if(w)return n&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(wb=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(w)),m.layers.add(w),vb(),()=>{n&&m.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=wb)}},[w,E,n,m]),O.useEffect(()=>()=>{w&&(m.layers.delete(w),m.layersWithOutsidePointerEventsDisabled.delete(w),vb())},[w,m]),O.useEffect(()=>{const M=()=>I({});return document.addEventListener(Lx,M),()=>document.removeEventListener(Lx,M)},[]),p.jsx(jt.div,{...f,ref:P,style:{pointerEvents:S?V?"auto":"none":void 0,...t.style},onFocusCapture:Xe(t.onFocusCapture,Y.onFocusCapture),onBlurCapture:Xe(t.onBlurCapture,Y.onBlurCapture),onPointerDownCapture:Xe(t.onPointerDownCapture,$.onPointerDownCapture)})});Cm.displayName=VD;var HD="DismissableLayerBranch",t3=O.forwardRef((t,e)=>{const n=O.useContext(e3),r=O.useRef(null),s=pr(e,r);return O.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(jt.div,{...t,ref:s})});t3.displayName=HD;function WD(t,e=globalThis==null?void 0:globalThis.document){const n=Ur(t),r=O.useRef(!1),s=O.useRef(()=>{});return O.useEffect(()=>{const i=u=>{if(u.target&&!r.current){let f=function(){n3(UD,n,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=f,e.addEventListener("click",s.current,{once:!0})):f()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function GD(t,e=globalThis==null?void 0:globalThis.document){const n=Ur(t),r=O.useRef(!1);return O.useEffect(()=>{const s=i=>{i.target&&!r.current&&n3(zD,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function vb(){const t=new CustomEvent(Lx);document.dispatchEvent(t)}function n3(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Kv(s,i):s.dispatchEvent(i)}var $D=Cm,qD=t3,ki=globalThis!=null&&globalThis.document?O.useLayoutEffect:()=>{},KD="Portal",Xv=O.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,i]=O.useState(!1);ki(()=>i(!0),[]);const l=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return l?Y5.createPortal(p.jsx(jt.div,{...r,ref:e}),l):null});Xv.displayName=KD;function XD(t,e){return O.useReducer((n,r)=>e[n][r]??n,t)}var Cl=t=>{const{present:e,children:n}=t,r=YD(e),s=typeof n=="function"?n({present:r.isPresent}):O.Children.only(n),i=pr(r.ref,QD(s));return typeof n=="function"||r.isPresent?O.cloneElement(s,{ref:i}):null};Cl.displayName="Presence";function YD(t){const[e,n]=O.useState(),r=O.useRef({}),s=O.useRef(t),i=O.useRef("none"),l=t?"mounted":"unmounted",[u,f]=XD(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return O.useEffect(()=>{const m=Q0(r.current);i.current=u==="mounted"?m:"none"},[u]),ki(()=>{const m=r.current,w=s.current;if(w!==t){const E=i.current,I=Q0(m);t?f("MOUNT"):I==="none"||(m==null?void 0:m.display)==="none"?f("UNMOUNT"):f(w&&E!==I?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,f]),ki(()=>{if(e){let m;const w=e.ownerDocument.defaultView??window,v=I=>{const C=Q0(r.current).includes(I.animationName);if(I.target===e&&C&&(f("ANIMATION_END"),!s.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",m=w.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},E=I=>{I.target===e&&(i.current=Q0(r.current))};return e.addEventListener("animationstart",E),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{w.clearTimeout(m),e.removeEventListener("animationstart",E),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:O.useCallback(m=>{m&&(r.current=getComputedStyle(m)),n(m)},[])}}function Q0(t){return(t==null?void 0:t.animationName)||"none"}function QD(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Qf({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=ZD({defaultProp:e,onChange:n}),i=t!==void 0,l=i?t:r,u=Ur(n),f=O.useCallback(m=>{if(i){const v=typeof m=="function"?m(t):m;v!==t&&u(v)}else s(m)},[i,t,s,u]);return[l,f]}function ZD({defaultProp:t,onChange:e}){const n=O.useState(t),[r]=n,s=O.useRef(r),i=Ur(e);return O.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var JD="VisuallyHidden",Am=O.forwardRef((t,e)=>p.jsx(jt.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Am.displayName=JD;var eM=Am,Yv="ToastProvider",[Qv,tM,nM]=qv("Toast"),[r3,xQ]=ia("Toast",[nM]),[rM,Tm]=r3(Yv),s3=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:l}=t,[u,f]=O.useState(null),[m,w]=O.useState(0),v=O.useRef(!1),E=O.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Yv}\`. Expected non-empty \`string\`.`),p.jsx(Qv.Provider,{scope:e,children:p.jsx(rM,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:m,viewport:u,onViewportChange:f,onToastAdd:O.useCallback(()=>w(I=>I+1),[]),onToastRemove:O.useCallback(()=>w(I=>I-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:E,children:l})})};s3.displayName=Yv;var i3="ToastViewport",sM=["F8"],Fx="toast.viewportPause",jx="toast.viewportResume",o3=O.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=sM,label:s="Notifications ({hotkey})",...i}=t,l=Tm(i3,n),u=tM(n),f=O.useRef(null),m=O.useRef(null),w=O.useRef(null),v=O.useRef(null),E=pr(e,v,l.onViewportChange),I=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=l.toastCount>0;O.useEffect(()=>{const k=N=>{var S;r.length!==0&&r.every(V=>N[V]||N.code===V)&&((S=v.current)==null||S.focus())};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[r]),O.useEffect(()=>{const k=f.current,N=v.current;if(P&&k&&N){const T=()=>{if(!l.isClosePausedRef.current){const Y=new CustomEvent(Fx);N.dispatchEvent(Y),l.isClosePausedRef.current=!0}},S=()=>{if(l.isClosePausedRef.current){const Y=new CustomEvent(jx);N.dispatchEvent(Y),l.isClosePausedRef.current=!1}},V=Y=>{!k.contains(Y.relatedTarget)&&S()},$=()=>{k.contains(document.activeElement)||S()};return k.addEventListener("focusin",T),k.addEventListener("focusout",V),k.addEventListener("pointermove",T),k.addEventListener("pointerleave",$),window.addEventListener("blur",T),window.addEventListener("focus",S),()=>{k.removeEventListener("focusin",T),k.removeEventListener("focusout",V),k.removeEventListener("pointermove",T),k.removeEventListener("pointerleave",$),window.removeEventListener("blur",T),window.removeEventListener("focus",S)}}},[P,l.isClosePausedRef]);const C=O.useCallback(({tabbingDirection:k})=>{const T=u().map(S=>{const V=S.ref.current,$=[V,...yM(V)];return k==="forwards"?$:$.reverse()});return(k==="forwards"?T.reverse():T).flat()},[u]);return O.useEffect(()=>{const k=v.current;if(k){const N=T=>{var $,Y,M;const S=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!S){const j=document.activeElement,L=T.shiftKey;if(T.target===k&&L){($=m.current)==null||$.focus();return}const H=C({tabbingDirection:L?"backwards":"forwards"}),z=H.findIndex(de=>de===j);cy(H.slice(z+1))?T.preventDefault():L?(Y=m.current)==null||Y.focus():(M=w.current)==null||M.focus()}};return k.addEventListener("keydown",N),()=>k.removeEventListener("keydown",N)}},[u,C]),p.jsxs(qD,{ref:f,role:"region","aria-label":s.replace("{hotkey}",I),tabIndex:-1,style:{pointerEvents:P?void 0:"none"},children:[P&&p.jsx(Bx,{ref:m,onFocusFromOutsideViewport:()=>{const k=C({tabbingDirection:"forwards"});cy(k)}}),p.jsx(Qv.Slot,{scope:n,children:p.jsx(jt.ol,{tabIndex:-1,...i,ref:E})}),P&&p.jsx(Bx,{ref:w,onFocusFromOutsideViewport:()=>{const k=C({tabbingDirection:"backwards"});cy(k)}})]})});o3.displayName=i3;var a3="ToastFocusProxy",Bx=O.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Tm(a3,n);return p.jsx(Am,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:l=>{var m;const u=l.relatedTarget;!((m=i.viewport)!=null&&m.contains(u))&&r()}})});Bx.displayName=a3;var Im="Toast",iM="toast.swipeStart",oM="toast.swipeMove",aM="toast.swipeCancel",lM="toast.swipeEnd",l3=O.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...l}=t,[u=!0,f]=Qf({prop:r,defaultProp:s,onChange:i});return p.jsx(Cl,{present:n||u,children:p.jsx(dM,{open:u,...l,ref:e,onClose:()=>f(!1),onPause:Ur(t.onPause),onResume:Ur(t.onResume),onSwipeStart:Xe(t.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Xe(t.onSwipeMove,m=>{const{x:w,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${w}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:Xe(t.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Xe(t.onSwipeEnd,m=>{const{x:w,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${w}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),f(!1)})})})});l3.displayName=Im;var[cM,uM]=r3(Im,{onClose(){}}),dM=O.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:l,onEscapeKeyDown:u,onPause:f,onResume:m,onSwipeStart:w,onSwipeMove:v,onSwipeCancel:E,onSwipeEnd:I,...P}=t,C=Tm(Im,n),[k,N]=O.useState(null),T=pr(e,de=>N(de)),S=O.useRef(null),V=O.useRef(null),$=s||C.duration,Y=O.useRef(0),M=O.useRef($),j=O.useRef(0),{onToastAdd:L,onToastRemove:G}=C,X=Ur(()=>{var ee;(k==null?void 0:k.contains(document.activeElement))&&((ee=C.viewport)==null||ee.focus()),l()}),H=O.useCallback(de=>{!de||de===1/0||(window.clearTimeout(j.current),Y.current=new Date().getTime(),j.current=window.setTimeout(X,de))},[X]);O.useEffect(()=>{const de=C.viewport;if(de){const ee=()=>{H(M.current),m==null||m()},xe=()=>{const we=new Date().getTime()-Y.current;M.current=M.current-we,window.clearTimeout(j.current),f==null||f()};return de.addEventListener(Fx,xe),de.addEventListener(jx,ee),()=>{de.removeEventListener(Fx,xe),de.removeEventListener(jx,ee)}}},[C.viewport,$,f,m,H]),O.useEffect(()=>{i&&!C.isClosePausedRef.current&&H($)},[i,$,C.isClosePausedRef,H]),O.useEffect(()=>(L(),()=>G()),[L,G]);const z=O.useMemo(()=>k?m3(k):null,[k]);return C.viewport?p.jsxs(p.Fragment,{children:[z&&p.jsx(hM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),p.jsx(cM,{scope:n,onClose:X,children:Xf.createPortal(p.jsx(Qv.ItemSlot,{scope:n,children:p.jsx($D,{asChild:!0,onEscapeKeyDown:Xe(u,()=>{C.isFocusedToastEscapeKeyDownRef.current||X(),C.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(jt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":C.swipeDirection,...P,ref:T,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Xe(t.onKeyDown,de=>{de.key==="Escape"&&(u==null||u(de.nativeEvent),de.nativeEvent.defaultPrevented||(C.isFocusedToastEscapeKeyDownRef.current=!0,X()))}),onPointerDown:Xe(t.onPointerDown,de=>{de.button===0&&(S.current={x:de.clientX,y:de.clientY})}),onPointerMove:Xe(t.onPointerMove,de=>{if(!S.current)return;const ee=de.clientX-S.current.x,xe=de.clientY-S.current.y,we=!!V.current,oe=["left","right"].includes(C.swipeDirection),ue=["left","up"].includes(C.swipeDirection)?Math.min:Math.max,Ie=oe?ue(0,ee):0,Ge=oe?0:ue(0,xe),He=de.pointerType==="touch"?10:2,at={x:Ie,y:Ge},_t={originalEvent:de,delta:at};we?(V.current=at,Z0(oM,v,_t,{discrete:!1})):_b(at,C.swipeDirection,He)?(V.current=at,Z0(iM,w,_t,{discrete:!1}),de.target.setPointerCapture(de.pointerId)):(Math.abs(ee)>He||Math.abs(xe)>He)&&(S.current=null)}),onPointerUp:Xe(t.onPointerUp,de=>{const ee=V.current,xe=de.target;if(xe.hasPointerCapture(de.pointerId)&&xe.releasePointerCapture(de.pointerId),V.current=null,S.current=null,ee){const we=de.currentTarget,oe={originalEvent:de,delta:ee};_b(ee,C.swipeDirection,C.swipeThreshold)?Z0(lM,I,oe,{discrete:!0}):Z0(aM,E,oe,{discrete:!0}),we.addEventListener("click",ue=>ue.preventDefault(),{once:!0})}})})})}),C.viewport)})]}):null}),hM=t=>{const{__scopeToast:e,children:n,...r}=t,s=Tm(Im,e),[i,l]=O.useState(!1),[u,f]=O.useState(!1);return mM(()=>l(!0)),O.useEffect(()=>{const m=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(m)},[]),u?null:p.jsx(Xv,{asChild:!0,children:p.jsx(Am,{...r,children:i&&p.jsxs(p.Fragment,{children:[s.label," ",n]})})})},fM="ToastTitle",c3=O.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(jt.div,{...r,ref:e})});c3.displayName=fM;var gM="ToastDescription",u3=O.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(jt.div,{...r,ref:e})});u3.displayName=gM;var d3="ToastAction",h3=O.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?p.jsx(g3,{altText:n,asChild:!0,children:p.jsx(Zv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${d3}\`. Expected non-empty \`string\`.`),null)});h3.displayName=d3;var f3="ToastClose",Zv=O.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=uM(f3,n);return p.jsx(g3,{asChild:!0,children:p.jsx(jt.button,{type:"button",...r,ref:e,onClick:Xe(t.onClick,s.onClose)})})});Zv.displayName=f3;var g3=O.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return p.jsx(jt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function m3(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),pM(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const l=r.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...m3(r))}}),e}function Z0(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Kv(s,i):s.dispatchEvent(i)}var _b=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function mM(t=()=>{}){const e=Ur(t);ki(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function pM(t){return t.nodeType===t.ELEMENT_NODE}function yM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function cy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var xM=s3,p3=o3,y3=l3,x3=c3,w3=u3,v3=h3,_3=Zv;function E3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=E3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function b3(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=E3(t))&&(r&&(r+=" "),r+=e);return r}const Eb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,bb=b3,Zf=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return bb(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,l=Object.keys(s).map(m=>{const w=n==null?void 0:n[m],v=i==null?void 0:i[m];if(w===null)return null;const E=Eb(w)||Eb(v);return s[m][E]}),u=n&&Object.entries(n).reduce((m,w)=>{let[v,E]=w;return E===void 0||(m[v]=E),m},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,w)=>{let{class:v,className:E,...I}=w;return Object.entries(I).every(P=>{let[C,k]=P;return Array.isArray(k)?k.includes({...i,...u}[C]):{...i,...u}[C]===k})?[...m,v,E]:m},[]);return bb(t,l,f,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),C3=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:l,...u},f)=>O.createElement("svg",{ref:f,...vM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:C3("lucide",s),...u},[...l.map(([m,w])=>O.createElement(m,w)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=(t,e)=>{const n=O.forwardRef(({className:r,...s},i)=>O.createElement(_M,{ref:i,iconNode:e,className:C3(`lucide-${wM(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=vt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=vt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=vt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=vt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=vt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=vt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=vt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=vt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=vt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=vt("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=vt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=vt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=vt("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=vt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=vt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=vt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=vt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=vt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=vt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=vt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=vt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=vt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=vt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=vt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=vt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=vt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=vt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=vt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=vt("StarHalf",[["path",{d:"M12 17.8 5.8 21 7 14.1 2 9.3l7-1L12 2",key:"nare05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=vt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=vt("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=vt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=vt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=vt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=vt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=vt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=vt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),r2="-",zM=t=>{const e=WM(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{const u=l.split(r2);return u[0]===""&&u.length!==1&&u.shift(),R3(u,e)||HM(l)},getConflictingClassGroupIds:(l,u)=>{const f=n[l]||[];return u&&r[l]?[...f,...r[l]]:f}}},R3=(t,e)=>{var l;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?R3(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(r2);return(l=e.validators.find(({validator:u})=>u(i)))==null?void 0:l.classGroupId},Tb=/^\[(.+)\]$/,HM=t=>{if(Tb.test(t)){const e=Tb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},WM=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return $M(Object.entries(t.classGroups),n).forEach(([i,l])=>{Ux(l,r,i,e)}),r},Ux=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Ib(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(GM(s)){Ux(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,l])=>{Ux(l,Ib(e,i),n,r)})})},Ib=(t,e)=>{let n=t;return e.split(r2).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},GM=t=>t.isThemeGetter,$M=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,u])=>[e+l,u])):i);return[n,s]}):t,qM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,l)=>{n.set(i,l),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let l=n.get(i);if(l!==void 0)return l;if((l=r.get(i))!==void 0)return s(i,l),l},set(i,l){n.has(i)?n.set(i,l):s(i,l)}}},k3="!",KM=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,l=u=>{const f=[];let m=0,w=0,v;for(let k=0;k<u.length;k++){let N=u[k];if(m===0){if(N===s&&(r||u.slice(k,k+i)===e)){f.push(u.slice(w,k)),w=k+i;continue}if(N==="/"){v=k;continue}}N==="["?m++:N==="]"&&m--}const E=f.length===0?u:u.substring(w),I=E.startsWith(k3),P=I?E.substring(1):E,C=v&&v>w?v-w:void 0;return{modifiers:f,hasImportantModifier:I,baseClassName:P,maybePostfixModifierPosition:C}};return n?u=>n({className:u,parseClassName:l}):l},XM=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},YM=t=>({cache:qM(t.cacheSize),parseClassName:KM(t),...zM(t)}),QM=/\s+/,ZM=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],l=t.trim().split(QM);let u="";for(let f=l.length-1;f>=0;f-=1){const m=l[f],{modifiers:w,hasImportantModifier:v,baseClassName:E,maybePostfixModifierPosition:I}=n(m);let P=!!I,C=r(P?E.substring(0,I):E);if(!C){if(!P){u=m+(u.length>0?" "+u:u);continue}if(C=r(E),!C){u=m+(u.length>0?" "+u:u);continue}P=!1}const k=XM(w).join(":"),N=v?k+k3:k,T=N+C;if(i.includes(T))continue;i.push(T);const S=s(C,P);for(let V=0;V<S.length;++V){const $=S[V];i.push(N+$)}u=m+(u.length>0?" "+u:u)}return u};function JM(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=P3(e))&&(r&&(r+=" "),r+=n);return r}const P3=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=P3(t[r]))&&(n&&(n+=" "),n+=e);return n};function e9(t,...e){let n,r,s,i=l;function l(f){const m=e.reduce((w,v)=>v(w),t());return n=YM(m),r=n.cache.get,s=n.cache.set,i=u,u(f)}function u(f){const m=r(f);if(m)return m;const w=ZM(f,n);return s(f,w),w}return function(){return i(JM.apply(null,arguments))}}const hn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},O3=/^\[(?:([a-z-]+):)?(.+)\]$/i,t9=/^\d+\/\d+$/,n9=new Set(["px","full","screen"]),r9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,s9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,i9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,o9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,a9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ro=t=>Au(t)||n9.has(t)||t9.test(t),pa=t=>Cd(t,"length",m9),Au=t=>!!t&&!Number.isNaN(Number(t)),uy=t=>Cd(t,"number",Au),Qd=t=>!!t&&Number.isInteger(Number(t)),l9=t=>t.endsWith("%")&&Au(t.slice(0,-1)),ft=t=>O3.test(t),ya=t=>r9.test(t),c9=new Set(["length","size","percentage"]),u9=t=>Cd(t,c9,D3),d9=t=>Cd(t,"position",D3),h9=new Set(["image","url"]),f9=t=>Cd(t,h9,y9),g9=t=>Cd(t,"",p9),Zd=()=>!0,Cd=(t,e,n)=>{const r=O3.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},m9=t=>s9.test(t)&&!i9.test(t),D3=()=>!1,p9=t=>o9.test(t),y9=t=>a9.test(t),x9=()=>{const t=hn("colors"),e=hn("spacing"),n=hn("blur"),r=hn("brightness"),s=hn("borderColor"),i=hn("borderRadius"),l=hn("borderSpacing"),u=hn("borderWidth"),f=hn("contrast"),m=hn("grayscale"),w=hn("hueRotate"),v=hn("invert"),E=hn("gap"),I=hn("gradientColorStops"),P=hn("gradientColorStopPositions"),C=hn("inset"),k=hn("margin"),N=hn("opacity"),T=hn("padding"),S=hn("saturate"),V=hn("scale"),$=hn("sepia"),Y=hn("skew"),M=hn("space"),j=hn("translate"),L=()=>["auto","contain","none"],G=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto",ft,e],H=()=>[ft,e],z=()=>["",Ro,pa],de=()=>["auto",Au,ft],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],xe=()=>["solid","dashed","dotted","double","none"],we=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>["start","end","center","between","around","evenly","stretch"],ue=()=>["","0",ft],Ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ge=()=>[Au,ft];return{cacheSize:500,separator:":",theme:{colors:[Zd],spacing:[Ro,pa],blur:["none","",ya,ft],brightness:Ge(),borderColor:[t],borderRadius:["none","","full",ya,ft],borderSpacing:H(),borderWidth:z(),contrast:Ge(),grayscale:ue(),hueRotate:Ge(),invert:ue(),gap:H(),gradientColorStops:[t],gradientColorStopPositions:[l9,pa],inset:X(),margin:X(),opacity:Ge(),padding:H(),saturate:Ge(),scale:Ge(),sepia:ue(),skew:Ge(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",ft]}],container:["container"],columns:[{columns:[ya]}],"break-after":[{"break-after":Ie()}],"break-before":[{"break-before":Ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),ft]}],overflow:[{overflow:G()}],"overflow-x":[{"overflow-x":G()}],"overflow-y":[{"overflow-y":G()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qd,ft]}],basis:[{basis:X()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ft]}],grow:[{grow:ue()}],shrink:[{shrink:ue()}],order:[{order:["first","last","none",Qd,ft]}],"grid-cols":[{"grid-cols":[Zd]}],"col-start-end":[{col:["auto",{span:["full",Qd,ft]},ft]}],"col-start":[{"col-start":de()}],"col-end":[{"col-end":de()}],"grid-rows":[{"grid-rows":[Zd]}],"row-start-end":[{row:["auto",{span:[Qd,ft]},ft]}],"row-start":[{"row-start":de()}],"row-end":[{"row-end":de()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ft]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ft]}],gap:[{gap:[E]}],"gap-x":[{"gap-x":[E]}],"gap-y":[{"gap-y":[E]}],"justify-content":[{justify:["normal",...oe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...oe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...oe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ft,e]}],"min-w":[{"min-w":[ft,e,"min","max","fit"]}],"max-w":[{"max-w":[ft,e,"none","full","min","max","fit","prose",{screen:[ya]},ya]}],h:[{h:[ft,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ft,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ft,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ft,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ya,pa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",uy]}],"font-family":[{font:[Zd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ft]}],"line-clamp":[{"line-clamp":["none",Au,uy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ro,ft]}],"list-image":[{"list-image":["none",ft]}],"list-style-type":[{list:["none","disc","decimal",ft]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...xe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ro,pa]}],"underline-offset":[{"underline-offset":["auto",Ro,ft]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),d9]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",u9]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},f9]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[P]}],"gradient-via-pos":[{via:[P]}],"gradient-to-pos":[{to:[P]}],"gradient-from":[{from:[I]}],"gradient-via":[{via:[I]}],"gradient-to":[{to:[I]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...xe(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:xe()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...xe()]}],"outline-offset":[{"outline-offset":[Ro,ft]}],"outline-w":[{outline:[Ro,pa]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[Ro,pa]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ya,g9]}],"shadow-color":[{shadow:[Zd]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...we(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":we()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",ya,ft]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[w]}],invert:[{invert:[v]}],saturate:[{saturate:[S]}],sepia:[{sepia:[$]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[w]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[$]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ft]}],duration:[{duration:Ge()}],ease:[{ease:["linear","in","out","in-out",ft]}],delay:[{delay:Ge()}],animate:[{animate:["none","spin","ping","pulse","bounce",ft]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[V]}],"scale-x":[{"scale-x":[V]}],"scale-y":[{"scale-y":[V]}],rotate:[{rotate:[Qd,ft]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[Y]}],"skew-y":[{"skew-y":[Y]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ft]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ft]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ft]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ro,pa,uy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},w9=e9(x9);function mt(...t){return w9(b3(t))}const v9=xM,M3=O.forwardRef(({className:t,...e},n)=>p.jsx(p3,{ref:n,className:mt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));M3.displayName=p3.displayName;const _9=Zf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),L3=O.forwardRef(({className:t,variant:e,...n},r)=>p.jsx(y3,{ref:r,className:mt(_9({variant:e}),t),...n}));L3.displayName=y3.displayName;const E9=O.forwardRef(({className:t,...e},n)=>p.jsx(v3,{ref:n,className:mt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));E9.displayName=v3.displayName;const F3=O.forwardRef(({className:t,...e},n)=>p.jsx(_3,{ref:n,className:mt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(N3,{className:"h-4 w-4"})}));F3.displayName=_3.displayName;const j3=O.forwardRef(({className:t,...e},n)=>p.jsx(x3,{ref:n,className:mt("text-sm font-semibold",t),...e}));j3.displayName=x3.displayName;const B3=O.forwardRef(({className:t,...e},n)=>p.jsx(w3,{ref:n,className:mt("text-sm opacity-90",t),...e}));B3.displayName=w3.displayName;function b9(){const{toasts:t}=ci();return p.jsxs(v9,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return p.jsxs(L3,{...i,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(j3,{children:n}),r&&p.jsx(B3,{children:r})]}),s,p.jsx(F3,{})]},e)}),p.jsx(M3,{})]})}var C9=jT[" useId ".trim().toString()]||(()=>{}),A9=0;function tf(t){const[e,n]=O.useState(C9());return ki(()=>{t||n(r=>r??String(A9++))},[t]),t||(e?`radix-${e}`:"")}const T9=["top","right","bottom","left"],nl=Math.min,Os=Math.max,pg=Math.round,J0=Math.floor,io=t=>({x:t,y:t}),I9={left:"right",right:"left",bottom:"top",top:"bottom"},S9={start:"end",end:"start"};function zx(t,e,n){return Os(t,nl(e,n))}function Qo(t,e){return typeof t=="function"?t(e):t}function Zo(t){return t.split("-")[0]}function Ad(t){return t.split("-")[1]}function s2(t){return t==="x"?"y":"x"}function i2(t){return t==="y"?"height":"width"}function rl(t){return["top","bottom"].includes(Zo(t))?"y":"x"}function o2(t){return s2(rl(t))}function N9(t,e,n){n===void 0&&(n=!1);const r=Ad(t),s=o2(t),i=i2(s);let l=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=yg(l)),[l,yg(l)]}function R9(t){const e=yg(t);return[Hx(t),e,Hx(e)]}function Hx(t){return t.replace(/start|end/g,e=>S9[e])}function k9(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:l;default:return[]}}function P9(t,e,n,r){const s=Ad(t);let i=k9(Zo(t),n==="start",r);return s&&(i=i.map(l=>l+"-"+s),e&&(i=i.concat(i.map(Hx)))),i}function yg(t){return t.replace(/left|right|bottom|top/g,e=>I9[e])}function O9(t){return{top:0,right:0,bottom:0,left:0,...t}}function V3(t){return typeof t!="number"?O9(t):{top:t,right:t,bottom:t,left:t}}function xg(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Sb(t,e,n){let{reference:r,floating:s}=t;const i=rl(e),l=o2(e),u=i2(l),f=Zo(e),m=i==="y",w=r.x+r.width/2-s.width/2,v=r.y+r.height/2-s.height/2,E=r[u]/2-s[u]/2;let I;switch(f){case"top":I={x:w,y:r.y-s.height};break;case"bottom":I={x:w,y:r.y+r.height};break;case"right":I={x:r.x+r.width,y:v};break;case"left":I={x:r.x-s.width,y:v};break;default:I={x:r.x,y:r.y}}switch(Ad(e)){case"start":I[l]-=E*(n&&m?-1:1);break;case"end":I[l]+=E*(n&&m?-1:1);break}return I}const D9=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:l}=n,u=i.filter(Boolean),f=await(l.isRTL==null?void 0:l.isRTL(e));let m=await l.getElementRects({reference:t,floating:e,strategy:s}),{x:w,y:v}=Sb(m,r,f),E=r,I={},P=0;for(let C=0;C<u.length;C++){const{name:k,fn:N}=u[C],{x:T,y:S,data:V,reset:$}=await N({x:w,y:v,initialPlacement:r,placement:E,strategy:s,middlewareData:I,rects:m,platform:l,elements:{reference:t,floating:e}});w=T??w,v=S??v,I={...I,[k]:{...I[k],...V}},$&&P<=50&&(P++,typeof $=="object"&&($.placement&&(E=$.placement),$.rects&&(m=$.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:s}):$.rects),{x:w,y:v}=Sb(m,E,f)),C=-1)}return{x:w,y:v,placement:E,strategy:s,middlewareData:I}};async function nf(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:l,elements:u,strategy:f}=t,{boundary:m="clippingAncestors",rootBoundary:w="viewport",elementContext:v="floating",altBoundary:E=!1,padding:I=0}=Qo(e,t),P=V3(I),k=u[E?v==="floating"?"reference":"floating":v],N=xg(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(k)))==null||n?k:k.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:m,rootBoundary:w,strategy:f})),T=v==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),V=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},$=xg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:T,offsetParent:S,strategy:f}):T);return{top:(N.top-$.top+P.top)/V.y,bottom:($.bottom-N.bottom+P.bottom)/V.y,left:(N.left-$.left+P.left)/V.x,right:($.right-N.right+P.right)/V.x}}const M9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:l,elements:u,middlewareData:f}=e,{element:m,padding:w=0}=Qo(t,e)||{};if(m==null)return{};const v=V3(w),E={x:n,y:r},I=o2(s),P=i2(I),C=await l.getDimensions(m),k=I==="y",N=k?"top":"left",T=k?"bottom":"right",S=k?"clientHeight":"clientWidth",V=i.reference[P]+i.reference[I]-E[I]-i.floating[P],$=E[I]-i.reference[I],Y=await(l.getOffsetParent==null?void 0:l.getOffsetParent(m));let M=Y?Y[S]:0;(!M||!await(l.isElement==null?void 0:l.isElement(Y)))&&(M=u.floating[S]||i.floating[P]);const j=V/2-$/2,L=M/2-C[P]/2-1,G=nl(v[N],L),X=nl(v[T],L),H=G,z=M-C[P]-X,de=M/2-C[P]/2+j,ee=zx(H,de,z),xe=!f.arrow&&Ad(s)!=null&&de!==ee&&i.reference[P]/2-(de<H?G:X)-C[P]/2<0,we=xe?de<H?de-H:de-z:0;return{[I]:E[I]+we,data:{[I]:ee,centerOffset:de-ee-we,...xe&&{alignmentOffset:we}},reset:xe}}}),L9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:l,initialPlacement:u,platform:f,elements:m}=e,{mainAxis:w=!0,crossAxis:v=!0,fallbackPlacements:E,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:P="none",flipAlignment:C=!0,...k}=Qo(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const N=Zo(s),T=rl(u),S=Zo(u)===u,V=await(f.isRTL==null?void 0:f.isRTL(m.floating)),$=E||(S||!C?[yg(u)]:R9(u)),Y=P!=="none";!E&&Y&&$.push(...P9(u,C,P,V));const M=[u,...$],j=await nf(e,k),L=[];let G=((r=i.flip)==null?void 0:r.overflows)||[];if(w&&L.push(j[N]),v){const de=N9(s,l,V);L.push(j[de[0]],j[de[1]])}if(G=[...G,{placement:s,overflows:L}],!L.every(de=>de<=0)){var X,H;const de=(((X=i.flip)==null?void 0:X.index)||0)+1,ee=M[de];if(ee)return{data:{index:de,overflows:G},reset:{placement:ee}};let xe=(H=G.filter(we=>we.overflows[0]<=0).sort((we,oe)=>we.overflows[1]-oe.overflows[1])[0])==null?void 0:H.placement;if(!xe)switch(I){case"bestFit":{var z;const we=(z=G.filter(oe=>{if(Y){const ue=rl(oe.placement);return ue===T||ue==="y"}return!0}).map(oe=>[oe.placement,oe.overflows.filter(ue=>ue>0).reduce((ue,Ie)=>ue+Ie,0)]).sort((oe,ue)=>oe[1]-ue[1])[0])==null?void 0:z[0];we&&(xe=we);break}case"initialPlacement":xe=u;break}if(s!==xe)return{reset:{placement:xe}}}return{}}}};function Nb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Rb(t){return T9.some(e=>t[e]>=0)}const F9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Qo(t,e);switch(r){case"referenceHidden":{const i=await nf(e,{...s,elementContext:"reference"}),l=Nb(i,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Rb(l)}}}case"escaped":{const i=await nf(e,{...s,altBoundary:!0}),l=Nb(i,n.floating);return{data:{escapedOffsets:l,escaped:Rb(l)}}}default:return{}}}}};async function j9(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=Zo(n),u=Ad(n),f=rl(n)==="y",m=["left","top"].includes(l)?-1:1,w=i&&f?-1:1,v=Qo(e,t);let{mainAxis:E,crossAxis:I,alignmentAxis:P}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return u&&typeof P=="number"&&(I=u==="end"?P*-1:P),f?{x:I*w,y:E*m}:{x:E*m,y:I*w}}const B9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:l,middlewareData:u}=e,f=await j9(e,t);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+f.x,y:i+f.y,data:{...f,placement:l}}}}},V9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:l=!1,limiter:u={fn:k=>{let{x:N,y:T}=k;return{x:N,y:T}}},...f}=Qo(t,e),m={x:n,y:r},w=await nf(e,f),v=rl(Zo(s)),E=s2(v);let I=m[E],P=m[v];if(i){const k=E==="y"?"top":"left",N=E==="y"?"bottom":"right",T=I+w[k],S=I-w[N];I=zx(T,I,S)}if(l){const k=v==="y"?"top":"left",N=v==="y"?"bottom":"right",T=P+w[k],S=P-w[N];P=zx(T,P,S)}const C=u.fn({...e,[E]:I,[v]:P});return{...C,data:{x:C.x-n,y:C.y-r,enabled:{[E]:i,[v]:l}}}}}},U9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:l}=e,{offset:u=0,mainAxis:f=!0,crossAxis:m=!0}=Qo(t,e),w={x:n,y:r},v=rl(s),E=s2(v);let I=w[E],P=w[v];const C=Qo(u,e),k=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(f){const S=E==="y"?"height":"width",V=i.reference[E]-i.floating[S]+k.mainAxis,$=i.reference[E]+i.reference[S]-k.mainAxis;I<V?I=V:I>$&&(I=$)}if(m){var N,T;const S=E==="y"?"width":"height",V=["top","left"].includes(Zo(s)),$=i.reference[v]-i.floating[S]+(V&&((N=l.offset)==null?void 0:N[v])||0)+(V?0:k.crossAxis),Y=i.reference[v]+i.reference[S]+(V?0:((T=l.offset)==null?void 0:T[v])||0)-(V?k.crossAxis:0);P<$?P=$:P>Y&&(P=Y)}return{[E]:I,[v]:P}}}},z9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:l,elements:u}=e,{apply:f=()=>{},...m}=Qo(t,e),w=await nf(e,m),v=Zo(s),E=Ad(s),I=rl(s)==="y",{width:P,height:C}=i.floating;let k,N;v==="top"||v==="bottom"?(k=v,N=E===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(N=v,k=E==="end"?"top":"bottom");const T=C-w.top-w.bottom,S=P-w.left-w.right,V=nl(C-w[k],T),$=nl(P-w[N],S),Y=!e.middlewareData.shift;let M=V,j=$;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(j=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(M=T),Y&&!E){const G=Os(w.left,0),X=Os(w.right,0),H=Os(w.top,0),z=Os(w.bottom,0);I?j=P-2*(G!==0||X!==0?G+X:Os(w.left,w.right)):M=C-2*(H!==0||z!==0?H+z:Os(w.top,w.bottom))}await f({...e,availableWidth:j,availableHeight:M});const L=await l.getDimensions(u.floating);return P!==L.width||C!==L.height?{reset:{rects:!0}}:{}}}};function Sm(){return typeof window<"u"}function Td(t){return U3(t)?(t.nodeName||"").toLowerCase():"#document"}function js(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function wo(t){var e;return(e=(U3(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function U3(t){return Sm()?t instanceof Node||t instanceof js(t).Node:!1}function Pi(t){return Sm()?t instanceof Element||t instanceof js(t).Element:!1}function mo(t){return Sm()?t instanceof HTMLElement||t instanceof js(t).HTMLElement:!1}function kb(t){return!Sm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof js(t).ShadowRoot}function Jf(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Oi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function H9(t){return["table","td","th"].includes(Td(t))}function Nm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function a2(t){const e=l2(),n=Pi(t)?Oi(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function W9(t){let e=sl(t);for(;mo(e)&&!td(e);){if(a2(e))return e;if(Nm(e))return null;e=sl(e)}return null}function l2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function td(t){return["html","body","#document"].includes(Td(t))}function Oi(t){return js(t).getComputedStyle(t)}function Rm(t){return Pi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function sl(t){if(Td(t)==="html")return t;const e=t.assignedSlot||t.parentNode||kb(t)&&t.host||wo(t);return kb(e)?e.host:e}function z3(t){const e=sl(t);return td(e)?t.ownerDocument?t.ownerDocument.body:t.body:mo(e)&&Jf(e)?e:z3(e)}function rf(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=z3(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),l=js(s);if(i){const u=Wx(l);return e.concat(l,l.visualViewport||[],Jf(s)?s:[],u&&n?rf(u):[])}return e.concat(s,rf(s,[],n))}function Wx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function H3(t){const e=Oi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=mo(t),i=s?t.offsetWidth:n,l=s?t.offsetHeight:r,u=pg(n)!==i||pg(r)!==l;return u&&(n=i,r=l),{width:n,height:r,$:u}}function c2(t){return Pi(t)?t:t.contextElement}function Tu(t){const e=c2(t);if(!mo(e))return io(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=H3(e);let l=(i?pg(n.width):n.width)/r,u=(i?pg(n.height):n.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const G9=io(0);function W3(t){const e=js(t);return!l2()||!e.visualViewport?G9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function $9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==js(t)?!1:e}function xc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=c2(t);let l=io(1);e&&(r?Pi(r)&&(l=Tu(r)):l=Tu(t));const u=$9(i,n,r)?W3(i):io(0);let f=(s.left+u.x)/l.x,m=(s.top+u.y)/l.y,w=s.width/l.x,v=s.height/l.y;if(i){const E=js(i),I=r&&Pi(r)?js(r):r;let P=E,C=Wx(P);for(;C&&r&&I!==P;){const k=Tu(C),N=C.getBoundingClientRect(),T=Oi(C),S=N.left+(C.clientLeft+parseFloat(T.paddingLeft))*k.x,V=N.top+(C.clientTop+parseFloat(T.paddingTop))*k.y;f*=k.x,m*=k.y,w*=k.x,v*=k.y,f+=S,m+=V,P=js(C),C=Wx(P)}}return xg({width:w,height:v,x:f,y:m})}function u2(t,e){const n=Rm(t).scrollLeft;return e?e.left+n:xc(wo(t)).left+n}function G3(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:u2(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function q9(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",l=wo(r),u=e?Nm(e.floating):!1;if(r===l||u&&i)return n;let f={scrollLeft:0,scrollTop:0},m=io(1);const w=io(0),v=mo(r);if((v||!v&&!i)&&((Td(r)!=="body"||Jf(l))&&(f=Rm(r)),mo(r))){const I=xc(r);m=Tu(r),w.x=I.x+r.clientLeft,w.y=I.y+r.clientTop}const E=l&&!v&&!i?G3(l,f,!0):io(0);return{width:n.width*m.x,height:n.height*m.y,x:n.x*m.x-f.scrollLeft*m.x+w.x+E.x,y:n.y*m.y-f.scrollTop*m.y+w.y+E.y}}function K9(t){return Array.from(t.getClientRects())}function X9(t){const e=wo(t),n=Rm(t),r=t.ownerDocument.body,s=Os(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Os(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+u2(t);const u=-n.scrollTop;return Oi(r).direction==="rtl"&&(l+=Os(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:l,y:u}}function Y9(t,e){const n=js(t),r=wo(t),s=n.visualViewport;let i=r.clientWidth,l=r.clientHeight,u=0,f=0;if(s){i=s.width,l=s.height;const m=l2();(!m||m&&e==="fixed")&&(u=s.offsetLeft,f=s.offsetTop)}return{width:i,height:l,x:u,y:f}}function Q9(t,e){const n=xc(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=mo(t)?Tu(t):io(1),l=t.clientWidth*i.x,u=t.clientHeight*i.y,f=s*i.x,m=r*i.y;return{width:l,height:u,x:f,y:m}}function Pb(t,e,n){let r;if(e==="viewport")r=Y9(t,n);else if(e==="document")r=X9(wo(t));else if(Pi(e))r=Q9(e,n);else{const s=W3(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return xg(r)}function $3(t,e){const n=sl(t);return n===e||!Pi(n)||td(n)?!1:Oi(n).position==="fixed"||$3(n,e)}function Z9(t,e){const n=e.get(t);if(n)return n;let r=rf(t,[],!1).filter(u=>Pi(u)&&Td(u)!=="body"),s=null;const i=Oi(t).position==="fixed";let l=i?sl(t):t;for(;Pi(l)&&!td(l);){const u=Oi(l),f=a2(l);!f&&u.position==="fixed"&&(s=null),(i?!f&&!s:!f&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Jf(l)&&!f&&$3(t,l))?r=r.filter(w=>w!==l):s=u,l=sl(l)}return e.set(t,r),r}function J9(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const l=[...n==="clippingAncestors"?Nm(e)?[]:Z9(e,this._c):[].concat(n),r],u=l[0],f=l.reduce((m,w)=>{const v=Pb(e,w,s);return m.top=Os(v.top,m.top),m.right=nl(v.right,m.right),m.bottom=nl(v.bottom,m.bottom),m.left=Os(v.left,m.left),m},Pb(e,u,s));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function e7(t){const{width:e,height:n}=H3(t);return{width:e,height:n}}function t7(t,e,n){const r=mo(e),s=wo(e),i=n==="fixed",l=xc(t,!0,i,e);let u={scrollLeft:0,scrollTop:0};const f=io(0);if(r||!r&&!i)if((Td(e)!=="body"||Jf(s))&&(u=Rm(e)),r){const E=xc(e,!0,i,e);f.x=E.x+e.clientLeft,f.y=E.y+e.clientTop}else s&&(f.x=u2(s));const m=s&&!r&&!i?G3(s,u):io(0),w=l.left+u.scrollLeft-f.x-m.x,v=l.top+u.scrollTop-f.y-m.y;return{x:w,y:v,width:l.width,height:l.height}}function dy(t){return Oi(t).position==="static"}function Ob(t,e){if(!mo(t)||Oi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return wo(t)===n&&(n=n.ownerDocument.body),n}function q3(t,e){const n=js(t);if(Nm(t))return n;if(!mo(t)){let s=sl(t);for(;s&&!td(s);){if(Pi(s)&&!dy(s))return s;s=sl(s)}return n}let r=Ob(t,e);for(;r&&H9(r)&&dy(r);)r=Ob(r,e);return r&&td(r)&&dy(r)&&!a2(r)?n:r||W9(t)||n}const n7=async function(t){const e=this.getOffsetParent||q3,n=this.getDimensions,r=await n(t.floating);return{reference:t7(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function r7(t){return Oi(t).direction==="rtl"}const s7={convertOffsetParentRelativeRectToViewportRelativeRect:q9,getDocumentElement:wo,getClippingRect:J9,getOffsetParent:q3,getElementRects:n7,getClientRects:K9,getDimensions:e7,getScale:Tu,isElement:Pi,isRTL:r7};function K3(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function i7(t,e){let n=null,r;const s=wo(t);function i(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function l(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),i();const m=t.getBoundingClientRect(),{left:w,top:v,width:E,height:I}=m;if(u||e(),!E||!I)return;const P=J0(v),C=J0(s.clientWidth-(w+E)),k=J0(s.clientHeight-(v+I)),N=J0(w),S={rootMargin:-P+"px "+-C+"px "+-k+"px "+-N+"px",threshold:Os(0,nl(1,f))||1};let V=!0;function $(Y){const M=Y[0].intersectionRatio;if(M!==f){if(!V)return l();M?l(!1,M):r=setTimeout(()=>{l(!1,1e-7)},1e3)}M===1&&!K3(m,t.getBoundingClientRect())&&l(),V=!1}try{n=new IntersectionObserver($,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver($,S)}n.observe(t)}return l(!0),i}function o7(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,m=c2(t),w=s||i?[...m?rf(m):[],...rf(e)]:[];w.forEach(N=>{s&&N.addEventListener("scroll",n,{passive:!0}),i&&N.addEventListener("resize",n)});const v=m&&u?i7(m,n):null;let E=-1,I=null;l&&(I=new ResizeObserver(N=>{let[T]=N;T&&T.target===m&&I&&(I.unobserve(e),cancelAnimationFrame(E),E=requestAnimationFrame(()=>{var S;(S=I)==null||S.observe(e)})),n()}),m&&!f&&I.observe(m),I.observe(e));let P,C=f?xc(t):null;f&&k();function k(){const N=xc(t);C&&!K3(C,N)&&n(),C=N,P=requestAnimationFrame(k)}return n(),()=>{var N;w.forEach(T=>{s&&T.removeEventListener("scroll",n),i&&T.removeEventListener("resize",n)}),v==null||v(),(N=I)==null||N.disconnect(),I=null,f&&cancelAnimationFrame(P)}}const a7=B9,l7=V9,c7=L9,u7=z9,d7=F9,Db=M9,h7=U9,f7=(t,e,n)=>{const r=new Map,s={platform:s7,...n},i={...s.platform,_c:r};return D9(t,e,{...s,platform:i})};var N1=typeof document<"u"?O.useLayoutEffect:O.useEffect;function wg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!wg(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!wg(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function X3(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Mb(t,e){const n=X3(t);return Math.round(e*n)/n}function hy(t){const e=O.useRef(t);return N1(()=>{e.current=t}),e}function g7(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:l}={},transform:u=!0,whileElementsMounted:f,open:m}=t,[w,v]=O.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[E,I]=O.useState(r);wg(E,r)||I(r);const[P,C]=O.useState(null),[k,N]=O.useState(null),T=O.useCallback(oe=>{oe!==Y.current&&(Y.current=oe,C(oe))},[]),S=O.useCallback(oe=>{oe!==M.current&&(M.current=oe,N(oe))},[]),V=i||P,$=l||k,Y=O.useRef(null),M=O.useRef(null),j=O.useRef(w),L=f!=null,G=hy(f),X=hy(s),H=hy(m),z=O.useCallback(()=>{if(!Y.current||!M.current)return;const oe={placement:e,strategy:n,middleware:E};X.current&&(oe.platform=X.current),f7(Y.current,M.current,oe).then(ue=>{const Ie={...ue,isPositioned:H.current!==!1};de.current&&!wg(j.current,Ie)&&(j.current=Ie,Xf.flushSync(()=>{v(Ie)}))})},[E,e,n,X,H]);N1(()=>{m===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,v(oe=>({...oe,isPositioned:!1})))},[m]);const de=O.useRef(!1);N1(()=>(de.current=!0,()=>{de.current=!1}),[]),N1(()=>{if(V&&(Y.current=V),$&&(M.current=$),V&&$){if(G.current)return G.current(V,$,z);z()}},[V,$,z,G,L]);const ee=O.useMemo(()=>({reference:Y,floating:M,setReference:T,setFloating:S}),[T,S]),xe=O.useMemo(()=>({reference:V,floating:$}),[V,$]),we=O.useMemo(()=>{const oe={position:n,left:0,top:0};if(!xe.floating)return oe;const ue=Mb(xe.floating,w.x),Ie=Mb(xe.floating,w.y);return u?{...oe,transform:"translate("+ue+"px, "+Ie+"px)",...X3(xe.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ue,top:Ie}},[n,u,xe.floating,w.x,w.y]);return O.useMemo(()=>({...w,update:z,refs:ee,elements:xe,floatingStyles:we}),[w,z,ee,xe,we])}const m7=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Db({element:r.current,padding:s}).fn(n):{}:r?Db({element:r,padding:s}).fn(n):{}}}},p7=(t,e)=>({...a7(t),options:[t,e]}),y7=(t,e)=>({...l7(t),options:[t,e]}),x7=(t,e)=>({...h7(t),options:[t,e]}),w7=(t,e)=>({...c7(t),options:[t,e]}),v7=(t,e)=>({...u7(t),options:[t,e]}),_7=(t,e)=>({...d7(t),options:[t,e]}),E7=(t,e)=>({...m7(t),options:[t,e]});var b7="Arrow",Y3=O.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return p.jsx(jt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});Y3.displayName=b7;var C7=Y3;function A7(t){const[e,n]=O.useState(void 0);return ki(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let l,u;if("borderBoxSize"in i){const f=i.borderBoxSize,m=Array.isArray(f)?f[0]:f;l=m.inlineSize,u=m.blockSize}else l=t.offsetWidth,u=t.offsetHeight;n({width:l,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var d2="Popper",[Q3,km]=ia(d2),[T7,Z3]=Q3(d2),J3=t=>{const{__scopePopper:e,children:n}=t,[r,s]=O.useState(null);return p.jsx(T7,{scope:e,anchor:r,onAnchorChange:s,children:n})};J3.displayName=d2;var e4="PopperAnchor",t4=O.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=Z3(e4,n),l=O.useRef(null),u=pr(e,l);return O.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:p.jsx(jt.div,{...s,ref:u})});t4.displayName=e4;var h2="PopperContent",[I7,S7]=Q3(h2),n4=O.forwardRef((t,e)=>{var Zt,qt,yn,Jn,Jt,os;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:f=!0,collisionBoundary:m=[],collisionPadding:w=0,sticky:v="partial",hideWhenDetached:E=!1,updatePositionStrategy:I="optimized",onPlaced:P,...C}=t,k=Z3(h2,n),[N,T]=O.useState(null),S=pr(e,lt=>T(lt)),[V,$]=O.useState(null),Y=A7(V),M=(Y==null?void 0:Y.width)??0,j=(Y==null?void 0:Y.height)??0,L=r+(i!=="center"?"-"+i:""),G=typeof w=="number"?w:{top:0,right:0,bottom:0,left:0,...w},X=Array.isArray(m)?m:[m],H=X.length>0,z={padding:G,boundary:X.filter(R7),altBoundary:H},{refs:de,floatingStyles:ee,placement:xe,isPositioned:we,middlewareData:oe}=g7({strategy:"fixed",placement:L,whileElementsMounted:(...lt)=>o7(...lt,{animationFrame:I==="always"}),elements:{reference:k.anchor},middleware:[p7({mainAxis:s+j,alignmentAxis:l}),f&&y7({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?x7():void 0,...z}),f&&w7({...z}),v7({...z,apply:({elements:lt,rects:Rr,availableWidth:ur,availableHeight:_s})=>{const{width:xn,height:Lt}=Rr.reference,ct=lt.floating.style;ct.setProperty("--radix-popper-available-width",`${ur}px`),ct.setProperty("--radix-popper-available-height",`${_s}px`),ct.setProperty("--radix-popper-anchor-width",`${xn}px`),ct.setProperty("--radix-popper-anchor-height",`${Lt}px`)}}),V&&E7({element:V,padding:u}),k7({arrowWidth:M,arrowHeight:j}),E&&_7({strategy:"referenceHidden",...z})]}),[ue,Ie]=i4(xe),Ge=Ur(P);ki(()=>{we&&(Ge==null||Ge())},[we,Ge]);const He=(Zt=oe.arrow)==null?void 0:Zt.x,at=(qt=oe.arrow)==null?void 0:qt.y,_t=((yn=oe.arrow)==null?void 0:yn.centerOffset)!==0,[Vn,Oe]=O.useState();return ki(()=>{N&&Oe(window.getComputedStyle(N).zIndex)},[N]),p.jsx("div",{ref:de.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:we?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Vn,"--radix-popper-transform-origin":[(Jn=oe.transformOrigin)==null?void 0:Jn.x,(Jt=oe.transformOrigin)==null?void 0:Jt.y].join(" "),...((os=oe.hide)==null?void 0:os.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(I7,{scope:n,placedSide:ue,onArrowChange:$,arrowX:He,arrowY:at,shouldHideArrow:_t,children:p.jsx(jt.div,{"data-side":ue,"data-align":Ie,...C,ref:S,style:{...C.style,animation:we?void 0:"none"}})})})});n4.displayName=h2;var r4="PopperArrow",N7={top:"bottom",right:"left",bottom:"top",left:"right"},s4=O.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=S7(r4,r),l=N7[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(C7,{...s,ref:n,style:{...s.style,display:"block"}})})});s4.displayName=r4;function R7(t){return t!==null}var k7=t=>({name:"transformOrigin",options:t,fn(e){var k,N,T;const{placement:n,rects:r,middlewareData:s}=e,l=((k=s.arrow)==null?void 0:k.centerOffset)!==0,u=l?0:t.arrowWidth,f=l?0:t.arrowHeight,[m,w]=i4(n),v={start:"0%",center:"50%",end:"100%"}[w],E=(((N=s.arrow)==null?void 0:N.x)??0)+u/2,I=(((T=s.arrow)==null?void 0:T.y)??0)+f/2;let P="",C="";return m==="bottom"?(P=l?v:`${E}px`,C=`${-f}px`):m==="top"?(P=l?v:`${E}px`,C=`${r.floating.height+f}px`):m==="right"?(P=`${-f}px`,C=l?v:`${I}px`):m==="left"&&(P=`${r.floating.width+f}px`,C=l?v:`${I}px`),{data:{x:P,y:C}}}});function i4(t){const[e,n="center"]=t.split("-");return[e,n]}var o4=J3,a4=t4,l4=n4,c4=s4,[Pm,wQ]=ia("Tooltip",[km]),Om=km(),u4="TooltipProvider",P7=700,Gx="tooltip.open",[O7,f2]=Pm(u4),d4=t=>{const{__scopeTooltip:e,delayDuration:n=P7,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,l=O.useRef(!0),u=O.useRef(!1),f=O.useRef(0);return O.useEffect(()=>{const m=f.current;return()=>window.clearTimeout(m)},[]),p.jsx(O7,{scope:e,isOpenDelayedRef:l,delayDuration:n,onOpen:O.useCallback(()=>{window.clearTimeout(f.current),l.current=!1},[]),onClose:O.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>l.current=!0,r)},[r]),isPointerInTransitRef:u,onPointerInTransitChange:O.useCallback(m=>{u.current=m},[]),disableHoverableContent:s,children:i})};d4.displayName=u4;var Dm="Tooltip",[D7,Mm]=Pm(Dm),h4=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:l,delayDuration:u}=t,f=f2(Dm,t.__scopeTooltip),m=Om(e),[w,v]=O.useState(null),E=tf(),I=O.useRef(0),P=l??f.disableHoverableContent,C=u??f.delayDuration,k=O.useRef(!1),[N=!1,T]=Qf({prop:r,defaultProp:s,onChange:M=>{M?(f.onOpen(),document.dispatchEvent(new CustomEvent(Gx))):f.onClose(),i==null||i(M)}}),S=O.useMemo(()=>N?k.current?"delayed-open":"instant-open":"closed",[N]),V=O.useCallback(()=>{window.clearTimeout(I.current),I.current=0,k.current=!1,T(!0)},[T]),$=O.useCallback(()=>{window.clearTimeout(I.current),I.current=0,T(!1)},[T]),Y=O.useCallback(()=>{window.clearTimeout(I.current),I.current=window.setTimeout(()=>{k.current=!0,T(!0),I.current=0},C)},[C,T]);return O.useEffect(()=>()=>{I.current&&(window.clearTimeout(I.current),I.current=0)},[]),p.jsx(o4,{...m,children:p.jsx(D7,{scope:e,contentId:E,open:N,stateAttribute:S,trigger:w,onTriggerChange:v,onTriggerEnter:O.useCallback(()=>{f.isOpenDelayedRef.current?Y():V()},[f.isOpenDelayedRef,Y,V]),onTriggerLeave:O.useCallback(()=>{P?$():(window.clearTimeout(I.current),I.current=0)},[$,P]),onOpen:V,onClose:$,disableHoverableContent:P,children:n})})};h4.displayName=Dm;var $x="TooltipTrigger",f4=O.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Mm($x,n),i=f2($x,n),l=Om(n),u=O.useRef(null),f=pr(e,u,s.onTriggerChange),m=O.useRef(!1),w=O.useRef(!1),v=O.useCallback(()=>m.current=!1,[]);return O.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),p.jsx(a4,{asChild:!0,...l,children:p.jsx(jt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:f,onPointerMove:Xe(t.onPointerMove,E=>{E.pointerType!=="touch"&&!w.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),w.current=!0)}),onPointerLeave:Xe(t.onPointerLeave,()=>{s.onTriggerLeave(),w.current=!1}),onPointerDown:Xe(t.onPointerDown,()=>{s.open&&s.onClose(),m.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:Xe(t.onFocus,()=>{m.current||s.onOpen()}),onBlur:Xe(t.onBlur,s.onClose),onClick:Xe(t.onClick,s.onClose)})})});f4.displayName=$x;var M7="TooltipPortal",[vQ,L7]=Pm(M7,{forceMount:void 0}),nd="TooltipContent",g4=O.forwardRef((t,e)=>{const n=L7(nd,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,l=Mm(nd,t.__scopeTooltip);return p.jsx(Cl,{present:r||l.open,children:l.disableHoverableContent?p.jsx(m4,{side:s,...i,ref:e}):p.jsx(F7,{side:s,...i,ref:e})})}),F7=O.forwardRef((t,e)=>{const n=Mm(nd,t.__scopeTooltip),r=f2(nd,t.__scopeTooltip),s=O.useRef(null),i=pr(e,s),[l,u]=O.useState(null),{trigger:f,onClose:m}=n,w=s.current,{onPointerInTransitChange:v}=r,E=O.useCallback(()=>{u(null),v(!1)},[v]),I=O.useCallback((P,C)=>{const k=P.currentTarget,N={x:P.clientX,y:P.clientY},T=z7(N,k.getBoundingClientRect()),S=H7(N,T),V=W7(C.getBoundingClientRect()),$=$7([...S,...V]);u($),v(!0)},[v]);return O.useEffect(()=>()=>E(),[E]),O.useEffect(()=>{if(f&&w){const P=k=>I(k,w),C=k=>I(k,f);return f.addEventListener("pointerleave",P),w.addEventListener("pointerleave",C),()=>{f.removeEventListener("pointerleave",P),w.removeEventListener("pointerleave",C)}}},[f,w,I,E]),O.useEffect(()=>{if(l){const P=C=>{const k=C.target,N={x:C.clientX,y:C.clientY},T=(f==null?void 0:f.contains(k))||(w==null?void 0:w.contains(k)),S=!G7(N,l);T?E():S&&(E(),m())};return document.addEventListener("pointermove",P),()=>document.removeEventListener("pointermove",P)}},[f,w,l,m,E]),p.jsx(m4,{...t,ref:i})}),[j7,B7]=Pm(Dm,{isInside:!1}),V7=DD("TooltipContent"),m4=O.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:l,...u}=t,f=Mm(nd,n),m=Om(n),{onClose:w}=f;return O.useEffect(()=>(document.addEventListener(Gx,w),()=>document.removeEventListener(Gx,w)),[w]),O.useEffect(()=>{if(f.trigger){const v=E=>{const I=E.target;I!=null&&I.contains(f.trigger)&&w()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[f.trigger,w]),p.jsx(Cm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:v=>v.preventDefault(),onDismiss:w,children:p.jsxs(l4,{"data-state":f.stateAttribute,...m,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(V7,{children:r}),p.jsx(j7,{scope:n,isInside:!0,children:p.jsx(eM,{id:f.contentId,role:"tooltip",children:s||r})})]})})});g4.displayName=nd;var p4="TooltipArrow",U7=O.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Om(n);return B7(p4,n).isInside?null:p.jsx(c4,{...s,...r,ref:e})});U7.displayName=p4;function z7(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function H7(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function W7(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function G7(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,l=e.length-1;i<e.length;l=i++){const u=e[i].x,f=e[i].y,m=e[l].x,w=e[l].y;f>r!=w>r&&n<(m-u)*(r-f)/(w-f)+u&&(s=!s)}return s}function $7(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),q7(e)}function q7(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],l=e[e.length-2];if((i.x-l.x)*(s.y-l.y)>=(i.y-l.y)*(s.x-l.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],l=n[n.length-2];if((i.x-l.x)*(s.y-l.y)>=(i.y-l.y)*(s.x-l.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var K7=d4,X7=h4,Y7=f4,y4=g4;const Q7=K7,sf=X7,of=Y7,rd=O.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(y4,{ref:r,sideOffset:e,className:mt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));rd.displayName=y4.displayName;const Z7=()=>{};var Lb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},J7=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],l=t[n++],u=t[n++],f=((s&7)<<18|(i&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const i=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|l&63)}}return e.join("")},w4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],l=s+1<t.length,u=l?t[s+1]:0,f=s+2<t.length,m=f?t[s+2]:0,w=i>>2,v=(i&3)<<4|u>>4;let E=(u&15)<<2|m>>6,I=m&63;f||(I=64,l||(E=64)),r.push(n[w],n[v],n[E],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(x4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):J7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||m==null||v==null)throw new eL;const E=i<<2|u>>4;if(r.push(E),m!==64){const I=u<<4&240|m>>2;if(r.push(I),v!==64){const P=m<<6&192|v;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tL=function(t){const e=x4(t);return w4.encodeByteArray(e,!0)},vg=function(t){return tL(t).replace(/\./g,"")},v4=function(t){try{return w4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=()=>nL().__FIREBASE_DEFAULTS__,sL=()=>{if(typeof process>"u"||typeof Lb>"u")return;const t=Lb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&v4(t[1]);return e&&JSON.parse(e)},Lm=()=>{try{return Z7()||rL()||sL()||iL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_4=t=>{var e,n;return(n=(e=Lm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},E4=t=>{const e=_4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},b4=()=>{var t;return(t=Lm())===null||t===void 0?void 0:t.config},C4=t=>{var e;return(e=Lm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){return t.endsWith(".cloudworkstations.dev")}async function g2(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vg(JSON.stringify(n)),vg(JSON.stringify(l)),""].join(".")}const Th={};function aL(){const t={prod:[],emulator:[]};for(const e of Object.keys(Th))Th[e]?t.emulator.push(e):t.prod.push(e);return t}function lL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Fb=!1;function Id(t,e){if(typeof window>"u"||typeof document>"u"||!Oc(window.location.host)||Th[t]===e||Th[t]||Fb)return;Th[t]=e;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",i=aL().prod.length>0;function l(){const E=document.getElementById(r);E&&E.remove()}function u(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,I){E.setAttribute("width","24"),E.setAttribute("id",I),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Fb=!0,l()},E}function w(E,I){E.setAttribute("id",I),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=lL(r),I=n("text"),P=document.getElementById(I)||document.createElement("span"),C=n("learnmore"),k=document.getElementById(C)||document.createElement("a"),N=n("preprendIcon"),T=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const S=E.element;u(S),w(k,C);const V=m();f(T,N),S.append(T,P,k,V),document.body.appendChild(S)}i?(P.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zr())}function uL(){var t;const e=(t=Lm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gL(){const t=zr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mL(){return!uL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pL(){try{return typeof indexedDB=="object"}catch{return!1}}function yL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL="FirebaseError";class vo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xL,Object.setPrototypeOf(this,vo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,e0.prototype.create)}}class e0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],l=i?wL(i,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new vo(s,u,r)}}function wL(t,e){return t.replace(vL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const vL=/\{\$([^}]+)}/g;function _L(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],l=e[s];if(jb(i)&&jb(l)){if(!wc(i,l))return!1}else if(i!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function jb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ah(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function EL(t,e){const n=new bL(t,e);return n.subscribe.bind(n)}class bL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=fy),s.error===void 0&&(s.error=fy),s.complete===void 0&&(s.complete=fy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t){return t&&t._delegate?t._delegate:t}class il{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IL(e))try{this.getOrInitializeService({instanceIdentifier:Gl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Gl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gl){return this.instances.has(e)}getOptions(e=Gl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const l=this.instances.get(s);return l&&e(l,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gl){return this.component?this.component.multipleInstances?e:Gl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TL(t){return t===Gl?void 0:t}function IL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ct||(Ct={}));const NL={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},RL=Ct.INFO,kL={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},PL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m2{constructor(e){this.name=e,this._logLevel=RL,this._logHandler=PL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const OL=(t,e)=>e.some(n=>t instanceof n);let Bb,Vb;function DL(){return Bb||(Bb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ML(){return Vb||(Vb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T4=new WeakMap,qx=new WeakMap,I4=new WeakMap,gy=new WeakMap,p2=new WeakMap;function LL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",l)},i=()=>{n(Xa(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&T4.set(n,t)}).catch(()=>{}),p2.set(e,t),e}function FL(t){if(qx.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",l),t.removeEventListener("abort",l)},i=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",l),t.addEventListener("abort",l)});qx.set(t,e)}let Kx={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qx.get(t);if(e==="objectStoreNames")return t.objectStoreNames||I4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jL(t){Kx=t(Kx)}function BL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(my(this),e,...n);return I4.set(r,e.sort?e.sort():[e]),Xa(r)}:ML().includes(t)?function(...e){return t.apply(my(this),e),Xa(T4.get(this))}:function(...e){return Xa(t.apply(my(this),e))}}function VL(t){return typeof t=="function"?BL(t):(t instanceof IDBTransaction&&FL(t),OL(t,DL())?new Proxy(t,Kx):t)}function Xa(t){if(t instanceof IDBRequest)return LL(t);if(gy.has(t))return gy.get(t);const e=VL(t);return e!==t&&(gy.set(t,e),p2.set(e,t)),e}const my=t=>p2.get(t);function UL(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const l=indexedDB.open(t,e),u=Xa(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Xa(l.result),f.oldVersion,f.newVersion,Xa(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),u.then(f=>{i&&f.addEventListener("close",()=>i()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const zL=["get","getKey","getAll","getAllKeys","count"],HL=["put","add","delete","clear"],py=new Map;function Ub(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(py.get(e))return py.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=HL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||zL.includes(n)))return;const i=async function(l,...u){const f=this.transaction(l,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(u.shift())),(await Promise.all([m[n](...u),s&&f.done]))[0]};return py.set(e,i),i}jL(t=>({...t,get:(e,n,r)=>Ub(e,n)||t.get(e,n,r),has:(e,n)=>!!Ub(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xx="@firebase/app",zb="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new m2("@firebase/app"),$L="@firebase/app-compat",qL="@firebase/analytics-compat",KL="@firebase/analytics",XL="@firebase/app-check-compat",YL="@firebase/app-check",QL="@firebase/auth",ZL="@firebase/auth-compat",JL="@firebase/database",eF="@firebase/data-connect",tF="@firebase/database-compat",nF="@firebase/functions",rF="@firebase/functions-compat",sF="@firebase/installations",iF="@firebase/installations-compat",oF="@firebase/messaging",aF="@firebase/messaging-compat",lF="@firebase/performance",cF="@firebase/performance-compat",uF="@firebase/remote-config",dF="@firebase/remote-config-compat",hF="@firebase/storage",fF="@firebase/storage-compat",gF="@firebase/firestore",mF="@firebase/vertexai",pF="@firebase/firestore-compat",yF="firebase",xF="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="[DEFAULT]",wF={[Xx]:"fire-core",[$L]:"fire-core-compat",[KL]:"fire-analytics",[qL]:"fire-analytics-compat",[YL]:"fire-app-check",[XL]:"fire-app-check-compat",[QL]:"fire-auth",[ZL]:"fire-auth-compat",[JL]:"fire-rtdb",[eF]:"fire-data-connect",[tF]:"fire-rtdb-compat",[nF]:"fire-fn",[rF]:"fire-fn-compat",[sF]:"fire-iid",[iF]:"fire-iid-compat",[oF]:"fire-fcm",[aF]:"fire-fcm-compat",[lF]:"fire-perf",[cF]:"fire-perf-compat",[uF]:"fire-rc",[dF]:"fire-rc-compat",[hF]:"fire-gcs",[fF]:"fire-gcs-compat",[gF]:"fire-fst",[pF]:"fire-fst-compat",[mF]:"fire-vertex","fire-js":"fire-js",[yF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new Map,vF=new Map,Qx=new Map;function Hb(t,e){try{t.container.addComponent(e)}catch(n){Jo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vc(t){const e=t.name;if(Qx.has(e))return Jo.debug(`There were multiple attempts to register component ${e}.`),!1;Qx.set(e,t);for(const n of af.values())Hb(n,t);for(const n of vF.values())Hb(n,t);return!0}function Fm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Jr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ya=new e0("app","Firebase",_F);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new il("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ya.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=xF;function y2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yx,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ya.create("bad-app-name",{appName:String(s)});if(n||(n=b4()),!n)throw Ya.create("no-options");const i=af.get(s);if(i){if(wc(n,i.options)&&wc(r,i.config))return i;throw Ya.create("duplicate-app",{appName:s})}const l=new SL(s);for(const f of Qx.values())l.addComponent(f);const u=new EF(n,r,l);return af.set(s,u),u}function n0(t=Yx){const e=af.get(t);if(!e&&t===Yx&&b4())return y2();if(!e)throw Ya.create("no-app",{appName:t});return e}function S4(){return Array.from(af.values())}function oo(t,e,n){var r;let s=(r=wF[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),l=e.match(/\s|\//);if(i||l){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jo.warn(u.join(" "));return}vc(new il(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF="firebase-heartbeat-database",CF=1,lf="firebase-heartbeat-store";let yy=null;function N4(){return yy||(yy=UL(bF,CF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ya.create("idb-open",{originalErrorMessage:t.message})})),yy}async function AF(t){try{const n=(await N4()).transaction(lf),r=await n.objectStore(lf).get(R4(t));return await n.done,r}catch(e){if(e instanceof vo)Jo.warn(e.message);else{const n=Ya.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jo.warn(n.message)}}}async function Wb(t,e){try{const r=(await N4()).transaction(lf,"readwrite");await r.objectStore(lf).put(e,R4(t)),await r.done}catch(n){if(n instanceof vo)Jo.warn(n.message);else{const r=Ya.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jo.warn(r.message)}}}function R4(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=1024,IF=30;class SF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Gb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>IF){const l=kF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Jo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gb(),{heartbeatsToSend:r,unsentEntries:s}=NF(this._heartbeatsCache.heartbeats),i=vg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Jo.warn(n),""}}}function Gb(){return new Date().toISOString().substring(0,10)}function NF(t,e=TF){const n=[];let r=t.slice();for(const s of t){const i=n.find(l=>l.agent===s.agent);if(i){if(i.dates.push(s.date),$b(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$b(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class RF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pL()?yL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Wb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Wb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $b(t){return vg(JSON.stringify({version:2,heartbeats:t})).length}function kF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t){vc(new il("platform-logger",e=>new WL(e),"PRIVATE")),vc(new il("heartbeat",e=>new SF(e),"PRIVATE")),oo(Xx,zb,t),oo(Xx,zb,"esm2017"),oo("fire-js","")}PF("");var OF="firebase",DF="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oo(OF,DF,"app");var Ji=function(){return Ji=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ji.apply(this,arguments)};function r0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function MF(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function k4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LF=k4,P4=new e0("auth","Firebase",k4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g=new m2("@firebase/auth");function FF(t,...e){_g.logLevel<=Ct.WARN&&_g.warn(`Auth (${Dc}): ${t}`,...e)}function R1(t,...e){_g.logLevel<=Ct.ERROR&&_g.error(`Auth (${Dc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t,...e){throw w2(t,...e)}function Ii(t,...e){return w2(t,...e)}function x2(t,e,n){const r=Object.assign(Object.assign({},LF()),{[e]:n});return new e0("auth","Firebase",r).create(e,{appName:t.name})}function ao(t){return x2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function O4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&li(t,"argument-error"),x2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function w2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return P4.create(t,...e)}function Je(t,e,...n){if(!t)throw w2(e,...n)}function zo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw R1(e),new Error(e)}function ea(t,e){t||zo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jF(){return qb()==="http:"||qb()==="https:"}function qb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jF()||hL()||"connection"in navigator)?navigator.onLine:!0}function VF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n){this.shortDelay=e,this.longDelay=n,ea(n>e,"Short delay should be less than long delay!"),this.isMobile=cL()||fL()}get(){return BF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t,e){ea(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HF=new s0(3e4,6e4);function Al(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function oa(t,e,n,r,s={}){return M4(t,s,async()=>{let i={},l={};r&&(e==="GET"?l=r:i={body:JSON.stringify(r)});const u=t0(Object.assign({key:t.config.apiKey},l)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:f},i);return dL()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Oc(t.emulatorConfig.host)&&(m.credentials="include"),D4.fetch()(await L4(t,t.config.apiHost,n,u),m)})}async function M4(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},UF),e);try{const s=new GF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await i.json();if("needConfirmation"in l)throw e1(t,"account-exists-with-different-credential",l);if(i.ok&&!("errorMessage"in l))return l;{const u=i.ok?l.errorMessage:l.error.message,[f,m]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw e1(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw e1(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw e1(t,"user-disabled",l);const w=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw x2(t,w,m);li(t,w)}}catch(s){if(s instanceof vo)throw s;li(t,"network-request-failed",{message:String(s)})}}async function i0(t,e,n,r,s={}){const i=await oa(t,e,n,r,s);return"mfaPendingCredential"in i&&li(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function L4(t,e,n,r){const s=`${e}${n}?${r}`,i=t,l=i.config.emulator?v2(t.config,s):`${t.config.apiScheme}://${s}`;return zF.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(l).toString():l}function WF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ii(this.auth,"network-request-failed")),HF.get())})}}function e1(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ii(t,e,r);return s.customData._tokenResponse=n,s}function Kb(t){return t!==void 0&&t.enterprise!==void 0}class $F{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qF(t,e){return oa(t,"GET","/v2/recaptchaConfig",Al(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KF(t,e){return oa(t,"POST","/v1/accounts:delete",e)}async function Eg(t,e){return oa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XF(t,e=!1){const n=bn(t),r=await n.getIdToken(e),s=_2(r);Je(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,l=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ih(xy(s.auth_time)),issuedAtTime:Ih(xy(s.iat)),expirationTime:Ih(xy(s.exp)),signInProvider:l||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function xy(t){return Number(t)*1e3}function _2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return R1("JWT malformed, contained fewer than 3 sections"),null;try{const s=v4(n);return s?JSON.parse(s):(R1("Failed to decode base64 JWT payload"),null)}catch(s){return R1("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Xb(t){const e=_2(t);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vo&&YF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function YF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ih(this.lastLoginAt),this.creationTime=Ih(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bg(t){var e;const n=t.auth,r=await t.getIdToken(),s=await sd(t,Eg(n,{idToken:r}));Je(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const l=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?F4(i.providerUserInfo):[],u=JF(t.providerData,l),f=t.isAnonymous,m=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),w=f?m:!1,v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Jx(i.createdAt,i.lastLoginAt),isAnonymous:w};Object.assign(t,v)}async function ZF(t){const e=bn(t);await bg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function F4(t){return t.map(e=>{var{providerId:n}=e,r=r0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ej(t,e){const n=await M4(t,{},async()=>{const r=t0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,l=await L4(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",D4.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tj(t,e){return oa(t,"POST","/v2/accounts:revokeToken",Al(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const n=Xb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await ej(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,l=new Iu;return r&&(Je(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Je(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),i&&(Je(typeof i=="number","internal-error",{appName:e}),l.expirationTime=i),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Iu,this.toJSON())}_performRefresh(){return zo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t,e){Je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bi{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=r0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Jx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await sd(this,this.stsTokenManager.getToken(this.auth,e));return Je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XF(this,e)}reload(){return ZF(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jr(this.auth.app))return Promise.reject(ao(this.auth));const e=await this.getIdToken();return await sd(this,KF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,l,u,f,m,w;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(s=n.email)!==null&&s!==void 0?s:void 0,I=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,P=(l=n.photoURL)!==null&&l!==void 0?l:void 0,C=(u=n.tenantId)!==null&&u!==void 0?u:void 0,k=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,N=(m=n.createdAt)!==null&&m!==void 0?m:void 0,T=(w=n.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:S,emailVerified:V,isAnonymous:$,providerData:Y,stsTokenManager:M}=n;Je(S&&M,e,"internal-error");const j=Iu.fromJSON(this.name,M);Je(typeof S=="string",e,"internal-error"),xa(v,e.name),xa(E,e.name),Je(typeof V=="boolean",e,"internal-error"),Je(typeof $=="boolean",e,"internal-error"),xa(I,e.name),xa(P,e.name),xa(C,e.name),xa(k,e.name),xa(N,e.name),xa(T,e.name);const L=new bi({uid:S,auth:e,email:E,emailVerified:V,displayName:v,isAnonymous:$,photoURL:P,phoneNumber:I,tenantId:C,stsTokenManager:j,createdAt:N,lastLoginAt:T});return Y&&Array.isArray(Y)&&(L.providerData=Y.map(G=>Object.assign({},G))),k&&(L._redirectEventId=k),L}static async _fromIdTokenResponse(e,n,r=!1){const s=new Iu;s.updateFromServerResponse(n);const i=new bi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await bg(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Je(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?F4(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new Iu;u.updateFromIdToken(r);const f=new bi({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Jx(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=new Map;function Ho(t){ea(t instanceof Function,"Expected a class definition");let e=Yb.get(t);return e?(ea(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Yb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}j4.type="NONE";const Qb=j4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t,e,n){return`firebase:${t}:${e}:${n}`}class Su{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=k1(this.userKey,s.apiKey,i),this.fullPersistenceKey=k1("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Eg(this.auth,{idToken:e}).catch(()=>{});return n?bi._fromGetAccountInfoResponse(this.auth,n,e):null}return bi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Su(Ho(Qb),e,r);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let i=s[0]||Ho(Qb);const l=k1(r,e.config.apiKey,e.name);let u=null;for(const m of n)try{const w=await m._get(l);if(w){let v;if(typeof w=="string"){const E=await Eg(e,{idToken:w}).catch(()=>{});if(!E)break;v=await bi._fromGetAccountInfoResponse(e,E,w)}else v=bi._fromJSON(e,w);m!==i&&(u=v),i=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!i._shouldAllowMigration||!f.length?new Su(i,e,r):(i=f[0],u&&await i._set(l,u.toJSON()),await Promise.all(n.map(async m=>{if(m!==i)try{await m._remove(l)}catch{}})),new Su(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(z4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(B4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W4(e))return"Blackberry";if(G4(e))return"Webos";if(V4(e))return"Safari";if((e.includes("chrome/")||U4(e))&&!e.includes("edge/"))return"Chrome";if(H4(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function B4(t=zr()){return/firefox\//i.test(t)}function V4(t=zr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function U4(t=zr()){return/crios\//i.test(t)}function z4(t=zr()){return/iemobile/i.test(t)}function H4(t=zr()){return/android/i.test(t)}function W4(t=zr()){return/blackberry/i.test(t)}function G4(t=zr()){return/webos/i.test(t)}function E2(t=zr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nj(t=zr()){var e;return E2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rj(){return gL()&&document.documentMode===10}function $4(t=zr()){return E2(t)||H4(t)||G4(t)||W4(t)||/windows phone/i.test(t)||z4(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(t,e=[]){let n;switch(t){case"Browser":n=Zb(zr());break;case"Worker":n=`${Zb(zr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Dc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((l,u)=>{try{const f=e(i);l(f)}catch(f){u(f)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(t,e={}){return oa(t,"GET","/v2/passwordPolicy",Al(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=6;class aj{constructor(e){var n,r,s,i;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:oj,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,l,u;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(i=f.containsUppercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(u=f.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jb(this),this.idTokenSubscription=new Jb(this),this.beforeStateQueue=new sj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ho(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Su.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Eg(this,{idToken:e}),r=await bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Jr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===u)&&(f!=null&&f.user)&&(s=f.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jr(this.app))return Promise.reject(ao(this));const n=e?bn(e):null;return n&&Je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jr(this.app)?Promise.reject(ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jr(this.app)?Promise.reject(ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ho(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ij(this),n=new aj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new e0("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await tj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ho(e)||this._popupRedirectResolver;Je(n,this,"argument-error"),this.redirectPersistenceManager=await Su.create(this,[Ho(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(u,this,"internal-error"),u.then(()=>{l||i(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&FF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _o(t){return bn(t)}class Jb{constructor(e){this.auth=e,this.observer=null,this.addObserver=EL(n=>this.observer=n)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cj(t){jm=t}function K4(t){return jm.loadJS(t)}function uj(){return jm.recaptchaEnterpriseScript}function dj(){return jm.gapiScript}function hj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class fj{constructor(){this.enterprise=new gj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class gj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const mj="recaptcha-enterprise",X4="NO_RECAPTCHA";class pj{constructor(e){this.type=mj,this.auth=_o(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(l,u)=>{qF(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const m=new $F(f);return i.tenantId==null?i._agentRecaptchaConfig=m:i._tenantRecaptchaConfigs[i.tenantId]=m,l(m.siteKey)}}).catch(f=>{u(f)})})}function s(i,l,u){const f=window.grecaptcha;Kb(f)?f.enterprise.ready(()=>{f.enterprise.execute(i,{action:e}).then(m=>{l(m)}).catch(()=>{l(X4)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fj().execute("siteKey",{action:"verify"}):new Promise((i,l)=>{r(this.auth).then(u=>{if(!n&&Kb(window.grecaptcha))s(u,i,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=uj();f.length!==0&&(f+=u),K4(f).then(()=>{s(u,i,l)}).catch(m=>{l(m)})}}).catch(u=>{l(u)})})}}async function eC(t,e,n,r=!1,s=!1){const i=new pj(t);let l;if(s)l=X4;else try{l=await i.verify(n)}catch{l=await i.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,m=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function ew(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await eC(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await eC(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t,e){const n=Fm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(wc(i,e??{}))return s;li(s,"already-initialized")}return n.initialize({options:e})}function xj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ho);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wj(t,e,n){const r=_o(t);Je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Y4(e),{host:l,port:u}=vj(e),f=u===null?"":`:${u}`,m={url:`${i}//${l}${f}/`},w=Object.freeze({host:l,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Je(wc(m,r.config.emulator)&&wc(w,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=w,r.settings.appVerificationDisabledForTesting=!0,Oc(l)?(Id("Auth",!0),g2(`${i}//${l}${f}`)):_j()}function Y4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vj(t){const e=Y4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:tC(r.substr(i.length+1))}}else{const[i,l]=r.split(":");return{host:i,port:tC(l)}}}function tC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _j(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zo("not implemented")}_getIdTokenResponse(e){return zo("not implemented")}_linkToIdToken(e,n){return zo("not implemented")}_getReauthenticationResolver(e){return zo("not implemented")}}async function Ej(t,e){return oa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bj(t,e){return i0(t,"POST","/v1/accounts:signInWithPassword",Al(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cj(t,e){return i0(t,"POST","/v1/accounts:signInWithEmailLink",Al(t,e))}async function Aj(t,e){return i0(t,"POST","/v1/accounts:signInWithEmailLink",Al(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends b2{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new cf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new cf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ew(e,n,"signInWithPassword",bj);case"emailLink":return Cj(e,{email:this._email,oobCode:this._password});default:li(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ew(e,r,"signUpPassword",Ej);case"emailLink":return Aj(e,{idToken:n,email:this._email,oobCode:this._password});default:li(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nu(t,e){return i0(t,"POST","/v1/accounts:signInWithIdp",Al(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj="http://localhost";class _c extends b2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _c(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):li("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=r0(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new _c(r,s);return l.idToken=i.idToken||void 0,l.accessToken=i.accessToken||void 0,l.secret=i.secret,l.nonce=i.nonce,l.pendingToken=i.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Nu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Nu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nu(e,n)}buildRequest(){const e={requestUri:Tj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=t0(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Sj(t){const e=oh(ah(t)).link,n=e?oh(ah(e)).deep_link_id:null,r=oh(ah(t)).deep_link_id;return(r?oh(ah(r)).link:null)||r||n||e||t}class C2{constructor(e){var n,r,s,i,l,u;const f=oh(ah(e)),m=(n=f.apiKey)!==null&&n!==void 0?n:null,w=(r=f.oobCode)!==null&&r!==void 0?r:null,v=Ij((s=f.mode)!==null&&s!==void 0?s:null);Je(m&&w&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=w,this.continueUrl=(i=f.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(l=f.lang)!==null&&l!==void 0?l:null,this.tenantId=(u=f.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=Sj(e);try{return new C2(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this.providerId=Sd.PROVIDER_ID}static credential(e,n){return cf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=C2.parseLink(n);return Je(r,"argument-error"),cf._fromEmailAndCode(e,r.code,r.tenantId)}}Sd.PROVIDER_ID="password";Sd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends Bm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends o0{constructor(){super("facebook.com")}static credential(e){return _c._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eo.credential(e.oauthAccessToken)}catch{return null}}}eo.FACEBOOK_SIGN_IN_METHOD="facebook.com";eo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends o0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _c._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bo.credential(n,r)}catch{return null}}}Bo.GOOGLE_SIGN_IN_METHOD="google.com";Bo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends o0{constructor(){super("github.com")}static credential(e){return _c._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Aa.credential(e.oauthAccessToken)}catch{return null}}}Aa.GITHUB_SIGN_IN_METHOD="github.com";Aa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends o0{constructor(){super("twitter.com")}static credential(e,n){return _c._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ta.credential(n,r)}catch{return null}}}Ta.TWITTER_SIGN_IN_METHOD="twitter.com";Ta.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nj(t,e){return i0(t,"POST","/v1/accounts:signUp",Al(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await bi._fromIdTokenResponse(e,r,s),l=nC(r);return new Ec({user:i,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=nC(r);return new Ec({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function nC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends vo{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Cg.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Cg(e,n,r,s)}}function Q4(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Cg._fromErrorAndOperation(t,i,e,r):i})}async function Rj(t,e,n=!1){const r=await sd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ec._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(t,e,n=!1){const{auth:r}=t;if(Jr(r.app))return Promise.reject(ao(r));const s="reauthenticate";try{const i=await sd(t,Q4(r,s,e,t),n);Je(i.idToken,r,"internal-error");const l=_2(i.idToken);Je(l,r,"internal-error");const{sub:u}=l;return Je(t.uid===u,r,"user-mismatch"),Ec._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&li(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z4(t,e,n=!1){if(Jr(t.app))return Promise.reject(ao(t));const r="signIn",s=await Q4(t,r,e),i=await Ec._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Pj(t,e){return Z4(_o(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J4(t){const e=_o(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Oj(t,e,n){if(Jr(t.app))return Promise.reject(ao(t));const r=_o(t),l=await ew(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Nj).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&J4(t),f}),u=await Ec._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function Dj(t,e,n){return Jr(t.app)?Promise.reject(ao(t)):Pj(bn(t),Sd.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&J4(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mj(t,e){return oa(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=bn(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await sd(r,Mj(r.auth,i));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const u=r.providerData.find(({providerId:f})=>f==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t,e){return bn(t).setPersistence(e)}function jj(t,e,n,r){return bn(t).onIdTokenChanged(e,n,r)}function Bj(t,e,n){return bn(t).beforeAuthStateChanged(e,n)}function Vj(t){return bn(t).signOut()}const Ag="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ag,"1"),this.storage.removeItem(Ag),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj=1e3,zj=10;class tN extends eN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,f)=>{this.notifyListeners(l,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},i=this.storage.getItem(r);rj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,zj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Uj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tN.type="LOCAL";const nN=tN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN extends eN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rN.type="SESSION";const sN=rN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Vm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async m=>m(n.origin,i)),f=await Hj(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,l;return new Promise((u,f)=>{const m=A2("",20);s.port1.start();const w=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(w),i=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(E.data.response);break;default:clearTimeout(w),clearTimeout(i),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(){return window}function Gj(t){lo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(){return typeof lo().WorkerGlobalScope<"u"&&typeof lo().importScripts=="function"}async function $j(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Kj(){return iN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="firebaseLocalStorageDb",Xj=1,Tg="firebaseLocalStorage",aN="fbase_key";class a0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Um(t,e){return t.transaction([Tg],e?"readwrite":"readonly").objectStore(Tg)}function Yj(){const t=indexedDB.deleteDatabase(oN);return new a0(t).toPromise()}function tw(){const t=indexedDB.open(oN,Xj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Tg,{keyPath:aN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Tg)?e(r):(r.close(),await Yj(),e(await tw()))})})}async function rC(t,e,n){const r=Um(t,!0).put({[aN]:e,value:n});return new a0(r).toPromise()}async function Qj(t,e){const n=Um(t,!1).get(e),r=await new a0(n).toPromise();return r===void 0?null:r.value}function sC(t,e){const n=Um(t,!0).delete(e);return new a0(n).toPromise()}const Zj=800,Jj=3;class lN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Jj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vm._getInstance(Kj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await $j(),!this.activeServiceWorker)return;this.sender=new Wj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tw();return await rC(e,Ag,"1"),await sC(e,Ag),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>rC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Qj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Um(s,!1).getAll();return new a0(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Zj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lN.type="LOCAL";const eB=lN;new s0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t,e){return e?Ho(e):(Je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2 extends b2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tB(t){return Z4(t.auth,new I2(t),t.bypassAuthState)}function nB(t){const{auth:e,user:n}=t;return Je(n,e,"internal-error"),kj(n,new I2(t),t.bypassAuthState)}async function rB(t){const{auth:e,user:n}=t;return Je(n,e,"internal-error"),Rj(n,new I2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:l,type:u}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tB;case"linkViaPopup":case"linkViaRedirect":return rB;case"reauthViaPopup":case"reauthViaRedirect":return nB;default:li(this.auth,"internal-error")}}resolve(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB=new s0(2e3,1e4);async function nw(t,e,n){if(Jr(t.app))return Promise.reject(Ii(t,"operation-not-supported-in-this-environment"));const r=_o(t);O4(t,e,Bm);const s=T2(r,n);return new Xl(r,"signInViaPopup",e,s).executeNotNull()}class Xl extends cN{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Xl.currentPopupAction&&Xl.currentPopupAction.cancel(),Xl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Je(e,this.auth,"internal-error"),e}async onExecution(){ea(this.filter.length===1,"Popup operations only handle one event");const e=A2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sB.get())};e()}}Xl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB="pendingRedirect",P1=new Map;class oB extends cN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=P1.get(this.auth._key());if(!e){try{const r=await aB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}P1.set(this.auth._key(),e)}return this.bypassAuthState||P1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aB(t,e){const n=dN(e),r=uN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function lB(t,e){return uN(t)._set(dN(e),"true")}function cB(t,e){P1.set(t._key(),e)}function uN(t){return Ho(t._redirectPersistence)}function dN(t){return k1(iB,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t,e,n){return uB(t,e,n)}async function uB(t,e,n){if(Jr(t.app))return Promise.reject(ao(t));const r=_o(t);O4(t,e,Bm),await r._initializationPromise;const s=T2(r,n);return await lB(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function dB(t,e){return await _o(t)._initializationPromise,hN(t,e,!1)}async function hN(t,e,n=!1){if(Jr(t.app))return Promise.reject(ao(t));const r=_o(t),s=T2(r,e),l=await new oB(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB=10*60*1e3;class fB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ii(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hB&&this.cachedEventUids.clear(),this.cachedEventUids.has(iC(e))}saveEventToCache(e){this.cachedEventUids.add(iC(e)),this.lastProcessedEventTime=Date.now()}}function iC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mB(t,e={}){return oa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yB=/^https?/;async function xB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mB(t);for(const n of e)try{if(wB(n))return}catch{}li(t,"unauthorized-domain")}function wB(t){const e=Zx(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!yB.test(n))return!1;if(pB.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB=new s0(3e4,6e4);function oC(){const t=lo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _B(t){return new Promise((e,n)=>{var r,s,i;function l(){oC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oC(),n(Ii(t,"network-request-failed"))},timeout:vB.get()})}if(!((s=(r=lo().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=lo().gapi)===null||i===void 0)&&i.load)l();else{const u=hj("iframefcb");return lo()[u]=()=>{gapi.load?l():n(Ii(t,"network-request-failed"))},K4(`${dj()}?onload=${u}`).catch(f=>n(f))}}).catch(e=>{throw O1=null,e})}let O1=null;function EB(t){return O1=O1||_B(t),O1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=new s0(5e3,15e3),CB="__/auth/iframe",AB="emulator/auth/iframe",TB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SB(t){const e=t.config;Je(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?v2(e,AB):`https://${t.config.authDomain}/${CB}`,r={apiKey:e.apiKey,appName:t.name,v:Dc},s=IB.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${t0(r).slice(1)}`}async function NB(t){const e=await EB(t),n=lo().gapi;return Je(n,t,"internal-error"),e.open({where:document.body,url:SB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TB,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const l=Ii(t,"network-request-failed"),u=lo().setTimeout(()=>{i(l)},bB.get());function f(){lo().clearTimeout(u),s(r)}r.ping(f).then(f,()=>{i(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kB=500,PB=600,OB="_blank",DB="http://localhost";class aC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MB(t,e,n,r=kB,s=PB){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const f=Object.assign(Object.assign({},RB),{width:r.toString(),height:s.toString(),top:i,left:l}),m=zr().toLowerCase();n&&(u=U4(m)?OB:n),B4(m)&&(e=e||DB,f.scrollbars="yes");const w=Object.entries(f).reduce((E,[I,P])=>`${E}${I}=${P},`,"");if(nj(m)&&u!=="_self")return LB(e||"",u),new aC(null);const v=window.open(e||"",u,w);Je(v,t,"popup-blocked");try{v.focus()}catch{}return new aC(v)}function LB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB="__/auth/handler",jB="emulator/auth/handler",BB=encodeURIComponent("fac");async function lC(t,e,n,r,s,i){Je(t.config.authDomain,t,"auth-domain-config-required"),Je(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Dc,eventId:s};if(e instanceof Bm){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",_L(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,v]of Object.entries({}))l[w]=v}if(e instanceof o0){const w=e.getScopes().filter(v=>v!=="");w.length>0&&(l.scopes=w.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const w of Object.keys(u))u[w]===void 0&&delete u[w];const f=await t._getAppCheckToken(),m=f?`#${BB}=${encodeURIComponent(f)}`:"";return`${VB(t)}?${t0(u).slice(1)}${m}`}function VB({config:t}){return t.emulator?v2(t,jB):`https://${t.authDomain}/${FB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="webStorageSupport";class UB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sN,this._completeRedirectFn=hN,this._overrideRedirectResult=cB}async _openPopup(e,n,r,s){var i;ea((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const l=await lC(e,n,r,Zx(),s);return MB(e,l,A2())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await lC(e,n,r,Zx(),s);return Gj(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ea(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await NB(e),r=new fB(e);return n.register("authEvent",s=>(Je(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wy,{type:wy},s=>{var i;const l=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[wy];l!==void 0&&n(!!l),li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $4()||V4()||E2()}}const zB=UB;var cC="@firebase/auth",uC="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GB(t){vc(new il("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Je(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q4(t)},m=new lj(r,s,i,f);return xj(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vc(new il("auth-internal",e=>{const n=_o(e.getProvider("auth").getImmediate());return(r=>new HB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),oo(cC,uC,WB(t)),oo(cC,uC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=5*60,qB=C4("authIdTokenMaxAge")||$B;let dC=null;const KB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qB)return;const s=n==null?void 0:n.token;dC!==s&&(dC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function XB(t=n0()){const e=Fm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yj(t,{popupRedirectResolver:zB,persistence:[eB,nN,sN]}),r=C4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const l=KB(i.toString());Bj(n,l,()=>l(n.currentUser)),jj(n,u=>l(u))}}const s=_4("auth");return s?wj(n,`http://${s}`):Id("Auth",!1),n}function YB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ii("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",YB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GB("Browser");var hC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qa,gN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,j){function L(){}L.prototype=j.prototype,M.D=j.prototype,M.prototype=new L,M.prototype.constructor=M,M.C=function(G,X,H){for(var z=Array(arguments.length-2),de=2;de<arguments.length;de++)z[de-2]=arguments[de];return j.prototype[X].apply(G,z)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(M,j,L){L||(L=0);var G=Array(16);if(typeof j=="string")for(var X=0;16>X;++X)G[X]=j.charCodeAt(L++)|j.charCodeAt(L++)<<8|j.charCodeAt(L++)<<16|j.charCodeAt(L++)<<24;else for(X=0;16>X;++X)G[X]=j[L++]|j[L++]<<8|j[L++]<<16|j[L++]<<24;j=M.g[0],L=M.g[1],X=M.g[2];var H=M.g[3],z=j+(H^L&(X^H))+G[0]+3614090360&4294967295;j=L+(z<<7&4294967295|z>>>25),z=H+(X^j&(L^X))+G[1]+3905402710&4294967295,H=j+(z<<12&4294967295|z>>>20),z=X+(L^H&(j^L))+G[2]+606105819&4294967295,X=H+(z<<17&4294967295|z>>>15),z=L+(j^X&(H^j))+G[3]+3250441966&4294967295,L=X+(z<<22&4294967295|z>>>10),z=j+(H^L&(X^H))+G[4]+4118548399&4294967295,j=L+(z<<7&4294967295|z>>>25),z=H+(X^j&(L^X))+G[5]+1200080426&4294967295,H=j+(z<<12&4294967295|z>>>20),z=X+(L^H&(j^L))+G[6]+2821735955&4294967295,X=H+(z<<17&4294967295|z>>>15),z=L+(j^X&(H^j))+G[7]+4249261313&4294967295,L=X+(z<<22&4294967295|z>>>10),z=j+(H^L&(X^H))+G[8]+1770035416&4294967295,j=L+(z<<7&4294967295|z>>>25),z=H+(X^j&(L^X))+G[9]+2336552879&4294967295,H=j+(z<<12&4294967295|z>>>20),z=X+(L^H&(j^L))+G[10]+4294925233&4294967295,X=H+(z<<17&4294967295|z>>>15),z=L+(j^X&(H^j))+G[11]+2304563134&4294967295,L=X+(z<<22&4294967295|z>>>10),z=j+(H^L&(X^H))+G[12]+1804603682&4294967295,j=L+(z<<7&4294967295|z>>>25),z=H+(X^j&(L^X))+G[13]+4254626195&4294967295,H=j+(z<<12&4294967295|z>>>20),z=X+(L^H&(j^L))+G[14]+2792965006&4294967295,X=H+(z<<17&4294967295|z>>>15),z=L+(j^X&(H^j))+G[15]+1236535329&4294967295,L=X+(z<<22&4294967295|z>>>10),z=j+(X^H&(L^X))+G[1]+4129170786&4294967295,j=L+(z<<5&4294967295|z>>>27),z=H+(L^X&(j^L))+G[6]+3225465664&4294967295,H=j+(z<<9&4294967295|z>>>23),z=X+(j^L&(H^j))+G[11]+643717713&4294967295,X=H+(z<<14&4294967295|z>>>18),z=L+(H^j&(X^H))+G[0]+3921069994&4294967295,L=X+(z<<20&4294967295|z>>>12),z=j+(X^H&(L^X))+G[5]+3593408605&4294967295,j=L+(z<<5&4294967295|z>>>27),z=H+(L^X&(j^L))+G[10]+38016083&4294967295,H=j+(z<<9&4294967295|z>>>23),z=X+(j^L&(H^j))+G[15]+3634488961&4294967295,X=H+(z<<14&4294967295|z>>>18),z=L+(H^j&(X^H))+G[4]+3889429448&4294967295,L=X+(z<<20&4294967295|z>>>12),z=j+(X^H&(L^X))+G[9]+568446438&4294967295,j=L+(z<<5&4294967295|z>>>27),z=H+(L^X&(j^L))+G[14]+3275163606&4294967295,H=j+(z<<9&4294967295|z>>>23),z=X+(j^L&(H^j))+G[3]+4107603335&4294967295,X=H+(z<<14&4294967295|z>>>18),z=L+(H^j&(X^H))+G[8]+1163531501&4294967295,L=X+(z<<20&4294967295|z>>>12),z=j+(X^H&(L^X))+G[13]+2850285829&4294967295,j=L+(z<<5&4294967295|z>>>27),z=H+(L^X&(j^L))+G[2]+4243563512&4294967295,H=j+(z<<9&4294967295|z>>>23),z=X+(j^L&(H^j))+G[7]+1735328473&4294967295,X=H+(z<<14&4294967295|z>>>18),z=L+(H^j&(X^H))+G[12]+2368359562&4294967295,L=X+(z<<20&4294967295|z>>>12),z=j+(L^X^H)+G[5]+4294588738&4294967295,j=L+(z<<4&4294967295|z>>>28),z=H+(j^L^X)+G[8]+2272392833&4294967295,H=j+(z<<11&4294967295|z>>>21),z=X+(H^j^L)+G[11]+1839030562&4294967295,X=H+(z<<16&4294967295|z>>>16),z=L+(X^H^j)+G[14]+4259657740&4294967295,L=X+(z<<23&4294967295|z>>>9),z=j+(L^X^H)+G[1]+2763975236&4294967295,j=L+(z<<4&4294967295|z>>>28),z=H+(j^L^X)+G[4]+1272893353&4294967295,H=j+(z<<11&4294967295|z>>>21),z=X+(H^j^L)+G[7]+4139469664&4294967295,X=H+(z<<16&4294967295|z>>>16),z=L+(X^H^j)+G[10]+3200236656&4294967295,L=X+(z<<23&4294967295|z>>>9),z=j+(L^X^H)+G[13]+681279174&4294967295,j=L+(z<<4&4294967295|z>>>28),z=H+(j^L^X)+G[0]+3936430074&4294967295,H=j+(z<<11&4294967295|z>>>21),z=X+(H^j^L)+G[3]+3572445317&4294967295,X=H+(z<<16&4294967295|z>>>16),z=L+(X^H^j)+G[6]+76029189&4294967295,L=X+(z<<23&4294967295|z>>>9),z=j+(L^X^H)+G[9]+3654602809&4294967295,j=L+(z<<4&4294967295|z>>>28),z=H+(j^L^X)+G[12]+3873151461&4294967295,H=j+(z<<11&4294967295|z>>>21),z=X+(H^j^L)+G[15]+530742520&4294967295,X=H+(z<<16&4294967295|z>>>16),z=L+(X^H^j)+G[2]+3299628645&4294967295,L=X+(z<<23&4294967295|z>>>9),z=j+(X^(L|~H))+G[0]+4096336452&4294967295,j=L+(z<<6&4294967295|z>>>26),z=H+(L^(j|~X))+G[7]+1126891415&4294967295,H=j+(z<<10&4294967295|z>>>22),z=X+(j^(H|~L))+G[14]+2878612391&4294967295,X=H+(z<<15&4294967295|z>>>17),z=L+(H^(X|~j))+G[5]+4237533241&4294967295,L=X+(z<<21&4294967295|z>>>11),z=j+(X^(L|~H))+G[12]+1700485571&4294967295,j=L+(z<<6&4294967295|z>>>26),z=H+(L^(j|~X))+G[3]+2399980690&4294967295,H=j+(z<<10&4294967295|z>>>22),z=X+(j^(H|~L))+G[10]+4293915773&4294967295,X=H+(z<<15&4294967295|z>>>17),z=L+(H^(X|~j))+G[1]+2240044497&4294967295,L=X+(z<<21&4294967295|z>>>11),z=j+(X^(L|~H))+G[8]+1873313359&4294967295,j=L+(z<<6&4294967295|z>>>26),z=H+(L^(j|~X))+G[15]+4264355552&4294967295,H=j+(z<<10&4294967295|z>>>22),z=X+(j^(H|~L))+G[6]+2734768916&4294967295,X=H+(z<<15&4294967295|z>>>17),z=L+(H^(X|~j))+G[13]+1309151649&4294967295,L=X+(z<<21&4294967295|z>>>11),z=j+(X^(L|~H))+G[4]+4149444226&4294967295,j=L+(z<<6&4294967295|z>>>26),z=H+(L^(j|~X))+G[11]+3174756917&4294967295,H=j+(z<<10&4294967295|z>>>22),z=X+(j^(H|~L))+G[2]+718787259&4294967295,X=H+(z<<15&4294967295|z>>>17),z=L+(H^(X|~j))+G[9]+3951481745&4294967295,M.g[0]=M.g[0]+j&4294967295,M.g[1]=M.g[1]+(X+(z<<21&4294967295|z>>>11))&4294967295,M.g[2]=M.g[2]+X&4294967295,M.g[3]=M.g[3]+H&4294967295}r.prototype.u=function(M,j){j===void 0&&(j=M.length);for(var L=j-this.blockSize,G=this.B,X=this.h,H=0;H<j;){if(X==0)for(;H<=L;)s(this,M,H),H+=this.blockSize;if(typeof M=="string"){for(;H<j;)if(G[X++]=M.charCodeAt(H++),X==this.blockSize){s(this,G),X=0;break}}else for(;H<j;)if(G[X++]=M[H++],X==this.blockSize){s(this,G),X=0;break}}this.h=X,this.o+=j},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var j=1;j<M.length-8;++j)M[j]=0;var L=8*this.o;for(j=M.length-8;j<M.length;++j)M[j]=L&255,L/=256;for(this.u(M),M=Array(16),j=L=0;4>j;++j)for(var G=0;32>G;G+=8)M[L++]=this.g[j]>>>G&255;return M};function i(M,j){var L=u;return Object.prototype.hasOwnProperty.call(L,M)?L[M]:L[M]=j(M)}function l(M,j){this.h=j;for(var L=[],G=!0,X=M.length-1;0<=X;X--){var H=M[X]|0;G&&H==j||(L[X]=H,G=!1)}this.g=L}var u={};function f(M){return-128<=M&&128>M?i(M,function(j){return new l([j|0],0>j?-1:0)}):new l([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return v;if(0>M)return k(m(-M));for(var j=[],L=1,G=0;M>=L;G++)j[G]=M/L|0,L*=4294967296;return new l(j,0)}function w(M,j){if(M.length==0)throw Error("number format error: empty string");if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(M.charAt(0)=="-")return k(w(M.substring(1),j));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=m(Math.pow(j,8)),G=v,X=0;X<M.length;X+=8){var H=Math.min(8,M.length-X),z=parseInt(M.substring(X,X+H),j);8>H?(H=m(Math.pow(j,H)),G=G.j(H).add(m(z))):(G=G.j(L),G=G.add(m(z)))}return G}var v=f(0),E=f(1),I=f(16777216);t=l.prototype,t.m=function(){if(C(this))return-k(this).m();for(var M=0,j=1,L=0;L<this.g.length;L++){var G=this.i(L);M+=(0<=G?G:4294967296+G)*j,j*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(P(this))return"0";if(C(this))return"-"+k(this).toString(M);for(var j=m(Math.pow(M,6)),L=this,G="";;){var X=V(L,j).g;L=N(L,X.j(j));var H=((0<L.g.length?L.g[0]:L.h)>>>0).toString(M);if(L=X,P(L))return H+G;for(;6>H.length;)H="0"+H;G=H+G}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function P(M){if(M.h!=0)return!1;for(var j=0;j<M.g.length;j++)if(M.g[j]!=0)return!1;return!0}function C(M){return M.h==-1}t.l=function(M){return M=N(this,M),C(M)?-1:P(M)?0:1};function k(M){for(var j=M.g.length,L=[],G=0;G<j;G++)L[G]=~M.g[G];return new l(L,~M.h).add(E)}t.abs=function(){return C(this)?k(this):this},t.add=function(M){for(var j=Math.max(this.g.length,M.g.length),L=[],G=0,X=0;X<=j;X++){var H=G+(this.i(X)&65535)+(M.i(X)&65535),z=(H>>>16)+(this.i(X)>>>16)+(M.i(X)>>>16);G=z>>>16,H&=65535,z&=65535,L[X]=z<<16|H}return new l(L,L[L.length-1]&-2147483648?-1:0)};function N(M,j){return M.add(k(j))}t.j=function(M){if(P(this)||P(M))return v;if(C(this))return C(M)?k(this).j(k(M)):k(k(this).j(M));if(C(M))return k(this.j(k(M)));if(0>this.l(I)&&0>M.l(I))return m(this.m()*M.m());for(var j=this.g.length+M.g.length,L=[],G=0;G<2*j;G++)L[G]=0;for(G=0;G<this.g.length;G++)for(var X=0;X<M.g.length;X++){var H=this.i(G)>>>16,z=this.i(G)&65535,de=M.i(X)>>>16,ee=M.i(X)&65535;L[2*G+2*X]+=z*ee,T(L,2*G+2*X),L[2*G+2*X+1]+=H*ee,T(L,2*G+2*X+1),L[2*G+2*X+1]+=z*de,T(L,2*G+2*X+1),L[2*G+2*X+2]+=H*de,T(L,2*G+2*X+2)}for(G=0;G<j;G++)L[G]=L[2*G+1]<<16|L[2*G];for(G=j;G<2*j;G++)L[G]=0;return new l(L,0)};function T(M,j){for(;(M[j]&65535)!=M[j];)M[j+1]+=M[j]>>>16,M[j]&=65535,j++}function S(M,j){this.g=M,this.h=j}function V(M,j){if(P(j))throw Error("division by zero");if(P(M))return new S(v,v);if(C(M))return j=V(k(M),j),new S(k(j.g),k(j.h));if(C(j))return j=V(M,k(j)),new S(k(j.g),j.h);if(30<M.g.length){if(C(M)||C(j))throw Error("slowDivide_ only works with positive integers.");for(var L=E,G=j;0>=G.l(M);)L=$(L),G=$(G);var X=Y(L,1),H=Y(G,1);for(G=Y(G,2),L=Y(L,2);!P(G);){var z=H.add(G);0>=z.l(M)&&(X=X.add(L),H=z),G=Y(G,1),L=Y(L,1)}return j=N(M,X.j(j)),new S(X,j)}for(X=v;0<=M.l(j);){for(L=Math.max(1,Math.floor(M.m()/j.m())),G=Math.ceil(Math.log(L)/Math.LN2),G=48>=G?1:Math.pow(2,G-48),H=m(L),z=H.j(j);C(z)||0<z.l(M);)L-=G,H=m(L),z=H.j(j);P(H)&&(H=E),X=X.add(H),M=N(M,z)}return new S(X,M)}t.A=function(M){return V(this,M).h},t.and=function(M){for(var j=Math.max(this.g.length,M.g.length),L=[],G=0;G<j;G++)L[G]=this.i(G)&M.i(G);return new l(L,this.h&M.h)},t.or=function(M){for(var j=Math.max(this.g.length,M.g.length),L=[],G=0;G<j;G++)L[G]=this.i(G)|M.i(G);return new l(L,this.h|M.h)},t.xor=function(M){for(var j=Math.max(this.g.length,M.g.length),L=[],G=0;G<j;G++)L[G]=this.i(G)^M.i(G);return new l(L,this.h^M.h)};function $(M){for(var j=M.g.length+1,L=[],G=0;G<j;G++)L[G]=M.i(G)<<1|M.i(G-1)>>>31;return new l(L,M.h)}function Y(M,j){var L=j>>5;j%=32;for(var G=M.g.length-L,X=[],H=0;H<G;H++)X[H]=0<j?M.i(H+L)>>>j|M.i(H+L+1)<<32-j:M.i(H+L);return new l(X,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gN=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=w,Qa=l}).apply(typeof hC<"u"?hC:typeof self<"u"?self:typeof window<"u"?window:{});var t1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mN,lh,pN,D1,sw,yN,xN,wN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,A,D){return x==Array.prototype||x==Object.prototype||(x[A]=D.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof t1=="object"&&t1];for(var A=0;A<x.length;++A){var D=x[A];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function s(x,A){if(A)e:{var D=r;x=x.split(".");for(var W=0;W<x.length-1;W++){var ne=x[W];if(!(ne in D))break e;D=D[ne]}x=x[x.length-1],W=D[x],A=A(W),A!=W&&A!=null&&e(D,x,{configurable:!0,writable:!0,value:A})}}function i(x,A){x instanceof String&&(x+="");var D=0,W=!1,ne={next:function(){if(!W&&D<x.length){var le=D++;return{value:A(le,x[le]),done:!1}}return W=!0,{done:!0,value:void 0}}};return ne[Symbol.iterator]=function(){return ne},ne}s("Array.prototype.values",function(x){return x||function(){return i(this,function(A,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(x){var A=typeof x;return A=A!="object"?A:x?Array.isArray(x)?"array":A:"null",A=="array"||A=="object"&&typeof x.length=="number"}function m(x){var A=typeof x;return A=="object"&&x!=null||A=="function"}function w(x,A,D){return x.call.apply(x.bind,arguments)}function v(x,A,D){if(!x)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ne,W),x.apply(A,ne)}}return function(){return x.apply(A,arguments)}}function E(x,A,D){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:v,E.apply(null,arguments)}function I(x,A){var D=Array.prototype.slice.call(arguments,1);return function(){var W=D.slice();return W.push.apply(W,arguments),x.apply(this,W)}}function P(x,A){function D(){}D.prototype=A.prototype,x.aa=A.prototype,x.prototype=new D,x.prototype.constructor=x,x.Qb=function(W,ne,le){for(var Te=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)Te[Gt-2]=arguments[Gt];return A.prototype[ne].apply(W,Te)}}function C(x){const A=x.length;if(0<A){const D=Array(A);for(let W=0;W<A;W++)D[W]=x[W];return D}return[]}function k(x,A){for(let D=1;D<arguments.length;D++){const W=arguments[D];if(f(W)){const ne=x.length||0,le=W.length||0;x.length=ne+le;for(let Te=0;Te<le;Te++)x[ne+Te]=W[Te]}else x.push(W)}}class N{constructor(A,D){this.i=A,this.j=D,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function T(x){return/^[\s\xa0]*$/.test(x)}function S(){var x=u.navigator;return x&&(x=x.userAgent)?x:""}function V(x){return V[" "](x),x}V[" "]=function(){};var $=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function Y(x,A,D){for(const W in x)A.call(D,x[W],W,x)}function M(x,A){for(const D in x)A.call(void 0,x[D],D,x)}function j(x){const A={};for(const D in x)A[D]=x[D];return A}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(x,A){let D,W;for(let ne=1;ne<arguments.length;ne++){W=arguments[ne];for(D in W)x[D]=W[D];for(let le=0;le<L.length;le++)D=L[le],Object.prototype.hasOwnProperty.call(W,D)&&(x[D]=W[D])}}function X(x){var A=1;x=x.split(":");const D=[];for(;0<A&&x.length;)D.push(x.shift()),A--;return x.length&&D.push(x.join(":")),D}function H(x){u.setTimeout(()=>{throw x},0)}function z(){var x=ue;let A=null;return x.g&&(A=x.g,x.g=x.g.next,x.g||(x.h=null),A.next=null),A}class de{constructor(){this.h=this.g=null}add(A,D){const W=ee.get();W.set(A,D),this.h?this.h.next=W:this.g=W,this.h=W}}var ee=new N(()=>new xe,x=>x.reset());class xe{constructor(){this.next=this.g=this.h=null}set(A,D){this.h=A,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let we,oe=!1,ue=new de,Ie=()=>{const x=u.Promise.resolve(void 0);we=()=>{x.then(Ge)}};var Ge=()=>{for(var x;x=z();){try{x.h.call(x.g)}catch(D){H(D)}var A=ee;A.j(x),100>A.h&&(A.h++,x.next=A.g,A.g=x)}oe=!1};function He(){this.s=this.s,this.C=this.C}He.prototype.s=!1,He.prototype.ma=function(){this.s||(this.s=!0,this.N())},He.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function at(x,A){this.type=x,this.g=this.target=A,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var _t=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var x=!1,A=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const D=()=>{};u.addEventListener("test",D,A),u.removeEventListener("test",D,A)}catch{}return x}();function Vn(x,A){if(at.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var D=this.type=x.type,W=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=A,A=x.relatedTarget){if($){e:{try{V(A.nodeName);var ne=!0;break e}catch{}ne=!1}ne||(A=null)}}else D=="mouseover"?A=x.fromElement:D=="mouseout"&&(A=x.toElement);this.relatedTarget=A,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:Oe[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&Vn.aa.h.call(this)}}P(Vn,at);var Oe={2:"touch",3:"pen",4:"mouse"};Vn.prototype.h=function(){Vn.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var Zt="closure_listenable_"+(1e6*Math.random()|0),qt=0;function yn(x,A,D,W,ne){this.listener=x,this.proxy=null,this.src=A,this.type=D,this.capture=!!W,this.ha=ne,this.key=++qt,this.da=this.fa=!1}function Jn(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Jt(x){this.src=x,this.g={},this.h=0}Jt.prototype.add=function(x,A,D,W,ne){var le=x.toString();x=this.g[le],x||(x=this.g[le]=[],this.h++);var Te=lt(x,A,W,ne);return-1<Te?(A=x[Te],D||(A.fa=!1)):(A=new yn(A,this.src,le,!!W,ne),A.fa=D,x.push(A)),A};function os(x,A){var D=A.type;if(D in x.g){var W=x.g[D],ne=Array.prototype.indexOf.call(W,A,void 0),le;(le=0<=ne)&&Array.prototype.splice.call(W,ne,1),le&&(Jn(A),x.g[D].length==0&&(delete x.g[D],x.h--))}}function lt(x,A,D,W){for(var ne=0;ne<x.length;++ne){var le=x[ne];if(!le.da&&le.listener==A&&le.capture==!!D&&le.ha==W)return ne}return-1}var Rr="closure_lm_"+(1e6*Math.random()|0),ur={};function _s(x,A,D,W,ne){if(Array.isArray(A)){for(var le=0;le<A.length;le++)_s(x,A[le],D,W,ne);return null}return D=ke(D),x&&x[Zt]?x.K(A,D,m(W)?!!W.capture:!!W,ne):xn(x,A,D,!1,W,ne)}function xn(x,A,D,W,ne,le){if(!A)throw Error("Invalid event type");var Te=m(ne)?!!ne.capture:!!ne,Gt=ie(x);if(Gt||(x[Rr]=Gt=new Jt(x)),D=Gt.add(A,D,W,Te,le),D.proxy)return D;if(W=Lt(),D.proxy=W,W.src=x,W.listener=D,x.addEventListener)_t||(ne=Te),ne===void 0&&(ne=!1),x.addEventListener(A.toString(),W,ne);else if(x.attachEvent)x.attachEvent(je(A.toString()),W);else if(x.addListener&&x.removeListener)x.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Lt(){function x(D){return A.call(x.src,x.listener,D)}const A=Q;return x}function ct(x,A,D,W,ne){if(Array.isArray(A))for(var le=0;le<A.length;le++)ct(x,A[le],D,W,ne);else W=m(W)?!!W.capture:!!W,D=ke(D),x&&x[Zt]?(x=x.i,A=String(A).toString(),A in x.g&&(le=x.g[A],D=lt(le,D,W,ne),-1<D&&(Jn(le[D]),Array.prototype.splice.call(le,D,1),le.length==0&&(delete x.g[A],x.h--)))):x&&(x=ie(x))&&(A=x.g[A.toString()],x=-1,A&&(x=lt(A,D,W,ne)),(D=-1<x?A[x]:null)&&bo(D))}function bo(x){if(typeof x!="number"&&x&&!x.da){var A=x.src;if(A&&A[Zt])os(A.i,x);else{var D=x.type,W=x.proxy;A.removeEventListener?A.removeEventListener(D,W,x.capture):A.detachEvent?A.detachEvent(je(D),W):A.addListener&&A.removeListener&&A.removeListener(W),(D=ie(A))?(os(D,x),D.h==0&&(D.src=null,A[Rr]=null)):Jn(x)}}}function je(x){return x in ur?ur[x]:ur[x]="on"+x}function Q(x,A){if(x.da)x=!0;else{A=new Vn(A,this);var D=x.listener,W=x.ha||x.src;x.fa&&bo(x),x=D.call(W,A)}return x}function ie(x){return x=x[Rr],x instanceof Jt?x:null}var he="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(x){return typeof x=="function"?x:(x[he]||(x[he]=function(A){return x.handleEvent(A)}),x[he])}function pe(){He.call(this),this.i=new Jt(this),this.M=this,this.F=null}P(pe,He),pe.prototype[Zt]=!0,pe.prototype.removeEventListener=function(x,A,D,W){ct(this,x,A,D,W)};function ye(x,A){var D,W=x.F;if(W)for(D=[];W;W=W.F)D.push(W);if(x=x.M,W=A.type||A,typeof A=="string")A=new at(A,x);else if(A instanceof at)A.target=A.target||x;else{var ne=A;A=new at(W,x),G(A,ne)}if(ne=!0,D)for(var le=D.length-1;0<=le;le--){var Te=A.g=D[le];ne=Ne(Te,W,!0,A)&&ne}if(Te=A.g=x,ne=Ne(Te,W,!0,A)&&ne,ne=Ne(Te,W,!1,A)&&ne,D)for(le=0;le<D.length;le++)Te=A.g=D[le],ne=Ne(Te,W,!1,A)&&ne}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var x=this.i,A;for(A in x.g){for(var D=x.g[A],W=0;W<D.length;W++)Jn(D[W]);delete x.g[A],x.h--}}this.F=null},pe.prototype.K=function(x,A,D,W){return this.i.add(String(x),A,!1,D,W)},pe.prototype.L=function(x,A,D,W){return this.i.add(String(x),A,!0,D,W)};function Ne(x,A,D,W){if(A=x.i.g[String(A)],!A)return!0;A=A.concat();for(var ne=!0,le=0;le<A.length;++le){var Te=A[le];if(Te&&!Te.da&&Te.capture==D){var Gt=Te.listener,Tn=Te.ha||Te.src;Te.fa&&os(x.i,Te),ne=Gt.call(Tn,W)!==!1&&ne}}return ne&&!W.defaultPrevented}function Ye(x,A,D){if(typeof x=="function")D&&(x=E(x,D));else if(x&&typeof x.handleEvent=="function")x=E(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:u.setTimeout(x,A||0)}function en(x){x.g=Ye(()=>{x.g=null,x.i&&(x.i=!1,en(x))},x.l);const A=x.h;x.h=null,x.m.apply(null,A)}class Cn extends He{constructor(A,D){super(),this.m=A,this.l=D,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:en(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Co(x){He.call(this),this.h=x,this.g={}}P(Co,He);var Xt=[];function Ae(x){Y(x.g,function(A,D){this.g.hasOwnProperty(D)&&bo(A)},x),x.g={}}Co.prototype.N=function(){Co.aa.N.call(this),Ae(this)},Co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=u.JSON.stringify,Ft=u.JSON.parse,tn=class{stringify(x){return u.JSON.stringify(x,void 0)}parse(x){return u.JSON.parse(x,void 0)}};function $s(){}$s.prototype.h=null;function Vc(x){return x.h||(x.h=x.i())}function Dd(){}var xt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ui(){at.call(this,"d")}P(ui,at);function Uc(){at.call(this,"c")}P(Uc,at);var Fi={},as=null;function aa(){return as=as||new pe}Fi.La="serverreachability";function er(x){at.call(this,Fi.La,x)}P(er,at);function qs(x){const A=aa();ye(A,new er(A))}Fi.STAT_EVENT="statevent";function Nl(x,A){at.call(this,Fi.STAT_EVENT,x),this.stat=A}P(Nl,at);function nn(x){const A=aa();ye(A,new Nl(A,x))}Fi.Ma="timingevent";function _0(x,A){at.call(this,Fi.Ma,x),this.size=A}P(_0,at);function Es(x,A){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){x()},A)}function Ao(){this.g=!0}Ao.prototype.xa=function(){this.g=!1};function kr(x,A,D,W,ne,le){x.info(function(){if(x.g)if(le)for(var Te="",Gt=le.split("&"),Tn=0;Tn<Gt.length;Tn++){var Rt=Gt[Tn].split("=");if(1<Rt.length){var dn=Rt[0];Rt=Rt[1];var Hn=dn.split("_");Te=2<=Hn.length&&Hn[1]=="type"?Te+(dn+"="+Rt+"&"):Te+(dn+"=redacted&")}}else Te=null;else Te=le;return"XMLHTTP REQ ("+W+") [attempt "+ne+"]: "+A+`
`+D+`
`+Te})}function To(x,A,D,W,ne,le,Te){x.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ne+"]: "+A+`
`+D+`
`+le+" "+Te})}function tr(x,A,D,W){x.info(function(){return"XMLHTTP TEXT ("+A+"): "+la(x,D)+(W?" "+W:"")})}function De(x,A){x.info(function(){return"TIMEOUT: "+A})}Ao.prototype.info=function(){};function la(x,A){if(!x.g)return A;if(!A)return null;try{var D=JSON.parse(A);if(D){for(x=0;x<D.length;x++)if(Array.isArray(D[x])){var W=D[x];if(!(2>W.length)){var ne=W[1];if(Array.isArray(ne)&&!(1>ne.length)){var le=ne[0];if(le!="noop"&&le!="stop"&&le!="close")for(var Te=1;Te<ne.length;Te++)ne[Te]=""}}}}return an(D)}catch{return A}}var ca={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ji;function Io(){}P(Io,$s),Io.prototype.g=function(){return new XMLHttpRequest},Io.prototype.i=function(){return{}},ji=new Io;function bs(x,A,D,W){this.j=x,this.i=A,this.l=D,this.R=W||1,this.U=new Co(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cs}function Cs(){this.i=null,this.g="",this.h=!1}var E0={},Md={};function ls(x,A,D){x.L=1,x.v=An(Et(A)),x.m=D,x.P=!0,dr(x,null)}function dr(x,A){x.F=Date.now(),As(x),x.A=Et(x.v);var D=x.A,W=x.R;Array.isArray(W)||(W=[String(W)]),zn(D.i,"t",W),x.C=0,D=x.j.J,x.h=new Cs,x.g=R0(x.j,D?A:null,!x.m),0<x.O&&(x.M=new Cn(E(x.Y,x,x.g),x.O)),A=x.U,D=x.g,W=x.ca;var ne="readystatechange";Array.isArray(ne)||(ne&&(Xt[0]=ne.toString()),ne=Xt);for(var le=0;le<ne.length;le++){var Te=_s(D,ne[le],W||A.handleEvent,!1,A.h||A);if(!Te)break;A.g[Te.key]=Te}A=x.H?j(x.H):{},x.m?(x.u||(x.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,A)):(x.u="GET",x.g.ea(x.A,x.u,null,A)),qs(),kr(x.i,x.u,x.A,x.l,x.R,x.m)}bs.prototype.ca=function(x){x=x.target;const A=this.M;A&&fi(x)==3?A.j():this.Y(x)},bs.prototype.Y=function(x){try{if(x==this.g)e:{const Hn=fi(this.g);var A=this.g.Ba();const sr=this.g.Z();if(!(3>Hn)&&(Hn!=3||this.g&&(this.h.h||this.g.oa()||I0(this.g)))){this.J||Hn!=4||A==7||(A==8||0>=sr?qs(3):qs(2)),me(this);var D=this.g.Z();this.X=D;t:if(Yt(this)){var W=I0(this.g);x="";var ne=W.length,le=fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bt(this),Rl(this);var Te="";break t}this.h.i=new u.TextDecoder}for(A=0;A<ne;A++)this.h.h=!0,x+=this.h.i.decode(W[A],{stream:!(le&&A==ne-1)});W.length=0,this.h.g+=x,this.C=0,Te=this.h.g}else Te=this.g.oa();if(this.o=D==200,To(this.i,this.u,this.A,this.l,this.R,Hn,D),this.o){if(this.T&&!this.K){t:{if(this.g){var Gt,Tn=this.g;if((Gt=Tn.g?Tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Gt)){var Rt=Gt;break t}}Rt=null}if(D=Rt)tr(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bi(this,D);else{this.o=!1,this.s=3,nn(12),Bt(this),Rl(this);break e}}if(this.P){D=!0;let us;for(;!this.J&&this.C<Te.length;)if(us=b0(this,Te),us==Md){Hn==4&&(this.s=4,nn(14),D=!1),tr(this.i,this.l,null,"[Incomplete Response]");break}else if(us==E0){this.s=4,nn(15),tr(this.i,this.l,Te,"[Invalid Chunk]"),D=!1;break}else tr(this.i,this.l,us,null),Bi(this,us);if(Yt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Hn!=4||Te.length!=0||this.h.h||(this.s=1,nn(16),D=!1),this.o=this.o&&D,!D)tr(this.i,this.l,Te,"[Invalid Chunked Response]"),Bt(this),Rl(this);else if(0<Te.length&&!this.W){this.W=!0;var dn=this.j;dn.g==this&&dn.ba&&!dn.M&&(dn.j.info("Great, no buffering proxy detected. Bytes received: "+Te.length),Ul(dn),dn.M=!0,nn(11))}}else tr(this.i,this.l,Te,null),Bi(this,Te);Hn==4&&Bt(this),this.o&&!this.J&&(Hn==4?un(this.j,this):(this.o=!1,As(this)))}else Vt(this.g),D==400&&0<Te.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),Bt(this),Rl(this)}}}catch{}finally{}};function Yt(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function b0(x,A){var D=x.C,W=A.indexOf(`
`,D);return W==-1?Md:(D=Number(A.substring(D,W)),isNaN(D)?E0:(W+=1,W+D>A.length?Md:(A=A.slice(W,W+D),x.C=W+D,A)))}bs.prototype.cancel=function(){this.J=!0,Bt(this)};function As(x){x.S=Date.now()+x.I,zc(x,x.I)}function zc(x,A){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Es(E(x.ba,x),A)}function me(x){x.B&&(u.clearTimeout(x.B),x.B=null)}bs.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(De(this.i,this.A),this.L!=2&&(qs(),nn(17)),Bt(this),this.s=2,Rl(this)):zc(this,this.S-x)};function Rl(x){x.j.G==0||x.J||un(x.j,x)}function Bt(x){me(x);var A=x.M;A&&typeof A.ma=="function"&&A.ma(),x.M=null,Ae(x.U),x.g&&(A=x.g,x.g=null,A.abort(),A.ma())}function Bi(x,A){try{var D=x.j;if(D.G!=0&&(D.g==x||kl(D.h,x))){if(!x.K&&kl(D.h,x)&&D.G==3){try{var W=D.Da.g.parse(A)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ne=W;if(ne[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<x.F)ga(D),Gc(D);else break e;Bd(D),nn(18)}}else D.za=ne[1],0<D.za-D.T&&37500>ne[2]&&D.F&&D.v==0&&!D.C&&(D.C=Es(E(D.Za,D),6e3));if(1>=yt(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else Gr(D,11)}else if((x.K||D.g==x)&&ga(D),!T(A))for(ne=D.Da.g.parse(A),A=0;A<ne.length;A++){let Rt=ne[A];if(D.T=Rt[0],Rt=Rt[1],D.G==2)if(Rt[0]=="c"){D.K=Rt[1],D.ia=Rt[2];const dn=Rt[3];dn!=null&&(D.la=dn,D.j.info("VER="+D.la));const Hn=Rt[4];Hn!=null&&(D.Aa=Hn,D.j.info("SVER="+D.Aa));const sr=Rt[5];sr!=null&&typeof sr=="number"&&0<sr&&(W=1.5*sr,D.L=W,D.j.info("backChannelRequestTimeoutMs_="+W)),W=D;const us=x.g;if(us){const $r=us.g?us.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($r){var le=W.h;le.g||$r.indexOf("spdy")==-1&&$r.indexOf("quic")==-1&&$r.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(Pl(le,le.h),le.h=null))}if(W.D){const Vd=us.g?us.g.getResponseHeader("X-HTTP-Session-Id"):null;Vd&&(W.ya=Vd,Se(W.I,W.D,Vd))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-x.F,D.j.info("Handshake RTT: "+D.R+"ms")),W=D;var Te=x;if(W.qa=qe(W,W.J?W.ia:null,W.W),Te.K){Hc(W.h,Te);var Gt=Te,Tn=W.L;Tn&&(Gt.I=Tn),Gt.B&&(me(Gt),As(Gt)),W.g=Te}else N0(W);0<D.i.length&&it(D)}else Rt[0]!="stop"&&Rt[0]!="close"||Gr(D,7);else D.G==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Gr(D,7):Xs(D):Rt[0]!="noop"&&D.l&&D.l.ta(Rt),D.v=0)}}qs(4)}catch{}}var Ap=class{constructor(x,A){this.g=x,this.map=A}};function Ot(x){this.l=x||10,u.PerformanceNavigationTiming?(x=u.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nt(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function yt(x){return x.h?1:x.g?x.g.size:0}function kl(x,A){return x.h?x.h==A:x.g?x.g.has(A):!1}function Pl(x,A){x.g?x.g.add(A):x.h=A}function Hc(x,A){x.h&&x.h==A?x.h=null:x.g&&x.g.has(A)&&x.g.delete(A)}Ot.prototype.cancel=function(){if(this.i=Pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Pn(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let A=x.i;for(const D of x.g.values())A=A.concat(D.D);return A}return C(x.i)}function Vi(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(f(x)){for(var A=[],D=x.length,W=0;W<D;W++)A.push(x[W]);return A}A=[],D=0;for(W in x)A[D++]=x[W];return A}function Tp(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(f(x)||typeof x=="string"){var A=[];x=x.length;for(var D=0;D<x;D++)A.push(D);return A}A=[],D=0;for(const W in x)A[D++]=W;return A}}}function wn(x,A){if(x.forEach&&typeof x.forEach=="function")x.forEach(A,void 0);else if(f(x)||typeof x=="string")Array.prototype.forEach.call(x,A,void 0);else for(var D=Tp(x),W=Vi(x),ne=W.length,le=0;le<ne;le++)A.call(void 0,W[le],D&&D[le],x)}var di=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ip(x,A){if(x){x=x.split("&");for(var D=0;D<x.length;D++){var W=x[D].indexOf("="),ne=null;if(0<=W){var le=x[D].substring(0,W);ne=x[D].substring(W+1)}else le=x[D];A(le,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function cs(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof cs){this.h=x.h,Un(this,x.j),this.o=x.o,this.g=x.g,re(this,x.s),this.l=x.l;var A=x.i,D=new So;D.i=A.i,A.g&&(D.g=new Map(A.g),D.h=A.h),q(this,D),this.m=x.m}else x&&(A=String(x).match(di))?(this.h=!1,Un(this,A[1]||"",!0),this.o=hr(A[2]||""),this.g=hr(A[3]||"",!0),re(this,A[4]),this.l=hr(A[5]||"",!0),q(this,A[6]||"",!0),this.m=hr(A[7]||"")):(this.h=!1,this.i=new So(null,this.h))}cs.prototype.toString=function(){var x=[],A=this.j;A&&x.push(Ol(A,Wr,!0),":");var D=this.g;return(D||A=="file")&&(x.push("//"),(A=this.o)&&x.push(Ol(A,Wr,!0),"@"),x.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&x.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&x.push("/"),x.push(Ol(D,D.charAt(0)=="/"?ln:$e,!0))),(D=this.i.toString())&&x.push("?",D),(D=this.m)&&x.push("#",Ol(D,Sp)),x.join("")};function Et(x){return new cs(x)}function Un(x,A,D){x.j=D?hr(A,!0):A,x.j&&(x.j=x.j.replace(/:$/,""))}function re(x,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);x.s=A}else x.s=null}function q(x,A,D){A instanceof So?(x.i=A,Ui(x.i,x.h)):(D||(A=Ol(A,C0)),x.i=new So(A,x.h))}function Se(x,A,D){x.i.set(A,D)}function An(x){return Se(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function hr(x,A){return x?A?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Ol(x,A,D){return typeof x=="string"?(x=encodeURI(x).replace(A,Ld),D&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Ld(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Wr=/[#\/\?@]/g,$e=/[#\?:]/g,ln=/[#\?]/g,C0=/[#\?@]/g,Sp=/#/g;function So(x,A){this.h=this.g=null,this.i=x||null,this.j=!!A}function Ts(x){x.g||(x.g=new Map,x.h=0,x.i&&Ip(x.i,function(A,D){x.add(decodeURIComponent(A.replace(/\+/g," ")),D)}))}t=So.prototype,t.add=function(x,A){Ts(this),this.i=null,x=Ks(this,x);var D=this.g.get(x);return D||this.g.set(x,D=[]),D.push(A),this.h+=1,this};function Wc(x,A){Ts(x),A=Ks(x,A),x.g.has(A)&&(x.i=null,x.h-=x.g.get(A).length,x.g.delete(A))}function A0(x,A){return Ts(x),A=Ks(x,A),x.g.has(A)}t.forEach=function(x,A){Ts(this),this.g.forEach(function(D,W){D.forEach(function(ne){x.call(A,ne,W,this)},this)},this)},t.na=function(){Ts(this);const x=Array.from(this.g.values()),A=Array.from(this.g.keys()),D=[];for(let W=0;W<A.length;W++){const ne=x[W];for(let le=0;le<ne.length;le++)D.push(A[W])}return D},t.V=function(x){Ts(this);let A=[];if(typeof x=="string")A0(this,x)&&(A=A.concat(this.g.get(Ks(this,x))));else{x=Array.from(this.g.values());for(let D=0;D<x.length;D++)A=A.concat(x[D])}return A},t.set=function(x,A){return Ts(this),this.i=null,x=Ks(this,x),A0(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[A]),this.h+=1,this},t.get=function(x,A){return x?(x=this.V(x),0<x.length?String(x[0]):A):A};function zn(x,A,D){Wc(x,A),0<D.length&&(x.i=null,x.g.set(Ks(x,A),C(D)),x.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],A=Array.from(this.g.keys());for(var D=0;D<A.length;D++){var W=A[D];const le=encodeURIComponent(String(W)),Te=this.V(W);for(W=0;W<Te.length;W++){var ne=le;Te[W]!==""&&(ne+="="+encodeURIComponent(String(Te[W]))),x.push(ne)}}return this.i=x.join("&")};function Ks(x,A){return A=String(A),x.j&&(A=A.toLowerCase()),A}function Ui(x,A){A&&!x.j&&(Ts(x),x.i=null,x.g.forEach(function(D,W){var ne=W.toLowerCase();W!=ne&&(Wc(this,W),zn(this,ne,D))},x)),x.j=A}function Qe(x,A){const D=new Ao;if(u.Image){const W=new Image;W.onload=I(Ze,D,"TestLoadImage: loaded",!0,A,W),W.onerror=I(Ze,D,"TestLoadImage: error",!1,A,W),W.onabort=I(Ze,D,"TestLoadImage: abort",!1,A,W),W.ontimeout=I(Ze,D,"TestLoadImage: timeout",!1,A,W),u.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=x}else A(!1)}function Np(x,A){const D=new Ao,W=new AbortController,ne=setTimeout(()=>{W.abort(),Ze(D,"TestPingServer: timeout",!1,A)},1e4);fetch(x,{signal:W.signal}).then(le=>{clearTimeout(ne),le.ok?Ze(D,"TestPingServer: ok",!0,A):Ze(D,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(ne),Ze(D,"TestPingServer: error",!1,A)})}function Ze(x,A,D,W,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),W(D)}catch{}}function nr(){this.g=new tn}function Rp(x,A,D){const W=D||"";try{wn(x,function(ne,le){let Te=ne;m(ne)&&(Te=an(ne)),A.push(W+le+"="+encodeURIComponent(Te))})}catch(ne){throw A.push(W+"type="+encodeURIComponent("_badmap")),ne}}function ua(x){this.l=x.Ub||null,this.j=x.eb||!1}P(ua,$s),ua.prototype.g=function(){return new Dl(this.l,this.j)},ua.prototype.i=function(x){return function(){return x}}({});function Dl(x,A){pe.call(this),this.D=x,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Dl,pe),t=Dl.prototype,t.open=function(x,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=A,this.readyState=1,hi(this)},t.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(A.body=x),(this.D||u).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ml(this)),this.readyState=0},t.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zi(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function zi(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}t.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var A=x.value?x.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!x.done}))&&(this.response=this.responseText+=A)}x.done?Ml(this):hi(this),this.readyState==3&&zi(this)}},t.Ra=function(x){this.g&&(this.response=this.responseText=x,Ml(this))},t.Qa=function(x){this.g&&(this.response=x,Ml(this))},t.ga=function(){this.g&&Ml(this)};function Ml(x){x.readyState=4,x.l=null,x.j=null,x.v=null,hi(x)}t.setRequestHeader=function(x,A){this.u.append(x,A)},t.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],A=this.h.entries();for(var D=A.next();!D.done;)D=D.value,x.push(D[0]+": "+D[1]),D=A.next();return x.join(`\r
`)};function hi(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Dl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function da(x){let A="";return Y(x,function(D,W){A+=W,A+=":",A+=D,A+=`\r
`}),A}function No(x,A,D){e:{for(W in D){var W=!1;break e}W=!0}W||(D=da(D),typeof x=="string"?D!=null&&encodeURIComponent(String(D)):Se(x,A,D))}function cn(x){pe.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(cn,pe);var Ll=/^https?$/i,Fl=["POST","PUT"];t=cn.prototype,t.Ha=function(x){this.J=x},t.ea=function(x,A,D,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);A=A?A.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ji.g(),this.v=this.o?Vc(this.o):Vc(ji),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(A,String(x),!0),this.B=!1}catch(le){wr(this,le);return}if(x=D||"",D=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ne in W)D.set(ne,W[ne]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const le of W.keys())D.set(le,W.get(le));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(D.keys()).find(le=>le.toLowerCase()=="content-type"),ne=u.FormData&&x instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Fl,A,void 0))||W||ne||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,Te]of D)this.g.setRequestHeader(le,Te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{T0(this),this.u=!0,this.g.send(x),this.u=!1}catch(le){wr(this,le)}};function wr(x,A){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=A,x.m=5,Fd(x),jl(x)}function Fd(x){x.A||(x.A=!0,ye(x,"complete"),ye(x,"error"))}t.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,ye(this,"complete"),ye(this,"abort"),jl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jl(this,!0)),cn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jd(this):this.bb())},t.bb=function(){jd(this)};function jd(x){if(x.h&&typeof l<"u"&&(!x.v[1]||fi(x)!=4||x.Z()!=2)){if(x.u&&fi(x)==4)Ye(x.Ea,0,x);else if(ye(x,"readystatechange"),fi(x)==4){x.h=!1;try{const Te=x.Z();e:switch(Te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var D;if(!(D=A)){var W;if(W=Te===0){var ne=String(x.D).match(di)[1]||null;!ne&&u.self&&u.self.location&&(ne=u.self.location.protocol.slice(0,-1)),W=!Ll.test(ne?ne.toLowerCase():"")}D=W}if(D)ye(x,"complete"),ye(x,"success");else{x.m=6;try{var le=2<fi(x)?x.g.statusText:""}catch{le=""}x.l=le+" ["+x.Z()+"]",Fd(x)}}finally{jl(x)}}}}function jl(x,A){if(x.g){T0(x);const D=x.g,W=x.v[0]?()=>{}:null;x.g=null,x.v=null,A||ye(x,"ready");try{D.onreadystatechange=W}catch{}}}function T0(x){x.I&&(u.clearTimeout(x.I),x.I=null)}t.isActive=function(){return!!this.g};function fi(x){return x.g?x.g.readyState:0}t.Z=function(){try{return 2<fi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(x){if(this.g){var A=this.g.responseText;return x&&A.indexOf(x)==0&&(A=A.substring(x.length)),Ft(A)}};function I0(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Vt(x){const A={};x=(x.g&&2<=fi(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<x.length;W++){if(T(x[W]))continue;var D=X(x[W]);const ne=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const le=A[ne]||[];A[ne]=le,le.push(D)}M(A,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ha(x,A,D){return D&&D.internalChannelParams&&D.internalChannelParams[x]||A}function Bl(x){this.Aa=0,this.i=[],this.j=new Ao,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ha("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ha("baseRetryDelayMs",5e3,x),this.cb=ha("retryDelaySeedMs",1e4,x),this.Wa=ha("forwardChannelMaxRetries",2,x),this.wa=ha("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Ot(x&&x.concurrentRequestLimit),this.Da=new nr,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bl.prototype,t.la=8,t.G=1,t.connect=function(x,A,D,W){nn(0),this.W=x,this.H=A||{},D&&W!==void 0&&(this.H.OSID=D,this.H.OAID=W),this.F=this.X,this.I=qe(this,null,this.W),it(this)};function Xs(x){if(ae(x),x.G==3){var A=x.U++,D=Et(x.I);if(Se(D,"SID",x.K),Se(D,"RID",A),Se(D,"TYPE","terminate"),fa(x,D),A=new bs(x,x.j,A),A.L=2,A.v=An(Et(D)),D=!1,u.navigator&&u.navigator.sendBeacon)try{D=u.navigator.sendBeacon(A.v.toString(),"")}catch{}!D&&u.Image&&(new Image().src=A.v,D=!0),D||(A.g=R0(A.j,null),A.g.ea(A.v)),A.F=Date.now(),As(A)}Ut(x)}function Gc(x){x.g&&(Ul(x),x.g.cancel(),x.g=null)}function ae(x){Gc(x),x.u&&(u.clearTimeout(x.u),x.u=null),ga(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&u.clearTimeout(x.s),x.s=null)}function it(x){if(!Nt(x.h)&&!x.s){x.s=!0;var A=x.Ga;we||Ie(),oe||(we(),oe=!0),ue.add(A,x),x.B=0}}function rr(x,A){return yt(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=A.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Es(E(x.Ga,x,A),zl(x,x.B)),x.B++,!0)}t.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const ne=new bs(this,this.j,x);let le=this.o;if(this.S&&(le?(le=j(le),G(le,this.S)):le=this.S),this.m!==null||this.O||(ne.H=le,le=null),this.P)e:{for(var A=0,D=0;D<this.i.length;D++){t:{var W=this.i[D];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(A+=W,4096<A){A=D;break e}if(A===4096||D===this.i.length-1){A=D+1;break e}}A=1e3}else A=1e3;A=S0(this,ne,A),D=Et(this.I),Se(D,"RID",x),Se(D,"CVER",22),this.D&&Se(D,"X-HTTP-Session-Id",this.D),fa(this,D),le&&(this.O?A="headers="+encodeURIComponent(String(da(le)))+"&"+A:this.m&&No(D,this.m,le)),Pl(this.h,ne),this.Ua&&Se(D,"TYPE","init"),this.P?(Se(D,"$req",A),Se(D,"SID","null"),ne.T=!0,ls(ne,D,null)):ls(ne,D,A),this.G=2}}else this.G==3&&(x?Vl(this,x):this.i.length==0||Nt(this.h)||Vl(this))};function Vl(x,A){var D;A?D=A.l:D=x.U++;const W=Et(x.I);Se(W,"SID",x.K),Se(W,"RID",D),Se(W,"AID",x.T),fa(x,W),x.m&&x.o&&No(W,x.m,x.o),D=new bs(x,x.j,D,x.B+1),x.m===null&&(D.H=x.o),A&&(x.i=A.D.concat(x.i)),A=S0(x,D,1e3),D.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Pl(x.h,D),ls(D,W,A)}function fa(x,A){x.H&&Y(x.H,function(D,W){Se(A,W,D)}),x.l&&wn({},function(D,W){Se(A,W,D)})}function S0(x,A,D){D=Math.min(x.i.length,D);var W=x.l?E(x.l.Na,x.l,x):null;e:{var ne=x.i;let le=-1;for(;;){const Te=["count="+D];le==-1?0<D?(le=ne[0].g,Te.push("ofs="+le)):le=0:Te.push("ofs="+le);let Gt=!0;for(let Tn=0;Tn<D;Tn++){let Rt=ne[Tn].g;const dn=ne[Tn].map;if(Rt-=le,0>Rt)le=Math.max(0,ne[Tn].g-100),Gt=!1;else try{Rp(dn,Te,"req"+Rt+"_")}catch{W&&W(dn)}}if(Gt){W=Te.join("&");break e}}}return x=x.i.splice(0,D),A.D=x,W}function N0(x){if(!x.g&&!x.u){x.Y=1;var A=x.Fa;we||Ie(),oe||(we(),oe=!0),ue.add(A,x),x.v=0}}function Bd(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Es(E(x.Fa,x),zl(x,x.v)),x.v++,!0)}t.Fa=function(){if(this.u=null,On(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Es(E(this.ab,this),x)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),Gc(this),On(this))};function Ul(x){x.A!=null&&(u.clearTimeout(x.A),x.A=null)}function On(x){x.g=new bs(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var A=Et(x.qa);Se(A,"RID","rpc"),Se(A,"SID",x.K),Se(A,"AID",x.T),Se(A,"CI",x.F?"0":"1"),!x.F&&x.ja&&Se(A,"TO",x.ja),Se(A,"TYPE","xmlhttp"),fa(x,A),x.m&&x.o&&No(A,x.m,x.o),x.L&&(x.g.I=x.L);var D=x.g;x=x.ia,D.L=1,D.v=An(Et(A)),D.m=null,D.P=!0,dr(D,x)}t.Za=function(){this.C!=null&&(this.C=null,Gc(this),Bd(this),nn(19))};function ga(x){x.C!=null&&(u.clearTimeout(x.C),x.C=null)}function un(x,A){var D=null;if(x.g==A){ga(x),Ul(x),x.g=null;var W=2}else if(kl(x.h,A))D=A.D,Hc(x.h,A),W=1;else return;if(x.G!=0){if(A.o)if(W==1){D=A.m?A.m.length:0,A=Date.now()-A.F;var ne=x.B;W=aa(),ye(W,new _0(W,D)),it(x)}else N0(x);else if(ne=A.s,ne==3||ne==0&&0<A.X||!(W==1&&rr(x,A)||W==2&&Bd(x)))switch(D&&0<D.length&&(A=x.h,A.i=A.i.concat(D)),ne){case 1:Gr(x,5);break;case 4:Gr(x,10);break;case 3:Gr(x,6);break;default:Gr(x,2)}}}function zl(x,A){let D=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(D*=2),D*A}function Gr(x,A){if(x.j.info("Error code "+A),A==2){var D=E(x.fb,x),W=x.Xa;const ne=!W;W=new cs(W||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Un(W,"https"),An(W),ne?Qe(W.toString(),D):Np(W.toString(),D)}else nn(2);x.G=0,x.l&&x.l.sa(A),Ut(x),ae(x)}t.fb=function(x){x?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function Ut(x){if(x.G=0,x.ka=[],x.l){const A=Pn(x.h);(A.length!=0||x.i.length!=0)&&(k(x.ka,A),k(x.ka,x.i),x.h.i.length=0,C(x.i),x.i.length=0),x.l.ra()}}function qe(x,A,D){var W=D instanceof cs?Et(D):new cs(D);if(W.g!="")A&&(W.g=A+"."+W.g),re(W,W.s);else{var ne=u.location;W=ne.protocol,A=A?A+"."+ne.hostname:ne.hostname,ne=+ne.port;var le=new cs(null);W&&Un(le,W),A&&(le.g=A),ne&&re(le,ne),D&&(le.l=D),W=le}return D=x.D,A=x.ya,D&&A&&Se(W,D,A),Se(W,"VER",x.la),fa(x,W),W}function R0(x,A,D){if(A&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=x.Ca&&!x.pa?new cn(new ua({eb:D})):new cn(x.pa),A.Ha(x.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kt(){}t=Kt.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ys(){}Ys.prototype.g=function(x,A){return new Xn(x,A)};function Xn(x,A){pe.call(this),this.g=new Bl(A),this.l=x,this.h=A&&A.messageUrlParams||null,x=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(x?x["X-WebChannel-Content-Type"]=A.messageContentType:x={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(x?x["X-WebChannel-Client-Profile"]=A.va:x={"X-WebChannel-Client-Profile":A.va}),this.g.S=x,(x=A&&A.Sb)&&!T(x)&&(this.g.m=x),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!T(A)&&(this.g.D=A,x=this.h,x!==null&&A in x&&(x=this.h,A in x&&delete x[A])),this.j=new Hi(this)}P(Xn,pe),Xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){Xs(this.g)},Xn.prototype.o=function(x){var A=this.g;if(typeof x=="string"){var D={};D.__data__=x,x=D}else this.u&&(D={},D.__data__=an(x),x=D);A.i.push(new Ap(A.Ya++,x)),A.G==3&&it(A)},Xn.prototype.N=function(){this.g.l=null,delete this.j,Xs(this.g),delete this.g,Xn.aa.N.call(this)};function k0(x){ui.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var A=x.__sm__;if(A){e:{for(const D in A){x=D;break e}x=void 0}(this.i=x)&&(x=this.i,A=A!==null&&x in A?A[x]:void 0),this.data=A}else this.data=x}P(k0,ui);function Is(){Uc.call(this),this.status=1}P(Is,Uc);function Hi(x){this.g=x}P(Hi,Kt),Hi.prototype.ua=function(){ye(this.g,"a")},Hi.prototype.ta=function(x){ye(this.g,new k0(x))},Hi.prototype.sa=function(x){ye(this.g,new Is)},Hi.prototype.ra=function(){ye(this.g,"b")},Ys.prototype.createWebChannel=Ys.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,wN=function(){return new Ys},xN=function(){return aa()},yN=Fi,sw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ca.NO_ERROR=0,ca.TIMEOUT=8,ca.HTTP_ERROR=6,D1=ca,xr.COMPLETE="complete",pN=xr,Dd.EventType=xt,xt.OPEN="a",xt.CLOSE="b",xt.ERROR="c",xt.MESSAGE="d",pe.prototype.listen=pe.prototype.K,lh=Dd,cn.prototype.listenOnce=cn.prototype.L,cn.prototype.getLastError=cn.prototype.Ka,cn.prototype.getLastErrorCode=cn.prototype.Ba,cn.prototype.getStatus=cn.prototype.Z,cn.prototype.getResponseJson=cn.prototype.Oa,cn.prototype.getResponseText=cn.prototype.oa,cn.prototype.send=cn.prototype.ea,cn.prototype.setWithCredentials=cn.prototype.Ha,mN=cn}).apply(typeof t1<"u"?t1:typeof self<"u"?self:typeof window<"u"?window:{});const fC="@firebase/firestore",gC="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new m2("@firebase/firestore");function Jc(){return bc.logLevel}function Fe(t,...e){if(bc.logLevel<=Ct.DEBUG){const n=e.map(S2);bc.debug(`Firestore (${Nd}): ${t}`,...n)}}function ta(t,...e){if(bc.logLevel<=Ct.ERROR){const n=e.map(S2);bc.error(`Firestore (${Nd}): ${t}`,...n)}}function id(t,...e){if(bc.logLevel<=Ct.WARN){const n=e.map(S2);bc.warn(`Firestore (${Nd}): ${t}`,...n)}}function S2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,vN(t,r,n)}function vN(t,e,n){let r=`FIRESTORE (${Nd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ta(r),new Error(r)}function Wt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||vN(e,s,r)}function ot(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends vo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lr.UNAUTHENTICATED))}shutdown(){}}class ZB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class JB{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Wt(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let i=new $o;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $o,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=i;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},u=f=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>u(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $o)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Wt(typeof r.accessToken=="string",31837,{l:r}),new _N(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Wt(e===null||typeof e=="string",2055,{h:e}),new Lr(e)}}class eV{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Lr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tV{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new eV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Wt(this.o===void 0,3512);const r=i=>{i.error!=null&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const l=i.token!==this.m;return this.m=i.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Wt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new mC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=rV(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function pt(t,e){return t<e?-1:t>e?1:0}function iw(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return pt(r,s);{const i=EN(),l=sV(i.encode(pC(t,n)),i.encode(pC(e,n)));return l!==0?l:pt(r,s)}}n+=r>65535?2:1}return pt(t.length,e.length)}function pC(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function sV(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return pt(t[n],e[n]);return pt(t.length,e.length)}function od(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=-62135596800,xC=1e6;class lr{static now(){return lr.fromMillis(Date.now())}static fromDate(e){return lr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*xC);return new lr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Le(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Le(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yC)throw new Le(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xC}_compareTo(e){return this.seconds===e.seconds?pt(this.nanoseconds,e.nanoseconds):pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-yC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{static fromTimestamp(e){return new st(e)}static min(){return new st(new lr(0,0))}static max(){return new st(new lr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="__name__";class qi{constructor(e,n,r){n===void 0?n=0:n>e.length&&et(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&et(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=qi.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return pt(e.length,n.length)}static compareSegments(e,n){const r=qi.isNumericId(e),s=qi.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?qi.extractNumericId(e).compare(qi.extractNumericId(n)):iw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qa.fromString(e.substring(4,e.length-2))}}class mn extends qi{construct(e,n,r){return new mn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new mn(n)}static emptyPath(){return new mn([])}}const iV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ar extends qi{construct(e,n,r){return new Ar(e,n,r)}static isValidIdentifier(e){return iV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wC}static keyField(){return new Ar([wC])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Le(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Le(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Le(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(i(),s++)}if(i(),l)throw new Le(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ar(n)}static emptyPath(){return new Ar([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(mn.fromString(e))}static fromName(e){return new Ke(mn.fromString(e).popFirst(5))}static empty(){return new Ke(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new mn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=-1;function oV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=st.fromTimestamp(r===1e9?new lr(n+1,0):new lr(n,r));return new ol(s,Ke.empty(),e)}function aV(t){return new ol(t.readTime,t.key,uf)}class ol{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ol(st.min(),Ke.empty(),uf)}static max(){return new ol(st.max(),Ke.empty(),uf)}}function lV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ke.comparator(t.documentKey,e.documentKey),n!==0?n:pt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rd(t){if(t.code!==fe.FAILED_PRECONDITION||t.message!==cV)throw t;Fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ge((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ge?n:ge.resolve(n)}catch(n){return ge.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.reject(n)}static resolve(e){return new ge((n,r)=>{n(e)})}static reject(e){return new ge((n,r)=>{r(e)})}static waitFor(e){return new ge((n,r)=>{let s=0,i=0,l=!1;e.forEach(u=>{++s,u.next(()=>{++i,l&&i===s&&n()},f=>r(f))}),l=!0,i===s&&n()})}static or(e){let n=ge.resolve(!1);for(const r of e)n=n.next(s=>s?ge.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new ge((r,s)=>{const i=e.length,l=new Array(i);let u=0;for(let f=0;f<i;f++){const m=f;n(e[m]).next(w=>{l[m]=w,++u,u===i&&r(l)},w=>s(w))}})}static doWhile(e,n){return new ge((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function dV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}zm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=-1;function Hm(t){return t==null}function Ig(t){return t===0&&1/t==-1/0}function hV(t){return typeof t=="number"&&Number.isInteger(t)&&!Ig(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="";function fV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vC(e)),e=gV(t.get(n),e);return vC(e)}function gV(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case CN:n+="";break;default:n+=i}}return n}function vC(t){return t+CN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Tl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){this.comparator=e,this.root=n||br.EMPTY}insert(e,n){return new kn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,br.BLACK,null,null))}remove(e){return new kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,br.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new n1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new n1(this.root,e,this.comparator,!1)}getReverseIterator(){return new n1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new n1(this.root,e,this.comparator,!0)}}class n1{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class br{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??br.RED,this.left=s??br.EMPTY,this.right=i??br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new br(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return br.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw et(27949);return e+(this.isRed()?0:1)}}br.EMPTY=null,br.RED=!0,br.BLACK=!1;br.EMPTY=new class{constructor(){this.size=0}get key(){throw et(57766)}get value(){throw et(16141)}get color(){throw et(16727)}get left(){throw et(29726)}get right(){throw et(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new br(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.comparator=e,this.data=new kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new EC(this.data.getIterator())}getIteratorFrom(e){return new EC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new cr(this.comparator);return n.data=e,n}}class EC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.fields=e,e.sort(Ar.comparator)}static empty(){return new Ms([])}unionWith(e){let n=new cr(Ar.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ms(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return od(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new TN("Invalid base64 string: "+i):i}}(e);return new Nr(n)}static fromUint8Array(e){const n=function(s){let i="";for(let l=0;l<s.length;++l)i+=String.fromCharCode(s[l]);return i}(e);return new Nr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nr.EMPTY_BYTE_STRING=new Nr("");const mV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function al(t){if(Wt(!!t,39018),typeof t=="string"){let e=0;const n=mV.exec(t);if(Wt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wn(t.seconds),nanos:Wn(t.nanos)}}function Wn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ll(t){return typeof t=="string"?Nr.fromBase64String(t):Nr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="server_timestamp",SN="__type__",NN="__previous_value__",RN="__local_write_time__";function R2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[SN])===null||n===void 0?void 0:n.stringValue)===IN}function Wm(t){const e=t.mapValue.fields[NN];return R2(e)?Wm(e):e}function df(t){const e=al(t.mapValue.fields[RN].timestampValue);return new lr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n,r,s,i,l,u,f,m,w){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=w}}const Sg="(default)";class hf{constructor(e,n){this.projectId=e,this.database=n||Sg}static empty(){return new hf("","")}get isDefaultDatabase(){return this.database===Sg}isEqual(e){return e instanceof hf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="__type__",PN="__max__",r1={mapValue:{fields:{__type__:{stringValue:PN}}}},ON="__vector__",Ng="value";function cl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?R2(t)?4:xV(t)?9007199254740991:yV(t)?10:11:et(28295,{value:t})}function po(t,e){if(t===e)return!0;const n=cl(t);if(n!==cl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return df(t).isEqual(df(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const l=al(s.timestampValue),u=al(i.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ll(s.bytesValue).isEqual(ll(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Wn(s.geoPointValue.latitude)===Wn(i.geoPointValue.latitude)&&Wn(s.geoPointValue.longitude)===Wn(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Wn(s.integerValue)===Wn(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const l=Wn(s.doubleValue),u=Wn(i.doubleValue);return l===u?Ig(l)===Ig(u):isNaN(l)&&isNaN(u)}return!1}(t,e);case 9:return od(t.arrayValue.values||[],e.arrayValue.values||[],po);case 10:case 11:return function(s,i){const l=s.mapValue.fields||{},u=i.mapValue.fields||{};if(_C(l)!==_C(u))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(u[f]===void 0||!po(l[f],u[f])))return!1;return!0}(t,e);default:return et(52216,{left:t})}}function ff(t,e){return(t.values||[]).find(n=>po(n,e))!==void 0}function ad(t,e){if(t===e)return 0;const n=cl(t),r=cl(e);if(n!==r)return pt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pt(t.booleanValue,e.booleanValue);case 2:return function(i,l){const u=Wn(i.integerValue||i.doubleValue),f=Wn(l.integerValue||l.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(t,e);case 3:return bC(t.timestampValue,e.timestampValue);case 4:return bC(df(t),df(e));case 5:return iw(t.stringValue,e.stringValue);case 6:return function(i,l){const u=ll(i),f=ll(l);return u.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(i,l){const u=i.split("/"),f=l.split("/");for(let m=0;m<u.length&&m<f.length;m++){const w=pt(u[m],f[m]);if(w!==0)return w}return pt(u.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,l){const u=pt(Wn(i.latitude),Wn(l.latitude));return u!==0?u:pt(Wn(i.longitude),Wn(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return CC(t.arrayValue,e.arrayValue);case 10:return function(i,l){var u,f,m,w;const v=i.fields||{},E=l.fields||{},I=(u=v[Ng])===null||u===void 0?void 0:u.arrayValue,P=(f=E[Ng])===null||f===void 0?void 0:f.arrayValue,C=pt(((m=I==null?void 0:I.values)===null||m===void 0?void 0:m.length)||0,((w=P==null?void 0:P.values)===null||w===void 0?void 0:w.length)||0);return C!==0?C:CC(I,P)}(t.mapValue,e.mapValue);case 11:return function(i,l){if(i===r1.mapValue&&l===r1.mapValue)return 0;if(i===r1.mapValue)return 1;if(l===r1.mapValue)return-1;const u=i.fields||{},f=Object.keys(u),m=l.fields||{},w=Object.keys(m);f.sort(),w.sort();for(let v=0;v<f.length&&v<w.length;++v){const E=iw(f[v],w[v]);if(E!==0)return E;const I=ad(u[f[v]],m[w[v]]);if(I!==0)return I}return pt(f.length,w.length)}(t.mapValue,e.mapValue);default:throw et(23264,{Pe:n})}}function bC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pt(t,e);const n=al(t),r=al(e),s=pt(n.seconds,r.seconds);return s!==0?s:pt(n.nanos,r.nanos)}function CC(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ad(n[s],r[s]);if(i)return i}return pt(n.length,r.length)}function ld(t){return ow(t)}function ow(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=al(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ll(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ke.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ow(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const l of r)i?i=!1:s+=",",s+=`${l}:${ow(n.fields[l])}`;return s+"}"}(t.mapValue):et(61005,{value:t})}function M1(t){switch(cl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wm(t);return e?16+M1(e):16;case 5:return 2*t.stringValue.length;case 6:return ll(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+M1(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Tl(r.fields,(i,l)=>{s+=i.length+M1(l)}),s}(t.mapValue);default:throw et(13486,{value:t})}}function AC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function aw(t){return!!t&&"integerValue"in t}function k2(t){return!!t&&"arrayValue"in t}function TC(t){return!!t&&"nullValue"in t}function IC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function L1(t){return!!t&&"mapValue"in t}function yV(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[kN])===null||n===void 0?void 0:n.stringValue)===ON}function Sh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Tl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Sh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===PN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.value=e}static empty(){return new ps({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!L1(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sh(n)}setAll(e){let n=Ar.emptyPath(),r={},s=[];e.forEach((l,u)=>{if(!n.isImmediateParentOf(u)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=u.popLast()}l?r[u.lastSegment()]=Sh(l):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());L1(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return po(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];L1(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Tl(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ps(Sh(this.value))}}function DN(t){const e=[];return Tl(t.fields,(n,r)=>{const s=new Ar([n]);if(L1(r)){const i=DN(r.mapValue).fields;if(i.length===0)e.push(s);else for(const l of i)e.push(s.child(l))}else e.push(s)}),new Ms(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r,s,i,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=l,this.documentState=u}static newInvalidDocument(e){return new jr(e,0,st.min(),st.min(),st.min(),ps.empty(),0)}static newFoundDocument(e,n,r,s){return new jr(e,1,n,st.min(),r,s,0)}static newNoDocument(e,n){return new jr(e,2,n,st.min(),st.min(),ps.empty(),0)}static newUnknownDocument(e,n){return new jr(e,3,n,st.min(),st.min(),ps.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(st.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ps.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ps.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n){this.position=e,this.inclusive=n}}function SC(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],l=t.position[s];if(i.field.isKeyField()?r=Ke.comparator(Ke.fromName(l.referenceValue),n.key):r=ad(l,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function NC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!po(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n="asc"){this.field=e,this.dir=n}}function wV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{}class Zn extends MN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _V(e,n,r):n==="array-contains"?new CV(e,r):n==="in"?new AV(e,r):n==="not-in"?new TV(e,r):n==="array-contains-any"?new IV(e,r):new Zn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new EV(e,r):new bV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ad(n,this.value)):n!==null&&cl(this.value)===cl(n)&&this.matchesComparison(ad(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends MN{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Di(e,n)}matches(e){return LN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function LN(t){return t.op==="and"}function FN(t){return vV(t)&&LN(t)}function vV(t){for(const e of t.filters)if(e instanceof Di)return!1;return!0}function lw(t){if(t instanceof Zn)return t.field.canonicalString()+t.op.toString()+ld(t.value);if(FN(t))return t.filters.map(e=>lw(e)).join(",");{const e=t.filters.map(n=>lw(n)).join(",");return`${t.op}(${e})`}}function jN(t,e){return t instanceof Zn?function(r,s){return s instanceof Zn&&r.op===s.op&&r.field.isEqual(s.field)&&po(r.value,s.value)}(t,e):t instanceof Di?function(r,s){return s instanceof Di&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,l,u)=>i&&jN(l,s.filters[u]),!0):!1}(t,e):void et(19439)}function BN(t){return t instanceof Zn?function(n){return`${n.field.canonicalString()} ${n.op} ${ld(n.value)}`}(t):t instanceof Di?function(n){return n.op.toString()+" {"+n.getFilters().map(BN).join(" ,")+"}"}(t):"Filter"}class _V extends Zn{constructor(e,n,r){super(e,n,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const n=Ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class EV extends Zn{constructor(e,n){super(e,"in",n),this.keys=VN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class bV extends Zn{constructor(e,n){super(e,"not-in",n),this.keys=VN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function VN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class CV extends Zn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return k2(n)&&ff(n.arrayValue,this.value)}}class AV extends Zn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ff(this.value.arrayValue,n)}}class TV extends Zn{constructor(e,n){super(e,"not-in",n)}matches(e){if(ff(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ff(this.value.arrayValue,n)}}class IV extends Zn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!k2(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ff(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,n=null,r=[],s=[],i=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=l,this.endAt=u,this.Ie=null}}function RC(t,e=null,n=[],r=[],s=null,i=null,l=null){return new SV(t,e,n,r,s,i,l)}function P2(t){const e=ot(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Hm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ld(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ld(r)).join(",")),e.Ie=n}return e.Ie}function O2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!NC(t.startAt,e.startAt)&&NC(t.endAt,e.endAt)}function cw(t){return Ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n=null,r=[],s=[],i=null,l="F",u=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=l,this.startAt=u,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function NV(t,e,n,r,s,i,l,u){return new Pd(t,e,n,r,s,i,l,u)}function Gm(t){return new Pd(t)}function kC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function UN(t){return t.collectionGroup!==null}function Nh(t){const e=ot(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new cr(Ar.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(u=u.add(m.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new gf(i,r))}),n.has(Ar.keyField().canonicalString())||e.Ee.push(new gf(Ar.keyField(),r))}return e.Ee}function co(t){const e=ot(t);return e.de||(e.de=RV(e,Nh(t))),e.de}function RV(t,e){if(t.limitType==="F")return RC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new gf(s.field,i)});const n=t.endAt?new Rg(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rg(t.startAt.position,t.startAt.inclusive):null;return RC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function uw(t,e){const n=t.filters.concat([e]);return new Pd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kg(t,e,n){return new Pd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $m(t,e){return O2(co(t),co(e))&&t.limitType===e.limitType}function zN(t){return`${P2(co(t))}|lt:${t.limitType}`}function eu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>BN(s)).join(", ")}]`),Hm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ld(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ld(s)).join(",")),`Target(${r})`}(co(t))}; limitType=${t.limitType})`}function qm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ke.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Nh(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,u,f){const m=SC(l,u,f);return l.inclusive?m<=0:m<0}(r.startAt,Nh(r),s)||r.endAt&&!function(l,u,f){const m=SC(l,u,f);return l.inclusive?m>=0:m>0}(r.endAt,Nh(r),s))}(t,e)}function kV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HN(t){return(e,n)=>{let r=!1;for(const s of Nh(t)){const i=PV(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function PV(t,e,n){const r=t.field.isKeyField()?Ke.comparator(e.key,n.key):function(i,l,u){const f=l.data.field(i),m=u.data.field(i);return f!==null&&m!==null?ad(f,m):et(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return et(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Tl(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return AN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=new kn(Ke.comparator);function na(){return OV}const WN=new kn(Ke.comparator);function ch(...t){let e=WN;for(const n of t)e=e.insert(n.key,n);return e}function GN(t){let e=WN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yl(){return Rh()}function $N(){return Rh()}function Rh(){return new Mc(t=>t.toString(),(t,e)=>t.isEqual(e))}const DV=new kn(Ke.comparator),MV=new cr(Ke.comparator);function At(...t){let e=MV;for(const n of t)e=e.add(n);return e}const LV=new cr(pt);function FV(){return LV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ig(e)?"-0":e}}function qN(t){return{integerValue:""+t}}function jV(t,e){return hV(e)?qN(e):D2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this._=void 0}}function BV(t,e,n){return t instanceof mf?function(s,i){const l={fields:{[SN]:{stringValue:IN},[RN]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&R2(i)&&(i=Wm(i)),i&&(l.fields[NN]=i),{mapValue:l}}(n,e):t instanceof pf?XN(t,e):t instanceof yf?YN(t,e):function(s,i){const l=KN(s,i),u=PC(l)+PC(s.Re);return aw(l)&&aw(s.Re)?qN(u):D2(s.serializer,u)}(t,e)}function VV(t,e,n){return t instanceof pf?XN(t,e):t instanceof yf?YN(t,e):n}function KN(t,e){return t instanceof Pg?function(r){return aw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class mf extends Km{}class pf extends Km{constructor(e){super(),this.elements=e}}function XN(t,e){const n=QN(e);for(const r of t.elements)n.some(s=>po(s,r))||n.push(r);return{arrayValue:{values:n}}}class yf extends Km{constructor(e){super(),this.elements=e}}function YN(t,e){let n=QN(e);for(const r of t.elements)n=n.filter(s=>!po(s,r));return{arrayValue:{values:n}}}class Pg extends Km{constructor(e,n){super(),this.serializer=e,this.Re=n}}function PC(t){return Wn(t.integerValue||t.doubleValue)}function QN(t){return k2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n){this.field=e,this.transform=n}}function zV(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof pf&&s instanceof pf||r instanceof yf&&s instanceof yf?od(r.elements,s.elements,po):r instanceof Pg&&s instanceof Pg?po(r.Re,s.Re):r instanceof mf&&s instanceof mf}(t.transform,e.transform)}class HV{constructor(e,n){this.version=e,this.transformResults=n}}class Si{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Si}static exists(e){return new Si(void 0,e)}static updateTime(e){return new Si(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function F1(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let Xm=class{};function ZN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new eR(t.key,Si.none()):new l0(t.key,t.data,Si.none());{const n=t.data,r=ps.empty();let s=new cr(Ar.comparator);for(let i of e.fields)if(!s.has(i)){let l=n.field(i);l===null&&i.length>1&&(i=i.popLast(),l=n.field(i)),l===null?r.delete(i):r.set(i,l),s=s.add(i)}return new Il(t.key,r,new Ms(s.toArray()),Si.none())}}function WV(t,e,n){t instanceof l0?function(s,i,l){const u=s.value.clone(),f=DC(s.fieldTransforms,i,l.transformResults);u.setAll(f),i.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Il?function(s,i,l){if(!F1(s.precondition,i))return void i.convertToUnknownDocument(l.version);const u=DC(s.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(JN(s)),f.setAll(u),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(t,e,n):function(s,i,l){i.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function kh(t,e,n,r){return t instanceof l0?function(i,l,u,f){if(!F1(i.precondition,l))return u;const m=i.value.clone(),w=MC(i.fieldTransforms,f,l);return m.setAll(w),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(t,e,n,r):t instanceof Il?function(i,l,u,f){if(!F1(i.precondition,l))return u;const m=MC(i.fieldTransforms,f,l),w=l.data;return w.setAll(JN(i)),w.setAll(m),l.convertToFoundDocument(l.version,w).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(i,l,u){return F1(i.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(t,e,n)}function GV(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=KN(r.transform,s||null);i!=null&&(n===null&&(n=ps.empty()),n.set(r.field,i))}return n||null}function OC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&od(r,s,(i,l)=>zV(i,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class l0 extends Xm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Il extends Xm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function JN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function DC(t,e,n){const r=new Map;Wt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],l=i.transform,u=e.data.field(i.field);r.set(i.field,VV(l,u,n[s]))}return r}function MC(t,e,n){const r=new Map;for(const s of t){const i=s.transform,l=n.data.field(s.field);r.set(s.field,BV(i,l,e))}return r}class eR extends Xm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $V extends Xm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&WV(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=kh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=kh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$N();return this.mutations.forEach(s=>{const i=e.get(s.key),l=i.overlayedDocument;let u=this.applyToLocalView(l,i.mutatedFields);u=n.has(s.key)?null:u;const f=ZN(l,u);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(st.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),At())}isEqual(e){return this.batchId===e.batchId&&od(this.mutations,e.mutations,(n,r)=>OC(n,r))&&od(this.baseMutations,e.baseMutations,(n,r)=>OC(n,r))}}class M2{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Wt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return DV}();const i=e.mutations;for(let l=0;l<i.length;l++)s=s.insert(i[l].key,r[l].version);return new M2(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yn,kt;function YV(t){switch(t){case fe.OK:return et(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return et(15467,{code:t})}}function tR(t){if(t===void 0)return ta("GRPC error has no .code"),fe.UNKNOWN;switch(t){case Yn.OK:return fe.OK;case Yn.CANCELLED:return fe.CANCELLED;case Yn.UNKNOWN:return fe.UNKNOWN;case Yn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Yn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Yn.INTERNAL:return fe.INTERNAL;case Yn.UNAVAILABLE:return fe.UNAVAILABLE;case Yn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Yn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Yn.NOT_FOUND:return fe.NOT_FOUND;case Yn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Yn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Yn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Yn.ABORTED:return fe.ABORTED;case Yn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Yn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Yn.DATA_LOSS:return fe.DATA_LOSS;default:return et(39323,{code:t})}}(kt=Yn||(Yn={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=new Qa([4294967295,4294967295],0);function LC(t){const e=EN().encode(t),n=new gN;return n.update(e),new Uint8Array(n.digest())}function FC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qa([n,r],0),new Qa([s,i],0)]}class L2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uh(`Invalid padding: ${n}`);if(r<0)throw new uh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new uh(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Qa.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Qa.fromNumber(r)));return s.compare(QV)===1&&(s=new Qa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=LC(e),[r,s]=FC(n);for(let i=0;i<this.hashCount;i++){const l=this.we(r,s,i);if(!this.be(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),l=new L2(i,s,n);return r.forEach(u=>l.insert(u)),l}insert(e){if(this.pe===0)return;const n=LC(e),[r,s]=FC(n);for(let i=0;i<this.hashCount;i++){const l=this.we(r,s,i);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class uh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,c0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ym(st.min(),s,new kn(pt),na(),At())}}class c0{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new c0(r,n,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class nR{constructor(e,n){this.targetId=e,this.Ce=n}}class rR{constructor(e,n,r=Nr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class jC{constructor(){this.Fe=0,this.Me=BC(),this.xe=Nr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=At(),n=At(),r=At();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:et(38017,{changeType:i})}}),new c0(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=BC()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Wt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class ZV{constructor(e){this.ze=e,this.je=new Map,this.He=na(),this.Je=s1(),this.Ye=s1(),this.Ze=new kn(pt)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:et(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(cw(i))if(r===0){const l=new Ke(i.path);this.tt(n,l,jr.newNoDocument(l,st.min()))}else Wt(r===1,20013,{expectedCount:r});else{const l=this.ut(n);if(l!==r){const u=this.ct(e),f=u?this.lt(u,e,l):1;if(f!==0){this.st(n);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let l,u;try{l=ll(r).toUint8Array()}catch(f){if(f instanceof TN)return id("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new L2(l,s,i)}catch(f){return id(f instanceof uh?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.pe===0?null:u}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const l=this.ze.Pt(),u=`projects/${l.projectId}/databases/${l.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,l)=>{const u=this._t(l);if(u){if(i.current&&cw(u.target)){const f=new Ke(u.target.path);this.Et(f).has(l)||this.dt(l,f)||this.tt(l,f,jr.newNoDocument(f,e))}i.Le&&(n.set(l,i.qe()),i.Qe())}});let r=At();this.Ye.forEach((i,l)=>{let u=!0;l.forEachWhile(f=>{const m=this._t(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.He.forEach((i,l)=>l.setReadTime(e));const s=new Ym(e,n,this.Ze,this.He,r);return this.He=na(),this.Je=s1(),this.Ye=s1(),this.Ze=new kn(pt),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new jC,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new cr(pt),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new cr(pt),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Fe("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new jC),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function s1(){return new kn(Ke.comparator)}function BC(){return new kn(Ke.comparator)}const JV={asc:"ASCENDING",desc:"DESCENDING"},eU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tU={and:"AND",or:"OR"};class nU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dw(t,e){return t.useProto3Json||Hm(e)?e:{value:e}}function Og(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rU(t,e){return Og(t,e.toTimestamp())}function uo(t){return Wt(!!t,49232),st.fromTimestamp(function(n){const r=al(n);return new lr(r.seconds,r.nanos)}(t))}function F2(t,e){return hw(t,e).canonicalString()}function hw(t,e){const n=function(s){return new mn(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iR(t){const e=mn.fromString(t);return Wt(uR(e),10190,{key:e.toString()}),e}function fw(t,e){return F2(t.databaseId,e.path)}function vy(t,e){const n=iR(e);if(n.get(1)!==t.databaseId.projectId)throw new Le(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Le(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ke(aR(n))}function oR(t,e){return F2(t.databaseId,e)}function sU(t){const e=iR(t);return e.length===4?mn.emptyPath():aR(e)}function gw(t){return new mn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aR(t){return Wt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function VC(t,e,n){return{name:fw(t,e),fields:n.value.mapValue.fields}}function iU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:et(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(m,w){return m.useProto3Json?(Wt(w===void 0||typeof w=="string",58123),Nr.fromBase64String(w||"")):(Wt(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Nr.fromUint8Array(w||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(m){const w=m.code===void 0?fe.UNKNOWN:tR(m.code);return new Le(w,m.message||"")}(l);n=new rR(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=vy(t,r.document.name),i=uo(r.document.updateTime),l=r.document.createTime?uo(r.document.createTime):st.min(),u=new ps({mapValue:{fields:r.document.fields}}),f=jr.newFoundDocument(s,i,l,u),m=r.targetIds||[],w=r.removedTargetIds||[];n=new j1(m,w,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=vy(t,r.document),i=r.readTime?uo(r.readTime):st.min(),l=jr.newNoDocument(s,i),u=r.removedTargetIds||[];n=new j1([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=vy(t,r.document),i=r.removedTargetIds||[];n=new j1([],i,s,null)}else{if(!("filter"in e))return et(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,l=new XV(s,i),u=r.targetId;n=new nR(u,l)}}return n}function oU(t,e){let n;if(e instanceof l0)n={update:VC(t,e.key,e.value)};else if(e instanceof eR)n={delete:fw(t,e.key)};else if(e instanceof Il)n={update:VC(t,e.key,e.data),updateMask:mU(e.fieldMask)};else{if(!(e instanceof $V))return et(16599,{ft:e.type});n={verify:fw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const u=l.transform;if(u instanceof mf)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof pf)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof yf)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Pg)return{fieldPath:l.field.canonicalString(),increment:u.Re};throw et(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:rU(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:et(27497)}(t,e.precondition)),n}function aU(t,e){return t&&t.length>0?(Wt(e!==void 0,14353),t.map(n=>function(s,i){let l=s.updateTime?uo(s.updateTime):uo(i);return l.isEqual(st.min())&&(l=uo(i)),new HV(l,s.transformResults||[])}(n,e))):[]}function lU(t,e){return{documents:[oR(t,e.path)]}}function cU(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oR(t,s);const i=function(m){if(m.length!==0)return cR(Di.create(m,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const l=function(m){if(m.length!==0)return m.map(w=>function(E){return{field:tu(E.field),direction:hU(E.dir)}}(w))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=dw(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{gt:n,parent:s}}function uU(t){let e=sU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Wt(r===1,65062);const w=n.from[0];w.allDescendants?s=w.collectionId:e=e.child(w.collectionId)}let i=[];n.where&&(i=function(v){const E=lR(v);return E instanceof Di&&FN(E)?E.getFilters():[E]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(E=>function(P){return new gf(nu(P.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(E))}(n.orderBy));let u=null;n.limit&&(u=function(v){let E;return E=typeof v=="object"?v.value:v,Hm(E)?null:E}(n.limit));let f=null;n.startAt&&(f=function(v){const E=!!v.before,I=v.values||[];return new Rg(I,E)}(n.startAt));let m=null;return n.endAt&&(m=function(v){const E=!v.before,I=v.values||[];return new Rg(I,E)}(n.endAt)),NV(e,s,l,i,u,"F",f,m)}function dU(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=nu(n.unaryFilter.field);return Zn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=nu(n.unaryFilter.field);return Zn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=nu(n.unaryFilter.field);return Zn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=nu(n.unaryFilter.field);return Zn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return et(61313);default:return et(60726)}}(t):t.fieldFilter!==void 0?function(n){return Zn.create(nu(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return et(58110);default:return et(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Di.create(n.compositeFilter.filters.map(r=>lR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return et(1026)}}(n.compositeFilter.op))}(t):et(30097,{filter:t})}function hU(t){return JV[t]}function fU(t){return eU[t]}function gU(t){return tU[t]}function tu(t){return{fieldPath:t.canonicalString()}}function nu(t){return Ar.fromServerFormat(t.fieldPath)}function cR(t){return t instanceof Zn?function(n){if(n.op==="=="){if(IC(n.value))return{unaryFilter:{field:tu(n.field),op:"IS_NAN"}};if(TC(n.value))return{unaryFilter:{field:tu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(IC(n.value))return{unaryFilter:{field:tu(n.field),op:"IS_NOT_NAN"}};if(TC(n.value))return{unaryFilter:{field:tu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tu(n.field),op:fU(n.op),value:n.value}}}(t):t instanceof Di?function(n){const r=n.getFilters().map(s=>cR(s));return r.length===1?r[0]:{compositeFilter:{op:gU(n.op),filters:r}}}(t):et(54877,{filter:t})}function mU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n,r,s,i=st.min(),l=st.min(),u=Nr.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(e){return new Ba(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this.wt=e}}function yU(t){const e=uU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(){this.yn=new wU}addToCollectionParentIndex(e,n){return this.yn.add(n),ge.resolve()}getCollectionParents(e,n){return ge.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return ge.resolve()}deleteFieldIndex(e,n){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,n){return ge.resolve()}getDocumentsMatchingTarget(e,n){return ge.resolve(null)}getIndexType(e,n){return ge.resolve(0)}getFieldIndexes(e,n){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,n){return ge.resolve(ol.min())}getMinOffsetFromCollectionGroup(e,n){return ge.resolve(ol.min())}updateCollectionGroup(e,n,r){return ge.resolve()}updateIndexEntries(e,n){return ge.resolve()}}class wU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new cr(mn.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new cr(mn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dR=41943040;class gs{static withCacheSize(e){return new gs(e,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs.DEFAULT_COLLECTION_PERCENTILE=10,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gs.DEFAULT=new gs(dR,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gs.DISABLED=new gs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new cd(0)}static ir(){return new cd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="LruGarbageCollector",vU=1048576;function HC([t,e],[n,r]){const s=pt(t,n);return s===0?pt(e,r):s}class _U{constructor(e){this.cr=e,this.buffer=new cr(HC),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();HC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Fe(zC,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){kd(n)?Fe(zC,"Ignoring IndexedDB error during garbage collection: ",n):await Rd(n)}await this.Ir(3e5)})}}class bU{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ge.resolve(zm.le);const r=new _U(n);return this.Er.forEachTarget(e,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Er.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(UC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UC):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let r,s,i,l,u,f,m;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,n))).next(v=>(i=v,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(m=Date.now(),Jc()<=Ct.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-w}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${i} targets in `+(f-u)+`ms
	Removed ${v} documents in `+(m-f)+`ms
Total Duration: ${m-w}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:v})))}}function CU(t,e){return new bU(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(){this.changes=new Mc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ge.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&kh(r.mutation,s,Ms.empty(),lr.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,At()).next(()=>r))}getLocalViewOfDocuments(e,n,r=At()){const s=Yl();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let l=ch();return i.forEach((u,f)=>{l=l.insert(u,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=Yl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,At()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((l,u)=>{n.set(l,u)})})}computeViews(e,n,r,s){let i=na();const l=Rh(),u=function(){return Rh()}();return n.forEach((f,m)=>{const w=r.get(m.key);s.has(m.key)&&(w===void 0||w.mutation instanceof Il)?i=i.insert(m.key,m):w!==void 0?(l.set(m.key,w.mutation.getFieldMask()),kh(w.mutation,m,w.mutation.getFieldMask(),lr.now())):l.set(m.key,Ms.empty())}),this.recalculateAndSaveOverlays(e,i).next(f=>(f.forEach((m,w)=>l.set(m,w)),n.forEach((m,w)=>{var v;return u.set(m,new TU(w,(v=l.get(m))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,n){const r=Rh();let s=new kn((l,u)=>l-u),i=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const u of l)u.keys().forEach(f=>{const m=n.get(f);if(m===null)return;let w=r.get(f)||Ms.empty();w=u.applyToLocalView(m,w),r.set(f,w);const v=(s.get(u.batchId)||At()).add(f);s=s.insert(u.batchId,v)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),m=f.key,w=f.value,v=$N();w.forEach(E=>{if(!i.has(E)){const I=ZN(n.get(E),r.get(E));I!==null&&v.set(E,I),i=i.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,v))}return ge.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return Ke.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):UN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const l=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):ge.resolve(Yl());let u=uf,f=i;return l.next(m=>ge.forEach(m,(w,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),i.get(w)?ge.resolve():this.remoteDocumentCache.getEntry(e,w).next(E=>{f=f.insert(w,E)}))).next(()=>this.populateOverlays(e,m,i)).next(()=>this.computeViews(e,f,m,At())).next(w=>({batchId:u,changes:GN(w)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ke(n)).next(r=>{let s=ch();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let l=ch();return this.indexManager.getCollectionParents(e,i).next(u=>ge.forEach(u,f=>{const m=function(v,E){return new Pd(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,f.child(i));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(w=>{w.forEach((v,E)=>{l=l.insert(v,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(i=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(l=>{i.forEach((f,m)=>{const w=m.getKey();l.get(w)===null&&(l=l.insert(w,jr.newInvalidDocument(w)))});let u=ch();return l.forEach((f,m)=>{const w=i.get(f);w!==void 0&&kh(w.mutation,m,Ms.empty(),lr.now()),qm(n,m)&&(u=u.insert(f,m))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return ge.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:uo(s.createTime)}}(n)),ge.resolve()}getNamedQuery(e,n){return ge.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(s){return{name:s.name,query:yU(s.bundledQuery),readTime:uo(s.readTime)}}(n)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(){this.overlays=new kn(Ke.comparator),this.Or=new Map}getOverlay(e,n){return ge.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yl();return ge.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),ge.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),ge.resolve()}getOverlaysForCollection(e,n,r){const s=Yl(),i=n.length+1,l=new Ke(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const f=u.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===i&&f.largestBatchId>r&&s.set(f.getKey(),f)}return ge.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new kn((m,w)=>m-w);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let w=i.get(m.largestBatchId);w===null&&(w=Yl(),i=i.insert(m.largestBatchId,w)),w.set(m.getKey(),m)}}const u=Yl(),f=i.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,w)=>u.set(m,w)),!(u.size()>=s)););return ge.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new KV(n,r));let i=this.Or.get(n);i===void 0&&(i=At(),this.Or.set(n,i)),this.Or.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(){this.sessionToken=Nr.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.Nr=new cr(fr.Br),this.Lr=new cr(fr.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const r=new fr(e,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Qr(new fr(e,n))}$r(e,n){e.forEach(r=>this.removeReference(r,n))}Ur(e){const n=new Ke(new mn([])),r=new fr(n,e),s=new fr(n,e+1),i=[];return this.Lr.forEachInRange([r,s],l=>{this.Qr(l),i.push(l.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new Ke(new mn([])),r=new fr(n,e),s=new fr(n,e+1);let i=At();return this.Lr.forEachInRange([r,s],l=>{i=i.add(l.key)}),i}containsKey(e){const n=new fr(e,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class fr{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return Ke.comparator(e.key,n.key)||pt(e.Gr,n.Gr)}static kr(e,n){return pt(e.Gr,n.Gr)||Ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new cr(fr.Br)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new qV(i,n,r,s);this.mutationQueue.push(l);for(const u of s)this.zr=this.zr.add(new fr(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ge.resolve(l)}lookupMutationBatch(e,n){return ge.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Hr(r),i=s<0?0:s;return ge.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?N2:this.Jn-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fr(n,0),s=new fr(n,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],l=>{const u=this.jr(l.Gr);i.push(u)}),ge.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new cr(pt);return n.forEach(s=>{const i=new fr(s,0),l=new fr(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,l],u=>{r=r.add(u.Gr)})}),ge.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Ke.isDocumentKey(i)||(i=i.child(""));const l=new fr(new Ke(i),0);let u=new cr(pt);return this.zr.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(u=u.add(f.Gr)),!0)},l),ge.resolve(this.Jr(u))}Jr(e){const n=[];return e.forEach(r=>{const s=this.jr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Wt(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return ge.forEach(n.mutations,s=>{const i=new fr(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,n){const r=new fr(n,0),s=this.zr.firstAfterOrEqual(r);return ge.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.Zr=e,this.docs=function(){return new kn(Ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,l=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ge.resolve(r?r.document.mutableCopy():jr.newInvalidDocument(n))}getEntries(e,n){let r=na();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():jr.newInvalidDocument(s))}),ge.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=na();const l=n.path,u=new Ke(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:m,value:{document:w}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||lV(aV(w),r)<=0||(s.has(w.key)||qm(n,w))&&(i=i.insert(w.key,w.mutableCopy()))}return ge.resolve(i)}getAllFromCollectionGroup(e,n,r,s){et(9500)}Xr(e,n){return ge.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new OU(this)}getSize(e){return ge.resolve(this.size)}}class OU extends AU{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.vr.addEntry(e,s)):this.vr.removeEntry(r)}),ge.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.persistence=e,this.ei=new Mc(n=>P2(n),O2),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.ti=0,this.ni=new j2,this.targetCount=0,this.ri=cd.rr()}forEachTarget(e,n){return this.ei.forEach((r,s)=>n(s)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),ge.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new cd(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,ge.resolve()}updateTargetData(e,n){return this.ar(n),ge.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ei.forEach((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ei.delete(l),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),ge.waitFor(i).next(()=>s)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,n){const r=this.ei.get(n)||null;return ge.resolve(r)}addMatchingKeys(e,n,r){return this.ni.qr(n,r),ge.resolve()}removeMatchingKeys(e,n,r){this.ni.$r(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(l=>{i.push(s.markPotentiallyOrphaned(e,l))}),ge.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),ge.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ni.Wr(n);return ge.resolve(r)}containsKey(e,n){return ge.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.ii={},this.overlays={},this.si=new zm(0),this.oi=!1,this.oi=!0,this._i=new RU,this.referenceDelegate=e(this),this.ai=new DU(this),this.indexManager=new xU,this.remoteDocumentCache=function(s){return new PU(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new pU(n),this.ci=new SU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ii[e.toKey()];return r||(r=new kU(n,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,r){Fe("MemoryPersistence","Starting transaction:",e);const s=new MU(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(e,n){return ge.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,n)))}}class MU extends uV{constructor(e){super(),this.currentSequenceNumber=e}}class B2{constructor(e){this.persistence=e,this.Ti=new j2,this.Ii=null}static Ei(e){return new B2(e)}get di(){if(this.Ii)return this.Ii;throw et(60996)}addReference(e,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),ge.resolve()}removeReference(e,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),ge.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.di,r=>{const s=Ke.fromPath(r);return this.Ai(e,s).next(i=>{i||n.removeEntry(s,st.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return ge.or([()=>ge.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class Dg{constructor(e,n){this.persistence=e,this.Ri=new Mc(r=>fV(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=CU(this,n)}static Ei(e,n){return new Dg(e,n)}li(){}hi(e){return ge.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Vr(e){let n=0;return this.Ar(e,r=>{n++}).next(()=>n)}Ar(e,n){return ge.forEach(this.Ri,(r,s)=>this.gr(e,r,s).next(i=>i?ge.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(e,l=>this.gr(e,l,n).next(u=>{u||(r++,i.removeEntry(l,st.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),ge.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),ge.resolve()}removeReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),ge.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=M1(e.data.value)),n}gr(e,n,r){return ge.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.Ri.get(n);return ge.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ls=r,this.hs=s}static Ps(e,n){let r=At(),s=At();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new V2(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return mL()?8:dV(zr())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Rs(e,n).next(l=>{i.result=l}).next(()=>{if(!i.result)return this.Vs(e,n,s,r).next(l=>{i.result=l})}).next(()=>{if(i.result)return;const l=new LU;return this.fs(e,n,l).next(u=>{if(i.result=u,this.Is)return this.gs(e,n,l,u.size)})}).next(()=>i.result)}gs(e,n,r,s){return r.documentReadCount<this.Es?(Jc()<=Ct.DEBUG&&Fe("QueryEngine","SDK will not create cache indexes for query:",eu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ge.resolve()):(Jc()<=Ct.DEBUG&&Fe("QueryEngine","Query:",eu(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Jc()<=Ct.DEBUG&&Fe("QueryEngine","The SDK decides to create cache indexes for query:",eu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,co(n))):ge.resolve())}Rs(e,n){if(kC(n))return ge.resolve(null);let r=co(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=kg(n,null,"F"),r=co(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const l=At(...i);return this.As.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.ps(n,u);return this.ys(n,m,l,f.readTime)?this.Rs(e,kg(n,null,"F")):this.ws(e,m,n,f)}))})))}Vs(e,n,r,s){return kC(n)||s.isEqual(st.min())?ge.resolve(null):this.As.getDocuments(e,r).next(i=>{const l=this.ps(n,i);return this.ys(n,l,r,s)?ge.resolve(null):(Jc()<=Ct.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),eu(n)),this.ws(e,l,n,oV(s,uf)).next(u=>u))})}ps(e,n){let r=new cr(HN(e));return n.forEach((s,i)=>{qm(e,i)&&(r=r.add(i))}),r}ys(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(e,n,r){return Jc()<=Ct.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",eu(n)),this.As.getDocumentsMatchingQuery(e,n,ol.min(),r)}ws(e,n,r,s){return this.As.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(l=>{i=i.insert(l.key,l)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="LocalStore",jU=3e8;class BU{constructor(e,n,r,s){this.persistence=e,this.bs=n,this.serializer=s,this.Ss=new kn(pt),this.Ds=new Mc(i=>P2(i),O2),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IU(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function VU(t,e,n,r){return new BU(t,e,n,r)}async function fR(t,e){const n=ot(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Fs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const l=[],u=[];let f=At();for(const m of s){l.push(m.batchId);for(const w of m.mutations)f=f.add(w.key)}for(const m of i){u.push(m.batchId);for(const w of m.mutations)f=f.add(w.key)}return n.localDocuments.getDocuments(r,f).next(m=>({Ms:m,removedBatchIds:l,addedBatchIds:u}))})})}function UU(t,e){const n=ot(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Cs.newChangeBuffer({trackRemovals:!0});return function(u,f,m,w){const v=m.batch,E=v.keys();let I=ge.resolve();return E.forEach(P=>{I=I.next(()=>w.getEntry(f,P)).next(C=>{const k=m.docVersions.get(P);Wt(k!==null,48541),C.version.compareTo(k)<0&&(v.applyToRemoteDocument(C,m),C.isValidDocument()&&(C.setReadTime(m.commitVersion),w.addEntry(C)))})}),I.next(()=>u.mutationQueue.removeMutationBatch(f,v))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let f=At();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(f=f.add(u.batch.mutations[m].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function gR(t){const e=ot(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function zU(t,e){const n=ot(t),r=e.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const l=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const u=[];e.targetChanges.forEach((w,v)=>{const E=s.get(v);if(!E)return;u.push(n.ai.removeMatchingKeys(i,w.removedDocuments,v).next(()=>n.ai.addMatchingKeys(i,w.addedDocuments,v)));let I=E.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(v)!==null?I=I.withResumeToken(Nr.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):w.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(w.resumeToken,r)),s=s.insert(v,I),function(C,k,N){return C.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=jU?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(E,I,w)&&u.push(n.ai.updateTargetData(i,I))});let f=na(),m=At();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,w))}),u.push(HU(i,l,e.documentUpdates).next(w=>{f=w.xs,m=w.Os})),!r.isEqual(st.min())){const w=n.ai.getLastRemoteSnapshotVersion(i).next(v=>n.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(w)}return ge.waitFor(u).next(()=>l.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,f,m)).next(()=>f)}).then(i=>(n.Ss=s,i))}function HU(t,e,n){let r=At(),s=At();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let l=na();return n.forEach((u,f)=>{const m=i.get(u);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(u)),f.isNoDocument()&&f.version.isEqual(st.min())?(e.removeEntry(u,f.readTime),l=l.insert(u,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(u,f)):Fe(U2,"Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",f.version)}),{xs:l,Os:s}})}function WU(t,e){const n=ot(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=N2),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GU(t,e){const n=ot(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.ai.getTargetData(r,e).next(i=>i?(s=i,ge.resolve(s)):n.ai.allocateTargetId(r).next(l=>(s=new Ba(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(e,r.targetId)),r})}async function mw(t,e,n){const r=ot(t),s=r.Ss.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!kd(l))throw l;Fe(U2,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(s.target)}function WC(t,e,n){const r=ot(t);let s=st.min(),i=At();return r.persistence.runTransaction("Execute query","readwrite",l=>function(f,m,w){const v=ot(f),E=v.Ds.get(w);return E!==void 0?ge.resolve(v.Ss.get(E)):v.ai.getTargetData(m,w)}(r,l,co(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(l,u.targetId).next(f=>{i=f})}).next(()=>r.bs.getDocumentsMatchingQuery(l,e,n?s:st.min(),n?i:At())).next(u=>($U(r,kV(e),u),{documents:u,Ns:i})))}function $U(t,e,n){let r=t.vs.get(e)||st.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.vs.set(e,r)}class GC{constructor(){this.activeTargetIds=FV()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qU{constructor(){this.So=new GC,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,r){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new GC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="ConnectivityMonitor";class qC{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Fe($C,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Fe($C,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i1=null;function pw(){return i1===null?i1=function(){return 268435456+Math.round(2147483648*Math.random())}():i1++,"0x"+i1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="RestConnection",XU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YU{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===Sg?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(e,n,r,s,i){const l=pw(),u=this.$o(e,n.toUriEncodedString());Fe(_y,`Sending RPC '${e}' ${l}:`,u,r);const f={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(f,s,i);const{host:m}=new URL(u),w=Oc(m);return this.Ko(e,u,f,r,w).then(v=>(Fe(_y,`Received RPC '${e}' ${l}: `,v),v),v=>{throw id(_y,`RPC '${e}' ${l} failed with error: `,v,"url: ",u,"request:",r),v})}Wo(e,n,r,s,i,l){return this.Qo(e,n,r,s,i)}Uo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}$o(e,n){const r=XU[e];return`${this.Lo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="WebChannelConnection";class ZU extends YU{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,r,s,i){const l=pw();return new Promise((u,f)=>{const m=new mN;m.setWithCredentials(!0),m.listenOnce(pN.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case D1.NO_ERROR:const v=m.getResponseJson();Fe(Dr,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case D1.TIMEOUT:Fe(Dr,`RPC '${e}' ${l} timed out`),f(new Le(fe.DEADLINE_EXCEEDED,"Request time out"));break;case D1.HTTP_ERROR:const E=m.getStatus();if(Fe(Dr,`RPC '${e}' ${l} failed with status:`,E,"response text:",m.getResponseText()),E>0){let I=m.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I==null?void 0:I.error;if(P&&P.status&&P.message){const C=function(N){const T=N.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(T)>=0?T:fe.UNKNOWN}(P.status);f(new Le(C,P.message))}else f(new Le(fe.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new Le(fe.UNAVAILABLE,"Connection failed."));break;default:et(9055,{s_:e,streamId:l,o_:m.getLastErrorCode(),__:m.getLastError()})}}finally{Fe(Dr,`RPC '${e}' ${l} completed.`)}});const w=JSON.stringify(s);Fe(Dr,`RPC '${e}' ${l} sending request:`,s),m.send(n,"POST",w,r,15)})}a_(e,n,r){const s=pw(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=wN(),u=xN(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Uo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const w=i.join("");Fe(Dr,`Creating RPC '${e}' stream ${s}: ${w}`,f);const v=l.createWebChannel(w,f);let E=!1,I=!1;const P=new QU({Go:k=>{I?Fe(Dr,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(E||(Fe(Dr,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),Fe(Dr,`RPC '${e}' stream ${s} sending:`,k),v.send(k))},zo:()=>v.close()}),C=(k,N,T)=>{k.listen(N,S=>{try{T(S)}catch(V){setTimeout(()=>{throw V},0)}})};return C(v,lh.EventType.OPEN,()=>{I||(Fe(Dr,`RPC '${e}' stream ${s} transport opened.`),P.t_())}),C(v,lh.EventType.CLOSE,()=>{I||(I=!0,Fe(Dr,`RPC '${e}' stream ${s} transport closed`),P.r_())}),C(v,lh.EventType.ERROR,k=>{I||(I=!0,id(Dr,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),P.r_(new Le(fe.UNAVAILABLE,"The operation could not be completed")))}),C(v,lh.EventType.MESSAGE,k=>{var N;if(!I){const T=k.data[0];Wt(!!T,16349);const S=T,V=(S==null?void 0:S.error)||((N=S[0])===null||N===void 0?void 0:N.error);if(V){Fe(Dr,`RPC '${e}' stream ${s} received error:`,V);const $=V.status;let Y=function(L){const G=Yn[L];if(G!==void 0)return tR(G)}($),M=V.message;Y===void 0&&(Y=fe.INTERNAL,M="Unknown error status: "+$+" with message "+V.message),I=!0,P.r_(new Le(Y,M)),v.close()}else Fe(Dr,`RPC '${e}' stream ${s} received:`,T),P.i_(T)}}),C(u,yN.STAT_EVENT,k=>{k.stat===sw.PROXY?Fe(Dr,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===sw.NOPROXY&&Fe(Dr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.n_()},0),P}}function Ey(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t){return new nU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n,r=1e3,s=1.5,i=6e4){this.bi=e,this.timerId=n,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,n-r);s>0&&Fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="PersistentStream";class pR{constructor(e,n,r,s,i,l,u,f){this.bi=e,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new mR(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===fe.RESOURCE_EXHAUSTED?(ta(n.toString()),ta("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===n&&this.B_(r,s)},r=>{e(()=>{const s=new Le(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(e,n){const r=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Fe(KC,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(Fe(KC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JU extends pR{constructor(e,n,r,s,i,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=i}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=iU(this.serializer,e),r=function(i){if(!("targetChange"in i))return st.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?st.min():l.readTime?uo(l.readTime):st.min()}(e);return this.listener.Q_(n,r)}U_(e){const n={};n.database=gw(this.serializer),n.addTarget=function(i,l){let u;const f=l.target;if(u=cw(f)?{documents:lU(i,f)}:{query:cU(i,f).gt},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=sR(i,l.resumeToken);const m=dw(i,l.expectedCount);m!==null&&(u.expectedCount=m)}else if(l.snapshotVersion.compareTo(st.min())>0){u.readTime=Og(i,l.snapshotVersion.toTimestamp());const m=dw(i,l.expectedCount);m!==null&&(u.expectedCount=m)}return u}(this.serializer,e);const r=dU(this.serializer,e);r&&(n.labels=r),this.F_(n)}K_(e){const n={};n.database=gw(this.serializer),n.removeTarget=e,this.F_(n)}}class ez extends pR{constructor(e,n,r,s,i,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return Wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const n=aU(e.writeResults,e.commitTime),r=uo(e.commitTime);return this.listener.j_(r,n)}H_(){const e={};e.database=gw(this.serializer),this.F_(e)}G_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>oU(this.serializer,r))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{}class nz extends tz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new Le(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Qo(e,hw(n,r),s,i,l)).catch(i=>{throw i.name==="FirebaseError"?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(fe.UNKNOWN,i.toString())})}Wo(e,n,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Wo(e,hw(n,r),s,l,u,i)).catch(l=>{throw l.name==="FirebaseError"?(l.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Le(fe.UNKNOWN,l.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class rz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(ta(n),this.ea=!1):Fe("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc="RemoteStore";class sz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(l=>{r.enqueueAndForget(async()=>{Lc(this)&&(Fe(Cc,"Restarting streams for network reachability change."),await async function(f){const m=ot(f);m.aa.add(4),await u0(m),m.la.set("Unknown"),m.aa.delete(4),await Zm(m)}(this))})}),this.la=new rz(r,s)}}async function Zm(t){if(Lc(t))for(const e of t.ua)await e(!0)}async function u0(t){for(const e of t.ua)await e(!1)}function yR(t,e){const n=ot(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),G2(n)?W2(n):Od(n).b_()&&H2(n,e))}function z2(t,e){const n=ot(t),r=Od(n);n._a.delete(e),r.b_()&&xR(n,e),n._a.size===0&&(r.b_()?r.v_():Lc(n)&&n.la.set("Unknown"))}function H2(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(st.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Od(t).U_(e)}function xR(t,e){t.ha.Ke(e),Od(t).K_(e)}function W2(t){t.ha=new ZV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Od(t).start(),t.la.ta()}function G2(t){return Lc(t)&&!Od(t).w_()&&t._a.size>0}function Lc(t){return ot(t).aa.size===0}function wR(t){t.ha=void 0}async function iz(t){t.la.set("Online")}async function oz(t){t._a.forEach((e,n)=>{H2(t,e)})}async function az(t,e){wR(t),G2(t)?(t.la.ia(e),W2(t)):t.la.set("Unknown")}async function lz(t,e,n){if(t.la.set("Online"),e instanceof rR&&e.state===2&&e.cause)try{await async function(s,i){const l=i.cause;for(const u of i.targetIds)s._a.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s._a.delete(u),s.ha.removeTarget(u))}(t,e)}catch(r){Fe(Cc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mg(t,r)}else if(e instanceof j1?t.ha.Xe(e):e instanceof nR?t.ha.ot(e):t.ha.nt(e),!n.isEqual(st.min()))try{const r=await gR(t.localStore);n.compareTo(r)>=0&&await function(i,l){const u=i.ha.It(l);return u.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const w=i._a.get(m);w&&i._a.set(m,w.withResumeToken(f.resumeToken,l))}}),u.targetMismatches.forEach((f,m)=>{const w=i._a.get(f);if(!w)return;i._a.set(f,w.withResumeToken(Nr.EMPTY_BYTE_STRING,w.snapshotVersion)),xR(i,f);const v=new Ba(w.target,f,m,w.sequenceNumber);H2(i,v)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Fe(Cc,"Failed to raise snapshot:",r),await Mg(t,r)}}async function Mg(t,e,n){if(!kd(e))throw e;t.aa.add(1),await u0(t),t.la.set("Offline"),n||(n=()=>gR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Fe(Cc,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await Zm(t)})}function vR(t,e){return e().catch(n=>Mg(t,n,e))}async function Jm(t){const e=ot(t),n=ul(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:N2;for(;cz(e);)try{const s=await WU(e.localStore,r);if(s===null){e.oa.length===0&&n.v_();break}r=s.batchId,uz(e,s)}catch(s){await Mg(e,s)}_R(e)&&ER(e)}function cz(t){return Lc(t)&&t.oa.length<10}function uz(t,e){t.oa.push(e);const n=ul(t);n.b_()&&n.W_&&n.G_(e.mutations)}function _R(t){return Lc(t)&&!ul(t).w_()&&t.oa.length>0}function ER(t){ul(t).start()}async function dz(t){ul(t).H_()}async function hz(t){const e=ul(t);for(const n of t.oa)e.G_(n.mutations)}async function fz(t,e,n){const r=t.oa.shift(),s=M2.from(r,e,n);await vR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Jm(t)}async function gz(t,e){e&&ul(t).W_&&await async function(r,s){if(function(l){return YV(l)&&l!==fe.ABORTED}(s.code)){const i=r.oa.shift();ul(r).D_(),await vR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Jm(r)}}(t,e),_R(t)&&ER(t)}async function XC(t,e){const n=ot(t);n.asyncQueue.verifyOperationInProgress(),Fe(Cc,"RemoteStore received new credentials");const r=Lc(n);n.aa.add(3),await u0(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await Zm(n)}async function mz(t,e){const n=ot(t);e?(n.aa.delete(2),await Zm(n)):e||(n.aa.add(2),await u0(n),n.la.set("Unknown"))}function Od(t){return t.Pa||(t.Pa=function(n,r,s){const i=ot(n);return i.Y_(),new JU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:iz.bind(null,t),Jo:oz.bind(null,t),Zo:az.bind(null,t),Q_:lz.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),G2(t)?W2(t):t.la.set("Unknown")):(await t.Pa.stop(),wR(t))})),t.Pa}function ul(t){return t.Ta||(t.Ta=function(n,r,s){const i=ot(n);return i.Y_(),new ez(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:dz.bind(null,t),Zo:gz.bind(null,t),z_:hz.bind(null,t),j_:fz.bind(null,t)}),t.ua.push(async e=>{e?(t.Ta.D_(),await Jm(t)):(await t.Ta.stop(),t.oa.length>0&&(Fe(Cc,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))})),t.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new $o,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const l=Date.now()+r,u=new $2(e,n,l,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Le(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function q2(t,e){if(ta("AsyncQueue",`${e}: ${t}`),kd(t))return new Le(fe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{static emptySet(e){return new Ru(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ke.comparator(n.key,r.key):(n,r)=>Ke.comparator(n.key,r.key),this.keyedMap=ch(),this.sortedSet=new kn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ru)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ru;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.Ia=new kn(Ke.comparator)}track(e){const n=e.doc.key,r=this.Ia.get(n);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(n):e.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):et(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,r)=>{e.push(r)}),e}}class ud{constructor(e,n,r,s,i,l,u,f,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,s,i){const l=[];return n.forEach(u=>{l.push({type:0,doc:u})}),new ud(e,n,Ru.emptySet(n),l,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$m(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class yz{constructor(){this.queries=QC(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){const s=ot(n),i=s.queries;s.queries=QC(),i.forEach((l,u)=>{for(const f of u.Ra)f.onError(r)})})(this,new Le(fe.ABORTED,"Firestore shutting down"))}}function QC(){return new Mc(t=>zN(t),$m)}async function K2(t,e){const n=ot(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Va()&&e.ma()&&(r=2):(i=new pz,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await n.onListen(s,!0);break;case 1:i.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=q2(l,`Initialization of query '${eu(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.Ra.push(e),e.ga(n.onlineState),i.Aa&&e.pa(i.Aa)&&Y2(n)}async function X2(t,e){const n=ot(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const l=i.Ra.indexOf(e);l>=0&&(i.Ra.splice(l,1),i.Ra.length===0?s=e.ma()?0:1:!i.Va()&&e.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xz(t,e){const n=ot(t);let r=!1;for(const s of e){const i=s.query,l=n.queries.get(i);if(l){for(const u of l.Ra)u.pa(s)&&(r=!0);l.Aa=s}}r&&Y2(n)}function wz(t,e,n){const r=ot(t),s=r.queries.get(e);if(s)for(const i of s.Ra)i.onError(n);r.queries.delete(e)}function Y2(t){t.fa.forEach(e=>{e.next()})}var yw,ZC;(ZC=yw||(yw={})).ya="default",ZC.Cache="cache";class Q2{constructor(e,n,r){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ud(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const r=n!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==yw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.key=e}}class CR{constructor(e){this.key=e}}class vz{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=At(),this.mutatedKeys=At(),this.Ua=HN(e),this.Ka=new Ru(this.Ua)}get Wa(){return this.qa}Ga(e,n){const r=n?n.za:new YC,s=n?n.Ka:this.Ka;let i=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((w,v)=>{const E=s.get(w),I=qm(this.query,v)?v:null,P=!!E&&this.mutatedKeys.has(E.key),C=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let k=!1;E&&I?E.data.isEqual(I.data)?P!==C&&(r.track({type:3,doc:I}),k=!0):this.ja(E,I)||(r.track({type:2,doc:I}),k=!0,(f&&this.Ua(I,f)>0||m&&this.Ua(I,m)<0)&&(u=!0)):!E&&I?(r.track({type:0,doc:I}),k=!0):E&&!I&&(r.track({type:1,doc:E}),k=!0,(f||m)&&(u=!0)),k&&(I?(l=l.add(I),i=C?i.add(w):i.delete(w)):(l=l.delete(w),i=i.delete(w)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const w=this.query.limitType==="F"?l.last():l.first();l=l.delete(w.key),i=i.delete(w.key),r.track({type:1,doc:w})}return{Ka:l,za:r,ys:u,mutatedKeys:i}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const l=e.za.da();l.sort((w,v)=>function(I,P){const C=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et(20277,{Vt:k})}};return C(I)-C(P)}(w.type,v.type)||this.Ua(w.doc,v.doc)),this.Ha(r),s=s!=null&&s;const u=n&&!s?this.Ja():[],f=this.$a.size===0&&this.current&&!s?1:0,m=f!==this.Qa;return this.Qa=f,l.length!==0||m?{snapshot:new ud(this.query,e.Ka,i,l,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:u}:{Ya:u}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new YC,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=At(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const n=[];return e.forEach(r=>{this.$a.has(r)||n.push(new CR(r))}),this.$a.forEach(r=>{e.has(r)||n.push(new bR(r))}),n}Xa(e){this.qa=e.Ns,this.$a=At();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return ud.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Z2="SyncEngine";class _z{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ez{constructor(e){this.key=e,this.tu=!1}}class bz{constructor(e,n,r,s,i,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=l,this.nu={},this.ru=new Mc(u=>zN(u),$m),this.iu=new Map,this.su=new Set,this.ou=new kn(Ke.comparator),this._u=new Map,this.au=new j2,this.uu={},this.cu=new Map,this.lu=cd.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function Cz(t,e,n=!0){const r=RR(t);let s;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await AR(r,e,n,!0),s}async function Az(t,e){const n=RR(t);await AR(n,e,!0,!1)}async function AR(t,e,n,r){const s=await GU(t.localStore,co(e)),i=s.targetId,l=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await Tz(t,e,i,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&yR(t.remoteStore,s),u}async function Tz(t,e,n,r,s){t.Pu=(v,E,I)=>async function(C,k,N,T){let S=k.view.Ga(N);S.ys&&(S=await WC(C.localStore,k.query,!1).then(({documents:M})=>k.view.Ga(M,S)));const V=T&&T.targetChanges.get(k.targetId),$=T&&T.targetMismatches.get(k.targetId)!=null,Y=k.view.applyChanges(S,C.isPrimaryClient,V,$);return eA(C,k.targetId,Y.Ya),Y.snapshot}(t,v,E,I);const i=await WC(t.localStore,e,!0),l=new vz(e,i.Ns),u=l.Ga(i.documents),f=c0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),m=l.applyChanges(u,t.isPrimaryClient,f);eA(t,n,m.Ya);const w=new _z(e,n,l);return t.ru.set(e,w),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),m.snapshot}async function Iz(t,e,n){const r=ot(t),s=r.ru.get(e),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(l=>!$m(l,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await mw(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&z2(r.remoteStore,s.targetId),xw(r,s.targetId)}).catch(Rd)):(xw(r,s.targetId),await mw(r.localStore,s.targetId,!0))}async function Sz(t,e){const n=ot(t),r=n.ru.get(e),s=n.iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),z2(n.remoteStore,r.targetId))}async function Nz(t,e,n){const r=Lz(t);try{const s=await function(l,u){const f=ot(l),m=lr.now(),w=u.reduce((I,P)=>I.add(P.key),At());let v,E;return f.persistence.runTransaction("Locally write mutations","readwrite",I=>{let P=na(),C=At();return f.Cs.getEntries(I,w).next(k=>{P=k,P.forEach((N,T)=>{T.isValidDocument()||(C=C.add(N))})}).next(()=>f.localDocuments.getOverlayedDocuments(I,P)).next(k=>{v=k;const N=[];for(const T of u){const S=GV(T,v.get(T.key).overlayedDocument);S!=null&&N.push(new Il(T.key,S,DN(S.value.mapValue),Si.exists(!0)))}return f.mutationQueue.addMutationBatch(I,m,N,u)}).next(k=>{E=k;const N=k.applyToLocalDocumentSet(v,C);return f.documentOverlayCache.saveOverlays(I,k.batchId,N)})}).then(()=>({batchId:E.batchId,changes:GN(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,u,f){let m=l.uu[l.currentUser.toKey()];m||(m=new kn(pt)),m=m.insert(u,f),l.uu[l.currentUser.toKey()]=m}(r,s.batchId,n),await d0(r,s.changes),await Jm(r.remoteStore)}catch(s){const i=q2(s,"Failed to persist write");n.reject(i)}}async function TR(t,e){const n=ot(t);try{const r=await zU(n.localStore,e);e.targetChanges.forEach((s,i)=>{const l=n._u.get(i);l&&(Wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.tu=!0:s.modifiedDocuments.size>0?Wt(l.tu,14607):s.removedDocuments.size>0&&(Wt(l.tu,42227),l.tu=!1))}),await d0(n,r,e)}catch(r){await Rd(r)}}function JC(t,e,n){const r=ot(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ru.forEach((i,l)=>{const u=l.view.ga(e);u.snapshot&&s.push(u.snapshot)}),function(l,u){const f=ot(l);f.onlineState=u;let m=!1;f.queries.forEach((w,v)=>{for(const E of v.Ra)E.ga(u)&&(m=!0)}),m&&Y2(f)}(r.eventManager,e),s.length&&r.nu.Q_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Rz(t,e,n){const r=ot(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r._u.get(e),i=s&&s.key;if(i){let l=new kn(Ke.comparator);l=l.insert(i,jr.newNoDocument(i,st.min()));const u=At().add(i),f=new Ym(st.min(),new Map,new kn(pt),l,u);await TR(r,f),r.ou=r.ou.remove(i),r._u.delete(e),J2(r)}else await mw(r.localStore,e,!1).then(()=>xw(r,e,n)).catch(Rd)}async function kz(t,e){const n=ot(t),r=e.batch.batchId;try{const s=await UU(n.localStore,e);SR(n,r,null),IR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await d0(n,s)}catch(s){await Rd(s)}}async function Pz(t,e,n){const r=ot(t);try{const s=await function(l,u){const f=ot(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return f.mutationQueue.lookupMutationBatch(m,u).next(v=>(Wt(v!==null,37113),w=v.keys(),f.mutationQueue.removeMutationBatch(m,v))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,w,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,w)).next(()=>f.localDocuments.getDocuments(m,w))})}(r.localStore,e);SR(r,e,n),IR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await d0(r,s)}catch(s){await Rd(s)}}function IR(t,e){(t.cu.get(e)||[]).forEach(n=>{n.resolve()}),t.cu.delete(e)}function SR(t,e,n){const r=ot(t);let s=r.uu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.uu[r.currentUser.toKey()]=s}}function xw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.iu.get(e))t.ru.delete(r),n&&t.nu.Tu(r,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||NR(t,r)})}function NR(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(z2(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),J2(t))}function eA(t,e,n){for(const r of n)r instanceof bR?(t.au.addReference(r.key,e),Oz(t,r)):r instanceof CR?(Fe(Z2,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||NR(t,r.key)):et(19791,{Iu:r})}function Oz(t,e){const n=e.key,r=n.path.canonicalString();t.ou.get(n)||t.su.has(r)||(Fe(Z2,"New document in limbo: "+n),t.su.add(r),J2(t))}function J2(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new Ke(mn.fromString(e)),r=t.lu.next();t._u.set(r,new Ez(n)),t.ou=t.ou.insert(n,r),yR(t.remoteStore,new Ba(co(Gm(n.path)),r,"TargetPurposeLimboResolution",zm.le))}}async function d0(t,e,n){const r=ot(t),s=[],i=[],l=[];r.ru.isEmpty()||(r.ru.forEach((u,f)=>{l.push(r.Pu(f,e,n).then(m=>{var w;if((m||n)&&r.isPrimaryClient){const v=m?!m.fromCache:(w=n==null?void 0:n.targetChanges.get(f.targetId))===null||w===void 0?void 0:w.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(m){s.push(m);const v=V2.Ps(f.targetId,m);i.push(v)}}))}),await Promise.all(l),r.nu.Q_(s),await async function(f,m){const w=ot(f);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ge.forEach(m,E=>ge.forEach(E.ls,I=>w.persistence.referenceDelegate.addReference(v,E.targetId,I)).next(()=>ge.forEach(E.hs,I=>w.persistence.referenceDelegate.removeReference(v,E.targetId,I)))))}catch(v){if(!kd(v))throw v;Fe(U2,"Failed to update sequence numbers: "+v)}for(const v of m){const E=v.targetId;if(!v.fromCache){const I=w.Ss.get(E),P=I.snapshotVersion,C=I.withLastLimboFreeSnapshotVersion(P);w.Ss=w.Ss.insert(E,C)}}}(r.localStore,i))}async function Dz(t,e){const n=ot(t);if(!n.currentUser.isEqual(e)){Fe(Z2,"User change. New user:",e.toKey());const r=await fR(n.localStore,e);n.currentUser=e,function(i,l){i.cu.forEach(u=>{u.forEach(f=>{f.reject(new Le(fe.CANCELLED,l))})}),i.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await d0(n,r.Ms)}}function Mz(t,e){const n=ot(t),r=n._u.get(e);if(r&&r.tu)return At().add(r.key);{let s=At();const i=n.iu.get(e);if(!i)return s;for(const l of i){const u=n.ru.get(l);s=s.unionWith(u.view.Wa)}return s}}function RR(t){const e=ot(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rz.bind(null,e),e.nu.Q_=xz.bind(null,e.eventManager),e.nu.Tu=wz.bind(null,e.eventManager),e}function Lz(t){const e=ot(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pz.bind(null,e),e}class Lg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qm(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return VU(this.persistence,new FU,e.initialUser,this.serializer)}Ru(e){return new hR(B2.Ei,this.serializer)}Au(e){return new qU}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lg.provider={build:()=>new Lg};class Fz extends Lg{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){Wt(this.persistence.referenceDelegate instanceof Dg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new EU(r,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?gs.withCacheSize(this.cacheSizeBytes):gs.DEFAULT;return new hR(r=>Dg.Ei(r,n),this.serializer)}}class ww{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Dz.bind(null,this.syncEngine),await mz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yz}()}createDatastore(e){const n=Qm(e.databaseInfo.databaseId),r=function(i){return new ZU(i)}(e.databaseInfo);return function(i,l,u,f){return new nz(i,l,u,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,l,u){return new sz(r,s,i,l,u)}(this.localStore,this.datastore,e.asyncQueue,n=>JC(this.syncEngine,n,0),function(){return qC.C()?new qC:new KU}())}createSyncEngine(e,n){return function(s,i,l,u,f,m,w){const v=new bz(s,i,l,u,f,m);return w&&(v.hu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ot(s);Fe(Cc,"RemoteStore shutting down."),i.aa.add(5),await u0(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ww.provider={build:()=>new ww};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):ta("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl="FirestoreClient";class jz{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Lr.UNAUTHENTICATED,this.clientId=bN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async l=>{Fe(dl,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(Fe(dl,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $o;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=q2(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function by(t,e){t.asyncQueue.verifyOperationInProgress(),Fe(dl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await fR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function tA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Bz(t);Fe(dl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>XC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>XC(e.remoteStore,s)),t._onlineComponents=e}async function Bz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Fe(dl,"Using user provided OfflineComponentProvider");try{await by(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;id("Error using user provided cache. Falling back to memory cache: "+n),await by(t,new Lg)}}else Fe(dl,"Using default OfflineComponentProvider"),await by(t,new Fz(void 0));return t._offlineComponents}async function kR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Fe(dl,"Using user provided OnlineComponentProvider"),await tA(t,t._uninitializedComponentsProvider._online)):(Fe(dl,"Using default OnlineComponentProvider"),await tA(t,new ww))),t._onlineComponents}function Vz(t){return kR(t).then(e=>e.syncEngine)}async function Fg(t){const e=await kR(t),n=e.eventManager;return n.onListen=Cz.bind(null,e.syncEngine),n.onUnlisten=Iz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Az.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Sz.bind(null,e.syncEngine),n}function Uz(t,e,n={}){const r=new $o;return t.asyncQueue.enqueueAndForget(async()=>function(i,l,u,f,m){const w=new e_({next:E=>{w.yu(),l.enqueueAndForget(()=>X2(i,v));const I=E.docs.has(u);!I&&E.fromCache?m.reject(new Le(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&f&&f.source==="server"?m.reject(new Le(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),v=new Q2(Gm(u.path),w,{includeMetadataChanges:!0,Fa:!0});return K2(i,v)}(await Fg(t),t.asyncQueue,e,n,r)),r.promise}function zz(t,e,n={}){const r=new $o;return t.asyncQueue.enqueueAndForget(async()=>function(i,l,u,f,m){const w=new e_({next:E=>{w.yu(),l.enqueueAndForget(()=>X2(i,v)),E.fromCache&&f.source==="server"?m.reject(new Le(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),v=new Q2(u,w,{includeMetadataChanges:!0,Fa:!0});return K2(i,v)}(await Fg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t,e,n){if(!n)throw new Le(fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Hz(t,e,n,r){if(e===!0&&r===!0)throw new Le(fe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rA(t){if(!Ke.isDocumentKey(t))throw new Le(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sA(t){if(Ke.isDocumentKey(t))throw new Le(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ep(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":et(12329,{type:typeof t})}function Bs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Le(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ep(t);throw new Le(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Wz(t,e){if(e<=0)throw new Le(fe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="firestore.googleapis.com",iA=!0;class oA{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Le(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DR,this.ssl=iA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:iA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vU)throw new Le(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Le(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Le(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Le(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Le(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Le(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QB;switch(r.type){case"firstParty":return new tV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Le(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Id("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=nA.get(n);r&&(Fe("ComponentProvider","Removing Datastore"),nA.delete(n),r.terminate())}(this),Promise.resolve()}}function Gz(t,e,n,r={}){var s;t=Bs(t,tp);const i=Oc(e),l=t._getSettings(),u=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;l.host!==DR&&l.host!==f&&id("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:f,ssl:i,emulatorOptions:r});if(!wc(m,u)&&(t._setSettings(m),i&&(g2(`https://${f}`),Id("Firestore",!0)),r.mockUserToken)){let w,v;if(typeof r.mockUserToken=="string")w=r.mockUserToken,v=Lr.MOCK_USER;else{w=A4(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Le(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Lr(E)}t._authCredentials=new ZB(new _N(w,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc=class MR{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new MR(this.firestore,e,this._query)}};class Br{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Za(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Br(this.firestore,e,this._key)}}class Za extends Fc{constructor(e,n,r){super(e,n,Gm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Br(this.firestore,null,new Ke(e))}withConverter(e){return new Za(this.firestore,e,this._path)}}function _n(t,e,...n){if(t=bn(t),OR("collection","path",e),t instanceof tp){const r=mn.fromString(e,...n);return sA(r),new Za(t,null,r)}{if(!(t instanceof Br||t instanceof Za))throw new Le(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mn.fromString(e,...n));return sA(r),new Za(t.firestore,null,r)}}function Fn(t,e,...n){if(t=bn(t),arguments.length===1&&(e=bN.newId()),OR("doc","path",e),t instanceof tp){const r=mn.fromString(e,...n);return rA(r),new Br(t,null,new Ke(r))}{if(!(t instanceof Br||t instanceof Za))throw new Le(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mn.fromString(e,...n));return rA(r),new Br(t.firestore,t instanceof Za?t.converter:null,new Ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="AsyncQueue";class lA{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new mR(this,"async_queue_retry"),this.ju=()=>{const r=Ey();r&&Fe(aA,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const n=Ey();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=Ey();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new $o;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!kd(e))throw e;Fe(aA,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,ta("INTERNAL UNHANDLED ERROR: ",cA(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(e,n,r){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const s=$2.createAndSchedule(this,e,n,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&et(47125,{ec:cA(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function cA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class hl extends tp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new lA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lA(e),this._firestoreClient=void 0,await e}}}function LR(t,e){const n=typeof t=="object"?t:n0(),r=typeof t=="string"?t:Sg,s=Fm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=E4("firestore");i&&Gz(s,...i)}return s}function np(t){if(t._terminated)throw new Le(fe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$z(t),t._firestoreClient}function $z(t){var e,n,r;const s=t._freezeSettings(),i=function(u,f,m,w){return new pV(u,f,m,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,PR(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new jz(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const f=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dd(Nr.fromBase64String(e))}catch(n){throw new Le(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dd(Nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Le(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Le(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Le(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pt(this._lat,e._lat)||pt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=/^__.*__$/;class Kz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Il(e,this.data,this.fieldMask,n,this.fieldTransforms):new l0(e,this.data,n,this.fieldTransforms)}}class FR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Il(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et(40011,{oc:t})}}class r_{constructor(e,n,r,s,i,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=l||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new r_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:r,cc:!1});return s.lc(e),s}hc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:r,cc:!1});return s._c(),s}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return jg(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(jR(this.oc)&&qz.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class Xz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qm(e)}dc(e,n,r,s=!1){return new r_({oc:e,methodName:n,Ec:r,path:Ar.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ip(t){const e=t._freezeSettings(),n=Qm(t._databaseId);return new Xz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BR(t,e,n,r,s,i={}){const l=t.dc(i.merge||i.mergeFields?2:0,e,n,s);i_("Data must be an object, but it was:",l,r);const u=VR(r,l);let f,m;if(i.merge)f=new Ms(l.fieldMask),m=l.fieldTransforms;else if(i.mergeFields){const w=[];for(const v of i.mergeFields){const E=vw(e,v,n);if(!l.contains(E))throw new Le(fe.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);zR(w,E)||w.push(E)}f=new Ms(w),m=l.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,m=l.fieldTransforms;return new Kz(new ps(u),f,m)}class op extends sp{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof op}}class s_ extends sp{_toFieldTransform(e){return new UV(e.path,new mf)}isEqual(e){return e instanceof s_}}function Yz(t,e,n,r){const s=t.dc(1,e,n);i_("Data must be an object, but it was:",s,r);const i=[],l=ps.empty();Tl(r,(f,m)=>{const w=o_(e,f,n);m=bn(m);const v=s.hc(w);if(m instanceof op)i.push(w);else{const E=h0(m,v);E!=null&&(i.push(w),l.set(w,E))}});const u=new Ms(i);return new FR(l,u,s.fieldTransforms)}function Qz(t,e,n,r,s,i){const l=t.dc(1,e,n),u=[vw(e,r,n)],f=[s];if(i.length%2!=0)throw new Le(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<i.length;E+=2)u.push(vw(e,i[E])),f.push(i[E+1]);const m=[],w=ps.empty();for(let E=u.length-1;E>=0;--E)if(!zR(m,u[E])){const I=u[E];let P=f[E];P=bn(P);const C=l.hc(I);if(P instanceof op)m.push(I);else{const k=h0(P,C);k!=null&&(m.push(I),w.set(I,k))}}const v=new Ms(m);return new FR(w,v,l.fieldTransforms)}function Zz(t,e,n,r=!1){return h0(n,t.dc(r?4:3,e))}function h0(t,e){if(UR(t=bn(t)))return i_("Unsupported field value:",e,t),VR(t,e);if(t instanceof sp)return function(r,s){if(!jR(s.oc))throw s.Tc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,s){const i=[];let l=0;for(const u of r){let f=h0(u,s.Pc(l));f==null&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=bn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=lr.fromDate(r);return{timestampValue:Og(s.serializer,i)}}if(r instanceof lr){const i=new lr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Og(s.serializer,i)}}if(r instanceof t_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dd)return{bytesValue:sR(s.serializer,r._byteString)};if(r instanceof Br){const i=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(i))throw s.Tc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:F2(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof n_)return function(l,u){return{mapValue:{fields:{[kN]:{stringValue:ON},[Ng]:{arrayValue:{values:l.toArray().map(m=>{if(typeof m!="number")throw u.Tc("VectorValues must only contain numeric values.");return D2(u.serializer,m)})}}}}}}(r,s);throw s.Tc(`Unsupported field value: ${ep(r)}`)}(t,e)}function VR(t,e){const n={};return AN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tl(t,(r,s)=>{const i=h0(s,e.uc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function UR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lr||t instanceof t_||t instanceof dd||t instanceof Br||t instanceof sp||t instanceof n_)}function i_(t,e,n){if(!UR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ep(n);throw r==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function vw(t,e,n){if((e=bn(e))instanceof rp)return e._internalPath;if(typeof e=="string")return o_(t,e);throw jg("Field path arguments must be of type string or ",t,!1,void 0,n)}const Jz=new RegExp("[~\\*/\\[\\]]");function o_(t,e,n){if(e.search(Jz)>=0)throw jg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rp(...e.split("."))._internalPath}catch{throw jg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jg(t,e,n,r,s){const i=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(i||l)&&(f+=" (found",i&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new Le(fe.INVALID_ARGUMENT,u+t+f)}function zR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Br(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ap("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eH extends HR{data(){return super.data()}}function ap(t,e){return typeof e=="string"?o_(t,e):e instanceof rp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Le(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a_{}class l_ extends a_{}function Mi(t,e,...n){let r=[];e instanceof a_&&r.push(e),r=r.concat(n),function(i){const l=i.filter(f=>f instanceof c_).length,u=i.filter(f=>f instanceof lp).length;if(l>1||l>0&&u>0)throw new Le(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class lp extends l_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new lp(e,n,r)}_apply(e){const n=this._parse(e);return $R(e._query,n),new Fc(e.firestore,e.converter,uw(e._query,n))}_parse(e){const n=ip(e.firestore);return function(i,l,u,f,m,w,v){let E;if(m.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new Le(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){hA(v,w);const P=[];for(const C of v)P.push(dA(f,i,C));E={arrayValue:{values:P}}}else E=dA(f,i,v)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||hA(v,w),E=Zz(u,l,v,w==="in"||w==="not-in");return Zn.create(m,w,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function es(t,e,n){const r=e,s=ap("where",t);return lp._create(s,r,n)}class c_ extends a_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new c_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Di.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let l=s;const u=i.getFlattenedFilters();for(const f of u)$R(l,f),l=uw(l,f)}(e._query,n),new Fc(e.firestore,e.converter,uw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class u_ extends l_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new u_(e,n)}_apply(e){const n=function(s,i,l){if(s.startAt!==null)throw new Le(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Le(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gf(i,l)}(e._query,this._field,this._direction);return new Fc(e.firestore,e.converter,function(s,i){const l=s.explicitOrderBy.concat([i]);return new Pd(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function tH(t,e="asc"){const n=e,r=ap("orderBy",t);return u_._create(r,n)}class d_ extends l_{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new d_(e,n,r)}_apply(e){return new Fc(e.firestore,e.converter,kg(e._query,this._limit,this._limitType))}}function GR(t){return Wz("limit",t),d_._create("limit",t,"F")}function dA(t,e,n){if(typeof(n=bn(n))=="string"){if(n==="")throw new Le(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UN(e)&&n.indexOf("/")!==-1)throw new Le(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(mn.fromString(n));if(!Ke.isDocumentKey(r))throw new Le(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return AC(t,new Ke(r))}if(n instanceof Br)return AC(t,n._key);throw new Le(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ep(n)}.`)}function hA(t,e){if(!Array.isArray(t)||t.length===0)throw new Le(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $R(t,e){const n=function(s,i){for(const l of s)for(const u of l.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Le(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Le(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class nH{convertValue(e,n="none"){switch(cl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ll(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw et(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Tl(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Ng].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>Wn(l.doubleValue));return new n_(i)}convertGeoPoint(e){return new t_(Wn(e.latitude),Wn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(df(e));default:return null}}convertTimestamp(e){const n=al(e);return new lr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=mn.fromString(e);Wt(uR(r),9688,{name:e});const s=new hf(r.get(1),r.get(3)),i=new Ke(r.popFirst(5));return s.isEqual(n)||ta(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class KR extends HR{constructor(e,n,r,s,i,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new B1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ap("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class B1 extends KR{data(e={}){return super.data(e)}}class XR{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new dh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new B1(this._firestore,this._userDataWriter,r.key,r,new dh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Le(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const f=new B1(s._firestore,s._userDataWriter,u.doc.key,u.doc,new dh(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const f=new B1(s._firestore,s._userDataWriter,u.doc.key,u.doc,new dh(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,w=-1;return u.type!==0&&(m=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),w=l.indexOf(u.doc.key)),{type:rH(u.type),doc:f,oldIndex:m,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function rH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t){t=Bs(t,Br);const e=Bs(t.firestore,hl);return Uz(np(e),t._key).then(n=>YR(e,t,n))}class h_ extends nH{constructor(e){super(),this.firestore=e}convertBytes(e){return new dd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Br(this.firestore,null,n)}}function En(t){t=Bs(t,Fc);const e=Bs(t.firestore,hl),n=np(e),r=new h_(e);return WR(t._query),zz(n,t._query).then(s=>new XR(e,r,t,s))}function Ja(t,e,n){t=Bs(t,Br);const r=Bs(t.firestore,hl),s=qR(t.converter,e);return g_(r,[BR(ip(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Si.none())])}function Ac(t,e,n,...r){t=Bs(t,Br);const s=Bs(t.firestore,hl),i=ip(s);let l;return l=typeof(e=bn(e))=="string"||e instanceof rp?Qz(i,"updateDoc",t._key,e,n,r):Yz(i,"updateDoc",t._key,e),g_(s,[l.toMutation(t._key,Si.exists(!0))])}function f_(t,e){const n=Bs(t.firestore,hl),r=Fn(t),s=qR(t.converter,e);return g_(n,[BR(ip(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Si.exists(!1))]).then(()=>r)}function sH(t,...e){var n,r,s;t=bn(t);let i={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||uA(e[l])||(i=e[l],l++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(uA(e[l])){const v=e[l];e[l]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[l+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[l+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let f,m,w;if(t instanceof Br)m=Bs(t.firestore,hl),w=Gm(t._key.path),f={next:v=>{e[l]&&e[l](YR(m,t,v))},error:e[l+1],complete:e[l+2]};else{const v=Bs(t,Fc);m=Bs(v.firestore,hl),w=v._query;const E=new h_(m);f={next:I=>{e[l]&&e[l](new XR(m,E,v,I))},error:e[l+1],complete:e[l+2]},WR(t._query)}return function(E,I,P,C){const k=new e_(C),N=new Q2(I,k,P);return E.asyncQueue.enqueueAndForget(async()=>K2(await Fg(E),N)),()=>{k.yu(),E.asyncQueue.enqueueAndForget(async()=>X2(await Fg(E),N))}}(np(m),w,u,f)}function g_(t,e){return function(r,s){const i=new $o;return r.asyncQueue.enqueueAndForget(async()=>Nz(await Vz(r),s,i)),i.promise}(np(t),e)}function YR(t,e,n){const r=n.docs.get(e._key),s=new h_(t);return new KR(t,s,e._key,r,new dh(n.hasPendingWrites,n.fromCache),e.converter)}function Tr(){return new s_("serverTimestamp")}(function(e,n=!0){(function(s){Nd=s})(Dc),vc(new il("firestore",(r,{instanceIdentifier:s,options:i})=>{const l=r.getProvider("app").getImmediate(),u=new hl(new JB(r.getProvider("auth-internal")),new nV(l,r.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Le(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hf(m.options.projectId,w)}(l,s),l);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),oo(fC,gC,e),oo(fC,gC,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="firebasestorage.googleapis.com",ZR="storageBucket",iH=2*60*1e3,oH=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends vo{constructor(e,n,r=0){super(Cy(e),`Firebase Storage: ${n} (${Cy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jn||(jn={}));function Cy(t){return"storage/"+t}function m_(){const t="An unknown error occurred, please check the error payload for server response.";return new Bn(jn.UNKNOWN,t)}function aH(t){return new Bn(jn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function lH(t){return new Bn(jn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function cH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Bn(jn.UNAUTHENTICATED,t)}function uH(){return new Bn(jn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function dH(t){return new Bn(jn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function hH(){return new Bn(jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fH(){return new Bn(jn.CANCELED,"User canceled the upload/download.")}function gH(t){return new Bn(jn.INVALID_URL,"Invalid URL '"+t+"'.")}function mH(t){return new Bn(jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pH(){return new Bn(jn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZR+"' property when initializing the app?")}function yH(){return new Bn(jn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xH(){return new Bn(jn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wH(t){return new Bn(jn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _w(t){return new Bn(jn.INVALID_ARGUMENT,t)}function JR(){return new Bn(jn.APP_DELETED,"The Firebase app was deleted.")}function vH(t){return new Bn(jn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ph(t,e){return new Bn(jn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Jd(t){throw new Bn(jn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ls.makeFromUrl(e,n)}catch{return new Ls(e,"")}if(r.path==="")return r;throw mH(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),f={bucket:1,path:3};function m(V){V.path_=decodeURIComponent(V.path)}const w="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",I=new RegExp(`^https?://${v}/${w}/b/${s}/o${E}`,"i"),P={bucket:1,path:3},C=n===QR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",N=new RegExp(`^https?://${C}/${s}/${k}`,"i"),S=[{regex:u,indices:f,postModify:i},{regex:I,indices:P,postModify:m},{regex:N,indices:{bucket:1,path:2},postModify:m}];for(let V=0;V<S.length;V++){const $=S[V],Y=$.regex.exec(e);if(Y){const M=Y[$.indices.bucket];let j=Y[$.indices.path];j||(j=""),r=new Ls(M,j),$.postModify(r);break}}if(r==null)throw gH(e);return r}}class _H{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EH(t,e,n){let r=1,s=null,i=null,l=!1,u=0;function f(){return u===2}let m=!1;function w(...k){m||(m=!0,e.apply(null,k))}function v(k){s=setTimeout(()=>{s=null,t(I,f())},k)}function E(){i&&clearTimeout(i)}function I(k,...N){if(m){E();return}if(k){E(),w.call(null,k,...N);return}if(f()||l){E(),w.call(null,k,...N);return}r<64&&(r*=2);let S;u===1?(u=2,S=0):S=(r+Math.random())*1e3,v(S)}let P=!1;function C(k){P||(P=!0,E(),!m&&(s!==null?(k||(u=2),clearTimeout(s),v(0)):k||(u=1)))}return v(0),i=setTimeout(()=>{l=!0,C(!0)},n),C}function bH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CH(t){return t!==void 0}function AH(t){return typeof t=="object"&&!Array.isArray(t)}function p_(t){return typeof t=="string"||t instanceof String}function fA(t){return y_()&&t instanceof Blob}function y_(){return typeof Blob<"u"}function gA(t,e,n,r){if(r<e)throw _w(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw _w(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function e6(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var dc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(dc||(dc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IH{constructor(e,n,r,s,i,l,u,f,m,w,v,E=!0,I=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=w,this.connectionFactory_=v,this.retry=E,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,C)=>{this.resolve_=P,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new o1(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const l=u=>{const f=u.loaded,m=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&i.addUploadProgressListener(l),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(l),this.pendingConnection_=null;const u=i.getErrorCode()===dc.NO_ERROR,f=i.getStatus();if(!u||TH(f,this.additionalRetryCodes_)&&this.retry){const w=i.getErrorCode()===dc.ABORT;r(!1,new o1(!1,null,w));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new o1(m,i))})},n=(r,s)=>{const i=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(u,u.getResponse());CH(f)?i(f):i()}catch(f){l(f)}else if(u!==null){const f=m_();f.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,f)):l(f)}else if(s.canceled){const f=this.appDelete_?JR():fH();l(f)}else{const f=hH();l(f)}};this.canceled_?n(!1,new o1(!1,null,!0)):this.backoffId_=EH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class o1{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function SH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function NH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function kH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function PH(t,e,n,r,s,i,l=!0,u=!1){const f=e6(t.urlParams),m=t.url+f,w=Object.assign({},t.headers);return RH(w,e),SH(w,n),NH(w,i),kH(w,r),new IH(m,t.method,w,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function DH(...t){const e=OH();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(y_())return new Blob(t);throw new Bn(jn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function MH(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(t){if(typeof atob>"u")throw wH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ay{constructor(e,n){this.data=e,this.contentType=n||null}}function FH(t,e){switch(t){case to.RAW:return new Ay(t6(e));case to.BASE64:case to.BASE64URL:return new Ay(n6(t,e));case to.DATA_URL:return new Ay(BH(e),VH(e))}throw m_()}function t6(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,l=t.charCodeAt(++n);r=65536|(i&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function jH(t){let e;try{e=decodeURIComponent(t)}catch{throw Ph(to.DATA_URL,"Malformed data URL.")}return t6(e)}function n6(t,e){switch(t){case to.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Ph(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case to.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Ph(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=LH(e)}catch(s){throw s.message.includes("polyfill")?s:Ph(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class r6{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ph(to.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=UH(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function BH(t){const e=new r6(t);return e.base64?n6(to.BASE64,e.rest):jH(e.rest)}function VH(t){return new r6(t).contentType}function UH(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n){let r=0,s="";fA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(fA(this.data_)){const r=this.data_,s=MH(r,e,n);return s===null?null:new Ia(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ia(r,!0)}}static getBlob(...e){if(y_()){const n=e.map(r=>r instanceof Ia?r.data_:r);return new Ia(DH.apply(null,n))}else{const n=e.map(l=>p_(l)?FH(to.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(l=>{for(let u=0;u<l.length;u++)s[i++]=l[u]}),new Ia(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(t){let e;try{e=JSON.parse(t)}catch{return null}return AH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zH(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function HH(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function i6(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WH(t,e){return e}class qr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||WH}}let a1=null;function GH(t){return!p_(t)||t.length<2?t:i6(t)}function o6(){if(a1)return a1;const t=[];t.push(new qr("bucket")),t.push(new qr("generation")),t.push(new qr("metageneration")),t.push(new qr("name","fullPath",!0));function e(i,l){return GH(l)}const n=new qr("name");n.xform=e,t.push(n);function r(i,l){return l!==void 0?Number(l):l}const s=new qr("size");return s.xform=r,t.push(s),t.push(new qr("timeCreated")),t.push(new qr("updated")),t.push(new qr("md5Hash",null,!0)),t.push(new qr("cacheControl",null,!0)),t.push(new qr("contentDisposition",null,!0)),t.push(new qr("contentEncoding",null,!0)),t.push(new qr("contentLanguage",null,!0)),t.push(new qr("contentType",null,!0)),t.push(new qr("metadata","customMetadata",!0)),a1=t,a1}function $H(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Ls(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function qH(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const l=n[i];r[l.local]=l.xform(r,e[l.server])}return $H(r,t),r}function a6(t,e,n){const r=s6(e);return r===null?null:qH(t,r,n)}function KH(t,e,n,r){const s=s6(e);if(s===null||!p_(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const l=encodeURIComponent;return i.split(",").map(m=>{const w=t.bucket,v=t.fullPath,E="/b/"+l(w)+"/o/"+l(v),I=x_(E,n,r),P=e6({alt:"media",token:m});return I+P})[0]}function XH(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class l6{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(t){if(!t)throw m_()}function YH(t,e){function n(r,s){const i=a6(t,s,e);return c6(i!==null),i}return n}function QH(t,e){function n(r,s){const i=a6(t,s,e);return c6(i!==null),KH(i,s,t.host,t._protocol)}return n}function u6(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=uH():s=cH():n.getStatus()===402?s=lH(t.bucket):n.getStatus()===403?s=dH(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function ZH(t){const e=u6(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=aH(t.path)),i.serverResponse=s.serverResponse,i}return n}function JH(t,e,n){const r=e.fullServerUrl(),s=x_(r,t.host,t._protocol),i="GET",l=t.maxOperationRetryTime,u=new l6(s,i,QH(t,n),l);return u.errorHandler=ZH(e),u}function eW(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function tW(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=eW(null,e)),r}function nW(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let S="";for(let V=0;V<2;V++)S=S+Math.random().toString().slice(2);return S}const f=u();l["Content-Type"]="multipart/related; boundary="+f;const m=tW(e,r,s),w=XH(m,n),v="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,E=`\r
--`+f+"--",I=Ia.getBlob(v,r,E);if(I===null)throw yH();const P={name:m.fullPath},C=x_(i,t.host,t._protocol),k="POST",N=t.maxUploadRetryTime,T=new l6(C,k,YH(t,n),N);return T.urlParams=P,T.headers=l,T.body=I.uploadData(),T.errorHandler=u6(e),T}class rW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Jd("cannot .send() more than once");if(Oc(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class sW extends rW{initXhr(){this.xhr_.responseType="text"}}function d6(){return new sW}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n){this._service=e,n instanceof Ls?this._location=n:this._location=Ls.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Tc(e,n)}get root(){const e=new Ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return i6(this._location.path)}get storage(){return this._service}get parent(){const e=zH(this._location.path);if(e===null)return null;const n=new Ls(this._location.bucket,e);return new Tc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw vH(e)}}function iW(t,e,n){t._throwIfRoot("uploadBytes");const r=nW(t.storage,t._location,o6(),new Ia(e,!0),n);return t.storage.makeRequestWithTokens(r,d6).then(s=>({metadata:s,ref:t}))}function oW(t){t._throwIfRoot("getDownloadURL");const e=JH(t.storage,t._location,o6());return t.storage.makeRequestWithTokens(e,d6).then(n=>{if(n===null)throw xH();return n})}function aW(t,e){const n=HH(t._location.path,e),r=new Ls(t._location.bucket,n);return new Tc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lW(t){return/^[A-Za-z]+:\/\//.test(t)}function cW(t,e){return new Tc(t,e)}function h6(t,e){if(t instanceof w_){const n=t;if(n._bucket==null)throw pH();const r=new Tc(n,n._bucket);return e!=null?h6(r,e):r}else return e!==void 0?aW(t,e):t}function uW(t,e){if(e&&lW(e)){if(t instanceof w_)return cW(t,e);throw _w("To use ref(service, url), the first argument must be a Storage instance.")}else return h6(t,e)}function mA(t,e){const n=e==null?void 0:e[ZR];return n==null?null:Ls.makeFromBucketSpec(n,t)}function dW(t,e,n,r={}){t.host=`${e}:${n}`;const s=Oc(e);s&&(g2(`https://${t.host}`),Id("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:A4(i,t.app.options.projectId))}class w_{constructor(e,n,r,s,i,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=l,this._bucket=null,this._host=QR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=iH,this._maxUploadRetryTime=oH,this._requests=new Set,s!=null?this._bucket=Ls.makeFromBucketSpec(s,this._host):this._bucket=mA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ls.makeFromBucketSpec(this._url,e):this._bucket=mA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tc(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new _H(JR());{const l=PH(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const pA="@firebase/storage",yA="0.13.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6="storage";function hW(t,e,n){return t=bn(t),iW(t,e,n)}function fW(t){return t=bn(t),oW(t)}function gW(t,e){return t=bn(t),uW(t,e)}function mW(t=n0(),e){t=bn(t),Id("Storage",!1);const r=Fm(t,f6).getImmediate({identifier:e}),s=E4("storage");return s&&pW(r,...s),r}function pW(t,e,n,r={}){dW(t,e,n,r)}function yW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new w_(n,r,s,e,Dc)}function xW(){vc(new il(f6,yW,"PUBLIC").setMultipleInstances(!0)),oo(pA,yA,""),oo(pA,yA,"esm2017")}xW();const wW={apiKey:"AIzaSyBsg88W9DkUexaGaAOKxA0aQKd4cKIThMg",authDomain:"shareit-454f0.firebaseapp.com",projectId:"shareit-454f0",storageBucket:"shareit-454f0.firebasestorage.app",messagingSenderId:"977516621506",appId:"1:977516621506:web:a612f8561cd1f7f5f2155b"},v_=S4().length===0?y2(wW):n0(),ri=XB(v_),Tt=LR(v_),vW=mW(v_);Fj(ri,nN).then(()=>{console.log("Firebase persistence set to local")}).catch(t=>{console.error("Error setting persistence:",t)});(async()=>{try{console.log("מתחיל ליצור קולקשנים בפיירבייס...");const t=_n(Tt,"users"),e=await En(t);console.log(`קולקשן users קיים וכולל ${e.docs.length} משתמשים`);const n=_n(Tt,"businesses"),r=await En(n);console.log(`קולקשן businesses קיים וכולל ${r.docs.length} עסקים`);const s=_n(Tt,"recommendations"),i=await En(s);console.log(`קולקשן recommendations קיים וכולל ${i.docs.length} המלצות`);const l=_n(Tt,"connections"),u=await En(l);console.log(`קולקשן connections קיים וכולל ${u.docs.length} חיבורים`),console.log("סיום יצירת קולקשנים!")}catch(t){console.error("שגיאה ביצירת קולקשנים:",t)}})();const xA=new Bo;new eo;(async function(){try{console.log("מתחיל ליצור קולקשנים בפיירבייס...");const e=_n(Tt,"businesses"),n=await En(e);if(n.empty){console.log("קולקשן businesses ריק - יוצר עסקי דוגמה");const u=[{id:"coffee",name:"קפה טוב",category:"בתי קפה",description:"בית קפה איכותי עם מבחר עשיר של קפה, מאפים וארוחות בוקר. האווירה נעימה ומתאימה ללימודים, פגישות עבודה או סתם לבלות עם חברים.",address:"רחוב הרצל 123, תל אביב",phone:"03-1234567",website:"https://example.com/coffeegood",images:["https://images.unsplash.com/photo-1559925393-8be0ec4767c8?q=80&w=1000&auto=format&fit=crop","https://images.unsplash.com/photo-1554118811-1e0d58224f24?q=80&w=1000&auto=format&fit=crop"],discount:"10% הנחה על כל התפריט",hours:"א'-ה' 07:00-22:00, ו' 08:00-16:00, שבת סגור",ratings:4.5,reviews:[{id:"review1",userId:"user123",userName:"ישראל ישראלי",rating:5,text:"קפה מעולה ושירות אדיב. ממליץ בחום!",date:"2023-11-15",recommended:!0}],createdAt:Tr()},{id:"restaurant",name:"מסעדה טעימה",category:"מסעדות",description:"מסעדה משפחתית עם מטבח ים תיכוני עשיר וטעים. התפריט כולל מבחר מנות דגים, בשרים וצמחוניות עם חומרי גלם טריים.",address:"רחוב אלנבי 45, תל אביב",phone:"03-7654321",website:"https://example.com/tastyrestaurant",images:["https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=1000&auto=format&fit=crop","https://images.unsplash.com/photo-1414235077428-338989a2e8c0?q=80&w=1000&auto=format&fit=crop"],discount:"ארוחת ילדים חינם בימי ראשון",hours:"א'-ש' 12:00-23:00",ratings:4.2,reviews:[{id:"review2",userId:"user456",userName:"חנה כהן",rating:4,text:"אוכל מצוין ואווירה נעימה. קצת יקר אבל שווה.",date:"2023-10-20",recommended:!0}],createdAt:Tr()},{id:"attire",name:"חנות בגדים",category:"אופנה",description:"חנות אופנה המציעה מגוון רחב של פריטי לבוש לנשים, גברים וילדים. מותגים מקומיים ובינלאומיים במחירים נוחים.",address:"קניון עזריאלי, קומה 2, תל אביב",phone:"03-9876543",website:"https://example.com/fashionstore",images:["https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?q=80&w=1000&auto=format&fit=crop","https://images.unsplash.com/photo-1469334031218-e382a71b716b?q=80&w=1000&auto=format&fit=crop"],discount:"20% הנחה על הפריט השני",hours:"א'-ה' 09:30-22:00, ו' 09:00-15:00, שבת: שעה לאחר צאת השבת עד 23:00",ratings:4,reviews:[{id:"review3",userId:"user789",userName:"דני לוי",rating:4,text:"שירות אדיב ומבחר גדול. המחירים הוגנים.",date:"2023-09-05",recommended:!0}],createdAt:Tr()}];for(const f of u)try{console.log(`מנסה ליצור עסק: ${f.name} עם מזהה: ${f.id}`),await Ja(Fn(Tt,"businesses",f.id),f),console.log(`נוצר בהצלחה עסק לדוגמה: ${f.name}`)}catch(m){console.error(`שגיאה ביצירת עסק ${f.name}:`,m)}}else console.log(`קולקשן businesses קיים וכולל ${n.docs.length} עסקים`);const r=_n(Tt,"recommendations"),s=await En(r);if(s.empty){console.log("קולקשן recommendations ריק - יוצר המלצות דוגמה");const u=[{id:"rec1",businessId:"coffee",userId:"demo_user1",userName:"ישראל ישראלי",userPhotoURL:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-1.2.1&auto=format&fit=crop&w=40&h=40",businessName:"קפה טוב",businessImage:"https://images.unsplash.com/photo-1559925393-8be0ec4767c8?q=80&w=1000&auto=format&fit=crop",text:"המקום הכי טוב לקפה בעיר! השירות אדיב והאווירה נעימה. ממליץ בחום על הקרואסון שוקולד!",rating:5,discount:"10% הנחה",validUntil:new Date(new Date().setMonth(new Date().getMonth()+1)),savedCount:12,createdAt:Tr()}];for(const f of u)try{console.log(`מנסה ליצור המלצה: ${f.id}`),await Ja(Fn(Tt,"recommendations",f.id),f),console.log(`נוצרה בהצלחה המלצה לדוגמה: ${f.id}`)}catch(m){console.error(`שגיאה ביצירת המלצה ${f.id}:`,m)}}else console.log(`קולקשן recommendations קיים וכולל ${s.docs.length} המלצות`);const i=_n(Tt,"users"),l=await En(i);if(l.empty){console.log("קולקשן users ריק - יוצר משתמשי דוגמה");const u=[{uid:"demo_user1",email:"demo@example.com",displayName:"ישראל ישראלי",photoURL:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-1.2.1&auto=format&fit=crop&w=40&h=40",coins:50,referrals:3,savedOffers:5,createdAt:Tr()}];for(const f of u)try{console.log(`מנסה ליצור משתמש: ${f.displayName}`),await Ja(Fn(Tt,"users",f.uid),f),console.log(`נוצר בהצלחה משתמש לדוגמה: ${f.displayName}`)}catch(m){console.error(`שגיאה ביצירת משתמש ${f.displayName}:`,m)}}else console.log(`קולקשן users קיים וכולל ${l.docs.length} משתמשים`);console.log("סיום יצירת קולקשנים!")}catch(e){console.error("שגיאה ביצירת קולקשנים:",e)}})();const g6=()=>{const t=navigator.userAgent.toLowerCase(),n=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile|tablet/i.test(navigator.userAgent),r="ontouchstart"in window||navigator.maxTouchPoints>0,s=window.innerWidth<=768,i=/android|ios|iphone|ipad|ipod/i.test(navigator.platform||""),l=n||i||r&&s;return console.log("Enhanced mobile detection:",{userAgent:t,isMobileUA:n,mobileOS:i,isTouchDevice:r,isSmallScreen:s,windowWidth:window.innerWidth,platform:navigator.platform,finalResult:l}),l},_W=async()=>{try{let t;if(g6()){console.log("התחברות גוגל במובייל עם redirect..."),t=await rw(ri,xA);return}else console.log("התחברות גוגל במחשב עם popup..."),t=await nw(ri,xA);const e=t.user,n=Fn(Tt,"users",e.uid);return(await zs(n)).exists()||await Ja(n,{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:"user",coins:0,referrals:0,savedOffers:0,createdAt:Tr()}),e}catch(t){throw console.error("Error signing in with Google: ",t),t}},EW=async(t=!1)=>{try{console.log("Firebase signInWithFacebook started...");const e=new eo;e.addScope("email"),e.addScope("public_profile"),e.setCustomParameters({display:"popup",auth_type:"rerequest",scope:"email,public_profile"});let n;if(t||g6()){console.log("Firebase: התחברות פייסבוק במובייל עם redirect...");try{n=await rw(ri,e),console.log("Firebase: Redirect to Facebook initiated");return}catch(s){console.error("Firebase: Redirect failed:",s),console.log("Firebase: Trying popup as fallback...");try{n=await nw(ri,e)}catch(i){throw console.error("Firebase: Both redirect and popup failed"),new Error(`Authentication failed: ${i.message}`)}}}else{console.log("Firebase: התחברות פייסבוק במחשב עם popup...");try{n=await nw(ri,e)}catch{console.error("Firebase: Popup failed, trying redirect..."),n=rw(ri,e);return}}if(n){const s=n.user;console.log("Firebase: User authenticated:",s.displayName);const i=Fn(Tt,"users",s.uid);return(await zs(i)).exists()?console.log("משתמש קיים במערכת, ממשיך לעמוד הבית..."):(console.log("Firebase: Creating new user profile"),await Ja(i,{uid:s.uid,email:s.email,displayName:s.displayName,photoURL:s.photoURL,role:"user",coins:0,referrals:0,savedOffers:0,createdAt:Tr()}),console.log("פרופיל משתמש נוצר בהצלחה!")),s}}catch(e){console.error("Firebase: Facebook authentication error:",e),console.error("Error code:",e.code),console.error("Error message:",e.message);let n="התחברות דרך פייסבוק נכשלה";throw e.code==="auth/popup-blocked"?n="החלון נחסם. אנא אפשר חלונות קופצים ונסה שוב.":e.code==="auth/popup-closed-by-user"?n="ההתחברות בוטלה על ידי המשתמש.":e.code==="auth/network-request-failed"&&(n="שגיאת רשת. בדוק את החיבור לאינטרנט."),new Error(n)}},m6=async()=>{try{console.log("בודק תוצאות הפניה מספק אימות חיצוני...");const t=await dB(ri);if(t){console.log("התקבלה תוצאת הפניה מוצלחת:",t.providerId);const e=t.user;console.log("מידע משתמש התקבל:",e.displayName);const n=Fn(Tt,"users",e.uid);return(await zs(n)).exists()?console.log("משתמש קיים במערכת, ממשיך לעמוד הבית..."):(console.log("יוצר פרופיל משתמש חדש בפיירסטור..."),await Ja(n,{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:"user",coins:0,referrals:0,savedOffers:0,createdAt:Tr()}),console.log("פרופיל משתמש נוצר בהצלחה!")),e}else console.log("לא התקבלה תוצאת הפניה");return null}catch(t){throw console.error("שגיאה בטיפול בתוצאת ההפניה: ",t),t}},bW=async(t,e,n)=>{try{const s=(await Oj(ri,t,e)).user;return await Lj(s,{displayName:n}),await Ja(Fn(Tt,"users",s.uid),{uid:s.uid,email:s.email,displayName:n,photoURL:null,role:"user",coins:0,referrals:0,savedOffers:0,createdAt:Tr()}),s}catch(r){throw console.error("Error registering with email: ",r),r}},CW=async(t,e)=>{try{return(await Dj(ri,t,e)).user}catch(n){throw console.error("Error logging in with email: ",n),n}},AW=async()=>{try{await Vj(ri)}catch(t){throw console.error("Error signing out: ",t),t}},wA=async t=>{try{const e=await zs(Fn(Tt,"users",t));if(e.exists()){const n=e.data();return{...n,role:n.role||"user",isAdmin:n.role==="admin",coins:n.coins||0,referrals:n.referrals||0,savedOffers:n.savedOffers||0}}return{role:"user",isAdmin:!1,coins:0,referrals:0,savedOffers:0}}catch(e){return console.error("Error getting user data: ",e),{role:"user",isAdmin:!1,coins:0,referrals:0,savedOffers:0}}},TW=async()=>{try{const t=_n(Tt,"businesses");return(await En(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting businesses: ",t),t}},__=async t=>{try{const e=await zs(Fn(Tt,"businesses",t));if(e.exists())return{id:e.id,...e.data()};const n=_n(Tt,"businesses");if((await En(n)).empty){await IW();const s=await zs(Fn(Tt,"businesses",t));if(s.exists())return{id:s.id,...s.data()}}return null}catch(e){throw console.error("Error getting business by ID: ",e),e}},IW=async()=>{try{console.log("מנסה ליצור Collection של עסקי דוגמה בפיירבייס");const t=_n(Tt,"businesses");console.log("מנסה לגשת לקולקשן businesses במסד הנתונים",Tt);const e=await En(t);if(console.log("תוצאת בדיקת קולקשן businesses:",e.empty?"ריק - צריך ליצור עסקי דוגמה":"כבר קיים - מכיל נתונים"),!e.empty){console.log("Businesses collection already has data, skipping sample creation");return}const n=[{id:"coffee",name:"קפה טוב",category:"בתי קפה",description:"בית קפה איכותי עם מבחר עשיר של קפה, מאפים וארוחות בוקר. האווירה נעימה ומתאימה ללימודים, פגישות עבודה או סתם לבלות עם חברים.",address:"רחוב הרצל 123, תל אביב",phone:"03-1234567",website:"https://example.com/coffeegood",images:["https://images.unsplash.com/photo-1559925393-8be0ec4767c8?q=80&w=1000&auto=format&fit=crop","https://images.unsplash.com/photo-1554118811-1e0d58224f24?q=80&w=1000&auto=format&fit=crop"],discount:"10% הנחה על כל התפריט",hours:"א'-ה' 07:00-22:00, ו' 08:00-16:00, שבת סגור",ratings:4.5,reviews:[{id:"review1",userId:"user123",userName:"ישראל ישראלי",rating:5,text:"קפה מעולה ושירות אדיב. ממליץ בחום!",date:"2023-11-15",recommended:!0}],createdAt:Tr()},{id:"restaurant",name:"מסעדה טעימה",category:"מסעדות",description:"מסעדה משפחתית עם מטבח ים תיכוני עשיר וטעים. התפריט כולל מבחר מנות דגים, בשרים וצמחוניות עם חומרי גלם טריים.",address:"רחוב אלנבי 45, תל אביב",phone:"03-7654321",website:"https://example.com/tastyrestaurant",images:["https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=1000&auto=format&fit=crop","https://images.unsplash.com/photo-1414235077428-338989a2e8c0?q=80&w=1000&auto=format&fit=crop"],discount:"ארוחת ילדים חינם בימי ראשון",hours:"א'-ש' 12:00-23:00",ratings:4.2,reviews:[{id:"review2",userId:"user456",userName:"חנה כהן",rating:4,text:"אוכל מצוין ואווירה נעימה. קצת יקר אבל שווה.",date:"2023-10-20",recommended:!0}],createdAt:Tr()},{id:"attire",name:"חנות בגדים",category:"אופנה",description:"חנות אופנה המציעה מגוון רחב של פריטי לבוש לנשים, גברים וילדים. מותגים מקומיים ובינלאומיים במחירים נוחים.",address:"קניון עזריאלי, קומה 2, תל אביב",phone:"03-9876543",website:"https://example.com/fashionstore",images:["https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?q=80&w=1000&auto=format&fit=crop","https://images.unsplash.com/photo-1469334031218-e382a71b716b?q=80&w=1000&auto=format&fit=crop"],discount:"20% הנחה על הפריט השני",hours:"א'-ה' 09:30-22:00, ו' 09:00-15:00, שבת: שעה לאחר צאת השבת עד 23:00",ratings:4,reviews:[{id:"review3",userId:"user789",userName:"דני לוי",rating:4,text:"שירות אדיב ומבחר גדול. המחירים הוגנים.",date:"2023-09-05",recommended:!0}],createdAt:Tr()}];console.log("מתחיל להוסיף עסקי דוגמה לפיירבייס...");for(const r of n)try{console.log(`מנסה ליצור עסק: ${r.name} עם מזהה: ${r.id}`),await Ja(Fn(Tt,"businesses",r.id),{...r}),console.log(`נוצר בהצלחה עסק לדוגמה: ${r.name}`)}catch(s){console.error(`שגיאה ביצירת עסק ${r.name}:`,s)}console.log("תהליך יצירת עסקי דוגמה הושלם")}catch(t){console.error("Error creating sample businesses: ",t)}},SW=async t=>{try{const e=`rec_${Date.now()}`,n=new Date(Date.now()+30*24*60*60*1e3),r={...t,id:e,createdAt:Tr(),validUntil:n},s=_n(Tt,"recommendations"),i=await f_(s,r);return{...r,docId:i.id}}catch(e){throw console.error("Error creating recommendation: ",e),e}},p6=async(t=10)=>{try{const e=_n(Tt,"recommendations"),n=Mi(e,tH("createdAt","desc"),GR(t));return(await En(n)).docs.map(s=>{const i=s.data();if(i.validUntil&&typeof i.validUntil=="object"&&"seconds"in i.validUntil){const l=new Date(i.validUntil.seconds*1e3);i.validUntil=l.toLocaleDateString("he-IL",{day:"numeric",month:"long",year:"numeric"})}return{id:s.id,...i}})}catch(e){throw console.error("Error getting recommendations: ",e),e}},NW=async t=>{try{if(console.log("Getting recommendations for user:",t),!t||typeof t!="string"||t.length<5)return console.warn("Invalid userId provided:",t),[];const e=_n(Tt,"recommendations"),n=Mi(e,es("userId","==",t));console.log("Fetching recommendations with query:",n);const r=await En(n);console.log("Retrieved recommendations count:",r.docs.length);const s=r.docs.map(i=>{const l=i.data();if(l.validUntil&&typeof l.validUntil=="object"&&"seconds"in l.validUntil)try{const u=new Date(l.validUntil.seconds*1e3);l.validUntil=u.toLocaleDateString("he-IL",{day:"numeric",month:"long",year:"numeric"})}catch(u){console.error("Error converting date:",u),l.validUntil="תאריך לא ידוע"}else l.validUntil="ללא הגבלה";return l.imageUrl||(l.imageUrl=null),l.businessName||(l.businessName="עסק"),l.description||(l.description="אין תיאור"),l.discount||(l.discount="הנחה"),l.rating||(l.rating=5),l.savedCount||(l.savedCount=0),{id:i.id,...l}});return console.log("Processed recommendations:",s),s}catch(e){return console.error("Error getting user recommendations: ",e),console.log("Returning empty array due to error"),[]}},E_=async(t,e)=>{try{console.log("שומר המלצה עבור משתמש:",t,"המלצה:",e);const n=_n(Tt,"recommendations"),r=Mi(n,es("id","==",e)),s=await En(r);let i=null;s.empty||(i=s.docs[0].data().userId,console.log("מפיץ ההמלצה המקורי:",i));const l=_n(Tt,"savedOffers"),u=Mi(l,es("userId","==",t),es("recommendationId","==",e),es("saved","==",!0));if(!(await En(u)).empty){console.log("המלצה כבר נשמרה קודם לכן");return}const m=new Date(Date.now()+30*24*60*60*1e3),w=await f_(l,{userId:t,recommendationId:e,originalReferrerId:i,saved:!0,claimed:!1,savedAt:Tr(),validUntil:m});console.log("המלצה נשמרה בהצלחה עם מזהה:",w.id);const v=Fn(Tt,"users",t),E=await zs(v);if(E.exists()){const I=E.data();await Ac(v,{savedOffers:(I.savedOffers||0)+1}),console.log("עודכן מספר ההמלצות השמורות של המשתמש")}}catch(n){throw console.error("Error saving offer: ",n),n}},f0=async t=>{try{console.log("מחפש המלצות שמורות עבור משתמש:",t);const e=_n(Tt,"savedOffers"),n=await En(e);console.log("כל ההמלצות השמורות במסד הנתונים:"),n.docs.forEach(w=>{console.log("מסמך:",w.id,"נתונים:",w.data())});const r=_n(Tt,"recommendations"),s=await En(r);console.log("כל ההמלצות במסד הנתונים:"),s.docs.forEach(w=>{console.log("המלצה:",w.id,"נתונים:",w.data())});const i=Mi(e,es("userId","==",t),es("saved","==",!0)),l=await En(i);console.log("נמצאו",l.docs.length,"המלצות שמורות עבור המשתמש");const u=l.docs.map(w=>{const v=w.data();return console.log("המלצה שמורה:",{id:w.id,...v}),{id:w.id,...v}}),m=(await Promise.all(u.map(async w=>{console.log("מחפש פרטי המלצה:",w.recommendationId);const v=_n(Tt,"recommendations"),E=Mi(v,es("id","==",w.recommendationId)),I=await En(E);if(I.empty){try{const P=await zs(Fn(Tt,"recommendations",w.recommendationId));if(P.exists()){const C=P.data();return console.log("נמצאו פרטי המלצה בשיטה השנייה:",C),{...w,recommendation:{id:P.id,...C}}}}catch(P){console.error("שגיאה בחיפוש לפי מזהה מסמך:",P)}return console.log("לא נמצאו פרטי המלצה עבור:",w.recommendationId),{...w,recommendation:{id:w.recommendationId,businessName:"עסק לא ידוע",description:"המלצה שמורה",discount:"הנחה",rating:5,imageUrl:null,validUntil:"לא ידוע"}}}else{const P=I.docs[0],C=P.data();return console.log("נמצאו פרטי המלצה:",C),{...w,recommendation:{id:P.id,...C}}}}))).filter(w=>w!==null);return console.log("תוצאה סופית:",m),m}catch(e){throw console.error("Error getting saved offers: ",e),e}},y6=async(t,e)=>{try{const n=Fn(Tt,"savedOffers",t);await Ac(n,{claimed:!0,claimedAt:Tr()});const r=Fn(Tt,"users",e),s=await zs(r);if(s.exists()){const i=s.data();await Ac(r,{coins:(i.coins||0)+5,referrals:(i.referrals||0)+1})}}catch(n){throw console.error("Error claiming offer: ",n),n}},RW=async(t,e)=>{try{const n=gW(vW,e),r=await hW(n,t);return await fW(r.ref)}catch(n){throw console.error("Error uploading image: ",n),n}},x6=async()=>{try{const t=await zs(Fn(Tt,"siteConfig","main"));if(t.exists()){const e=t.data();if(e.logoUrl)return e.logoUrl}return"https://firebasestorage.googleapis.com/v0/b/shareit-454f0.firebasestorage.app/o/images%2FLogo3.png?alt=media&token=63561733-5bb8-4dcb-bb88-ecdb2948d5d9"}catch(t){return console.error("Error getting logo URL:",t),"https://firebasestorage.googleapis.com/v0/b/shareit-454f0.firebasestorage.app/o/images%2FLogo3.png?alt=media&token=63561733-5bb8-4dcb-bb88-ecdb2948d5d9"}},kW=Zf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ze=O.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const l=r?ZS:"button";return p.jsx(l,{className:mt(kW({variant:e,size:n,className:t})),ref:i,...s})});ze.displayName="Button";const on=O.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:mt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));on.displayName="Card";const cp=O.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:mt("flex flex-col space-y-1.5 p-6",t),...e}));cp.displayName="CardHeader";const up=O.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:mt("text-2xl font-semibold leading-none tracking-tight",t),...e}));up.displayName="CardTitle";const b_=O.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:mt("text-sm text-muted-foreground",t),...e}));b_.displayName="CardDescription";const qn=O.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:mt("p-6 pt-0",t),...e}));qn.displayName="CardContent";const C_=O.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:mt("flex items-center p-6 pt-0",t),...e}));C_.displayName="CardFooter";const w6=O.createContext(void 0),yr=()=>{const t=O.useContext(w6);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},PW=({children:t})=>{const[e,n]=O.useState(null),[r,s]=O.useState(!0),[i,l]=bl(),{toast:u}=ci(),f=e!==null;O.useEffect(()=>{console.log("Setting up auth state listener"),(async()=>{try{await m6()&&(console.log("הופנה בהצלחה מפייסבוק במובייל"),u({title:"ברוך הבא!",description:"התחברת בהצלחה באמצעות פייסבוק."}),l("/"))}catch(T){console.error("שגיאה בטיפול בהפניה:",T)}})();const k=localStorage.getItem("authUser");if(k)try{const T=JSON.parse(k);n(T)}catch(T){console.error("Error parsing stored user:",T)}const N=ri.onAuthStateChanged(async T=>{if(console.log("Auth state changed",T?`User logged in: ${T.email}`:"No user"),T)try{const S=await wA(T.uid),V={...T,coins:(S==null?void 0:S.coins)||0,referrals:(S==null?void 0:S.referrals)||0,savedOffers:(S==null?void 0:S.savedOffers)||0,role:(S==null?void 0:S.role)||"user",isAdmin:(S==null?void 0:S.role)==="admin",connections:(S==null?void 0:S.connections)||[]};n(V);const $={uid:T.uid,email:T.email,displayName:T.displayName,photoURL:T.photoURL,coins:(S==null?void 0:S.coins)||0,referrals:(S==null?void 0:S.referrals)||0,savedOffers:(S==null?void 0:S.savedOffers)||0};localStorage.setItem("authUser",JSON.stringify($))}catch(S){console.error("Error fetching user data:",S),n(T)}else n(null),localStorage.removeItem("authUser");s(!1)});return()=>N()},[]);const P={user:e,loading:r,isAuthenticated:f,login:async(C,k)=>{try{const N=await CW(C,k);if(N){const T=await wA(N.uid);if(T){const S={uid:N.uid,email:N.email,displayName:N.displayName,photoURL:N.photoURL,coins:(T==null?void 0:T.coins)||0,referrals:(T==null?void 0:T.referrals)||0,savedOffers:(T==null?void 0:T.savedOffers)||0};localStorage.setItem("authUser",JSON.stringify(S))}}u({title:"ברוך שובך!",description:"התחברת בהצלחה"}),l("/")}catch(N){console.error("Login error: ",N);let T="ההתחברות נכשלה. נא לבדוק את הפרטים שהזנת.";throw(N.code==="auth/user-not-found"||N.code==="auth/wrong-password")&&(T="אימייל או סיסמה לא תקינים."),u({title:"שגיאת התחברות",description:T,variant:"destructive"}),N}},register:async(C,k,N)=>{try{await bW(C,k,N),u({title:"חשבון נוצר!",description:"החשבון שלך נוצר בהצלחה."}),l("/")}catch(T){console.error("Registration error: ",T);let S="יצירת החשבון נכשלה.";throw T.code==="auth/email-already-in-use"?S="האימייל הזה כבר רשום במערכת.":T.code==="auth/weak-password"&&(S="הסיסמה חלשה מדי. השתמש לפחות ב-6 תווים."),u({title:"שגיאת הרשמה",description:S,variant:"destructive"}),T}},loginWithGoogle:async()=>{try{await _W(),u({title:"ברוך הבא!",description:"התחברת בהצלחה באמצעות גוגל."}),l("/")}catch(C){throw console.error("Google login error: ",C),u({title:"שגיאת התחברות",description:C.message||"התחברות דרך גוגל נכשלה.",variant:"destructive"}),C}},loginWithFacebook:async()=>{try{console.log("מתחיל התחברות פייסבוק...");const C=navigator.userAgent.toLowerCase(),k=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile|tablet/i.test(navigator.userAgent),N="ontouchstart"in window||navigator.maxTouchPoints>0,T=window.innerWidth<=768,S=k||N&&T;console.log("Device info:",{userAgent:C,isMobileDevice:k,isTouchDevice:N,isSmallScreen:T,isMobile:S}),S&&(console.log("התחברות פייסבוק במובייל..."),u({title:"מעביר לפייסבוק...",description:"אתה תועבר לדף פייסבוק להתחברות"})),await EW(),console.log("Facebook authentication initiated"),S||(u({title:"ברוך הבא!",description:"התחברת בהצלחה באמצעות פייסבוק."}),l("/"))}catch(C){console.error("שגיאה בהתחברות פייסבוק: ",C);const k=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);let N="התחברות דרך פייסבוק נכשלה";throw k&&C.message.includes("popup")&&(N="נסה לרענן את הדף ולנסות שוב"),u({title:"שגיאת התחברות",description:C.message||N,variant:"destructive"}),C}},logout:async()=>{try{await AW(),localStorage.removeItem("authUser"),u({title:"להתראות!",description:"התנתקת בהצלחה"}),l("/")}catch(C){throw console.error("Logout error: ",C),u({title:"שגיאה",description:"התנתקות נכשלה",variant:"destructive"}),C}}};return p.jsx(w6.Provider,{value:P,children:t})};var A_="Avatar",[OW,bQ]=ia(A_),[DW,v6]=OW(A_),_6=O.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=O.useState("idle");return p.jsx(DW,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:p.jsx(jt.span,{...r,ref:e})})});_6.displayName=A_;var E6="AvatarImage",b6=O.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,l=v6(E6,n),u=MW(r,i),f=Ur(m=>{s(m),l.onImageLoadingStatusChange(m)});return ki(()=>{u!=="idle"&&f(u)},[u,f]),u==="loaded"?p.jsx(jt.img,{...i,ref:e,src:r}):null});b6.displayName=E6;var C6="AvatarFallback",A6=O.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=v6(C6,n),[l,u]=O.useState(r===void 0);return O.useEffect(()=>{if(r!==void 0){const f=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(f)}},[r]),l&&i.imageLoadingStatus!=="loaded"?p.jsx(jt.span,{...s,ref:e}):null});A6.displayName=C6;function vA(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function MW(t,{referrerPolicy:e,crossOrigin:n}){const r=FW(),s=O.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[l,u]=O.useState(()=>vA(i,t));return ki(()=>{u(vA(i,t))},[i,t]),ki(()=>{const f=v=>()=>{u(v)};if(!i)return;const m=f("loaded"),w=f("error");return i.addEventListener("load",m),i.addEventListener("error",w),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",m),i.removeEventListener("error",w)}},[i,n,e]),l}function LW(){return()=>{}}function FW(){return O.useSyncExternalStore(LW,()=>!0,()=>!1)}var T6=_6,I6=b6,S6=A6;const fl=O.forwardRef(({className:t,...e},n)=>p.jsx(T6,{ref:n,className:mt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));fl.displayName=T6.displayName;const gl=O.forwardRef(({className:t,...e},n)=>p.jsx(I6,{ref:n,className:mt("aspect-square h-full w-full",t),...e}));gl.displayName=I6.displayName;const ml=O.forwardRef(({className:t,...e},n)=>p.jsx(S6,{ref:n,className:mt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));ml.displayName=S6.displayName;const jW={apiKey:"AIzaSyBsg88W9DkUexaGaAOKxA0aQKd4cKIThMg",authDomain:"shareit-454f0.firebaseapp.com",projectId:"shareit-454f0",storageBucket:"shareit-454f0.appspot.com",messagingSenderId:"977516621506",appId:"1:977516621506:web:a612f8561cd1f7f5f2155b"},BW=S4().length===0?y2(jW):n0(),ho=LR(BW),VW=async()=>{try{const t=_n(ho,"users"),e=await En(t),n=[];for(const r of e.docs)n.push({id:r.id,...r.data()});return console.log(`נטענו ${n.length} משתמשים מהמערכת`),n}catch(t){throw console.error("שגיאה בהבאת המשתמשים:",t),t}},N6=async(t,e)=>{try{await f_(_n(ho,"connections"),{userId:t,targetUserId:e,createdAt:Tr()});const n=Fn(ho,"users",t),r=await zs(n);let s=[];r.exists()&&(s=r.data().connections||[],s.includes(e)||(s=[...s,e],await Ac(n,{connections:s,connectionsCount:s.length})));const i=Fn(ho,"users",e),l=await zs(i);let u=[];return l.exists()&&(u=l.data().connections||[],u.includes(t)||(u=[...u,t],await Ac(i,{connections:u,connectionsCount:u.length}))),!0}catch(n){throw console.error("שגיאה ביצירת חיבור:",n),n}},_A=async t=>{try{console.log(`מחשב דירוג משתמש: ${t}`);const e=await Bg(t);if(!e||e.length===0)return console.log("לא נמצאו המלצות למשתמש"),0;let n=[],r=0;if(e.forEach(l=>{l.ratings&&typeof l.ratings=="object"&&Object.entries(l.ratings).forEach(([u,f])=>{u!==t&&typeof f=="number"&&f>0&&(n.push(f),r++,console.log(`המלצה ${l.id}: דירוג ${f} מ-${u}`))})}),n.length===0)return console.log("אין דירוגים מאחרים למשתמש"),0;const s=n.reduce((l,u)=>l+u,0)/n.length,i=Number(s.toFixed(1));return console.log(`דירוג כללי של משתמש ${t}: ${i} (מתוך ${r} דירוגים מאחרים על ${e.length} המלצות)`),i}catch(e){return console.error("שגיאה בחישוב דירוג המשתמש:",e),0}},UW=async(t,e)=>{try{console.log(`בודק חיבור בין ${t} ל-${e}`);const n=_n(ho,"connections"),r=Mi(n,es("userId","==",t),es("targetUserId","==",e),es("status","==","accepted")),s=await En(r);if(console.log("תוצאה בבדיקה עם status:",s.size),!s.empty)return console.log("נמצא חיבור עם status accepted"),!0;const i=Mi(n,es("userId","==",t),es("targetUserId","==",e)),l=await En(i);return console.log("תוצאה בבדיקה ללא status:",l.size),l.empty?(console.log("לא נמצא חיבור"),!1):(console.log("נמצא חיבור ללא status"),!0)}catch(n){return console.error("שגיאה בבדיקת חיבור:",n),!1}},zW=async(t,e)=>{const n=Fn(ho,"users",t);await Ac(n,{rating:e})},dp=async(t,e,n)=>{try{console.log(`מדרג המלצה ${t} בדירוג ${e} על ידי משתמש ${n}`);const r=_n(ho,"recommendations"),s=Mi(r,es("id","==",t)),i=await En(s);if(i.empty)throw new Error("לא נמצאה המלצה עם המזהה שצוין");const l=i.docs[0],u=l.data(),f=u.ratings||{};f[n]=e;const m=Object.values(f),w=m.reduce((E,I)=>E+I,0)/m.length;await Ac(l.ref,{ratings:f,rating:Number(w.toFixed(1)),lastRatedAt:Tr()});const v=u.userId;if(v){const E=await Bg(v);let I=[];E.forEach(C=>{C.ratings&&typeof C.ratings=="object"&&Object.entries(C.ratings).forEach(([k,N])=>{k!==v&&typeof N=="number"&&N>0&&I.push(N)})});const P=I.length>0?I.reduce((C,k)=>C+k,0)/I.length:0;await zW(v,Number(P.toFixed(1)))}return console.log(`דירוג ההמלצה עודכן: ${e} מ-${n}, ממוצע חדש: ${w.toFixed(1)}`),!0}catch(r){throw console.error("שגיאה בדירוג המלצה:",r),r}},R6=async t=>{try{console.log(`מנסה להביא נתוני משתמש עבור: ${t}`);const e=Fn(ho,"users",t),n=await zs(e);if(n.exists()){console.log(`מצאתי משתמש ישירות לפי ID: ${t}`);const l=n.data();return{id:n.id,...l}}console.log("מנסה למצוא משתמש לפי uid במקום id...");const r=_n(ho,"users"),s=Mi(r,es("uid","==",t)),i=await En(s);if(!i.empty){const l=i.docs[0];return console.log(`מצאתי משתמש לפי uid: ${t}`),{id:l.id,...l.data()}}return t==="demo_user1"?(console.log("מחזיר פרטי משתמש דמו קבועים עבור:",t),{id:t,uid:t,displayName:"ישראל ישראלי",photoURL:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-1.2.1&auto=format&fit=crop&w=40&h=40",email:"demo@example.com",coins:50,referrals:3,savedOffers:5}):(console.log(`לא נמצא משתמש עבור: ${t}`),null)}catch(e){return console.error("שגיאה בהבאת נתוני משתמש:",e),null}},Bg=async t=>{try{console.log(`מחפש המלצות עבור משתמש: "${t}"`);let e=[];const n=_n(ho,"recommendations"),r=await En(Mi(n,GR(200)));if(console.log(`נטענו ${r.docs.length} המלצות לבדיקה`),r.docs.forEach(i=>{var w,v,E,I,P,C;const l=i.data(),u=i.id;let f=!1;[l.userId,l.recommenderId,l.creatorId,l.user_id,l.authorId,l.uid,(w=l.user)==null?void 0:w.id,(v=l.user)==null?void 0:v.uid,(E=l.recommender)==null?void 0:E.id,(I=l.recommender)==null?void 0:I.uid,(P=l.creator)==null?void 0:P.id,(C=l.creator)==null?void 0:C.uid].includes(t)&&(f=!0,console.log(`נמצאה התאמה למשתמש ${t} בהמלצה ${u}`)),(l.recommender&&(l.recommender.id===t||l.recommender.uid===t)||l.creator&&(l.creator.id===t||l.creator.uid===t))&&(f=!0),f&&!e.some(k=>k.id===u)&&e.push({id:u,firestoreId:i.id,...l})}),e.length===0)return console.log(`לא נמצאו המלצות למשתמש ${t}`),[];console.log(`נמצאו ${e.length} המלצות למשתמש ${t}`);const s=HW(e);return console.log(`לאחר עיבוד: ${s.length} המלצות`),s}catch(e){return console.error("שגיאה בהבאת המלצות משתמש:",e),[]}};function HW(t){return t.map(e=>{if(e.validUntil){if(typeof e.validUntil=="object"&&"seconds"in e.validUntil)try{const n=new Date(e.validUntil.seconds*1e3);e.validUntil=n}catch(n){console.error("Error converting date:",n)}}else e.validUntil=new Date(new Date().setMonth(new Date().getMonth()+3));return!e.businessImage&&e.images&&e.images.length>0&&(e.businessImage=e.images[0]),!e.businessName&&e.name&&(e.businessName=e.name),!e.description&&e.text?e.description=e.text:!e.description&&!e.text&&(e.description="המלצה על "+(e.businessName||"עסק זה")),typeof e.rating>"u"&&e.ratings&&(e.rating=e.ratings),e.savedCount||(e.savedCount=Math.floor(Math.random()*30)+5),e})}function Ty(){const[t,e]=O.useState([]),[n,r]=O.useState(!0),[s,i]=O.useState(!1),[l,u]=O.useState(null),[f,m]=O.useState({}),{toast:w}=ci(),{user:v}=yr(),E=async(C,k,N)=>{if(!v){w({title:"נדרשת התחברות",description:"עליך להיות מחובר כדי לדרג המלצות",variant:"destructive"});return}if(N===v.uid){w({title:"לא ניתן לדרג",description:"אתה לא יכול לדרג המלצה שיצרת בעצמך",variant:"destructive"});return}try{await dp(C,k,v.uid),e(T=>T.map(S=>S.id===C?{...S,rating:k}:S)),w({title:"דירוג נשמר",description:`דירגת את ההמלצה ב-${k} כוכבים`})}catch{w({title:"שגיאה",description:"לא ניתן לשמור את הדירוג. אנא נסה שוב.",variant:"destructive"})}},I=async(C,k)=>{if(!v){w({title:"נדרשת התחברות",description:"עליך להיות מחובר כדי לשמור המלצות",variant:"destructive"});return}if(k===v.uid){w({title:"לא ניתן לשמור",description:"אתה לא יכול לשמור המלצה שיצרת בעצמך",variant:"destructive"});return}if(!f[C])try{await E_(v.uid,C),m(N=>({...N,[C]:!0})),w({title:"נשמר בהצלחה",description:"ההמלצה נשמרה באיזור האישי שלך"})}catch{w({title:"שגיאה",description:"לא ניתן לשמור את ההמלצה. אנא נסה שוב.",variant:"destructive"})}};O.useEffect(()=>{(async()=>{try{const k=await x6();u(k)}catch(k){console.error("שגיאה בטעינת הלוגו:",k)}})()},[]),O.useEffect(()=>{(async()=>{if(!v){r(!1);return}try{const k=v.connections||[];i(k.length>0);const N=await p6(10),T=N.filter(S=>!(S.recommenderId===v.uid||S.userId===v.uid));console.log(`Filtered recommendations: ${T.length} out of ${N.length} total`),e(T)}catch(k){console.error("Error fetching recommendations:",k)}finally{r(!1)}})()},[v]),O.useEffect(()=>{(async()=>{if(!v||t.length===0)return;const k=await f0(v.uid),N=new Set(k.map(S=>{var V;return S.recommendationId||((V=S.recommendation)==null?void 0:V.id)})),T={};t.forEach(S=>{T[S.id]=N.has(S.id)}),m(T)})()},[v,t]);const P=t.length>0?t:[];return p.jsxs("div",{className:"container mx-auto max-w-6xl px-4",children:[p.jsx("div",{className:"w-full justify-center"}),p.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-700 rounded-xl shadow-lg p-8 md:p-12 mb-10",children:[p.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[p.jsx("div",{className:"md:w-1/2 flex justify-center mb-8 md:mb-0",children:l?p.jsx("img",{src:l,alt:"ShareIt Logo",className:"h-32 md:h-40 w-auto"}):p.jsx("div",{className:"h-32 md:h-40 aspect-square bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"})}),p.jsxs("div",{className:"md:w-1/2 text-center md:text-right space-y-6",children:[p.jsx("h2",{className:"text-2xl md:text-3xl font-semibold text-gray-800 dark:text-white",children:"שתף המלצות, צבור מטבעות"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"המלץ על עסקים שאתה אוהב, שתף אותם לאחרים וצבור מטבעות על כל המלצה מוצלחת"}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(sn,{href:"/how-it-works",children:p.jsxs(ze,{size:"lg",className:"w-full md:w-auto text-base px-6 py-2 rounded-md bg-sky-600 hover:bg-sky-700 text-white dark:bg-sky-700 dark:hover:bg-sky-800 shadow-md",children:[p.jsx(IM,{className:"ml-2 h-5 w-5"}),"איך זה עובד?"]})}),!v&&p.jsx(sn,{href:"/login",children:p.jsx(ze,{variant:"outline",size:"lg",className:"w-full md:w-auto text-base px-6 py-2 rounded-md shadow-sm mt-3",children:"התחברות / הרשמה"})})]})]})]}),p.jsx("div",{className:"absolute -bottom-6 -left-6 w-24 h-24 rounded-full bg-blue-100 dark:bg-blue-900 opacity-50"}),p.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 rounded-full bg-indigo-100 dark:bg-indigo-900 opacity-30"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-12 mb-16",children:[p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 text-center",children:[p.jsx("div",{className:"rounded-full bg-blue-100 dark:bg-blue-900 p-3 w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),p.jsx("h3",{className:"text-xl font-semibold mb-2",children:"המלצות אמיתיות"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"רק אנשים שביקרו בעסק יכולים להמליץ עליו, מה שמבטיח המלצות אמיתיות ואמינות"})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 text-center",children:[p.jsx("div",{className:"rounded-full bg-green-100 dark:bg-green-900 p-3 w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("h3",{className:"text-xl font-semibold mb-2",children:"תגמולים אטרקטיביים"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"צבור נקודות על כל המלצה מוצלחת ופדה אותן להטבות ייחודיות בעסקים המשתתפים בפלטפורמה "})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 text-center",children:[p.jsx("div",{className:"rounded-full bg-purple-100 dark:bg-purple-900 p-3 w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-purple-600 dark:text-purple-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),p.jsx("h3",{className:"text-xl font-semibold mb-2",children:"קהילת ממליצים"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"הצטרף לקהילת הממליצים שלנו, עקוב אחרי המלצות של חברים וצור קשרים חדשים"})]})]}),v&&p.jsxs("div",{className:"mt-16 mb-12",children:[p.jsx("div",{className:"flex items-center justify-between mb-8",children:p.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"המלצות אחרונות"})}),n?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((C,k)=>p.jsx(on,{className:"animate-pulse",children:p.jsxs(qn,{className:"p-6",children:[p.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-700 rounded-lg mb-4"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"})]})},k))}):P.length>0?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.slice(0,6).map(C=>p.jsxs(on,{className:"group hover:shadow-lg transition-shadow duration-300 overflow-hidden",children:[p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:C.businessImage||C.imageUrl||"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-1.2.1&auto=format&fit=crop&w=400&h=250",alt:C.businessName,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),p.jsx("div",{className:"absolute top-4 right-4 bg-red-500 text-white px-2 py-1 rounded-full text-sm font-semibold",children:C.discount})]}),p.jsxs(qn,{className:"p-6",children:[p.jsxs("div",{className:"flex items-center mb-3",children:[p.jsxs(fl,{className:"h-8 w-8 mr-3",children:[p.jsx(gl,{src:C.recommenderPhoto||C.userPhotoURL,alt:C.recommenderName||C.userName}),p.jsx(ml,{children:(C.recommenderName||C.userName||"משתמש").split(" ").map(k=>k[0]).join("").toUpperCase()})]}),p.jsx("div",{children:p.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.recommenderName||C.userName})})]}),p.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:C.businessName}),p.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-3",children:C.description||C.text}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:p.jsx("div",{className:"flex flex-col items-end",children:p.jsxs("div",{className:"flex items-center gap-1",style:{zIndex:10},children:[[1,2,3,4,5].map(k=>p.jsx("button",{type:"button",className:"border-none bg-transparent p-0 m-0 outline-none focus:outline-none cursor-pointer hover:scale-110 transition-transform",onClick:N=>{N.preventDefault(),N.stopPropagation(),console.log("=== HOME PAGE STAR CLICK ==="),console.log(`Star ${k} clicked on recommendation ${C.id}`),E(C.id,k,C.recommenderId||C.userId)},style:{lineHeight:0},children:p.jsx(go,{className:`h-3 w-3 ${k<=(C.rating||5)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`,style:{pointerEvents:"none"}})},k)),p.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[C.rating||5,"/5"]})]})})}),p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsx(sn,{href:`/recommendation/${C.id}`,children:p.jsx(ze,{size:"sm",variant:"ghost",className:"text-blue-600 hover:text-blue-700 w-full",children:"צפה בהמלצה"})}),v&&(C.recommenderId||C.userId)!==v.uid&&p.jsxs(ze,{size:"sm",variant:"outline",className:"w-full flex items-center justify-center gap-1",onClick:()=>I(C.id,C.recommenderId||C.userId),disabled:!!f[C.id],children:[p.jsx(fg,{className:`h-3 w-3 ${f[C.id]?"text-red-500":""}`}),"שמור"]})]})]}),C.validUntil&&C.validUntil!=="ללא הגבלה"&&p.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["בתוקף עד: ",(()=>{const k=new Date(C.validUntil);return isNaN(k.getTime())?"ללא הגבלה":k.toLocaleDateString("he-IL")})()]})]})]},C.id))}):p.jsx(on,{className:"text-center py-12",children:p.jsxs(qn,{children:[p.jsx(Vx,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"אין עדיין המלצות מחברים"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"התחבר עם חברים כדי לראות את ההמלצות שלהם"}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(sn,{href:"/discover",children:p.jsxs(ze,{className:"flex items-center gap-2",children:[p.jsx(ef,{className:"h-4 w-4"}),"מצא חברים"]})}),p.jsx(sn,{href:"/businesses",children:p.jsxs(ze,{variant:"outline",className:"flex items-center gap-2",children:[p.jsx(t2,{className:"h-4 w-4"}),"צור המלצה חדשה"]})})]})]})})]})]})}var g0=t=>t.type==="checkbox",Ql=t=>t instanceof Date,Zr=t=>t==null;const k6=t=>typeof t=="object";var Kn=t=>!Zr(t)&&!Array.isArray(t)&&k6(t)&&!Ql(t),P6=t=>Kn(t)&&t.target?g0(t.target)?t.target.checked:t.target.value:t,WW=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,O6=(t,e)=>t.has(WW(e)),GW=t=>{const e=t.constructor&&t.constructor.prototype;return Kn(e)&&e.hasOwnProperty("isPrototypeOf")},T_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function _r(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(T_&&(t instanceof Blob||r))&&(n||Kn(t)))if(e=n?[]:{},!n&&!GW(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=_r(t[s]));else return t;return e}var hp=t=>Array.isArray(t)?t.filter(Boolean):[],Gn=t=>t===void 0,Re=(t,e,n)=>{if(!e||!Kn(t))return n;const r=hp(e.split(/[,[\].]+?/)).reduce((s,i)=>Zr(s)?s:s[i],t);return Gn(r)||r===t?Gn(t[e])?n:t[e]:r},Ps=t=>typeof t=="boolean",I_=t=>/^\w*$/.test(t),D6=t=>hp(t.replace(/["|']|\]/g,"").split(/\.|\[/)),zt=(t,e,n)=>{let r=-1;const s=I_(e)?[e]:D6(e),i=s.length,l=i-1;for(;++r<i;){const u=s[r];let f=n;if(r!==l){const m=t[u];f=Kn(m)||Array.isArray(m)?m:isNaN(+s[r+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=f,t=t[u]}};const Vg={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},_i={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ko={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},M6=dt.createContext(null),fp=()=>dt.useContext(M6),$W=t=>{const{children:e,...n}=t;return dt.createElement(M6.Provider,{value:n},e)};var L6=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const l=i;return e._proxyFormState[l]!==_i.all&&(e._proxyFormState[l]=!r||_i.all),n&&(n[l]=!0),t[l]}});return s};function qW(t){const e=fp(),{control:n=e.control,disabled:r,name:s,exact:i}=t||{},[l,u]=dt.useState(n._formState),f=dt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),m=dt.useRef(s);return m.current=s,dt.useEffect(()=>n._subscribe({name:m.current,formState:f.current,exact:i,callback:w=>{!r&&u({...n._formState,...w})}}),[n,r,i]),dt.useEffect(()=>{f.current.isValid&&n._setValid(!0)},[n]),dt.useMemo(()=>L6(l,n,f.current,!1),[l,n])}var no=t=>typeof t=="string",F6=(t,e,n,r,s)=>no(t)?(r&&e.watch.add(t),Re(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),Re(n,i))):(r&&(e.watchAll=!0),n);function KW(t){const e=fp(),{control:n=e.control,name:r,defaultValue:s,disabled:i,exact:l}=t||{},u=dt.useRef(r),f=dt.useRef(s);u.current=r,dt.useEffect(()=>n._subscribe({name:u.current,formState:{values:!0},exact:l,callback:v=>!i&&w(F6(u.current,n._names,v.values||n._formValues,!1,f.current))}),[n,i,l]);const[m,w]=dt.useState(n._getWatch(r,s));return dt.useEffect(()=>n._removeUnmounted()),m}function XW(t){const e=fp(),{name:n,disabled:r,control:s=e.control,shouldUnregister:i}=t,l=O6(s._names.array,n),u=KW({control:s,name:n,defaultValue:Re(s._formValues,n,Re(s._defaultValues,n,t.defaultValue)),exact:!0}),f=qW({control:s,name:n,exact:!0}),m=dt.useRef(t),w=dt.useRef(s.register(n,{...t.rules,value:u,...Ps(t.disabled)?{disabled:t.disabled}:{}})),v=dt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Re(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!Re(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Re(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Re(f.validatingFields,n)},error:{enumerable:!0,get:()=>Re(f.errors,n)}}),[f,n]),E=dt.useCallback(k=>w.current.onChange({target:{value:P6(k),name:n},type:Vg.CHANGE}),[n]),I=dt.useCallback(()=>w.current.onBlur({target:{value:Re(s._formValues,n),name:n},type:Vg.BLUR}),[n,s._formValues]),P=dt.useCallback(k=>{const N=Re(s._fields,n);N&&k&&(N._f.ref={focus:()=>k.focus(),select:()=>k.select(),setCustomValidity:T=>k.setCustomValidity(T),reportValidity:()=>k.reportValidity()})},[s._fields,n]),C=dt.useMemo(()=>({name:n,value:u,...Ps(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:E,onBlur:I,ref:P}),[n,r,f.disabled,E,I,P,u]);return dt.useEffect(()=>{const k=s._options.shouldUnregister||i;s.register(n,{...m.current.rules,...Ps(m.current.disabled)?{disabled:m.current.disabled}:{}});const N=(T,S)=>{const V=Re(s._fields,T);V&&V._f&&(V._f.mount=S)};if(N(n,!0),k){const T=_r(Re(s._options.defaultValues,n));zt(s._defaultValues,n,T),Gn(Re(s._formValues,n))&&zt(s._formValues,n,T)}return!l&&s.register(n),()=>{(l?k&&!s._state.action:k)?s.unregister(n):N(n,!1)}},[n,s,l,i]),dt.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),dt.useMemo(()=>({field:C,formState:f,fieldState:v}),[C,f,v])}const YW=t=>t.render(XW(t));var j6=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Oh=t=>Array.isArray(t)?t:[t],EA=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},Ew=t=>Zr(t)||!k6(t);function Sa(t,e){if(Ew(t)||Ew(e))return t===e;if(Ql(t)&&Ql(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const i=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const l=e[s];if(Ql(i)&&Ql(l)||Kn(i)&&Kn(l)||Array.isArray(i)&&Array.isArray(l)?!Sa(i,l):i!==l)return!1}}return!0}var Yr=t=>Kn(t)&&!Object.keys(t).length,S_=t=>t.type==="file",Ei=t=>typeof t=="function",Ug=t=>{if(!T_)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},B6=t=>t.type==="select-multiple",N_=t=>t.type==="radio",QW=t=>N_(t)||g0(t),Iy=t=>Ug(t)&&t.isConnected;function ZW(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Gn(t)?r++:t[e[r++]];return t}function JW(t){for(const e in t)if(t.hasOwnProperty(e)&&!Gn(t[e]))return!1;return!0}function ir(t,e){const n=Array.isArray(e)?e:I_(e)?[e]:D6(e),r=n.length===1?t:ZW(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Kn(r)&&Yr(r)||Array.isArray(r)&&JW(r))&&ir(t,n.slice(0,-1)),t}var V6=t=>{for(const e in t)if(Ei(t[e]))return!0;return!1};function zg(t,e={}){const n=Array.isArray(t);if(Kn(t)||n)for(const r in t)Array.isArray(t[r])||Kn(t[r])&&!V6(t[r])?(e[r]=Array.isArray(t[r])?[]:{},zg(t[r],e[r])):Zr(t[r])||(e[r]=!0);return e}function U6(t,e,n){const r=Array.isArray(t);if(Kn(t)||r)for(const s in t)Array.isArray(t[s])||Kn(t[s])&&!V6(t[s])?Gn(e)||Ew(n[s])?n[s]=Array.isArray(t[s])?zg(t[s],[]):{...zg(t[s])}:U6(t[s],Zr(e)?{}:e[s],n[s]):n[s]=!Sa(t[s],e[s]);return n}var eh=(t,e)=>U6(t,e,zg(e));const bA={value:!1,isValid:!1},CA={value:!0,isValid:!0};var z6=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Gn(t[0].attributes.value)?Gn(t[0].value)||t[0].value===""?CA:{value:t[0].value,isValid:!0}:CA:bA}return bA},H6=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Gn(t)?t:e?t===""?NaN:t&&+t:n&&no(t)?new Date(t):r?r(t):t;const AA={isValid:!1,value:null};var W6=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,AA):AA;function TA(t){const e=t.ref;return S_(e)?e.files:N_(e)?W6(t.refs).value:B6(e)?[...e.selectedOptions].map(({value:n})=>n):g0(e)?z6(t.refs).value:H6(Gn(e.value)?t.ref.value:e.value,t)}var eG=(t,e,n,r)=>{const s={};for(const i of t){const l=Re(e,i);l&&zt(s,i,l._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Hg=t=>t instanceof RegExp,th=t=>Gn(t)?t:Hg(t)?t.source:Kn(t)?Hg(t.value)?t.value.source:t.value:t,IA=t=>({isOnSubmit:!t||t===_i.onSubmit,isOnBlur:t===_i.onBlur,isOnChange:t===_i.onChange,isOnAll:t===_i.all,isOnTouch:t===_i.onTouched});const SA="AsyncFunction";var tG=t=>!!t&&!!t.validate&&!!(Ei(t.validate)&&t.validate.constructor.name===SA||Kn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===SA)),nG=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),NA=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Dh=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=Re(t,s);if(i){const{_f:l,...u}=i;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],s)&&!r)return!0;if(l.ref&&e(l.ref,l.name)&&!r)return!0;if(Dh(u,e))break}else if(Kn(u)&&Dh(u,e))break}}};function RA(t,e,n){const r=Re(t,n);if(r||I_(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),l=Re(e,i),u=Re(t,i);if(l&&!Array.isArray(l)&&n!==i)return{name:n};if(u&&u.type)return{name:i,error:u};s.pop()}return{name:n}}var rG=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return Yr(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(l=>e[l]===(!r||_i.all))},sG=(t,e,n)=>!t||!e||t===e||Oh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),iG=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,oG=(t,e)=>!hp(Re(t,e)).length&&ir(t,e),aG=(t,e,n)=>{const r=Oh(Re(t,n));return zt(r,"root",e[n]),zt(t,n,r),t},V1=t=>no(t);function kA(t,e,n="validate"){if(V1(t)||Array.isArray(t)&&t.every(V1)||Ps(t)&&!t)return{type:n,message:V1(t)?t:"",ref:e}}var Xc=t=>Kn(t)&&!Hg(t)?t:{value:t,message:""},PA=async(t,e,n,r,s,i)=>{const{ref:l,refs:u,required:f,maxLength:m,minLength:w,min:v,max:E,pattern:I,validate:P,name:C,valueAsNumber:k,mount:N}=t._f,T=Re(n,C);if(!N||e.has(C))return{};const S=u?u[0]:l,V=H=>{s&&S.reportValidity&&(S.setCustomValidity(Ps(H)?"":H||""),S.reportValidity())},$={},Y=N_(l),M=g0(l),j=Y||M,L=(k||S_(l))&&Gn(l.value)&&Gn(T)||Ug(l)&&l.value===""||T===""||Array.isArray(T)&&!T.length,G=j6.bind(null,C,r,$),X=(H,z,de,ee=ko.maxLength,xe=ko.minLength)=>{const we=H?z:de;$[C]={type:H?ee:xe,message:we,ref:l,...G(H?ee:xe,we)}};if(i?!Array.isArray(T)||!T.length:f&&(!j&&(L||Zr(T))||Ps(T)&&!T||M&&!z6(u).isValid||Y&&!W6(u).isValid)){const{value:H,message:z}=V1(f)?{value:!!f,message:f}:Xc(f);if(H&&($[C]={type:ko.required,message:z,ref:S,...G(ko.required,z)},!r))return V(z),$}if(!L&&(!Zr(v)||!Zr(E))){let H,z;const de=Xc(E),ee=Xc(v);if(!Zr(T)&&!isNaN(T)){const xe=l.valueAsNumber||T&&+T;Zr(de.value)||(H=xe>de.value),Zr(ee.value)||(z=xe<ee.value)}else{const xe=l.valueAsDate||new Date(T),we=Ie=>new Date(new Date().toDateString()+" "+Ie),oe=l.type=="time",ue=l.type=="week";no(de.value)&&T&&(H=oe?we(T)>we(de.value):ue?T>de.value:xe>new Date(de.value)),no(ee.value)&&T&&(z=oe?we(T)<we(ee.value):ue?T<ee.value:xe<new Date(ee.value))}if((H||z)&&(X(!!H,de.message,ee.message,ko.max,ko.min),!r))return V($[C].message),$}if((m||w)&&!L&&(no(T)||i&&Array.isArray(T))){const H=Xc(m),z=Xc(w),de=!Zr(H.value)&&T.length>+H.value,ee=!Zr(z.value)&&T.length<+z.value;if((de||ee)&&(X(de,H.message,z.message),!r))return V($[C].message),$}if(I&&!L&&no(T)){const{value:H,message:z}=Xc(I);if(Hg(H)&&!T.match(H)&&($[C]={type:ko.pattern,message:z,ref:l,...G(ko.pattern,z)},!r))return V(z),$}if(P){if(Ei(P)){const H=await P(T,n),z=kA(H,S);if(z&&($[C]={...z,...G(ko.validate,z.message)},!r))return V(z.message),$}else if(Kn(P)){let H={};for(const z in P){if(!Yr(H)&&!r)break;const de=kA(await P[z](T,n),S,z);de&&(H={...de,...G(z,de.message)},V(de.message),r&&($[C]=H))}if(!Yr(H)&&($[C]={ref:S,...H},!r))return $}}return V(!0),$};const lG={mode:_i.onSubmit,reValidateMode:_i.onChange,shouldFocusError:!0};function cG(t={}){let e={...lG,...t},n={submitCount:0,isDirty:!1,isLoading:Ei(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=Kn(e.defaultValues)||Kn(e.values)?_r(e.values||e.defaultValues)||{}:{},i=e.shouldUnregister?{}:_r(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,m=0;const w={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...w};const E={array:EA(),state:EA()},I=IA(e.mode),P=IA(e.reValidateMode),C=e.criteriaMode===_i.all,k=Q=>ie=>{clearTimeout(m),m=setTimeout(Q,ie)},N=async Q=>{if(!e.disabled&&(w.isValid||v.isValid||Q)){const ie=e.resolver?Yr((await L()).errors):await X(r,!0);ie!==n.isValid&&E.state.next({isValid:ie})}},T=(Q,ie)=>{!e.disabled&&(w.isValidating||w.validatingFields||v.isValidating||v.validatingFields)&&((Q||Array.from(u.mount)).forEach(he=>{he&&(ie?zt(n.validatingFields,he,ie):ir(n.validatingFields,he))}),E.state.next({validatingFields:n.validatingFields,isValidating:!Yr(n.validatingFields)}))},S=(Q,ie=[],he,ke,pe=!0,ye=!0)=>{if(ke&&he&&!e.disabled){if(l.action=!0,ye&&Array.isArray(Re(r,Q))){const Ne=he(Re(r,Q),ke.argA,ke.argB);pe&&zt(r,Q,Ne)}if(ye&&Array.isArray(Re(n.errors,Q))){const Ne=he(Re(n.errors,Q),ke.argA,ke.argB);pe&&zt(n.errors,Q,Ne),oG(n.errors,Q)}if((w.touchedFields||v.touchedFields)&&ye&&Array.isArray(Re(n.touchedFields,Q))){const Ne=he(Re(n.touchedFields,Q),ke.argA,ke.argB);pe&&zt(n.touchedFields,Q,Ne)}(w.dirtyFields||v.dirtyFields)&&(n.dirtyFields=eh(s,i)),E.state.next({name:Q,isDirty:z(Q,ie),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else zt(i,Q,ie)},V=(Q,ie)=>{zt(n.errors,Q,ie),E.state.next({errors:n.errors})},$=Q=>{n.errors=Q,E.state.next({errors:n.errors,isValid:!1})},Y=(Q,ie,he,ke)=>{const pe=Re(r,Q);if(pe){const ye=Re(i,Q,Gn(he)?Re(s,Q):he);Gn(ye)||ke&&ke.defaultChecked||ie?zt(i,Q,ie?ye:TA(pe._f)):xe(Q,ye),l.mount&&N()}},M=(Q,ie,he,ke,pe)=>{let ye=!1,Ne=!1;const Ye={name:Q};if(!e.disabled){if(!he||ke){(w.isDirty||v.isDirty)&&(Ne=n.isDirty,n.isDirty=Ye.isDirty=z(),ye=Ne!==Ye.isDirty);const en=Sa(Re(s,Q),ie);Ne=!!Re(n.dirtyFields,Q),en?ir(n.dirtyFields,Q):zt(n.dirtyFields,Q,!0),Ye.dirtyFields=n.dirtyFields,ye=ye||(w.dirtyFields||v.dirtyFields)&&Ne!==!en}if(he){const en=Re(n.touchedFields,Q);en||(zt(n.touchedFields,Q,he),Ye.touchedFields=n.touchedFields,ye=ye||(w.touchedFields||v.touchedFields)&&en!==he)}ye&&pe&&E.state.next(Ye)}return ye?Ye:{}},j=(Q,ie,he,ke)=>{const pe=Re(n.errors,Q),ye=(w.isValid||v.isValid)&&Ps(ie)&&n.isValid!==ie;if(e.delayError&&he?(f=k(()=>V(Q,he)),f(e.delayError)):(clearTimeout(m),f=null,he?zt(n.errors,Q,he):ir(n.errors,Q)),(he?!Sa(pe,he):pe)||!Yr(ke)||ye){const Ne={...ke,...ye&&Ps(ie)?{isValid:ie}:{},errors:n.errors,name:Q};n={...n,...Ne},E.state.next(Ne)}},L=async Q=>{T(Q,!0);const ie=await e.resolver(i,e.context,eG(Q||u.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return T(Q),ie},G=async Q=>{const{errors:ie}=await L(Q);if(Q)for(const he of Q){const ke=Re(ie,he);ke?zt(n.errors,he,ke):ir(n.errors,he)}else n.errors=ie;return ie},X=async(Q,ie,he={valid:!0})=>{for(const ke in Q){const pe=Q[ke];if(pe){const{_f:ye,...Ne}=pe;if(ye){const Ye=u.array.has(ye.name),en=pe._f&&tG(pe._f);en&&w.validatingFields&&T([ke],!0);const Cn=await PA(pe,u.disabled,i,C,e.shouldUseNativeValidation&&!ie,Ye);if(en&&w.validatingFields&&T([ke]),Cn[ye.name]&&(he.valid=!1,ie))break;!ie&&(Re(Cn,ye.name)?Ye?aG(n.errors,Cn,ye.name):zt(n.errors,ye.name,Cn[ye.name]):ir(n.errors,ye.name))}!Yr(Ne)&&await X(Ne,ie,he)}}return he.valid},H=()=>{for(const Q of u.unMount){const ie=Re(r,Q);ie&&(ie._f.refs?ie._f.refs.every(he=>!Iy(he)):!Iy(ie._f.ref))&&yn(Q)}u.unMount=new Set},z=(Q,ie)=>!e.disabled&&(Q&&ie&&zt(i,Q,ie),!Sa(He(),s)),de=(Q,ie,he)=>F6(Q,u,{...l.mount?i:Gn(ie)?s:no(Q)?{[Q]:ie}:ie},he,ie),ee=Q=>hp(Re(l.mount?i:s,Q,e.shouldUnregister?Re(s,Q,[]):[])),xe=(Q,ie,he={})=>{const ke=Re(r,Q);let pe=ie;if(ke){const ye=ke._f;ye&&(!ye.disabled&&zt(i,Q,H6(ie,ye)),pe=Ug(ye.ref)&&Zr(ie)?"":ie,B6(ye.ref)?[...ye.ref.options].forEach(Ne=>Ne.selected=pe.includes(Ne.value)):ye.refs?g0(ye.ref)?ye.refs.length>1?ye.refs.forEach(Ne=>(!Ne.defaultChecked||!Ne.disabled)&&(Ne.checked=Array.isArray(pe)?!!pe.find(Ye=>Ye===Ne.value):pe===Ne.value)):ye.refs[0]&&(ye.refs[0].checked=!!pe):ye.refs.forEach(Ne=>Ne.checked=Ne.value===pe):S_(ye.ref)?ye.ref.value="":(ye.ref.value=pe,ye.ref.type||E.state.next({name:Q,values:_r(i)})))}(he.shouldDirty||he.shouldTouch)&&M(Q,pe,he.shouldTouch,he.shouldDirty,!0),he.shouldValidate&&Ge(Q)},we=(Q,ie,he)=>{for(const ke in ie){const pe=ie[ke],ye=`${Q}.${ke}`,Ne=Re(r,ye);(u.array.has(Q)||Kn(pe)||Ne&&!Ne._f)&&!Ql(pe)?we(ye,pe,he):xe(ye,pe,he)}},oe=(Q,ie,he={})=>{const ke=Re(r,Q),pe=u.array.has(Q),ye=_r(ie);zt(i,Q,ye),pe?(E.array.next({name:Q,values:_r(i)}),(w.isDirty||w.dirtyFields||v.isDirty||v.dirtyFields)&&he.shouldDirty&&E.state.next({name:Q,dirtyFields:eh(s,i),isDirty:z(Q,ye)})):ke&&!ke._f&&!Zr(ye)?we(Q,ye,he):xe(Q,ye,he),NA(Q,u)&&E.state.next({...n}),E.state.next({name:l.mount?Q:void 0,values:_r(i)})},ue=async Q=>{l.mount=!0;const ie=Q.target;let he=ie.name,ke=!0;const pe=Re(r,he),ye=Ne=>{ke=Number.isNaN(Ne)||Ql(Ne)&&isNaN(Ne.getTime())||Sa(Ne,Re(i,he,Ne))};if(pe){let Ne,Ye;const en=ie.type?TA(pe._f):P6(Q),Cn=Q.type===Vg.BLUR||Q.type===Vg.FOCUS_OUT,Co=!nG(pe._f)&&!e.resolver&&!Re(n.errors,he)&&!pe._f.deps||iG(Cn,Re(n.touchedFields,he),n.isSubmitted,P,I),Xt=NA(he,u,Cn);zt(i,he,en),Cn?(pe._f.onBlur&&pe._f.onBlur(Q),f&&f(0)):pe._f.onChange&&pe._f.onChange(Q);const Ae=M(he,en,Cn),an=!Yr(Ae)||Xt;if(!Cn&&E.state.next({name:he,type:Q.type,values:_r(i)}),Co)return(w.isValid||v.isValid)&&(e.mode==="onBlur"?Cn&&N():Cn||N()),an&&E.state.next({name:he,...Xt?{}:Ae});if(!Cn&&Xt&&E.state.next({...n}),e.resolver){const{errors:Ft}=await L([he]);if(ye(en),ke){const tn=RA(n.errors,r,he),$s=RA(Ft,r,tn.name||he);Ne=$s.error,he=$s.name,Ye=Yr(Ft)}}else T([he],!0),Ne=(await PA(pe,u.disabled,i,C,e.shouldUseNativeValidation))[he],T([he]),ye(en),ke&&(Ne?Ye=!1:(w.isValid||v.isValid)&&(Ye=await X(r,!0)));ke&&(pe._f.deps&&Ge(pe._f.deps),j(he,Ye,Ne,Ae))}},Ie=(Q,ie)=>{if(Re(n.errors,ie)&&Q.focus)return Q.focus(),1},Ge=async(Q,ie={})=>{let he,ke;const pe=Oh(Q);if(e.resolver){const ye=await G(Gn(Q)?Q:pe);he=Yr(ye),ke=Q?!pe.some(Ne=>Re(ye,Ne)):he}else Q?(ke=(await Promise.all(pe.map(async ye=>{const Ne=Re(r,ye);return await X(Ne&&Ne._f?{[ye]:Ne}:Ne)}))).every(Boolean),!(!ke&&!n.isValid)&&N()):ke=he=await X(r);return E.state.next({...!no(Q)||(w.isValid||v.isValid)&&he!==n.isValid?{}:{name:Q},...e.resolver||!Q?{isValid:he}:{},errors:n.errors}),ie.shouldFocus&&!ke&&Dh(r,Ie,Q?pe:u.mount),ke},He=Q=>{const ie={...l.mount?i:s};return Gn(Q)?ie:no(Q)?Re(ie,Q):Q.map(he=>Re(ie,he))},at=(Q,ie)=>({invalid:!!Re((ie||n).errors,Q),isDirty:!!Re((ie||n).dirtyFields,Q),error:Re((ie||n).errors,Q),isValidating:!!Re(n.validatingFields,Q),isTouched:!!Re((ie||n).touchedFields,Q)}),_t=Q=>{Q&&Oh(Q).forEach(ie=>ir(n.errors,ie)),E.state.next({errors:Q?n.errors:{}})},Vn=(Q,ie,he)=>{const ke=(Re(r,Q,{_f:{}})._f||{}).ref,pe=Re(n.errors,Q)||{},{ref:ye,message:Ne,type:Ye,...en}=pe;zt(n.errors,Q,{...en,...ie,ref:ke}),E.state.next({name:Q,errors:n.errors,isValid:!1}),he&&he.shouldFocus&&ke&&ke.focus&&ke.focus()},Oe=(Q,ie)=>Ei(Q)?E.state.subscribe({next:he=>Q(de(void 0,ie),he)}):de(Q,ie,!0),Zt=Q=>E.state.subscribe({next:ie=>{sG(Q.name,ie.name,Q.exact)&&rG(ie,Q.formState||w,ct,Q.reRenderRoot)&&Q.callback({values:{...i},...n,...ie})}}).unsubscribe,qt=Q=>(l.mount=!0,v={...v,...Q.formState},Zt({...Q,formState:v})),yn=(Q,ie={})=>{for(const he of Q?Oh(Q):u.mount)u.mount.delete(he),u.array.delete(he),ie.keepValue||(ir(r,he),ir(i,he)),!ie.keepError&&ir(n.errors,he),!ie.keepDirty&&ir(n.dirtyFields,he),!ie.keepTouched&&ir(n.touchedFields,he),!ie.keepIsValidating&&ir(n.validatingFields,he),!e.shouldUnregister&&!ie.keepDefaultValue&&ir(s,he);E.state.next({values:_r(i)}),E.state.next({...n,...ie.keepDirty?{isDirty:z()}:{}}),!ie.keepIsValid&&N()},Jn=({disabled:Q,name:ie})=>{(Ps(Q)&&l.mount||Q||u.disabled.has(ie))&&(Q?u.disabled.add(ie):u.disabled.delete(ie))},Jt=(Q,ie={})=>{let he=Re(r,Q);const ke=Ps(ie.disabled)||Ps(e.disabled);return zt(r,Q,{...he||{},_f:{...he&&he._f?he._f:{ref:{name:Q}},name:Q,mount:!0,...ie}}),u.mount.add(Q),he?Jn({disabled:Ps(ie.disabled)?ie.disabled:e.disabled,name:Q}):Y(Q,!0,ie.value),{...ke?{disabled:ie.disabled||e.disabled}:{},...e.progressive?{required:!!ie.required,min:th(ie.min),max:th(ie.max),minLength:th(ie.minLength),maxLength:th(ie.maxLength),pattern:th(ie.pattern)}:{},name:Q,onChange:ue,onBlur:ue,ref:pe=>{if(pe){Jt(Q,ie),he=Re(r,Q);const ye=Gn(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,Ne=QW(ye),Ye=he._f.refs||[];if(Ne?Ye.find(en=>en===ye):ye===he._f.ref)return;zt(r,Q,{_f:{...he._f,...Ne?{refs:[...Ye.filter(Iy),ye,...Array.isArray(Re(s,Q))?[{}]:[]],ref:{type:ye.type,name:Q}}:{ref:ye}}}),Y(Q,!1,void 0,ye)}else he=Re(r,Q,{}),he._f&&(he._f.mount=!1),(e.shouldUnregister||ie.shouldUnregister)&&!(O6(u.array,Q)&&l.action)&&u.unMount.add(Q)}}},os=()=>e.shouldFocusError&&Dh(r,Ie,u.mount),lt=Q=>{Ps(Q)&&(E.state.next({disabled:Q}),Dh(r,(ie,he)=>{const ke=Re(r,he);ke&&(ie.disabled=ke._f.disabled||Q,Array.isArray(ke._f.refs)&&ke._f.refs.forEach(pe=>{pe.disabled=ke._f.disabled||Q}))},0,!1))},Rr=(Q,ie)=>async he=>{let ke;he&&(he.preventDefault&&he.preventDefault(),he.persist&&he.persist());let pe=_r(i);if(E.state.next({isSubmitting:!0}),e.resolver){const{errors:ye,values:Ne}=await L();n.errors=ye,pe=Ne}else await X(r);if(u.disabled.size)for(const ye of u.disabled)zt(pe,ye,void 0);if(ir(n.errors,"root"),Yr(n.errors)){E.state.next({errors:{}});try{await Q(pe,he)}catch(ye){ke=ye}}else ie&&await ie({...n.errors},he),os(),setTimeout(os);if(E.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Yr(n.errors)&&!ke,submitCount:n.submitCount+1,errors:n.errors}),ke)throw ke},ur=(Q,ie={})=>{Re(r,Q)&&(Gn(ie.defaultValue)?oe(Q,_r(Re(s,Q))):(oe(Q,ie.defaultValue),zt(s,Q,_r(ie.defaultValue))),ie.keepTouched||ir(n.touchedFields,Q),ie.keepDirty||(ir(n.dirtyFields,Q),n.isDirty=ie.defaultValue?z(Q,_r(Re(s,Q))):z()),ie.keepError||(ir(n.errors,Q),w.isValid&&N()),E.state.next({...n}))},_s=(Q,ie={})=>{const he=Q?_r(Q):s,ke=_r(he),pe=Yr(Q),ye=pe?s:ke;if(ie.keepDefaultValues||(s=he),!ie.keepValues){if(ie.keepDirtyValues){const Ne=new Set([...u.mount,...Object.keys(eh(s,i))]);for(const Ye of Array.from(Ne))Re(n.dirtyFields,Ye)?zt(ye,Ye,Re(i,Ye)):oe(Ye,Re(ye,Ye))}else{if(T_&&Gn(Q))for(const Ne of u.mount){const Ye=Re(r,Ne);if(Ye&&Ye._f){const en=Array.isArray(Ye._f.refs)?Ye._f.refs[0]:Ye._f.ref;if(Ug(en)){const Cn=en.closest("form");if(Cn){Cn.reset();break}}}}for(const Ne of u.mount)oe(Ne,Re(ye,Ne))}i=_r(ye),E.array.next({values:{...ye}}),E.state.next({values:{...ye}})}u={mount:ie.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!w.isValid||!!ie.keepIsValid||!!ie.keepDirtyValues,l.watch=!!e.shouldUnregister,E.state.next({submitCount:ie.keepSubmitCount?n.submitCount:0,isDirty:pe?!1:ie.keepDirty?n.isDirty:!!(ie.keepDefaultValues&&!Sa(Q,s)),isSubmitted:ie.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:pe?{}:ie.keepDirtyValues?ie.keepDefaultValues&&i?eh(s,i):n.dirtyFields:ie.keepDefaultValues&&Q?eh(s,Q):ie.keepDirty?n.dirtyFields:{},touchedFields:ie.keepTouched?n.touchedFields:{},errors:ie.keepErrors?n.errors:{},isSubmitSuccessful:ie.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},xn=(Q,ie)=>_s(Ei(Q)?Q(i):Q,ie),Lt=(Q,ie={})=>{const he=Re(r,Q),ke=he&&he._f;if(ke){const pe=ke.refs?ke.refs[0]:ke.ref;pe.focus&&(pe.focus(),ie.shouldSelect&&Ei(pe.select)&&pe.select())}},ct=Q=>{n={...n,...Q}},je={control:{register:Jt,unregister:yn,getFieldState:at,handleSubmit:Rr,setError:Vn,_subscribe:Zt,_runSchema:L,_getWatch:de,_getDirty:z,_setValid:N,_setFieldArray:S,_setDisabledField:Jn,_setErrors:$,_getFieldArray:ee,_reset:_s,_resetDefaultValues:()=>Ei(e.defaultValues)&&e.defaultValues().then(Q=>{xn(Q,e.resetOptions),E.state.next({isLoading:!1})}),_removeUnmounted:H,_disableForm:lt,_subjects:E,_proxyFormState:w,get _fields(){return r},get _formValues(){return i},get _state(){return l},set _state(Q){l=Q},get _defaultValues(){return s},get _names(){return u},set _names(Q){u=Q},get _formState(){return n},get _options(){return e},set _options(Q){e={...e,...Q}}},subscribe:qt,trigger:Ge,register:Jt,handleSubmit:Rr,watch:Oe,setValue:oe,getValues:He,reset:xn,resetField:ur,clearErrors:_t,unregister:yn,setError:Vn,setFocus:Lt,getFieldState:at};return{...je,formControl:je}}function G6(t={}){const e=dt.useRef(void 0),n=dt.useRef(void 0),[r,s]=dt.useState({isDirty:!1,isValidating:!1,isLoading:Ei(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Ei(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:cG(t),formState:r},t.formControl&&t.defaultValues&&!Ei(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=e.current.control;return i._options=t,dt.useLayoutEffect(()=>i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0}),[i]),dt.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),dt.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==r.isDirty&&i._subjects.state.next({isDirty:l})}},[i,r.isDirty]),dt.useEffect(()=>{t.values&&!Sa(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,s(l=>({...l}))):i._resetDefaultValues()},[t.values,i]),dt.useEffect(()=>{t.errors&&!Yr(t.errors)&&i._setErrors(t.errors)},[t.errors,i]),dt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),dt.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[t.shouldUnregister,i]),e.current.formState=L6(r,i),e.current}const OA=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Re(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},$6=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?OA(r.ref,n,t):r.refs&&r.refs.forEach(s=>OA(s,n,t))}},uG=(t,e)=>{e.shouldUseNativeValidation&&$6(t,e);const n={};for(const r in t){const s=Re(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(dG(e.names||Object.keys(t),r)){const l=Object.assign({},Re(n,r));zt(l,"root",i),zt(n,r,l)}else zt(n,r,i)}return n},dG=(t,e)=>t.some(n=>n.startsWith(e+"."));var hG=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,l=r.path.join(".");if(!n[l])if("unionErrors"in r){var u=r.unionErrors[0].errors[0];n[l]={message:u.message,type:u.code}}else n[l]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(w){return w.errors.forEach(function(v){return t.push(v)})}),e){var f=n[l].types,m=f&&f[r.code];n[l]=j6(l,e,n,s,m?[].concat(m,r.message):r.message)}t.shift()}return n},q6=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(l,u){try{var f=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(m){return i.shouldUseNativeValidation&&$6({},i),{errors:{},values:n.raw?r:m}})}catch(m){return u(m)}return f&&f.then?f.then(void 0,u):f}(0,function(l){if(function(u){return Array.isArray(u==null?void 0:u.errors)}(l))return{values:{},errors:uG(hG(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}},Pt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const l of s)i[l]=l;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(u=>typeof s[s[u]]!="number"),l={};for(const u of i)l[u]=s[u];return t.objectValues(l)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&i.push(l);return i},t.find=(s,i)=>{for(const l of s)if(i(l))return l},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Pt||(Pt={}));var bw;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(bw||(bw={}));const Me=Pt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),jo=t=>{switch(typeof t){case"undefined":return Me.undefined;case"string":return Me.string;case"number":return isNaN(t)?Me.nan:Me.number;case"boolean":return Me.boolean;case"function":return Me.function;case"bigint":return Me.bigint;case"symbol":return Me.symbol;case"object":return Array.isArray(t)?Me.array:t===null?Me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Me.promise:typeof Map<"u"&&t instanceof Map?Me.map:typeof Set<"u"&&t instanceof Set?Me.set:typeof Date<"u"&&t instanceof Date?Me.date:Me.object;default:return Me.unknown}},_e=Pt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),fG=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Vs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(s);else if(l.code==="invalid_return_type")s(l.returnTypeError);else if(l.code==="invalid_arguments")s(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let u=r,f=0;for(;f<l.path.length;){const m=l.path[f];f===l.path.length-1?(u[m]=u[m]||{_errors:[]},u[m]._errors.push(n(l))):u[m]=u[m]||{_errors:[]},u=u[m],f++}}};return s(this),r}static assert(e){if(!(e instanceof Vs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Pt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Vs.create=t=>new Vs(t);const hd=(t,e)=>{let n;switch(t.code){case _e.invalid_type:t.received===Me.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case _e.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Pt.jsonStringifyReplacer)}`;break;case _e.unrecognized_keys:n=`Unrecognized key(s) in object: ${Pt.joinValues(t.keys,", ")}`;break;case _e.invalid_union:n="Invalid input";break;case _e.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Pt.joinValues(t.options)}`;break;case _e.invalid_enum_value:n=`Invalid enum value. Expected ${Pt.joinValues(t.options)}, received '${t.received}'`;break;case _e.invalid_arguments:n="Invalid function arguments";break;case _e.invalid_return_type:n="Invalid function return type";break;case _e.invalid_date:n="Invalid date";break;case _e.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Pt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case _e.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case _e.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case _e.custom:n="Invalid input";break;case _e.invalid_intersection_types:n="Intersection results could not be merged";break;case _e.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case _e.not_finite:n="Number must be finite";break;default:n=e.defaultError,Pt.assertNever(t)}return{message:n}};let K6=hd;function gG(t){K6=t}function Wg(){return K6}const Gg=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],l={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let u="";const f=r.filter(m=>!!m).slice().reverse();for(const m of f)u=m(l,{data:e,defaultError:u}).message;return{...s,path:i,message:u}},mG=[];function Pe(t,e){const n=Wg(),r=Gg({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===hd?void 0:hd].filter(s=>!!s)});t.common.issues.push(r)}class Hr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return nt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,l=await s.value;r.push({key:i,value:l})}return Hr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:l}=s;if(i.status==="aborted"||l.status==="aborted")return nt;i.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||s.alwaysSet)&&(r[i.value]=l.value)}return{status:e.value,value:r}}}const nt=Object.freeze({status:"aborted"}),pu=t=>({status:"dirty",value:t}),ns=t=>({status:"valid",value:t}),Cw=t=>t.status==="aborted",Aw=t=>t.status==="dirty",Ic=t=>t.status==="valid",xf=t=>typeof Promise<"u"&&t instanceof Promise;function $g(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function X6(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var We;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(We||(We={}));var hh,fh;class yo{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const DA=(t,e)=>{if(Ic(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Vs(t.common.issues);return this._error=n,this._error}}};function ht(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(l,u)=>{var f,m;const{message:w}=t;return l.code==="invalid_enum_value"?{message:w??u.defaultError}:typeof u.data>"u"?{message:(f=w??r)!==null&&f!==void 0?f:u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:(m=w??n)!==null&&m!==void 0?m:u.defaultError}},description:s}}class gt{get description(){return this._def.description}_getType(e){return jo(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:jo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Hr,ctx:{common:e.parent.common,data:e.data,parsedType:jo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(xf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:jo(e)},i=this._parseSync({data:e,path:s.path,parent:s});return DA(s,i)}"~validate"(e){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:jo(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return Ic(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>Ic(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:jo(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(xf(s)?s:Promise.resolve(s));return DA(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const l=e(s),u=()=>i.addIssue({code:_e.custom,...r(s)});return typeof Promise<"u"&&l instanceof Promise?l.then(f=>f?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Li({schema:this,typeName:tt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return fo.create(this,this._def)}nullable(){return wl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ni.create(this)}promise(){return gd.create(this,this._def)}or(e){return Ef.create([this,e],this._def)}and(e){return bf.create(this,e,this._def)}transform(e){return new Li({...ht(this._def),schema:this,typeName:tt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Sf({...ht(this._def),innerType:this,defaultValue:n,typeName:tt.ZodDefault})}brand(){return new R_({typeName:tt.ZodBranded,type:this,...ht(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Nf({...ht(this._def),innerType:this,catchValue:n,typeName:tt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return m0.create(this,e)}readonly(){return Rf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const pG=/^c[^\s-]{8,}$/i,yG=/^[0-9a-z]+$/,xG=/^[0-9A-HJKMNP-TV-Z]{26}$/i,wG=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,vG=/^[a-z0-9_-]{21}$/i,_G=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,EG=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,bG=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,CG="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Sy;const AG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,TG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,IG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,SG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,NG=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,RG=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Y6="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",kG=new RegExp(`^${Y6}$`);function Q6(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function PG(t){return new RegExp(`^${Q6(t)}$`)}function Z6(t){let e=`${Y6}T${Q6(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function OG(t,e){return!!((e==="v4"||!e)&&AG.test(t)||(e==="v6"||!e)&&IG.test(t))}function DG(t,e){if(!_G.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function MG(t,e){return!!((e==="v4"||!e)&&TG.test(t)||(e==="v6"||!e)&&SG.test(t))}class Ci extends gt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Me.string){const i=this._getOrReturnCtx(e);return Pe(i,{code:_e.invalid_type,expected:Me.string,received:i.parsedType}),nt}const r=new Hr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Pe(s,{code:_e.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Pe(s,{code:_e.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const l=e.data.length>i.value,u=e.data.length<i.value;(l||u)&&(s=this._getOrReturnCtx(e,s),l?Pe(s,{code:_e.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&Pe(s,{code:_e.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")bG.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"email",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Sy||(Sy=new RegExp(CG,"u")),Sy.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"emoji",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")wG.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"uuid",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")vG.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"nanoid",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")pG.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"cuid",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")yG.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"cuid2",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")xG.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"ulid",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Pe(s,{validation:"url",code:_e.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"regex",code:_e.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Pe(s,{code:_e.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Pe(s,{code:_e.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Pe(s,{code:_e.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Z6(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{code:_e.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?kG.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{code:_e.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?PG(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{code:_e.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?EG.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"duration",code:_e.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?OG(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"ip",code:_e.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?DG(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"jwt",code:_e.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?MG(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"cidr",code:_e.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?NG.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"base64",code:_e.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?RG.test(e.data)||(s=this._getOrReturnCtx(e,s),Pe(s,{validation:"base64url",code:_e.invalid_string,message:i.message}),r.dirty()):Pt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:_e.invalid_string,...We.errToObj(r)})}_addCheck(e){return new Ci({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...We.errToObj(e)})}url(e){return this._addCheck({kind:"url",...We.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...We.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...We.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...We.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...We.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...We.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...We.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...We.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...We.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...We.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...We.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...We.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...We.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...We.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...We.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...We.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...We.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...We.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...We.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...We.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...We.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...We.errToObj(n)})}nonempty(e){return this.min(1,We.errToObj(e))}trim(){return new Ci({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ci({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ci({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ci.create=t=>{var e;return new Ci({checks:[],typeName:tt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ht(t)})};function LG(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),l=parseInt(e.toFixed(s).replace(".",""));return i%l/Math.pow(10,s)}class pl extends gt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Me.number){const i=this._getOrReturnCtx(e);return Pe(i,{code:_e.invalid_type,expected:Me.number,received:i.parsedType}),nt}let r;const s=new Hr;for(const i of this._def.checks)i.kind==="int"?Pt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Pe(r,{code:_e.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:_e.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:_e.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?LG(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:_e.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Pe(r,{code:_e.not_finite,message:i.message}),s.dirty()):Pt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,We.toString(n))}gt(e,n){return this.setLimit("min",e,!1,We.toString(n))}lte(e,n){return this.setLimit("max",e,!0,We.toString(n))}lt(e,n){return this.setLimit("max",e,!1,We.toString(n))}setLimit(e,n,r,s){return new pl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:We.toString(s)}]})}_addCheck(e){return new pl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:We.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:We.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:We.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:We.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:We.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:We.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:We.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:We.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:We.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Pt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}pl.create=t=>new pl({checks:[],typeName:tt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ht(t)});class yl extends gt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Me.bigint)return this._getInvalidInput(e);let r;const s=new Hr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:_e.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:_e.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:_e.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Pt.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Pe(n,{code:_e.invalid_type,expected:Me.bigint,received:n.parsedType}),nt}gte(e,n){return this.setLimit("min",e,!0,We.toString(n))}gt(e,n){return this.setLimit("min",e,!1,We.toString(n))}lte(e,n){return this.setLimit("max",e,!0,We.toString(n))}lt(e,n){return this.setLimit("max",e,!1,We.toString(n))}setLimit(e,n,r,s){return new yl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:We.toString(s)}]})}_addCheck(e){return new yl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:We.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:We.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:We.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:We.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:We.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}yl.create=t=>{var e;return new yl({checks:[],typeName:tt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ht(t)})};class wf extends gt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Me.boolean){const r=this._getOrReturnCtx(e);return Pe(r,{code:_e.invalid_type,expected:Me.boolean,received:r.parsedType}),nt}return ns(e.data)}}wf.create=t=>new wf({typeName:tt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ht(t)});class Sc extends gt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Me.date){const i=this._getOrReturnCtx(e);return Pe(i,{code:_e.invalid_type,expected:Me.date,received:i.parsedType}),nt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Pe(i,{code:_e.invalid_date}),nt}const r=new Hr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Pe(s,{code:_e.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Pe(s,{code:_e.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Pt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Sc({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:We.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:We.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Sc.create=t=>new Sc({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:tt.ZodDate,...ht(t)});class qg extends gt{_parse(e){if(this._getType(e)!==Me.symbol){const r=this._getOrReturnCtx(e);return Pe(r,{code:_e.invalid_type,expected:Me.symbol,received:r.parsedType}),nt}return ns(e.data)}}qg.create=t=>new qg({typeName:tt.ZodSymbol,...ht(t)});class vf extends gt{_parse(e){if(this._getType(e)!==Me.undefined){const r=this._getOrReturnCtx(e);return Pe(r,{code:_e.invalid_type,expected:Me.undefined,received:r.parsedType}),nt}return ns(e.data)}}vf.create=t=>new vf({typeName:tt.ZodUndefined,...ht(t)});class _f extends gt{_parse(e){if(this._getType(e)!==Me.null){const r=this._getOrReturnCtx(e);return Pe(r,{code:_e.invalid_type,expected:Me.null,received:r.parsedType}),nt}return ns(e.data)}}_f.create=t=>new _f({typeName:tt.ZodNull,...ht(t)});class fd extends gt{constructor(){super(...arguments),this._any=!0}_parse(e){return ns(e.data)}}fd.create=t=>new fd({typeName:tt.ZodAny,...ht(t)});class hc extends gt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ns(e.data)}}hc.create=t=>new hc({typeName:tt.ZodUnknown,...ht(t)});class ra extends gt{_parse(e){const n=this._getOrReturnCtx(e);return Pe(n,{code:_e.invalid_type,expected:Me.never,received:n.parsedType}),nt}}ra.create=t=>new ra({typeName:tt.ZodNever,...ht(t)});class Kg extends gt{_parse(e){if(this._getType(e)!==Me.undefined){const r=this._getOrReturnCtx(e);return Pe(r,{code:_e.invalid_type,expected:Me.void,received:r.parsedType}),nt}return ns(e.data)}}Kg.create=t=>new Kg({typeName:tt.ZodVoid,...ht(t)});class Ni extends gt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Me.array)return Pe(n,{code:_e.invalid_type,expected:Me.array,received:n.parsedType}),nt;if(s.exactLength!==null){const l=n.data.length>s.exactLength.value,u=n.data.length<s.exactLength.value;(l||u)&&(Pe(n,{code:l?_e.too_big:_e.too_small,minimum:u?s.exactLength.value:void 0,maximum:l?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Pe(n,{code:_e.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Pe(n,{code:_e.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,u)=>s.type._parseAsync(new yo(n,l,n.path,u)))).then(l=>Hr.mergeArray(r,l));const i=[...n.data].map((l,u)=>s.type._parseSync(new yo(n,l,n.path,u)));return Hr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Ni({...this._def,minLength:{value:e,message:We.toString(n)}})}max(e,n){return new Ni({...this._def,maxLength:{value:e,message:We.toString(n)}})}length(e,n){return new Ni({...this._def,exactLength:{value:e,message:We.toString(n)}})}nonempty(e){return this.min(1,e)}}Ni.create=(t,e)=>new Ni({type:t,minLength:null,maxLength:null,exactLength:null,typeName:tt.ZodArray,...ht(e)});function ru(t){if(t instanceof In){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=fo.create(ru(r))}return new In({...t._def,shape:()=>e})}else return t instanceof Ni?new Ni({...t._def,type:ru(t.element)}):t instanceof fo?fo.create(ru(t.unwrap())):t instanceof wl?wl.create(ru(t.unwrap())):t instanceof xo?xo.create(t.items.map(e=>ru(e))):t}class In extends gt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Pt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Me.object){const m=this._getOrReturnCtx(e);return Pe(m,{code:_e.invalid_type,expected:Me.object,received:m.parsedType}),nt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof ra&&this._def.unknownKeys==="strip"))for(const m in s.data)l.includes(m)||u.push(m);const f=[];for(const m of l){const w=i[m],v=s.data[m];f.push({key:{status:"valid",value:m},value:w._parse(new yo(s,v,s.path,m)),alwaysSet:m in s.data})}if(this._def.catchall instanceof ra){const m=this._def.unknownKeys;if(m==="passthrough")for(const w of u)f.push({key:{status:"valid",value:w},value:{status:"valid",value:s.data[w]}});else if(m==="strict")u.length>0&&(Pe(s,{code:_e.unrecognized_keys,keys:u}),r.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const w of u){const v=s.data[w];f.push({key:{status:"valid",value:w},value:m._parse(new yo(s,v,s.path,w)),alwaysSet:w in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const m=[];for(const w of f){const v=await w.key,E=await w.value;m.push({key:v,value:E,alwaysSet:w.alwaysSet})}return m}).then(m=>Hr.mergeObjectSync(r,m)):Hr.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return We.errToObj,new In({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,l,u;const f=(l=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&l!==void 0?l:r.defaultError;return n.code==="unrecognized_keys"?{message:(u=We.errToObj(e).message)!==null&&u!==void 0?u:f}:{message:f}}}:{}})}strip(){return new In({...this._def,unknownKeys:"strip"})}passthrough(){return new In({...this._def,unknownKeys:"passthrough"})}extend(e){return new In({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new In({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:tt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new In({...this._def,catchall:e})}pick(e){const n={};return Pt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new In({...this._def,shape:()=>n})}omit(e){const n={};return Pt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new In({...this._def,shape:()=>n})}deepPartial(){return ru(this)}partial(e){const n={};return Pt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new In({...this._def,shape:()=>n})}required(e){const n={};return Pt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof fo;)i=i._def.innerType;n[r]=i}}),new In({...this._def,shape:()=>n})}keyof(){return J6(Pt.objectKeys(this.shape))}}In.create=(t,e)=>new In({shape:()=>t,unknownKeys:"strip",catchall:ra.create(),typeName:tt.ZodObject,...ht(e)});In.strictCreate=(t,e)=>new In({shape:()=>t,unknownKeys:"strict",catchall:ra.create(),typeName:tt.ZodObject,...ht(e)});In.lazycreate=(t,e)=>new In({shape:t,unknownKeys:"strip",catchall:ra.create(),typeName:tt.ZodObject,...ht(e)});class Ef extends gt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const u of i)if(u.result.status==="valid")return u.result;for(const u of i)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const l=i.map(u=>new Vs(u.ctx.common.issues));return Pe(n,{code:_e.invalid_union,unionErrors:l}),nt}if(n.common.async)return Promise.all(r.map(async i=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(s);{let i;const l=[];for(const f of r){const m={...n,common:{...n.common,issues:[]},parent:null},w=f._parseSync({data:n.data,path:n.path,parent:m});if(w.status==="valid")return w;w.status==="dirty"&&!i&&(i={result:w,ctx:m}),m.common.issues.length&&l.push(m.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const u=l.map(f=>new Vs(f));return Pe(n,{code:_e.invalid_union,unionErrors:u}),nt}}get options(){return this._def.options}}Ef.create=(t,e)=>new Ef({options:t,typeName:tt.ZodUnion,...ht(e)});const Oo=t=>t instanceof Af?Oo(t.schema):t instanceof Li?Oo(t.innerType()):t instanceof Tf?[t.value]:t instanceof xl?t.options:t instanceof If?Pt.objectValues(t.enum):t instanceof Sf?Oo(t._def.innerType):t instanceof vf?[void 0]:t instanceof _f?[null]:t instanceof fo?[void 0,...Oo(t.unwrap())]:t instanceof wl?[null,...Oo(t.unwrap())]:t instanceof R_||t instanceof Rf?Oo(t.unwrap()):t instanceof Nf?Oo(t._def.innerType):[];class gp extends gt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.object)return Pe(n,{code:_e.invalid_type,expected:Me.object,received:n.parsedType}),nt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Pe(n,{code:_e.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),nt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const l=Oo(i.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of l){if(s.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);s.set(u,i)}}return new gp({typeName:tt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...ht(r)})}}function Tw(t,e){const n=jo(t),r=jo(e);if(t===e)return{valid:!0,data:t};if(n===Me.object&&r===Me.object){const s=Pt.objectKeys(e),i=Pt.objectKeys(t).filter(u=>s.indexOf(u)!==-1),l={...t,...e};for(const u of i){const f=Tw(t[u],e[u]);if(!f.valid)return{valid:!1};l[u]=f.data}return{valid:!0,data:l}}else if(n===Me.array&&r===Me.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const l=t[i],u=e[i],f=Tw(l,u);if(!f.valid)return{valid:!1};s.push(f.data)}return{valid:!0,data:s}}else return n===Me.date&&r===Me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class bf extends gt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,l)=>{if(Cw(i)||Cw(l))return nt;const u=Tw(i.value,l.value);return u.valid?((Aw(i)||Aw(l))&&n.dirty(),{status:n.value,value:u.data}):(Pe(r,{code:_e.invalid_intersection_types}),nt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,l])=>s(i,l)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}bf.create=(t,e,n)=>new bf({left:t,right:e,typeName:tt.ZodIntersection,...ht(n)});class xo extends gt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Me.array)return Pe(r,{code:_e.invalid_type,expected:Me.array,received:r.parsedType}),nt;if(r.data.length<this._def.items.length)return Pe(r,{code:_e.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),nt;!this._def.rest&&r.data.length>this._def.items.length&&(Pe(r,{code:_e.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((l,u)=>{const f=this._def.items[u]||this._def.rest;return f?f._parse(new yo(r,l,r.path,u)):null}).filter(l=>!!l);return r.common.async?Promise.all(i).then(l=>Hr.mergeArray(n,l)):Hr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new xo({...this._def,rest:e})}}xo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xo({items:t,typeName:tt.ZodTuple,rest:null,...ht(e)})};class Cf extends gt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Me.object)return Pe(r,{code:_e.invalid_type,expected:Me.object,received:r.parsedType}),nt;const s=[],i=this._def.keyType,l=this._def.valueType;for(const u in r.data)s.push({key:i._parse(new yo(r,u,r.path,u)),value:l._parse(new yo(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?Hr.mergeObjectAsync(n,s):Hr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof gt?new Cf({keyType:e,valueType:n,typeName:tt.ZodRecord,...ht(r)}):new Cf({keyType:Ci.create(),valueType:e,typeName:tt.ZodRecord,...ht(n)})}}class Xg extends gt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Me.map)return Pe(r,{code:_e.invalid_type,expected:Me.map,received:r.parsedType}),nt;const s=this._def.keyType,i=this._def.valueType,l=[...r.data.entries()].map(([u,f],m)=>({key:s._parse(new yo(r,u,r.path,[m,"key"])),value:i._parse(new yo(r,f,r.path,[m,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const f of l){const m=await f.key,w=await f.value;if(m.status==="aborted"||w.status==="aborted")return nt;(m.status==="dirty"||w.status==="dirty")&&n.dirty(),u.set(m.value,w.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const f of l){const m=f.key,w=f.value;if(m.status==="aborted"||w.status==="aborted")return nt;(m.status==="dirty"||w.status==="dirty")&&n.dirty(),u.set(m.value,w.value)}return{status:n.value,value:u}}}}Xg.create=(t,e,n)=>new Xg({valueType:e,keyType:t,typeName:tt.ZodMap,...ht(n)});class Nc extends gt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Me.set)return Pe(r,{code:_e.invalid_type,expected:Me.set,received:r.parsedType}),nt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Pe(r,{code:_e.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Pe(r,{code:_e.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function l(f){const m=new Set;for(const w of f){if(w.status==="aborted")return nt;w.status==="dirty"&&n.dirty(),m.add(w.value)}return{status:n.value,value:m}}const u=[...r.data.values()].map((f,m)=>i._parse(new yo(r,f,r.path,m)));return r.common.async?Promise.all(u).then(f=>l(f)):l(u)}min(e,n){return new Nc({...this._def,minSize:{value:e,message:We.toString(n)}})}max(e,n){return new Nc({...this._def,maxSize:{value:e,message:We.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Nc.create=(t,e)=>new Nc({valueType:t,minSize:null,maxSize:null,typeName:tt.ZodSet,...ht(e)});class ku extends gt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.function)return Pe(n,{code:_e.invalid_type,expected:Me.function,received:n.parsedType}),nt;function r(u,f){return Gg({data:u,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Wg(),hd].filter(m=>!!m),issueData:{code:_e.invalid_arguments,argumentsError:f}})}function s(u,f){return Gg({data:u,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Wg(),hd].filter(m=>!!m),issueData:{code:_e.invalid_return_type,returnTypeError:f}})}const i={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof gd){const u=this;return ns(async function(...f){const m=new Vs([]),w=await u._def.args.parseAsync(f,i).catch(I=>{throw m.addIssue(r(f,I)),m}),v=await Reflect.apply(l,this,w);return await u._def.returns._def.type.parseAsync(v,i).catch(I=>{throw m.addIssue(s(v,I)),m})})}else{const u=this;return ns(function(...f){const m=u._def.args.safeParse(f,i);if(!m.success)throw new Vs([r(f,m.error)]);const w=Reflect.apply(l,this,m.data),v=u._def.returns.safeParse(w,i);if(!v.success)throw new Vs([s(w,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ku({...this._def,args:xo.create(e).rest(hc.create())})}returns(e){return new ku({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new ku({args:e||xo.create([]).rest(hc.create()),returns:n||hc.create(),typeName:tt.ZodFunction,...ht(r)})}}class Af extends gt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Af.create=(t,e)=>new Af({getter:t,typeName:tt.ZodLazy,...ht(e)});class Tf extends gt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Pe(n,{received:n.data,code:_e.invalid_literal,expected:this._def.value}),nt}return{status:"valid",value:e.data}}get value(){return this._def.value}}Tf.create=(t,e)=>new Tf({value:t,typeName:tt.ZodLiteral,...ht(e)});function J6(t,e){return new xl({values:t,typeName:tt.ZodEnum,...ht(e)})}class xl extends gt{constructor(){super(...arguments),hh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Pe(n,{expected:Pt.joinValues(r),received:n.parsedType,code:_e.invalid_type}),nt}if($g(this,hh)||X6(this,hh,new Set(this._def.values)),!$g(this,hh).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Pe(n,{received:n.data,code:_e.invalid_enum_value,options:r}),nt}return ns(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return xl.create(e,{...this._def,...n})}exclude(e,n=this._def){return xl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}hh=new WeakMap;xl.create=J6;class If extends gt{constructor(){super(...arguments),fh.set(this,void 0)}_parse(e){const n=Pt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Me.string&&r.parsedType!==Me.number){const s=Pt.objectValues(n);return Pe(r,{expected:Pt.joinValues(s),received:r.parsedType,code:_e.invalid_type}),nt}if($g(this,fh)||X6(this,fh,new Set(Pt.getValidEnumValues(this._def.values))),!$g(this,fh).has(e.data)){const s=Pt.objectValues(n);return Pe(r,{received:r.data,code:_e.invalid_enum_value,options:s}),nt}return ns(e.data)}get enum(){return this._def.values}}fh=new WeakMap;If.create=(t,e)=>new If({values:t,typeName:tt.ZodNativeEnum,...ht(e)});class gd extends gt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.promise&&n.common.async===!1)return Pe(n,{code:_e.invalid_type,expected:Me.promise,received:n.parsedType}),nt;const r=n.parsedType===Me.promise?n.data:Promise.resolve(n.data);return ns(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}gd.create=(t,e)=>new gd({type:t,typeName:tt.ZodPromise,...ht(e)});class Li extends gt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===tt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:l=>{Pe(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const l=s.transform(r.data,i);if(r.common.async)return Promise.resolve(l).then(async u=>{if(n.value==="aborted")return nt;const f=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return f.status==="aborted"?nt:f.status==="dirty"||n.value==="dirty"?pu(f.value):f});{if(n.value==="aborted")return nt;const u=this._def.schema._parseSync({data:l,path:r.path,parent:r});return u.status==="aborted"?nt:u.status==="dirty"||n.value==="dirty"?pu(u.value):u}}if(s.type==="refinement"){const l=u=>{const f=s.refinement(u,i);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?nt:(u.status==="dirty"&&n.dirty(),l(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?nt:(u.status==="dirty"&&n.dirty(),l(u.value).then(()=>({status:n.value,value:u.value}))))}if(s.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ic(l))return l;const u=s.transform(l.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>Ic(l)?Promise.resolve(s.transform(l.value,i)).then(u=>({status:n.value,value:u})):l);Pt.assertNever(s)}}Li.create=(t,e,n)=>new Li({schema:t,typeName:tt.ZodEffects,effect:e,...ht(n)});Li.createWithPreprocess=(t,e,n)=>new Li({schema:e,effect:{type:"preprocess",transform:t},typeName:tt.ZodEffects,...ht(n)});class fo extends gt{_parse(e){return this._getType(e)===Me.undefined?ns(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fo.create=(t,e)=>new fo({innerType:t,typeName:tt.ZodOptional,...ht(e)});class wl extends gt{_parse(e){return this._getType(e)===Me.null?ns(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wl.create=(t,e)=>new wl({innerType:t,typeName:tt.ZodNullable,...ht(e)});class Sf extends gt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Me.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Sf.create=(t,e)=>new Sf({innerType:t,typeName:tt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ht(e)});class Nf extends gt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return xf(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Vs(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Vs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Nf.create=(t,e)=>new Nf({innerType:t,typeName:tt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ht(e)});class Yg extends gt{_parse(e){if(this._getType(e)!==Me.nan){const r=this._getOrReturnCtx(e);return Pe(r,{code:_e.invalid_type,expected:Me.nan,received:r.parsedType}),nt}return{status:"valid",value:e.data}}}Yg.create=t=>new Yg({typeName:tt.ZodNaN,...ht(t)});const FG=Symbol("zod_brand");class R_ extends gt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class m0 extends gt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?nt:i.status==="dirty"?(n.dirty(),pu(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?nt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new m0({in:e,out:n,typeName:tt.ZodPipeline})}}class Rf extends gt{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Ic(s)&&(s.value=Object.freeze(s.value)),s);return xf(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Rf.create=(t,e)=>new Rf({innerType:t,typeName:tt.ZodReadonly,...ht(e)});function MA(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function e8(t,e={},n){return t?fd.create().superRefine((r,s)=>{var i,l;const u=t(r);if(u instanceof Promise)return u.then(f=>{var m,w;if(!f){const v=MA(e,r),E=(w=(m=v.fatal)!==null&&m!==void 0?m:n)!==null&&w!==void 0?w:!0;s.addIssue({code:"custom",...v,fatal:E})}});if(!u){const f=MA(e,r),m=(l=(i=f.fatal)!==null&&i!==void 0?i:n)!==null&&l!==void 0?l:!0;s.addIssue({code:"custom",...f,fatal:m})}}):fd.create()}const jG={object:In.lazycreate};var tt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(tt||(tt={}));const BG=(t,e={message:`Input not instance of ${t.name}`})=>e8(n=>n instanceof t,e),t8=Ci.create,n8=pl.create,VG=Yg.create,UG=yl.create,r8=wf.create,zG=Sc.create,HG=qg.create,WG=vf.create,GG=_f.create,$G=fd.create,qG=hc.create,KG=ra.create,XG=Kg.create,YG=Ni.create,QG=In.create,ZG=In.strictCreate,JG=Ef.create,e$=gp.create,t$=bf.create,n$=xo.create,r$=Cf.create,s$=Xg.create,i$=Nc.create,o$=ku.create,a$=Af.create,l$=Tf.create,c$=xl.create,u$=If.create,d$=gd.create,LA=Li.create,h$=fo.create,f$=wl.create,g$=Li.createWithPreprocess,m$=m0.create,p$=()=>t8().optional(),y$=()=>n8().optional(),x$=()=>r8().optional(),w$={string:t=>Ci.create({...t,coerce:!0}),number:t=>pl.create({...t,coerce:!0}),boolean:t=>wf.create({...t,coerce:!0}),bigint:t=>yl.create({...t,coerce:!0}),date:t=>Sc.create({...t,coerce:!0})},v$=nt;var Na=Object.freeze({__proto__:null,defaultErrorMap:hd,setErrorMap:gG,getErrorMap:Wg,makeIssue:Gg,EMPTY_PATH:mG,addIssueToContext:Pe,ParseStatus:Hr,INVALID:nt,DIRTY:pu,OK:ns,isAborted:Cw,isDirty:Aw,isValid:Ic,isAsync:xf,get util(){return Pt},get objectUtil(){return bw},ZodParsedType:Me,getParsedType:jo,ZodType:gt,datetimeRegex:Z6,ZodString:Ci,ZodNumber:pl,ZodBigInt:yl,ZodBoolean:wf,ZodDate:Sc,ZodSymbol:qg,ZodUndefined:vf,ZodNull:_f,ZodAny:fd,ZodUnknown:hc,ZodNever:ra,ZodVoid:Kg,ZodArray:Ni,ZodObject:In,ZodUnion:Ef,ZodDiscriminatedUnion:gp,ZodIntersection:bf,ZodTuple:xo,ZodRecord:Cf,ZodMap:Xg,ZodSet:Nc,ZodFunction:ku,ZodLazy:Af,ZodLiteral:Tf,ZodEnum:xl,ZodNativeEnum:If,ZodPromise:gd,ZodEffects:Li,ZodTransformer:Li,ZodOptional:fo,ZodNullable:wl,ZodDefault:Sf,ZodCatch:Nf,ZodNaN:Yg,BRAND:FG,ZodBranded:R_,ZodPipeline:m0,ZodReadonly:Rf,custom:e8,Schema:gt,ZodSchema:gt,late:jG,get ZodFirstPartyTypeKind(){return tt},coerce:w$,any:$G,array:YG,bigint:UG,boolean:r8,date:zG,discriminatedUnion:e$,effect:LA,enum:c$,function:o$,instanceof:BG,intersection:t$,lazy:a$,literal:l$,map:s$,nan:VG,nativeEnum:u$,never:KG,null:GG,nullable:f$,number:n8,object:QG,oboolean:x$,onumber:y$,optional:h$,ostring:p$,pipeline:m$,preprocess:g$,promise:d$,record:r$,set:i$,strictObject:ZG,string:t8,symbol:HG,transformer:LA,tuple:n$,undefined:WG,union:JG,unknown:qG,void:XG,NEVER:v$,ZodIssueCode:_e,quotelessJson:fG,ZodError:Vs});const Wo=O.forwardRef(({className:t,type:e,...n},r)=>p.jsx("input",{type:e,className:mt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Wo.displayName="Input";var _$="Label",s8=O.forwardRef((t,e)=>p.jsx(jt.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));s8.displayName=_$;var i8=s8;const E$=Zf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o8=O.forwardRef(({className:t,...e},n)=>p.jsx(i8,{ref:n,className:mt(E$(),t),...e}));o8.displayName=i8.displayName;const a8=$W,l8=O.createContext({}),yu=({...t})=>p.jsx(l8.Provider,{value:{name:t.name},children:p.jsx(YW,{...t})}),mp=()=>{const t=O.useContext(l8),e=O.useContext(c8),{getFieldState:n,formState:r}=fp(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},c8=O.createContext({}),Zl=O.forwardRef(({className:t,...e},n)=>{const r=O.useId();return p.jsx(c8.Provider,{value:{id:r},children:p.jsx("div",{ref:n,className:mt("space-y-2",t),...e})})});Zl.displayName="FormItem";const Jl=O.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=mp();return p.jsx(o8,{ref:n,className:mt(r&&"text-destructive",t),htmlFor:s,...e})});Jl.displayName="FormLabel";const ec=O.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:i}=mp();return p.jsx(ZS,{ref:e,id:r,"aria-describedby":n?`${s} ${i}`:`${s}`,"aria-invalid":!!n,...t})});ec.displayName="FormControl";const b$=O.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=mp();return p.jsx("p",{ref:n,id:r,className:mt("text-sm text-muted-foreground",t),...e})});b$.displayName="FormDescription";const tc=O.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:i}=mp(),l=s?String((s==null?void 0:s.message)??""):e;return l?p.jsx("p",{ref:r,id:i,className:mt("text-sm font-medium text-destructive",t),...n,children:l}):null});tc.displayName="FormMessage";var C$="Separator",FA="horizontal",A$=["horizontal","vertical"],u8=O.forwardRef((t,e)=>{const{decorative:n,orientation:r=FA,...s}=t,i=T$(r)?r:FA,u=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return p.jsx(jt.div,{"data-orientation":i,...u,...s,ref:e})});u8.displayName=C$;function T$(t){return A$.includes(t)}var d8=u8;const md=O.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>p.jsx(d8,{ref:s,decorative:n,orientation:e,className:mt("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));md.displayName=d8.displayName;const I$=Na.object({email:Na.string().email({message:"נא להזין כתובת אימייל תקינה."}),password:Na.string().min(6,{message:"הסיסמה חייבת להכיל לפחות 6 תווים."})});function Po(){const{login:t,loginWithGoogle:e,loginWithFacebook:n}=yr(),[r,s]=O.useState(!1),i=G6({resolver:q6(I$),defaultValues:{email:"",password:""}}),l=async f=>{s(!0);try{await t(f.email,f.password),console.log("Login successful, redirecting to home")}catch(m){console.error("Login failed",m)}finally{s(!1)}},u=async()=>{s(!0);try{await n()}catch(f){console.error("Facebook login failed",f)}finally{s(!1)}};return p.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:p.jsxs(on,{className:"w-full max-w-md",children:[p.jsxs(cp,{className:"space-y-1",children:[p.jsx(up,{className:"text-2xl font-bold text-center",children:"התחברות ל-ShareIt"}),p.jsx(b_,{className:"text-center",children:"הזן את האימייל והסיסמה שלך כדי להתחבר לחשבונך"})]}),p.jsxs(qn,{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("div",{className:"flex flex-col gap-2 mb-4",children:p.jsxs("div",{className:"group relative",children:[p.jsxs(ze,{variant:"outline",className:"w-full flex items-center justify-center cursor-not-allowed opacity-70",disabled:!0,title:"יתווסף בעתיד",children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:[p.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),p.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),p.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),p.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]}),p.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-white text-gray-800 text-sm rounded-lg p-2 border border-gray-200 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none whitespace-nowrap z-50",children:"יתווסף בעתיד"})]})}),p.jsxs(ze,{variant:"outline",className:"w-full",onClick:u,disabled:r,title:"התחבר דרך פייסבוק",children:[p.jsx(A3,{className:"h-5 w-5 mr-2 text-blue-600"}),"Facebook"]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(md,{className:"flex-1"}),p.jsx("span",{className:"px-2 text-muted-foreground text-sm",children:"או"}),p.jsx(md,{className:"flex-1"})]}),p.jsx(a8,{...i,children:p.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[p.jsx(yu,{control:i.control,name:"email",render:({field:f})=>p.jsxs(Zl,{children:[p.jsx(Jl,{children:"אימייל"}),p.jsx(ec,{children:p.jsx(Wo,{placeholder:"האימייל שלך",type:"email",...f,disabled:r,className:"text-right"})}),p.jsx(tc,{})]})}),p.jsx(yu,{control:i.control,name:"password",render:({field:f})=>p.jsxs(Zl,{children:[p.jsx(Jl,{children:"סיסמה"}),p.jsx(ec,{children:p.jsx(Wo,{placeholder:"הסיסמה שלך",type:"password",...f,disabled:r,className:"text-right"})}),p.jsx(tc,{})]})}),p.jsx(ze,{type:"submit",className:"w-full",disabled:r,children:r?"מתחבר...":"התחבר עם אימייל"})]})})]}),p.jsx(C_,{className:"flex flex-col space-y-2",children:p.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["אין לך חשבון?"," ",p.jsx(sn,{href:"/register",className:"text-primary-600 hover:underline",children:"הרשם"})]})})]})})}const S$=Na.object({displayName:Na.string().min(2,{message:"שם חייב להכיל לפחות 2 תווים."}),email:Na.string().email({message:"נא להזין כתובת אימייל תקינה."}),password:Na.string().min(6,{message:"הסיסמה חייבת להכיל לפחות 6 תווים."}),confirmPassword:Na.string()}).refine(t=>t.password===t.confirmPassword,{message:"הסיסמאות אינן תואמות",path:["confirmPassword"]});function N$(){const{register:t,loginWithGoogle:e,loginWithFacebook:n}=yr(),[r,s]=O.useState(!1),i=G6({resolver:q6(S$),defaultValues:{displayName:"",email:"",password:"",confirmPassword:""}}),l=async f=>{s(!0);try{await t(f.email,f.password,f.displayName)}catch(m){console.error("Registration failed",m)}finally{s(!1)}},u=async()=>{s(!0);try{await n()}catch(f){console.error("Facebook login failed",f)}finally{s(!1)}};return p.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:p.jsxs(on,{className:"w-full max-w-md",children:[p.jsxs(cp,{className:"space-y-1",children:[p.jsx(up,{className:"text-2xl font-bold text-center",children:"יצירת חשבון"}),p.jsx(b_,{className:"text-center",children:"הזן את הפרטים שלך כדי ליצור חשבון ב-ShareIt"})]}),p.jsxs(qn,{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("div",{className:"flex flex-col gap-2 mb-4",children:p.jsxs("div",{className:"group relative",children:[p.jsxs(ze,{variant:"outline",className:"w-full flex items-center justify-center cursor-not-allowed opacity-70",disabled:!0,title:"יתווסף בעתיד",children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:[p.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),p.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),p.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),p.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]}),p.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-white text-gray-800 text-sm rounded-lg p-2 border border-gray-200 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none whitespace-nowrap z-50",children:"יתווסף בעתיד"})]})}),p.jsxs(ze,{variant:"outline",className:"w-full",onClick:u,disabled:r,children:[p.jsx(A3,{className:"h-5 w-5 mr-2 text-blue-600"}),"Facebook"]})]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx(md,{className:"w-full"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"או המשך עם"})})]}),p.jsx(a8,{...i,children:p.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[p.jsx(yu,{control:i.control,name:"displayName",render:({field:f})=>p.jsxs(Zl,{children:[p.jsx(Jl,{children:"שם מלא"}),p.jsx(ec,{children:p.jsx(Wo,{placeholder:"הזן את שמך המלא",...f})}),p.jsx(tc,{})]})}),p.jsx(yu,{control:i.control,name:"email",render:({field:f})=>p.jsxs(Zl,{children:[p.jsx(Jl,{children:"אימייל"}),p.jsx(ec,{children:p.jsx(Wo,{type:"email",placeholder:"הזן כתובת אימייל",...f})}),p.jsx(tc,{})]})}),p.jsx(yu,{control:i.control,name:"password",render:({field:f})=>p.jsxs(Zl,{children:[p.jsx(Jl,{children:"סיסמה"}),p.jsx(ec,{children:p.jsx(Wo,{type:"password",placeholder:"הזן סיסמה",...f})}),p.jsx(tc,{})]})}),p.jsx(yu,{control:i.control,name:"confirmPassword",render:({field:f})=>p.jsxs(Zl,{children:[p.jsx(Jl,{children:"אימות סיסמה"}),p.jsx(ec,{children:p.jsx(Wo,{type:"password",placeholder:"הזן שוב את הסיסמה",...f})}),p.jsx(tc,{})]})}),p.jsx(ze,{type:"submit",className:"w-full",disabled:r,children:r?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-r-transparent mr-2"}),"יוצר חשבון..."]}):p.jsxs(p.Fragment,{children:[p.jsx(ef,{className:"h-4 w-4 mr-2"}),"צור חשבון"]})})]})})]}),p.jsx(C_,{children:p.jsxs("p",{className:"text-center text-sm text-muted-foreground w-full",children:["כבר יש לך חשבון?"," ",p.jsx(sn,{href:"/login",className:"underline underline-offset-4 hover:text-primary",children:"התחבר כאן"})]})})]})})}var p0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Rc=typeof window>"u"||"Deno"in globalThis;function Js(){}function R$(t,e){return typeof t=="function"?t(e):t}function Iw(t){return typeof t=="number"&&t>=0&&t!==1/0}function h8(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Pu(t,e){return typeof t=="function"?t(e):t}function vi(t,e){return typeof t=="function"?t(e):t}function jA(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==k_(l,e.options))return!1}else if(!Pf(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||i&&!i(e))}function BA(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(kf(e.options.mutationKey)!==kf(i))return!1}else if(!Pf(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function k_(t,e){return((e==null?void 0:e.queryKeyHashFn)||kf)(t)}function kf(t){return JSON.stringify(t,(e,n)=>Nw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Pf(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Pf(t[n],e[n])):!1}function f8(t,e){if(t===e)return t;const n=VA(t)&&VA(e);if(n||Nw(t)&&Nw(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),l=i.length,u=n?[]:{};let f=0;for(let m=0;m<l;m++){const w=n?m:i[m];(!n&&r.includes(w)||n)&&t[w]===void 0&&e[w]===void 0?(u[w]=void 0,f++):(u[w]=f8(t[w],e[w]),u[w]===t[w]&&t[w]!==void 0&&f++)}return s===l&&f===s?t:u}return e}function Sw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function VA(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Nw(t){if(!UA(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!UA(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function UA(t){return Object.prototype.toString.call(t)==="[object Object]"}function k$(t){return new Promise(e=>{setTimeout(e,t)})}function Rw(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?f8(t,e):e}function P$(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function O$(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var P_=Symbol();function g8(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===P_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var nc,Ra,Du,xT,D$=(xT=class extends p0{constructor(){super();rt(this,nc);rt(this,Ra);rt(this,Du);Ue(this,Du,e=>{if(!Rc&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){te(this,Ra)||this.setEventListener(te(this,Du))}onUnsubscribe(){var e;this.hasListeners()||((e=te(this,Ra))==null||e.call(this),Ue(this,Ra,void 0))}setEventListener(e){var n;Ue(this,Du,e),(n=te(this,Ra))==null||n.call(this),Ue(this,Ra,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){te(this,nc)!==e&&(Ue(this,nc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof te(this,nc)=="boolean"?te(this,nc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},nc=new WeakMap,Ra=new WeakMap,Du=new WeakMap,xT),O_=new D$,Mu,ka,Lu,wT,M$=(wT=class extends p0{constructor(){super();rt(this,Mu,!0);rt(this,ka);rt(this,Lu);Ue(this,Lu,e=>{if(!Rc&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){te(this,ka)||this.setEventListener(te(this,Lu))}onUnsubscribe(){var e;this.hasListeners()||((e=te(this,ka))==null||e.call(this),Ue(this,ka,void 0))}setEventListener(e){var n;Ue(this,Lu,e),(n=te(this,ka))==null||n.call(this),Ue(this,ka,e(this.setOnline.bind(this)))}setOnline(e){te(this,Mu)!==e&&(Ue(this,Mu,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return te(this,Mu)}},Mu=new WeakMap,ka=new WeakMap,Lu=new WeakMap,wT),Qg=new M$;function kw(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function L$(t){return Math.min(1e3*2**t,3e4)}function m8(t){return(t??"online")==="online"?Qg.isOnline():!0}var p8=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ny(t){return t instanceof p8}function y8(t){let e=!1,n=0,r=!1,s;const i=kw(),l=C=>{var k;r||(E(new p8(C)),(k=t.abort)==null||k.call(t))},u=()=>{e=!0},f=()=>{e=!1},m=()=>O_.isFocused()&&(t.networkMode==="always"||Qg.isOnline())&&t.canRun(),w=()=>m8(t.networkMode)&&t.canRun(),v=C=>{var k;r||(r=!0,(k=t.onSuccess)==null||k.call(t,C),s==null||s(),i.resolve(C))},E=C=>{var k;r||(r=!0,(k=t.onError)==null||k.call(t,C),s==null||s(),i.reject(C))},I=()=>new Promise(C=>{var k;s=N=>{(r||m())&&C(N)},(k=t.onPause)==null||k.call(t)}).then(()=>{var C;s=void 0,r||(C=t.onContinue)==null||C.call(t)}),P=()=>{if(r)return;let C;const k=n===0?t.initialPromise:void 0;try{C=k??t.fn()}catch(N){C=Promise.reject(N)}Promise.resolve(C).then(v).catch(N=>{var Y;if(r)return;const T=t.retry??(Rc?0:3),S=t.retryDelay??L$,V=typeof S=="function"?S(n,N):S,$=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,N);if(e||!$){E(N);return}n++,(Y=t.onFail)==null||Y.call(t,n,N),k$(V).then(()=>m()?void 0:I()).then(()=>{e?E(N):P()})})};return{promise:i,cancel:l,continue:()=>(s==null||s(),i),cancelRetry:u,continueRetry:f,canStart:w,start:()=>(w()?P():I().then(P),i)}}function F$(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=u=>setTimeout(u,0);const i=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(f=>{n(f)})})})};return{batch:u=>{let f;e++;try{f=u()}finally{e--,e||l()}return f},batchCalls:u=>(...f)=>{i(()=>{u(...f)})},schedule:i,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Cr=F$(),rc,vT,x8=(vT=class{constructor(){rt(this,rc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Iw(this.gcTime)&&Ue(this,rc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Rc?1/0:5*60*1e3))}clearGcTimeout(){te(this,rc)&&(clearTimeout(te(this,rc)),Ue(this,rc,void 0))}},rc=new WeakMap,vT),Fu,ju,Zs,Mr,Vf,sc,yi,Do,_T,j$=(_T=class extends x8{constructor(e){super();rt(this,yi);rt(this,Fu);rt(this,ju);rt(this,Zs);rt(this,Mr);rt(this,Vf);rt(this,sc);Ue(this,sc,!1),Ue(this,Vf,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ue(this,Zs,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ue(this,Fu,B$(this.options)),this.state=e.state??te(this,Fu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=te(this,Mr))==null?void 0:e.promise}setOptions(e){this.options={...te(this,Vf),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&te(this,Zs).remove(this)}setData(e,n){const r=Rw(this.state.data,e,this.options);return It(this,yi,Do).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){It(this,yi,Do).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=te(this,Mr))==null?void 0:r.promise;return(s=te(this,Mr))==null||s.cancel(e),n?n.then(Js).catch(Js):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(te(this,Fu))}isActive(){return this.observers.some(e=>vi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===P_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!h8(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=te(this,Mr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=te(this,Mr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),te(this,Zs).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(te(this,Mr)&&(te(this,sc)?te(this,Mr).cancel({revert:!0}):te(this,Mr).cancelRetry()),this.scheduleGc()),te(this,Zs).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||It(this,yi,Do).call(this,{type:"invalidate"})}fetch(e,n){var f,m,w;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(te(this,Mr))return te(this,Mr).continueRetry(),te(this,Mr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(E=>E.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(Ue(this,sc,!0),r.signal)})},i=()=>{const v=g8(this.options,n),E={queryKey:this.queryKey,meta:this.meta};return s(E),Ue(this,sc,!1),this.options.persister?this.options.persister(v,E,this):v(E)},l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(l),(f=this.options.behavior)==null||f.onFetch(l,this),Ue(this,ju,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=l.fetchOptions)==null?void 0:m.meta))&&It(this,yi,Do).call(this,{type:"fetch",meta:(w=l.fetchOptions)==null?void 0:w.meta});const u=v=>{var E,I,P,C;Ny(v)&&v.silent||It(this,yi,Do).call(this,{type:"error",error:v}),Ny(v)||((I=(E=te(this,Zs).config).onError)==null||I.call(E,v,this),(C=(P=te(this,Zs).config).onSettled)==null||C.call(P,this.state.data,v,this)),this.scheduleGc()};return Ue(this,Mr,y8({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:v=>{var E,I,P,C;if(v===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(k){u(k);return}(I=(E=te(this,Zs).config).onSuccess)==null||I.call(E,v,this),(C=(P=te(this,Zs).config).onSettled)==null||C.call(P,v,this.state.error,this),this.scheduleGc()},onError:u,onFail:(v,E)=>{It(this,yi,Do).call(this,{type:"failed",failureCount:v,error:E})},onPause:()=>{It(this,yi,Do).call(this,{type:"pause"})},onContinue:()=>{It(this,yi,Do).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),te(this,Mr).start()}},Fu=new WeakMap,ju=new WeakMap,Zs=new WeakMap,Mr=new WeakMap,Vf=new WeakMap,sc=new WeakMap,yi=new WeakSet,Do=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...w8(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Ny(s)&&s.revert&&te(this,ju)?{...te(this,ju),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Cr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),te(this,Zs).notify({query:this,type:"updated",action:e})})},_T);function w8(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:m8(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function B$(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ki,ET,V$=(ET=class extends p0{constructor(e={}){super();rt(this,Ki);this.config=e,Ue(this,Ki,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??k_(s,n);let l=this.get(i);return l||(l=new j$({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){te(this,Ki).has(e.queryHash)||(te(this,Ki).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=te(this,Ki).get(e.queryHash);n&&(e.destroy(),n===e&&te(this,Ki).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Cr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return te(this,Ki).get(e)}getAll(){return[...te(this,Ki).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>jA(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>jA(e,r)):n}notify(e){Cr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Cr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Cr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ki=new WeakMap,ET),Xi,Kr,ic,Yi,wa,bT,U$=(bT=class extends x8{constructor(e){super();rt(this,Yi);rt(this,Xi);rt(this,Kr);rt(this,ic);this.mutationId=e.mutationId,Ue(this,Kr,e.mutationCache),Ue(this,Xi,[]),this.state=e.state||z$(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){te(this,Xi).includes(e)||(te(this,Xi).push(e),this.clearGcTimeout(),te(this,Kr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ue(this,Xi,te(this,Xi).filter(n=>n!==e)),this.scheduleGc(),te(this,Kr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){te(this,Xi).length||(this.state.status==="pending"?this.scheduleGc():te(this,Kr).remove(this))}continue(){var e;return((e=te(this,ic))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,l,u,f,m,w,v,E,I,P,C,k,N,T,S,V,$,Y,M;Ue(this,ic,y8({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(j,L)=>{It(this,Yi,wa).call(this,{type:"failed",failureCount:j,error:L})},onPause:()=>{It(this,Yi,wa).call(this,{type:"pause"})},onContinue:()=>{It(this,Yi,wa).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>te(this,Kr).canRun(this)}));const n=this.state.status==="pending",r=!te(this,ic).canStart();try{if(!n){It(this,Yi,wa).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(s=te(this,Kr).config).onMutate)==null?void 0:i.call(s,e,this));const L=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,e));L!==this.state.context&&It(this,Yi,wa).call(this,{type:"pending",context:L,variables:e,isPaused:r})}const j=await te(this,ic).start();return await((m=(f=te(this,Kr).config).onSuccess)==null?void 0:m.call(f,j,e,this.state.context,this)),await((v=(w=this.options).onSuccess)==null?void 0:v.call(w,j,e,this.state.context)),await((I=(E=te(this,Kr).config).onSettled)==null?void 0:I.call(E,j,null,this.state.variables,this.state.context,this)),await((C=(P=this.options).onSettled)==null?void 0:C.call(P,j,null,e,this.state.context)),It(this,Yi,wa).call(this,{type:"success",data:j}),j}catch(j){try{throw await((N=(k=te(this,Kr).config).onError)==null?void 0:N.call(k,j,e,this.state.context,this)),await((S=(T=this.options).onError)==null?void 0:S.call(T,j,e,this.state.context)),await(($=(V=te(this,Kr).config).onSettled)==null?void 0:$.call(V,void 0,j,this.state.variables,this.state.context,this)),await((M=(Y=this.options).onSettled)==null?void 0:M.call(Y,void 0,j,e,this.state.context)),j}finally{It(this,Yi,wa).call(this,{type:"error",error:j})}}finally{te(this,Kr).runNext(this)}}},Xi=new WeakMap,Kr=new WeakMap,ic=new WeakMap,Yi=new WeakSet,wa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Cr.batch(()=>{te(this,Xi).forEach(r=>{r.onMutationUpdate(e)}),te(this,Kr).notify({mutation:this,type:"updated",action:e})})},bT);function z$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Rs,Uf,CT,H$=(CT=class extends p0{constructor(e={}){super();rt(this,Rs);rt(this,Uf);this.config=e,Ue(this,Rs,new Map),Ue(this,Uf,Date.now())}build(e,n,r){const s=new U$({mutationCache:this,mutationId:++O0(this,Uf)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=l1(e),r=te(this,Rs).get(n)??[];r.push(e),te(this,Rs).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=l1(e);if(te(this,Rs).has(n)){const s=(r=te(this,Rs).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?te(this,Rs).delete(n):te(this,Rs).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=te(this,Rs).get(l1(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=te(this,Rs).get(l1(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Cr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...te(this,Rs).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>BA(n,r))}findAll(e={}){return this.getAll().filter(n=>BA(e,n))}notify(e){Cr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Cr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Js))))}},Rs=new WeakMap,Uf=new WeakMap,CT);function l1(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function zA(t){return{onFetch:(e,n)=>{var w,v,E,I,P;const r=e.options,s=(E=(v=(w=e.fetchOptions)==null?void 0:w.meta)==null?void 0:v.fetchMore)==null?void 0:E.direction,i=((I=e.state.data)==null?void 0:I.pages)||[],l=((P=e.state.data)==null?void 0:P.pageParams)||[];let u={pages:[],pageParams:[]},f=0;const m=async()=>{let C=!1;const k=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?C=!0:e.signal.addEventListener("abort",()=>{C=!0}),e.signal)})},N=g8(e.options,e.fetchOptions),T=async(S,V,$)=>{if(C)return Promise.reject();if(V==null&&S.pages.length)return Promise.resolve(S);const Y={queryKey:e.queryKey,pageParam:V,direction:$?"backward":"forward",meta:e.options.meta};k(Y);const M=await N(Y),{maxPages:j}=e.options,L=$?O$:P$;return{pages:L(S.pages,M,j),pageParams:L(S.pageParams,V,j)}};if(s&&i.length){const S=s==="backward",V=S?W$:HA,$={pages:i,pageParams:l},Y=V(r,$);u=await T($,Y,S)}else{const S=t??i.length;do{const V=f===0?l[0]??r.initialPageParam:HA(r,u);if(f>0&&V==null)break;u=await T(u,V),f++}while(f<S)}return u};e.options.persister?e.fetchFn=()=>{var C,k;return(k=(C=e.options).persister)==null?void 0:k.call(C,m,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=m}}}function HA(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function W$(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Dn,Pa,Oa,Bu,Vu,Da,Uu,zu,AT,G$=(AT=class{constructor(t={}){rt(this,Dn);rt(this,Pa);rt(this,Oa);rt(this,Bu);rt(this,Vu);rt(this,Da);rt(this,Uu);rt(this,zu);Ue(this,Dn,t.queryCache||new V$),Ue(this,Pa,t.mutationCache||new H$),Ue(this,Oa,t.defaultOptions||{}),Ue(this,Bu,new Map),Ue(this,Vu,new Map),Ue(this,Da,0)}mount(){O0(this,Da)._++,te(this,Da)===1&&(Ue(this,Uu,O_.subscribe(async t=>{t&&(await this.resumePausedMutations(),te(this,Dn).onFocus())})),Ue(this,zu,Qg.subscribe(async t=>{t&&(await this.resumePausedMutations(),te(this,Dn).onOnline())})))}unmount(){var t,e;O0(this,Da)._--,te(this,Da)===0&&((t=te(this,Uu))==null||t.call(this),Ue(this,Uu,void 0),(e=te(this,zu))==null||e.call(this),Ue(this,zu,void 0))}isFetching(t){return te(this,Dn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return te(this,Pa).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=te(this,Dn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=te(this,Dn).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Pu(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return te(this,Dn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=te(this,Dn).get(r.queryHash),i=s==null?void 0:s.state.data,l=R$(e,i);if(l!==void 0)return te(this,Dn).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Cr.batch(()=>te(this,Dn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=te(this,Dn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=te(this,Dn);Cr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=te(this,Dn),r={type:"active",...t};return Cr.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Cr.batch(()=>te(this,Dn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Js).catch(Js)}invalidateQueries(t={},e={}){return Cr.batch(()=>{if(te(this,Dn).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Cr.batch(()=>te(this,Dn).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Js)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Js)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=te(this,Dn).build(this,e);return n.isStaleByTime(Pu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Js).catch(Js)}fetchInfiniteQuery(t){return t.behavior=zA(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Js).catch(Js)}ensureInfiniteQueryData(t){return t.behavior=zA(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Qg.isOnline()?te(this,Pa).resumePausedMutations():Promise.resolve()}getQueryCache(){return te(this,Dn)}getMutationCache(){return te(this,Pa)}getDefaultOptions(){return te(this,Oa)}setDefaultOptions(t){Ue(this,Oa,t)}setQueryDefaults(t,e){te(this,Bu).set(kf(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...te(this,Bu).values()];let n={};return e.forEach(r=>{Pf(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){te(this,Vu).set(kf(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...te(this,Vu).values()];let n={};return e.forEach(r=>{Pf(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...te(this,Oa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=k_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===P_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...te(this,Oa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){te(this,Dn).clear(),te(this,Pa).clear()}},Dn=new WeakMap,Pa=new WeakMap,Oa=new WeakMap,Bu=new WeakMap,Vu=new WeakMap,Da=new WeakMap,Uu=new WeakMap,zu=new WeakMap,AT),fs,St,zf,Xr,oc,Hu,Ma,Qi,Hf,Wu,Gu,ac,lc,La,$u,Ht,gh,Pw,Ow,Dw,Mw,Lw,Fw,jw,v8,TT,$$=(TT=class extends p0{constructor(e,n){super();rt(this,Ht);rt(this,fs);rt(this,St);rt(this,zf);rt(this,Xr);rt(this,oc);rt(this,Hu);rt(this,Ma);rt(this,Qi);rt(this,Hf);rt(this,Wu);rt(this,Gu);rt(this,ac);rt(this,lc);rt(this,La);rt(this,$u,new Set);this.options=n,Ue(this,fs,e),Ue(this,Qi,null),Ue(this,Ma,kw()),this.options.experimental_prefetchInRender||te(this,Ma).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(te(this,St).addObserver(this),WA(te(this,St),this.options)?It(this,Ht,gh).call(this):this.updateResult(),It(this,Ht,Mw).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Bw(te(this,St),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Bw(te(this,St),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,It(this,Ht,Lw).call(this),It(this,Ht,Fw).call(this),te(this,St).removeObserver(this)}setOptions(e,n){const r=this.options,s=te(this,St);if(this.options=te(this,fs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof vi(this.options.enabled,te(this,St))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");It(this,Ht,jw).call(this),te(this,St).setOptions(this.options),r._defaulted&&!Sw(this.options,r)&&te(this,fs).getQueryCache().notify({type:"observerOptionsUpdated",query:te(this,St),observer:this});const i=this.hasListeners();i&&GA(te(this,St),s,this.options,r)&&It(this,Ht,gh).call(this),this.updateResult(n),i&&(te(this,St)!==s||vi(this.options.enabled,te(this,St))!==vi(r.enabled,te(this,St))||Pu(this.options.staleTime,te(this,St))!==Pu(r.staleTime,te(this,St)))&&It(this,Ht,Pw).call(this);const l=It(this,Ht,Ow).call(this);i&&(te(this,St)!==s||vi(this.options.enabled,te(this,St))!==vi(r.enabled,te(this,St))||l!==te(this,La))&&It(this,Ht,Dw).call(this,l)}getOptimisticResult(e){const n=te(this,fs).getQueryCache().build(te(this,fs),e),r=this.createResult(n,e);return K$(this,r)&&(Ue(this,Xr,r),Ue(this,Hu,this.options),Ue(this,oc,te(this,St).state)),r}getCurrentResult(){return te(this,Xr)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){te(this,$u).add(e)}getCurrentQuery(){return te(this,St)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=te(this,fs).defaultQueryOptions(e),r=te(this,fs).getQueryCache().build(te(this,fs),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return It(this,Ht,gh).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),te(this,Xr)))}createResult(e,n){var j;const r=te(this,St),s=this.options,i=te(this,Xr),l=te(this,oc),u=te(this,Hu),m=e!==r?e.state:te(this,zf),{state:w}=e;let v={...w},E=!1,I;if(n._optimisticResults){const L=this.hasListeners(),G=!L&&WA(e,n),X=L&&GA(e,r,n,s);(G||X)&&(v={...v,...w8(w.data,e.options)}),n._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:P,errorUpdatedAt:C,status:k}=v;if(n.select&&v.data!==void 0)if(i&&v.data===(l==null?void 0:l.data)&&n.select===te(this,Hf))I=te(this,Wu);else try{Ue(this,Hf,n.select),I=n.select(v.data),I=Rw(i==null?void 0:i.data,I,n),Ue(this,Wu,I),Ue(this,Qi,null)}catch(L){Ue(this,Qi,L)}else I=v.data;if(n.placeholderData!==void 0&&I===void 0&&k==="pending"){let L;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData))L=i.data;else if(L=typeof n.placeholderData=="function"?n.placeholderData((j=te(this,Gu))==null?void 0:j.state.data,te(this,Gu)):n.placeholderData,n.select&&L!==void 0)try{L=n.select(L),Ue(this,Qi,null)}catch(G){Ue(this,Qi,G)}L!==void 0&&(k="success",I=Rw(i==null?void 0:i.data,L,n),E=!0)}te(this,Qi)&&(P=te(this,Qi),I=te(this,Wu),C=Date.now(),k="error");const N=v.fetchStatus==="fetching",T=k==="pending",S=k==="error",V=T&&N,$=I!==void 0,M={status:k,fetchStatus:v.fetchStatus,isPending:T,isSuccess:k==="success",isError:S,isInitialLoading:V,isLoading:V,data:I,dataUpdatedAt:v.dataUpdatedAt,error:P,errorUpdatedAt:C,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>m.dataUpdateCount||v.errorUpdateCount>m.errorUpdateCount,isFetching:N,isRefetching:N&&!T,isLoadingError:S&&!$,isPaused:v.fetchStatus==="paused",isPlaceholderData:E,isRefetchError:S&&$,isStale:D_(e,n),refetch:this.refetch,promise:te(this,Ma)};if(this.options.experimental_prefetchInRender){const L=H=>{M.status==="error"?H.reject(M.error):M.data!==void 0&&H.resolve(M.data)},G=()=>{const H=Ue(this,Ma,M.promise=kw());L(H)},X=te(this,Ma);switch(X.status){case"pending":e.queryHash===r.queryHash&&L(X);break;case"fulfilled":(M.status==="error"||M.data!==X.value)&&G();break;case"rejected":(M.status!=="error"||M.error!==X.reason)&&G();break}}return M}updateResult(e){const n=te(this,Xr),r=this.createResult(te(this,St),this.options);if(Ue(this,oc,te(this,St).state),Ue(this,Hu,this.options),te(this,oc).data!==void 0&&Ue(this,Gu,te(this,St)),Sw(r,n))return;Ue(this,Xr,r);const s={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:l}=this.options,u=typeof l=="function"?l():l;if(u==="all"||!u&&!te(this,$u).size)return!0;const f=new Set(u??te(this,$u));return this.options.throwOnError&&f.add("error"),Object.keys(te(this,Xr)).some(m=>{const w=m;return te(this,Xr)[w]!==n[w]&&f.has(w)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),It(this,Ht,v8).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&It(this,Ht,Mw).call(this)}},fs=new WeakMap,St=new WeakMap,zf=new WeakMap,Xr=new WeakMap,oc=new WeakMap,Hu=new WeakMap,Ma=new WeakMap,Qi=new WeakMap,Hf=new WeakMap,Wu=new WeakMap,Gu=new WeakMap,ac=new WeakMap,lc=new WeakMap,La=new WeakMap,$u=new WeakMap,Ht=new WeakSet,gh=function(e){It(this,Ht,jw).call(this);let n=te(this,St).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Js)),n},Pw=function(){It(this,Ht,Lw).call(this);const e=Pu(this.options.staleTime,te(this,St));if(Rc||te(this,Xr).isStale||!Iw(e))return;const r=h8(te(this,Xr).dataUpdatedAt,e)+1;Ue(this,ac,setTimeout(()=>{te(this,Xr).isStale||this.updateResult()},r))},Ow=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(te(this,St)):this.options.refetchInterval)??!1},Dw=function(e){It(this,Ht,Fw).call(this),Ue(this,La,e),!(Rc||vi(this.options.enabled,te(this,St))===!1||!Iw(te(this,La))||te(this,La)===0)&&Ue(this,lc,setInterval(()=>{(this.options.refetchIntervalInBackground||O_.isFocused())&&It(this,Ht,gh).call(this)},te(this,La)))},Mw=function(){It(this,Ht,Pw).call(this),It(this,Ht,Dw).call(this,It(this,Ht,Ow).call(this))},Lw=function(){te(this,ac)&&(clearTimeout(te(this,ac)),Ue(this,ac,void 0))},Fw=function(){te(this,lc)&&(clearInterval(te(this,lc)),Ue(this,lc,void 0))},jw=function(){const e=te(this,fs).getQueryCache().build(te(this,fs),this.options);if(e===te(this,St))return;const n=te(this,St);Ue(this,St,e),Ue(this,zf,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},v8=function(e){Cr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(te(this,Xr))}),te(this,fs).getQueryCache().notify({query:te(this,St),type:"observerResultsUpdated"})})},TT);function q$(t,e){return vi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function WA(t,e){return q$(t,e)||t.state.data!==void 0&&Bw(t,e,e.refetchOnMount)}function Bw(t,e,n){if(vi(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&D_(t,e)}return!1}function GA(t,e,n,r){return(t!==e||vi(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&D_(t,n)}function D_(t,e){return vi(e.enabled,t)!==!1&&t.isStaleByTime(Pu(e.staleTime,t))}function K$(t,e){return!Sw(t.getCurrentResult(),e)}var _8=O.createContext(void 0),X$=t=>{const e=O.useContext(_8);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Y$=({client:t,children:e})=>(O.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(_8.Provider,{value:t,children:e})),E8=O.createContext(!1),Q$=()=>O.useContext(E8);E8.Provider;function Z$(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var J$=O.createContext(Z$()),eq=()=>O.useContext(J$);function tq(t,e){return typeof t=="function"?t(...e):!!t}function $A(){}var nq=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},rq=t=>{O.useEffect(()=>{t.clearReset()},[t])},sq=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&tq(n,[t.error,r]),iq=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},oq=(t,e)=>t.isLoading&&t.isFetching&&!e,aq=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,qA=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function lq(t,e,n){var w,v,E,I,P;const r=X$(),s=Q$(),i=eq(),l=r.defaultQueryOptions(t);(v=(w=r.getDefaultOptions().queries)==null?void 0:w._experimental_beforeQuery)==null||v.call(w,l),l._optimisticResults=s?"isRestoring":"optimistic",iq(l),nq(l,i),rq(i);const u=!r.getQueryCache().get(l.queryHash),[f]=O.useState(()=>new e(r,l)),m=f.getOptimisticResult(l);if(O.useSyncExternalStore(O.useCallback(C=>{const k=s?$A:f.subscribe(Cr.batchCalls(C));return f.updateResult(),k},[f,s]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),O.useEffect(()=>{f.setOptions(l,{listeners:!1})},[l,f]),aq(l,m))throw qA(l,f,i);if(sq({result:m,errorResetBoundary:i,throwOnError:l.throwOnError,query:r.getQueryCache().get(l.queryHash)}))throw m.error;if((I=(E=r.getDefaultOptions().queries)==null?void 0:E._experimental_afterQuery)==null||I.call(E,l,m),l.experimental_prefetchInRender&&!Rc&&oq(m,s)){const C=u?qA(l,f,i):(P=r.getQueryCache().get(l.queryHash))==null?void 0:P.promise;C==null||C.catch($A).finally(()=>{f.updateResult()})}return l.notifyOnChangeProps?m:f.trackResult(m)}function cq(t,e){return lq(t,$$)}function uq(){const{data:t,isLoading:e,error:n}=cq({queryKey:["businesses"],queryFn:async()=>{try{const r=await TW();if(r&&r.length>0)return r;throw new Error("No businesses found")}catch(r){throw console.error("Error fetching businesses:",r),r}},staleTime:3e5});return{businesses:t,isLoading:e,error:n}}function dq({business:t}){return p.jsxs(on,{className:"overflow-hidden",style:{direction:"rtl"},children:[p.jsx("div",{className:"relative h-48 flex justify-end",children:p.jsx("img",{src:t.logoUrl||t.image||"https://placehold.co/600x400?text=No+Image",alt:t.name,className:"w-full h-full object-cover rounded-t-lg"})}),p.jsxs(qn,{className:"p-4 text-right",style:{direction:"rtl"},children:[p.jsxs("div",{className:"mb-3",children:[p.jsx("h3",{className:"text-xl font-bold text-right w-full",children:t.name}),p.jsxs("div",{className:"flex flex-row-reverse items-center justify-end gap-2 mb-1",children:[t.rating&&p.jsx("span",{className:"flex flex-row-reverse items-center justify-end gap-1",children:Array.from({length:5}).map((e,n)=>p.jsx("span",{className:n<t.rating?"text-yellow-400":"text-gray-300",children:"★"},n))}),p.jsx("span",{className:"text-sm text-gray-500 text-right",children:t.category})]})]}),p.jsx("p",{className:"text-sm mb-4 text-left",style:{direction:"rtl",textAlign:"left"},children:t.description}),p.jsxs("div",{className:"space-y-2 text-sm text-right",children:[p.jsxs("div",{className:"flex flex-row-reverse items-center justify-end",children:[p.jsx("span",{children:t.address}),p.jsx(e2,{className:"h-4 w-4 ml-2 text-gray-500"})]}),p.jsxs("div",{className:"flex flex-row-reverse items-center justify-end",children:[p.jsx("span",{children:t.phone}),p.jsx(S3,{className:"h-4 w-4 ml-2 text-gray-500"})]}),p.jsxs("div",{className:"flex flex-row-reverse items-center justify-end",children:[p.jsx("span",{children:t.email}),p.jsx(I3,{className:"h-4 w-4 ml-2 text-gray-500"})]})]}),p.jsxs("div",{className:"flex flex-row-reverse justify-end gap-2 mt-4",children:[p.jsx(sn,{href:`/business/${t.id}`,children:p.jsx(ze,{variant:"default",size:"sm",children:"צפייה בפרטים"})}),p.jsxs(sf,{children:[p.jsx(of,{asChild:!0,children:p.jsx(ze,{variant:"outline",size:"sm",children:"אהבתי"})}),p.jsx(rd,{side:"top",children:"יתווסף בעתיד"})]}),p.jsxs(sf,{children:[p.jsx(of,{asChild:!0,children:p.jsx(ze,{variant:"outline",size:"sm",children:"שיתוף"})}),p.jsx(rd,{side:"top",children:"יתווסף בעתיד"})]})]})]})]})}const hq=["מסעדה","בית קפה","שירותים מקצועיים","בריאות","חינוך","קמעונאות","טכנולוגיה","אחר"];function fq(){yr();const{businesses:t,isLoading:e}=uq(),[n,r]=O.useState(""),[s,i]=O.useState(""),[l,u]=O.useState(!1),m=(t||[]).filter(w=>{const v=n?w.name.toLowerCase().includes(n.toLowerCase())||w.description.toLowerCase().includes(n.toLowerCase())||w.category&&w.category.toLowerCase().includes(n.toLowerCase()):!0,E=s?w.categories&&Array.isArray(w.categories)?w.categories.includes(s):w.category===s:!0;return v&&E});return p.jsxs("div",{className:"flex flex-col space-y-6",children:[p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md",children:[p.jsx("br",{}),p.jsx("h1",{className:"text-2xl font-bold mb-4 text-right",children:"בתי עסק"}),p.jsxs("div",{className:"flex flex-col md:flex-row-reverse gap-4",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx(gg,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500"}),p.jsx(Wo,{type:"text",placeholder:"חפש עסק לפי שם, תיאור, כתובת או קטגוריה...",className:"pr-10 text-left",style:{direction:"rtl",textAlign:"left"},value:n,onChange:w=>r(w.target.value)})]}),p.jsxs(sf,{children:[p.jsx(of,{asChild:!0,children:p.jsxs(ze,{variant:"outline",className:"md:w-auto flex flex-row-reverse items-center",children:[p.jsx(e2,{className:"h-4 w-4 mr-2"}),p.jsx("span",{children:"קרוב אלי"})]})}),p.jsx(rd,{side:"top",children:"יתווסף בעתיד"})]}),p.jsxs("div",{className:"relative",children:[p.jsxs(ze,{variant:"outline",className:"md:w-auto flex flex-row-reverse items-center",onClick:()=>u(w=>!w),type:"button",children:[p.jsx(PM,{className:"h-4 w-4 mr-2"}),p.jsx("span",{children:"סינון"})]}),l&&p.jsxs("div",{className:"absolute z-10 right-0 mt-2 w-48 bg-white border rounded shadow-lg text-right",children:[p.jsx("div",{className:"p-2 border-b font-bold",children:"בחר קטגוריה"}),hq.map(w=>p.jsx("button",{className:`block w-full text-right px-4 py-2 hover:bg-gray-100 ${s===w?"bg-gray-200 font-bold":""}`,onClick:()=>{i(w),u(!1)},children:w},w)),p.jsx("button",{className:"block w-full text-right px-4 py-2 text-red-500 hover:bg-gray-100",onClick:()=>{i(""),u(!1)},children:"הסר סינון"})]})]})]})]}),e?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(w=>p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 h-96 animate-pulse",children:[p.jsx("div",{className:"w-full h-48 bg-gray-200 dark:bg-gray-700 rounded-lg mb-4"}),p.jsx("div",{className:"w-2/3 h-6 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),p.jsx("div",{className:"w-full h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),p.jsx("div",{className:"w-full h-4 bg-gray-200 dark:bg-gray-700 rounded mb-4"}),p.jsx("div",{className:"w-1/3 h-4 bg-gray-200 dark:bg-gray-700 rounded mb-4"}),p.jsxs("div",{className:"flex justify-between mb-4",children:[p.jsx("div",{className:"w-1/4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsx("div",{className:"w-1/4 h-4 bg-gray-200 dark:bg-gray-700 rounded"})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("div",{className:"w-1/2 h-8 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsx("div",{className:"w-1/4 h-8 bg-gray-200 dark:bg-gray-700 rounded"})]})]},w))}):m.length>0?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(w=>p.jsx(dq,{business:w},w.id))}):p.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-md max-w-lg mx-auto",children:[p.jsx(gg,{className:"h-16 w-16 text-gray-400 mb-4"}),p.jsx("h2",{className:"text-xl font-semibold mb-2 text-center",children:"לא נמצאו בתי עסק"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-4",children:"נסה לשנות את מונחי החיפוש, לבחור קטגוריה אחרת, או לנקות את הסינון."}),(n||s)&&p.jsx(ze,{variant:"outline",onClick:()=>{r(""),i("")},children:"נקה חיפוש וסינון"})]})]})}var gq=O.createContext(void 0);function M_(t){const e=O.useContext(gq);return t||e||"ltr"}var Ry="rovingFocusGroup.onEntryFocus",mq={bubbles:!1,cancelable:!0},pp="RovingFocusGroup",[Vw,b8,pq]=qv(pp),[yq,yp]=ia(pp,[pq]),[xq,wq]=yq(pp),C8=O.forwardRef((t,e)=>p.jsx(Vw.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(Vw.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(vq,{...t,ref:e})})}));C8.displayName=pp;var vq=O.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:f,onEntryFocus:m,preventScrollOnEntryFocus:w=!1,...v}=t,E=O.useRef(null),I=pr(e,E),P=M_(i),[C=null,k]=Qf({prop:l,defaultProp:u,onChange:f}),[N,T]=O.useState(!1),S=Ur(m),V=b8(n),$=O.useRef(!1),[Y,M]=O.useState(0);return O.useEffect(()=>{const j=E.current;if(j)return j.addEventListener(Ry,S),()=>j.removeEventListener(Ry,S)},[S]),p.jsx(xq,{scope:n,orientation:r,dir:P,loop:s,currentTabStopId:C,onItemFocus:O.useCallback(j=>k(j),[k]),onItemShiftTab:O.useCallback(()=>T(!0),[]),onFocusableItemAdd:O.useCallback(()=>M(j=>j+1),[]),onFocusableItemRemove:O.useCallback(()=>M(j=>j-1),[]),children:p.jsx(jt.div,{tabIndex:N||Y===0?-1:0,"data-orientation":r,...v,ref:I,style:{outline:"none",...t.style},onMouseDown:Xe(t.onMouseDown,()=>{$.current=!0}),onFocus:Xe(t.onFocus,j=>{const L=!$.current;if(j.target===j.currentTarget&&L&&!N){const G=new CustomEvent(Ry,mq);if(j.currentTarget.dispatchEvent(G),!G.defaultPrevented){const X=V().filter(xe=>xe.focusable),H=X.find(xe=>xe.active),z=X.find(xe=>xe.id===C),ee=[H,z,...X].filter(Boolean).map(xe=>xe.ref.current);I8(ee,w)}}$.current=!1}),onBlur:Xe(t.onBlur,()=>T(!1))})})}),A8="RovingFocusGroupItem",T8=O.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...l}=t,u=tf(),f=i||u,m=wq(A8,n),w=m.currentTabStopId===f,v=b8(n),{onFocusableItemAdd:E,onFocusableItemRemove:I}=m;return O.useEffect(()=>{if(r)return E(),()=>I()},[r,E,I]),p.jsx(Vw.ItemSlot,{scope:n,id:f,focusable:r,active:s,children:p.jsx(jt.span,{tabIndex:w?0:-1,"data-orientation":m.orientation,...l,ref:e,onMouseDown:Xe(t.onMouseDown,P=>{r?m.onItemFocus(f):P.preventDefault()}),onFocus:Xe(t.onFocus,()=>m.onItemFocus(f)),onKeyDown:Xe(t.onKeyDown,P=>{if(P.key==="Tab"&&P.shiftKey){m.onItemShiftTab();return}if(P.target!==P.currentTarget)return;const C=bq(P,m.orientation,m.dir);if(C!==void 0){if(P.metaKey||P.ctrlKey||P.altKey||P.shiftKey)return;P.preventDefault();let N=v().filter(T=>T.focusable).map(T=>T.ref.current);if(C==="last")N.reverse();else if(C==="prev"||C==="next"){C==="prev"&&N.reverse();const T=N.indexOf(P.currentTarget);N=m.loop?Cq(N,T+1):N.slice(T+1)}setTimeout(()=>I8(N))}})})})});T8.displayName=A8;var _q={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Eq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function bq(t,e,n){const r=Eq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return _q[r]}function I8(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Cq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var S8=C8,N8=T8,L_="Tabs",[Aq,CQ]=ia(L_,[yp]),R8=yp(),[Tq,F_]=Aq(L_),k8=O.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:l="horizontal",dir:u,activationMode:f="automatic",...m}=t,w=M_(u),[v,E]=Qf({prop:r,onChange:s,defaultProp:i});return p.jsx(Tq,{scope:n,baseId:tf(),value:v,onValueChange:E,orientation:l,dir:w,activationMode:f,children:p.jsx(jt.div,{dir:w,"data-orientation":l,...m,ref:e})})});k8.displayName=L_;var P8="TabsList",O8=O.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=F_(P8,n),l=R8(n);return p.jsx(S8,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:r,children:p.jsx(jt.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});O8.displayName=P8;var D8="TabsTrigger",M8=O.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,l=F_(D8,n),u=R8(n),f=j8(l.baseId,r),m=B8(l.baseId,r),w=r===l.value;return p.jsx(N8,{asChild:!0,...u,focusable:!s,active:w,children:p.jsx(jt.button,{type:"button",role:"tab","aria-selected":w,"aria-controls":m,"data-state":w?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:f,...i,ref:e,onMouseDown:Xe(t.onMouseDown,v=>{!s&&v.button===0&&v.ctrlKey===!1?l.onValueChange(r):v.preventDefault()}),onKeyDown:Xe(t.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&l.onValueChange(r)}),onFocus:Xe(t.onFocus,()=>{const v=l.activationMode!=="manual";!w&&!s&&v&&l.onValueChange(r)})})})});M8.displayName=D8;var L8="TabsContent",F8=O.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...l}=t,u=F_(L8,n),f=j8(u.baseId,r),m=B8(u.baseId,r),w=r===u.value,v=O.useRef(w);return O.useEffect(()=>{const E=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(E)},[]),p.jsx(Cl,{present:s||w,children:({present:E})=>p.jsx(jt.div,{"data-state":w?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!E,id:m,tabIndex:0,...l,ref:e,style:{...t.style,animationDuration:v.current?"0s":void 0},children:E&&i})})});F8.displayName=L8;function j8(t,e){return`${t}-trigger-${e}`}function B8(t,e){return`${t}-content-${e}`}var Iq=k8,V8=O8,U8=M8,z8=F8;const H8=Iq,j_=O.forwardRef(({className:t,...e},n)=>p.jsx(V8,{ref:n,className:mt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));j_.displayName=V8.displayName;const Of=O.forwardRef(({className:t,...e},n)=>p.jsx(U8,{ref:n,className:mt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Of.displayName=U8.displayName;const Df=O.forwardRef(({className:t,...e},n)=>p.jsx(z8,{ref:n,className:mt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Df.displayName=z8.displayName;function Sq(){const{user:t}=yr(),{toast:e}=ci(),[n,r]=O.useState([]),[s,i]=O.useState(!0),[l,u]=O.useState("available");O.useEffect(()=>{(async()=>{if(t)try{const E=await f0(t.uid);r(E)}catch(E){console.error("Error fetching saved offers:",E),e({title:"Error",description:"Failed to load your saved offers. Please try again.",variant:"destructive"})}finally{i(!1)}})()},[t,e]);const f=async(v,E)=>{if(t)try{await y6(v,E),r(I=>I.map(P=>P.id===v?{...P,claimed:!0,claimedAt:new Date().toISOString()}:P)),e({title:"Offer Claimed",description:"You've successfully claimed this offer. The recommender received 5 coins!"})}catch(I){console.error("Error claiming offer:",I),e({title:"Error",description:"Failed to claim the offer. Please try again.",variant:"destructive"})}},m=n.filter(v=>!v.claimed),w=n.filter(v=>v.claimed);return t?p.jsxs("div",{className:"container max-w-5xl mx-auto",children:[p.jsx("h1",{className:"text-2xl font-bold mb-6",children:"ההצעות השמורות שלך"}),p.jsxs(H8,{defaultValue:"available",onValueChange:u,children:[p.jsx("div",{className:"flex justify-between items-center mb-4",children:p.jsxs(j_,{children:[p.jsxs(Of,{value:"available",children:["הצעות זמינות (",m.length,")"]}),p.jsxs(Of,{value:"claimed",children:["היסטוריית מימוש (",w.length,")"]})]})}),p.jsx(Df,{value:"available",children:s?p.jsx("div",{className:"grid grid-cols-1 gap-4",children:[1,2,3].map(v=>p.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 animate-pulse",children:p.jsxs("div",{className:"flex",children:[p.jsx("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsxs("div",{className:"ml-4 flex-1",children:[p.jsx("div",{className:"w-1/3 h-6 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),p.jsx("div",{className:"w-2/3 h-4 bg-gray-200 dark:bg-gray-700 rounded mb-4"}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("div",{className:"w-1/4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsx("div",{className:"w-1/4 h-8 bg-gray-200 dark:bg-gray-700 rounded"})]})]})]})},v))}):m.length>0?p.jsx("div",{className:"grid grid-cols-1 gap-4",children:m.map(v=>{var E,I,P,C,k,N,T,S,V,$;return p.jsx(on,{className:"overflow-hidden",children:p.jsx(qn,{className:"p-0",children:p.jsxs("div",{className:"flex flex-col md:flex-row",children:[p.jsx("div",{className:"w-full md:w-1/3 h-40 md:h-auto",children:p.jsx("img",{src:((E=v.recommendation)==null?void 0:E.businessImage)||"https://images.unsplash.com/photo-1555396273-367ea4eb4db5",alt:((I=v.recommendation)==null?void 0:I.businessName)||"Business",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"p-4 flex-1",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold",children:(P=v.recommendation)==null?void 0:P.businessName}),p.jsx("div",{className:"flex items-center mt-1",children:Array.from({length:5}).map((Y,M)=>{var j;return p.jsx(go,{className:`h-4 w-4 ${M<(((j=v.recommendation)==null?void 0:j.rating)||4)?"text-amber-500 fill-amber-500":"text-gray-300 dark:text-gray-600"}`},M)})})]}),p.jsx("div",{className:"text-sm font-bold px-2 py-1 bg-amber-500 text-white rounded-full",children:((C=v.recommendation)==null?void 0:C.discount)||"10% OFF"})]}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:((k=v.recommendation)==null?void 0:k.description)||"No description available"}),p.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-500 dark:text-gray-400",children:[p.jsx(Cb,{className:"h-4 w-4 mr-1"}),p.jsxs("span",{children:["בתוקף עד ",((N=v.recommendation)==null?void 0:N.validUntil)||"לא זמין"]})]}),p.jsxs("div",{className:"flex items-center mt-3",children:[p.jsxs(fl,{className:"h-6 w-6",children:[p.jsx(gl,{src:((T=v.recommendation)==null?void 0:T.recommenderPhoto)||"",alt:((S=v.recommendation)==null?void 0:S.recommenderName)||"Recommender"}),p.jsx(ml,{children:(((V=v.recommendation)==null?void 0:V.recommenderName)||"").charAt(0)||"R"})]}),p.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["Recommended by"," ",p.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:(($=v.recommendation)==null?void 0:$.recommenderName)||"Unknown"})]})]}),p.jsx("div",{className:"mt-4 flex justify-end",children:p.jsx(ze,{onClick:()=>{var Y;return f(v.id,((Y=v.recommendation)==null?void 0:Y.recommenderId)||"")},className:"bg-primary-500 hover:bg-primary-600",children:"מימוש ההצעה"})})]})]})})},v.id)})}):p.jsx("div",{className:"flex justify-center",children:p.jsxs("div",{className:"text-center py-12 px-6 bg-white dark:bg-gray-800 rounded-xl shadow-md w-full max-w-lg",children:[p.jsx("svg",{className:"h-20 w-20 text-gray-400 dark:text-gray-600 mb-4 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),p.jsx("h3",{className:"text-lg font-semibold mb-2",children:"אין הצעות שמורות"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-md mb-6",children:"עדיין לא שמרת שום הצעה. עיין בהמלצות ושמור הצעות כדי לצפות בהן כאן."}),p.jsx(ze,{asChild:!0,children:p.jsx(sn,{href:"/recommendations",children:"עיון בהמלצות"})})]})})}),p.jsx(Df,{value:"claimed",children:s?p.jsx("div",{className:"grid grid-cols-1 gap-4",children:[1,2].map(v=>p.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 animate-pulse",children:p.jsxs("div",{className:"flex",children:[p.jsx("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsxs("div",{className:"ml-4 flex-1",children:[p.jsx("div",{className:"w-1/3 h-6 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),p.jsx("div",{className:"w-2/3 h-4 bg-gray-200 dark:bg-gray-700 rounded mb-4"}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("div",{className:"w-1/4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsx("div",{className:"w-1/4 h-8 bg-gray-200 dark:bg-gray-700 rounded"})]})]})]})},v))}):w.length>0?p.jsx("div",{className:"grid grid-cols-1 gap-4",children:w.map(v=>{var E,I,P,C,k,N,T,S,V,$;return p.jsx(on,{className:"overflow-hidden bg-gray-50 dark:bg-gray-800/50",children:p.jsx(qn,{className:"p-0",children:p.jsxs("div",{className:"flex flex-col md:flex-row",children:[p.jsxs("div",{className:"w-full md:w-1/3 h-40 md:h-auto relative",children:[p.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:p.jsxs("div",{className:"bg-green-500 text-white px-3 py-1 rounded-full font-medium text-sm flex items-center",children:[p.jsx(Jv,{className:"h-4 w-4 mr-1"}),"Claimed"]})}),p.jsx("img",{src:((E=v.recommendation)==null?void 0:E.businessImage)||"https://images.unsplash.com/photo-1555396273-367ea4eb4db5",alt:((I=v.recommendation)==null?void 0:I.businessName)||"Business",className:"w-full h-full object-cover opacity-70"})]}),p.jsxs("div",{className:"p-4 flex-1",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold",children:(P=v.recommendation)==null?void 0:P.businessName}),p.jsx("div",{className:"flex items-center mt-1",children:Array.from({length:5}).map((Y,M)=>{var j;return p.jsx(go,{className:`h-4 w-4 ${M<(((j=v.recommendation)==null?void 0:j.rating)||4)?"text-amber-500 fill-amber-500":"text-gray-300 dark:text-gray-600"}`},M)})})]}),p.jsx("div",{className:"text-sm font-bold px-2 py-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-full",children:((C=v.recommendation)==null?void 0:C.discount)||"10% OFF"})]}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:((k=v.recommendation)==null?void 0:k.description)||"No description available"}),p.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-500 dark:text-gray-400",children:[p.jsx(Cb,{className:"h-4 w-4 mr-1"}),p.jsxs("span",{children:["Claimed on ",new Date(v.claimedAt).toLocaleDateString()]})]}),p.jsxs("div",{className:"flex items-center mt-3",children:[p.jsxs(fl,{className:"h-6 w-6",children:[p.jsx(gl,{src:((N=v.recommendation)==null?void 0:N.recommenderPhoto)||"",alt:((T=v.recommendation)==null?void 0:T.recommenderName)||"Recommender"}),p.jsx(ml,{children:(((S=v.recommendation)==null?void 0:S.recommenderName)||"").charAt(0)||"R"})]}),p.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["Recommended by"," ",p.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:((V=v.recommendation)==null?void 0:V.recommenderName)||"Unknown"})]})]}),p.jsx("div",{className:"mt-4 flex justify-end",children:p.jsx(ze,{variant:"outline",asChild:!0,children:p.jsxs("a",{href:`https://maps.google.com/?q=${($=v.recommendation)==null?void 0:$.businessName}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:[p.jsx(kM,{className:"h-4 w-4 mr-2"}),"View Business"]})})})]})]})})},v.id)})}):p.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-8 text-center",children:p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("svg",{className:"h-20 w-20 text-gray-400 dark:text-gray-600 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),p.jsx("h3",{className:"text-lg font-semibold mb-2",children:"אין הצעות שמורות"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-md mb-6",children:"עדיין לא שמרת שום הצעה. עיין בהמלצות ושמור הצעות כדי לצפות בהן כאן."}),p.jsx(ze,{asChild:!0,children:p.jsx(sn,{href:"/recommendations",children:"עיון בהמלצות"})})]})})})]}),p.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4 text-right",children:"איך להשתמש בהצעות"}),p.jsx(md,{className:"mb-4"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"flex flex-col items-center text-center",children:[p.jsx("div",{className:"bg-primary-50 dark:bg-gray-700 p-4 rounded-full mb-4",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),p.jsx("h3",{className:"font-medium mb-2",children:"1. בבית העסק"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"בקר בבית העסק והצג את ההצעה השמורה שלך לקופאי בעת ביצוע רכישה."})]}),p.jsxs("div",{className:"flex flex-col items-center text-center",children:[p.jsx("div",{className:"bg-primary-50 dark:bg-gray-700 p-4 rounded-full mb-4",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),p.jsx("h3",{className:"font-medium mb-2",children:"2. מימוש ההצעה"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:'לחץ על "מימוש ההצעה" כדי להציג את ההצעה לקופאי.'})]}),p.jsxs("div",{className:"flex flex-col items-center text-center",children:[p.jsx("div",{className:"bg-primary-50 dark:bg-gray-700 p-4 rounded-full mb-4",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("h3",{className:"font-medium mb-2",children:"3. צבירת תגמולים"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"כשחברים משתמשים בהמלצות שלך, תרוויח מטבעות למימוש הצעות נוספות!"})]})]})]})]}):p.jsx("div",{className:"flex flex-col items-center justify-center h-[70vh]",children:p.jsx(on,{className:"w-full max-w-md",children:p.jsxs(qn,{className:"pt-6 text-center",children:[p.jsx(DM,{className:"h-16 w-16 text-primary-500 mx-auto mb-4"}),p.jsx("h1",{className:"text-2xl font-bold mb-4",children:"נדרשת התחברות"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"עליך להתחבר כדי לצפות בהצעות השמורות שלך."}),p.jsxs("div",{className:"flex justify-center space-x-4",children:[p.jsx(ze,{asChild:!0,children:p.jsx(sn,{href:"/login",children:"התחבר"})}),p.jsx(ze,{variant:"outline",asChild:!0,children:p.jsx(sn,{href:"/register",children:"הרשם"})})]})]})})})}const Nq=Zf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Zg({className:t,variant:e,...n}){return p.jsx("div",{className:mt(Nq({variant:e}),t),...n})}function Rq(){var m;const{user:t,logout:e}=yr(),[n,r]=O.useState([]),[s,i]=O.useState([]),[l,u]=O.useState(!0);if(O.useEffect(()=>{const w=async()=>{if(t){console.log("מזהה המשתמש הנוכחי:",t.uid),u(!0);try{i([]),r([]);const[E,I]=await Promise.all([NW(t.uid),f0(t.uid)]);console.log("המלצות המשתמש:",E),console.log("המלצות שמורות רענון:",I),r(E),i(I)}catch(E){console.error("Error fetching user data:",E)}finally{u(!1)}}};w();const v=()=>{console.log("זוהה שמירת המלצה חדשה - מרענן נתונים"),w()};return window.addEventListener("offerSaved",v),()=>{window.removeEventListener("offerSaved",v)}},[t]),!t)return p.jsx("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:p.jsxs("div",{className:"text-center bg-white dark:bg-gray-800 rounded-xl p-8 shadow-md",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4",children:"נדרש להתחבר"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"כדי לראות את הפרופיל שלך, אתה צריך להתחבר תחילה"}),p.jsx(sn,{href:"/login",children:p.jsx(ze,{children:"התחבר עכשיו"})})]})});let f=t.photoURL;if(!f&&t.providerData){const w=t.providerData.find(v=>v.providerId==="facebook.com");w&&w.uid&&(f=`https://graph.facebook.com/${w.uid}/picture?type=large`)}return p.jsxs("div",{className:"container mx-auto max-w-6xl px-4 py-6",children:[p.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-700 rounded-xl p-8 mb-8 shadow-lg",children:p.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[p.jsxs("div",{className:"relative",children:[p.jsxs(fl,{className:"h-24 w-24 md:h-32 md:w-32 ring-4 ring-white shadow-lg",children:[p.jsx(gl,{src:f||""}),p.jsx(ml,{className:"text-2xl",children:((m=t.displayName)==null?void 0:m.slice(0,2))||"U"})]}),p.jsx(ze,{size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 rounded-full p-2 bg-white shadow-md",children:p.jsx(Ab,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"flex-1 text-center md:text-right",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:t.displayName||"משתמש"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:t.email}),p.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:n.length}),p.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"המלצות"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.coins||0}),p.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"מטבעות"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:s.length}),p.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"הטבות"})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center md:justify-end",children:[p.jsxs(sf,{children:[p.jsx(of,{asChild:!0,children:p.jsxs(ze,{variant:"outline",className:"w-full sm:w-auto",children:[p.jsx(Ab,{className:"ml-2 h-4 w-4"}),"עריכת פרופיל"]})}),p.jsx(rd,{side:"top",children:"יתווסף בעתיד"})]}),p.jsxs(sf,{children:[p.jsx(of,{asChild:!0,children:p.jsxs(ze,{variant:"outline",className:"w-full sm:w-auto",children:[p.jsx(FM,{className:"ml-2 h-4 w-4"}),"הגדרות"]})}),p.jsx(rd,{side:"top",children:"יתווסף בעתיד"})]})]})]})]})}),p.jsxs(H8,{defaultValue:"recommendations",className:"w-full",children:[p.jsxs(j_,{className:"grid w-full grid-cols-2 mb-8",children:[p.jsx(Of,{value:"recommendations",className:"text-right",children:"ההמלצות שלי"}),p.jsx(Of,{value:"saved",className:"text-right",children:"ההטבות ששמרתי"})]}),p.jsx(Df,{value:"recommendations",children:p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"flex items-center justify-between",children:p.jsx("h2",{className:"text-2xl font-bold text-right",children:"ההמלצות שלי"})}),l?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(w=>p.jsxs(on,{className:"animate-pulse",children:[p.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-700"}),p.jsxs(qn,{className:"p-6",children:[p.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-4"}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-20"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-16"})]})]})]},w))}):n.length>0?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(w=>p.jsxs(on,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[p.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-gray-800",children:w.imageUrl&&p.jsx("img",{src:w.imageUrl,alt:w.businessName,className:"w-full h-full object-cover"})}),p.jsxs(qn,{className:"p-6",children:[p.jsx("h3",{className:"text-xl font-bold mb-2 text-right",children:w.businessName}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 text-left",children:w.text||w.description||"אין תיאור"}),p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx(Zg,{variant:"secondary",children:w.discount}),p.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(fg,{className:"h-4 w-4"}),w.savedCount||0]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(n2,{className:"h-4 w-4"}),"שתף"]})]})]}),w.validUntil&&w.validUntil!=="ללא הגבלה"&&p.jsxs("div",{className:"text-sm text-gray-500 text-right",children:["תוקף עד: ",w.validUntil]})]})]},w.id))}):p.jsx("div",{className:"flex justify-center",children:p.jsxs("div",{className:"text-center py-12 px-6 bg-white dark:bg-gray-800 rounded-xl shadow-md w-full max-w-lg",children:[p.jsx(MM,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-semibold mb-2",children:"עדיין לא יצרת המלצות"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"התחל לשתף את החוויות שלך עם העולם"}),p.jsx(sn,{href:"/create-recommendation",children:p.jsx(ze,{children:"צור המלצה ראשונה"})})]})})]})}),p.jsx(Df,{value:"saved",children:p.jsxs("div",{className:"space-y-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-right",children:"ההטבות השמורות"}),l?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(w=>p.jsxs(on,{className:"animate-pulse",children:[p.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-700"}),p.jsxs(qn,{className:"p-6",children:[p.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-4"}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-20"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-16"})]})]})]},w))}):s&&s.length>0?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["נמצאו ",s.length," המלצות שמורות"]}),s.map((w,v)=>{if(console.log("מציג המלצה שמורה:",w),console.log("נתוני ההמלצה:",w.recommendation),!w.recommendation)return p.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:p.jsxs("p",{className:"text-gray-500",children:["המלצה ללא נתונים - מזהה: ",w.recommendationId]})},`empty-${v}`);const E=w.recommendation;console.log("שם העסק מהנתונים:",E.businessName),console.log("כל הנתונים של rec:",E);const I=E.businessName||"עסק לא ידוע";console.log("שם העסק שנבחר:",I);const P=E.description&&E.description!=="המלצה שמורה"?E.description:"",C="10% הנחה",k=w.claimed||!1;return p.jsx(on,{className:"overflow-hidden hover:shadow-lg transition-shadow",dir:"rtl",children:p.jsxs(qn,{className:"p-6 text-right",children:[p.jsx("div",{className:"mb-3",children:p.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:I})}),p.jsx("div",{className:"mb-4",children:p.jsx(Zg,{variant:"secondary",className:"bg-green-100 text-green-800 font-medium px-3 py-1",children:C})}),P&&p.jsx("div",{className:"mb-4",children:p.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:P})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("div",{children:p.jsxs("span",{className:"text-sm text-gray-500",children:["נשמר ב: ",w.savedAt?new Date(w.savedAt.seconds*1e3).toLocaleDateString("he-IL"):"לא ידוע"]})}),p.jsx("div",{children:p.jsx(sn,{href:`/redeem-offer/${w.id}`,children:p.jsx(ze,{size:"sm",variant:k?"destructive":"default",className:`${k?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"} font-medium px-4 py-2`,children:k?"מומש ✓":"מימוש ההטבה"})})})]})]})},`saved-${w.id}-${v}`)})]}):p.jsxs("div",{className:"text-center py-12 px-6 bg-white dark:bg-gray-800 rounded-xl shadow-md w-full max-w-lg mx-auto",children:[p.jsx(fg,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-semibold mb-2",children:"אין הטבות שמורות"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"התחל לשמור הטבות שמעניינות אותך"}),p.jsx(sn,{href:"/",children:p.jsx(ze,{children:"עיין בהמלצות"})})]})]})})]})]})}function kq(){const[t,e]=O.useState([]),[n,r]=O.useState([]),[s,i]=O.useState(!0),[l,u]=O.useState(""),[f,m]=O.useState(new Set),[w,v]=O.useState(0),[E,I]=O.useState([]),[P,C]=O.useState(null),{user:k}=yr(),{toast:N}=ci();O.useEffect(()=>{async function S(){try{let $=(await VW()).filter(Y=>Y.uid!==(k==null?void 0:k.uid)).map(Y=>({uid:Y.uid,displayName:Y.displayName||"משתמש",email:Y.email,photoURL:Y.photoURL,coins:Y.coins||0,recommendationsCount:Y.recommendationsCount||0,connectionsCount:Y.connectionsCount||0,isConnected:!1}));if(e($),r($),k!=null&&k.uid){const Y=await R6(k.uid);C(Y)}}catch(V){console.error("Error fetching users:",V),N({title:"שגיאה",description:"לא ניתן לטעון את רשימת המשתמשים",variant:"destructive"})}finally{i(!1)}}k&&S()},[k,N]),O.useEffect(()=>{if(!(k!=null&&k.uid))return;const S=sH(Fn(Tt,"users",k.uid),V=>{if(V.exists()){const $=V.data();I($.connections||[]),v(($.connections||[]).length)}});return()=>S()},[k]),O.useEffect(()=>{if(l.trim()==="")r(t);else{const S=t.filter(V=>V.displayName.toLowerCase().includes(l.toLowerCase())||V.email.toLowerCase().includes(l.toLowerCase()));r(S)}},[l,t]);const T=async S=>{let V=k;if(!V){const $=localStorage.getItem("authUser");if($)try{V=JSON.parse($)}catch(Y){console.error("שגיאה בפענוח נתוני משתמש:",Y);return}}if(!V){N({title:"שגיאה",description:"יש להתחבר כדי ליצור חיבור",variant:"destructive"});return}m($=>new Set($).add(S));try{await N6(V.uid,S),e($=>$.map(Y=>Y.uid===S?{...Y,isConnected:!0}:Y)),r($=>$.map(Y=>Y.uid===S?{...Y,isConnected:!0}:Y)),I($=>[...$,S])}catch($){console.error("Error creating connection:",$),N({title:"שגיאה",description:"לא ניתן לשלוח בקשת חיבור",variant:"destructive"})}finally{m($=>{const Y=new Set($);return Y.delete(S),Y})}};return k?p.jsxs("div",{className:"container mx-auto max-w-6xl px-4 py-6",children:[p.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 mb-8 shadow-lg",children:p.jsxs("div",{className:"flex flex-col md:flex-row-reverse md:justify-between md:items-center gap-4",children:[p.jsxs("div",{className:"relative w-full md:w-1/3",children:[p.jsx(gg,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 h-5 w-5"}),p.jsx(Wo,{type:"text",placeholder:"חפש משתמשים...",className:"pr-10 text-left",style:{direction:"rtl",textAlign:"left"},value:l,onChange:S=>u(S.target.value)})]}),p.jsxs("div",{className:"flex-1 text-right",children:[p.jsx("h1",{className:"text-3xl font-bold mb-2",children:"משתמשים"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"התחבר עם אנשים אחרים וקבל המלצות מותאמות אישית"})]})]})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[p.jsxs(on,{className:"text-center p-6",children:[p.jsx(Vx,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-2xl font-bold",children:t.length}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"משתמשים רשומים"})]}),p.jsxs(on,{className:"text-center p-6",children:[p.jsx(ef,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-2xl font-bold",children:w}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"החיבורים שלי"})]}),p.jsxs(on,{className:"text-center p-6",children:[p.jsx(go,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-2xl font-bold",children:P&&P.rating!==void 0?P.rating.toFixed(1):"0.0"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"דירוג ממוצע"})]})]}),s?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(S=>p.jsx(on,{className:"animate-pulse",children:p.jsxs(qn,{className:"p-6",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[p.jsx("div",{className:"h-16 w-16 bg-gray-200 dark:bg-gray-700 rounded-full"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"})]}),p.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded mt-4"})]})},S))}):n.length>0?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(S=>{const V=E.includes(S.uid);return p.jsx(on,{className:"hover:shadow-lg transition-shadow duration-300",children:p.jsxs(qn,{className:"p-6",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[p.jsxs(fl,{className:"h-16 w-16 ring-2 ring-gray-100 dark:ring-gray-700",children:[p.jsx(gl,{src:S.photoURL}),p.jsx(ml,{className:"text-lg",children:S.displayName.slice(0,2)})]}),p.jsxs("div",{className:"flex-1 text-right",children:[p.jsx("h3",{className:"text-lg font-semibold mb-1",children:S.displayName}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:S.email}),p.jsx("div",{className:"flex items-center gap-2 justify-end",children:p.jsxs(Zg,{variant:"secondary",className:"text-xs",children:[S.rating!==void 0?S.rating.toFixed(1):"0.0"," ⭐"]})})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(ze,{className:"flex-1",variant:"outline",asChild:!0,children:p.jsxs(sn,{href:`/user/${S.uid}`,children:[p.jsx(mg,{className:"h-4 w-4 mr-2"}),"פרופיל"]})}),V?p.jsxs(ze,{className:"flex-1 bg-green-500 hover:bg-green-600 text-white",disabled:!0,children:[p.jsx(mg,{className:"h-4 w-4 mr-2"}),"מחובר"]}):p.jsxs(ze,{className:"flex-1",onClick:()=>T(S.uid),children:[p.jsx(ef,{className:"h-4 w-4 mr-2"}),"התחבר"]})]})]})},S.uid)})}):p.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-md",children:[p.jsx(Vx,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-semibold mb-2",children:"לא נמצאו משתמשים"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"נסה לשנות את מונחי החיפוש או חזור מאוחר יותר"})]})]}):p.jsx("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:p.jsxs("div",{className:"text-center bg-white dark:bg-gray-800 rounded-xl p-8 shadow-md",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4",children:"נדרש להתחבר"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"כדי לראות משתמשים אחרים, אתה צריך להתחבר תחילה"})]})})}const Pq=Zf("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),W8=O.forwardRef(({className:t,variant:e,...n},r)=>p.jsx("div",{ref:r,role:"alert",className:mt(Pq({variant:e}),t),...n}));W8.displayName="Alert";const G8=O.forwardRef(({className:t,...e},n)=>p.jsx("h5",{ref:n,className:mt("mb-1 font-medium leading-none tracking-tight",t),...e}));G8.displayName="AlertTitle";const $8=O.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:mt("text-sm [&_p]:leading-relaxed",t),...e}));$8.displayName="AlertDescription";function Oq({recommendation:t,user:e,toast:n,onRatingUpdate:r}){const[s,i]=O.useState(!1),l=t.businessName||t.name||"עסק",u=t.description||t.text||"המלצה מעולה",f=t.businessImage||t.image||t.imageUrl,m=t.discount||"הנחה מיוחדת",w=t.validUntil,v=e&&t.ratings&&t.ratings[e.uid]?t.ratings[e.uid]:0;let E="ללא הגבלה";if(w&&w instanceof Date)E=w.toLocaleDateString("he-IL");else if(w&&typeof w=="string")try{const C=new Date(w);isNaN(C.getTime())||(E=C.toLocaleDateString("he-IL"))}catch{console.warn("Invalid date format:",w)}const I=async(C,k)=>{if(!e){n({title:"שגיאה",description:"צריך להיות מחובר כדי לדרג המלצות",variant:"destructive"});return}try{console.log(`דירוג המלצה ${C} ב-${k} כוכבים`),await dp(C,k,e.uid),r&&r(C,k),n({title:"דירוג נשמר",description:`דירגת את ההמלצה ב-${k} כוכבים`,variant:"default"})}catch(N){console.error("שגיאה בדירוג המלצה:",N),n({title:"שגיאה בדירוג",description:"לא ניתן לשמור את הדירוג כעת",variant:"destructive"})}};O.useEffect(()=>{async function C(){if(e&&t&&t.id){const N=(await f0(e.uid)).some(T=>T.recommendationId===t.id);i(N)}}C()},[e,t]);const P=async()=>{if(!e){n({title:"נדרש לוגין",description:"צריך להיות מחובר כדי לשמור המלצות",variant:"destructive"});return}try{await E_(e.uid,t.id),i(!0),n({title:"נשמר בהצלחה",description:"ההמלצה נשמרה באיזור האישי שלך",variant:"default"})}catch{n({title:"שגיאה בשמירה",description:"לא ניתן לשמור את ההמלצה. אנא נסה שוב מאוחר יותר.",variant:"destructive"})}};return p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow",children:[p.jsx("div",{className:"w-full h-48 bg-gray-200 dark:bg-gray-700",children:f?p.jsx("img",{src:f,alt:l,className:"w-full h-full object-cover",onError:C=>{C.target.src="https://images.unsplash.com/photo-1559925393-8be0ec4767c8?q=80&w=400&auto=format&fit=crop"}}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx("span",{className:"text-gray-500 text-sm",children:l})})}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"font-medium text-lg mb-2 text-right",children:l}),p.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 text-right",children:[p.jsx("p",{className:"mb-1",children:p.jsx("span",{className:"text-green-600 font-medium",children:m})}),p.jsx("p",{className:"leading-relaxed",children:u})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(C=>p.jsx("button",{type:"button",className:"border-none bg-transparent p-0 m-0 outline-none focus:outline-none cursor-pointer hover:scale-110 transition-transform",onClick:()=>{if(!e){n({title:"נדרש לוגין",description:"צריך להיות מחובר כדי לדרג המלצות",variant:"destructive"});return}I(t.id,C)},children:p.jsx(go,{className:`h-4 w-4 ${C<=v?"text-yellow-400 fill-yellow-400":"text-gray-300"}`})},`my-star-${t.id}-${C}`))}),t.rating&&t.rating>0&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-xs text-gray-500",children:"ממוצע:"}),p.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(C=>p.jsx(go,{className:`h-3 w-3 ${C<=(t.rating||0)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},`avg-star-${t.id}-${C}`))}),p.jsxs("span",{className:"text-xs text-gray-500",children:["(",t.rating,")"]})]})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs(ze,{variant:"ghost",size:"sm",onClick:P,className:"h-8 px-2 flex items-center gap-1",children:[p.jsx(fg,{className:`h-3 w-3 ${s?"fill-red-500 text-red-500":""}`}),p.jsx("span",{className:"text-xs",children:s?"נשמר":"שמירה"})]})})]}),E&&E!=="ללא הגבלה"&&p.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-right",children:["תוקף עד: ",E]})]})]})}function Dq(){var j;const{userId:t}=Yf();console.log("UserProfile נטען עם userId:",t);const[e,n]=O.useState(null),[r,s]=O.useState(0),[i,l]=O.useState([]),[u,f]=O.useState(!0),[m,w]=O.useState(!1),[v,E]=O.useState(null),[I,P]=O.useState(null),[C,k]=O.useState(!1),{user:N}=yr(),{toast:T}=ci(),S=async(L,G)=>{if(!N){T({title:"שגיאה",description:"צריך להיות מחובר כדי לדרג המלצות",variant:"destructive"});return}try{await dp(L,G,N.uid);const X=await Bg(t||"");l(X);const H=await _A(t||"");s(H),T({title:"דירוג נשמר",description:`דירגת את ההמלצה ב-${G} כוכבים`,variant:"default"})}catch(X){console.error("שגיאה בדירוג המלצה:",X),T({title:"שגיאה בדירוג",description:"לא ניתן לשמור את הדירוג כעת",variant:"destructive"})}},V=N&&t===N.uid;O.useEffect(()=>{async function L(){if(!t){E("מזהה משתמש לא נמצא"),f(!1);return}try{console.log(`טוען פרופיל משתמש: ${t}`),E(null),f(!0);let G=!1;if(N&&N.uid!==t)try{G=await UW(N.uid,t),console.log(`מצב חיבור עם משתמש ${t}:`,G),k(G)}catch(H){console.error("שגיאה בבדיקת חיבור:",H)}const X=await R6(t);if(console.log("נתוני משתמש נטענו:",X),!X){E("משתמש לא נמצא");return}n(X);try{const H=await _A(t);console.log(`דירוג משתמש ${t}:`,H),s(H)}catch(H){console.error("שגיאה בטעינת דירוג:",H),s(0)}try{const H=await Bg(t);l(H),H.length>0&&P(H[0])}catch(H){console.error("שגיאה בטעינת המלצות:",H),l([])}}catch(G){console.error("שגיאה בטעינת פרופיל המשתמש:",G),E(`שגיאה כללית: ${G.message||"שגיאה לא ידועה"}`),T({title:"שגיאה",description:"אירעה שגיאה בטעינת פרופיל המשתמש",variant:"destructive"})}finally{f(!1)}}L()},[t,T]);const $=async()=>{if(!(!N||!t))try{w(!0),await N6(N.uid,t),T({title:"נוצר חיבור בהצלחה",description:"כעת תראה את ההמלצות של משתמש זה",variant:"default"}),k(!0)}catch(L){console.error("שגיאה ביצירת חיבור:",L),T({title:"שגיאה ביצירת חיבור",description:"אנא נסה שוב מאוחר יותר",variant:"destructive"})}finally{w(!1)}},Y=L=>{const G=Math.floor(L),X=L%1>=.5;return p.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5},(H,z)=>z<G?p.jsx(go,{className:"h-5 w-5 text-yellow-400 fill-yellow-400"},z):z===G&&X?p.jsx(jM,{className:"h-5 w-5 text-yellow-400 fill-yellow-400"},z):p.jsx(go,{className:"h-5 w-5 text-gray-300"},z))})};if(!e)return null;let M=e.photoURL;if(!M&&e.providerData){const L=e.providerData.find(G=>G.providerId==="facebook.com");L&&L.uid&&(M=`https://graph.facebook.com/${L.uid}/picture?type=large`)}return u?p.jsx("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:p.jsx("div",{className:"animate-pulse",children:p.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 mb-8 shadow-lg",children:p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsx("div",{className:"w-24 h-24 bg-gray-200 dark:bg-gray-700 rounded-full"}),p.jsxs("div",{className:"flex-1 space-y-2",children:[p.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]})})})}):v||!e?p.jsx("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl font-bold mb-4",children:"שגיאה בטעינת הפרופיל"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"לא הצלחנו למצוא את המשתמש המבוקש"})]})}):p.jsxs("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:[p.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 mb-8 shadow-lg",children:p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-6",children:[p.jsx("div",{className:"text-center md:text-right",children:p.jsx("div",{className:"w-24 h-24 mx-auto md:mx-0 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700",children:M?p.jsx("img",{src:M,alt:e.displayName,className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx("span",{className:"text-gray-400 text-sm",children:((j=e.displayName)==null?void 0:j.charAt(0))||"U"})})})}),p.jsxs("div",{className:"flex-1 text-center md:text-right",children:[p.jsx("h1",{className:"text-2xl font-bold mb-2",children:e.displayName||"משתמש"}),p.jsxs("div",{className:"flex items-center justify-center md:justify-end gap-2 mb-3",children:[Y(r),r>0&&p.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["(",r.toFixed(1),")"]})]}),!V&&N&&(C?p.jsxs(ze,{disabled:!0,className:"text-green-600",children:[p.jsx(Jv,{className:"ml-2 h-4 w-4"}),"מחובר"]}):p.jsxs(ze,{onClick:$,disabled:m,children:[p.jsx(ef,{className:"ml-2 h-4 w-4"}),m?"מתחבר...":"התחבר"]}))]})]})}),v&&p.jsxs(W8,{variant:"destructive",className:"mb-4",children:[p.jsx(AM,{className:"h-4 w-4"}),p.jsx(G8,{children:"שגיאה"}),p.jsx($8,{children:v})]}),p.jsxs("div",{className:"mb-8",children:[p.jsxs("h2",{className:"text-xl font-semibold mb-4 text-right",children:["המלצות של ",e.displayName]}),p.jsxs("div",{className:"mb-2 text-sm text-gray-600",children:["מספר המלצות: ",i.length]}),i.length===0?p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"אין המלצות להצגה כעת"})}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((L,G)=>p.jsx(Oq,{recommendation:L,user:N,toast:T,onRatingUpdate:S},`${L.id||L.firestoreId||"rec"}-${G}`))})]})]})}const q8=O.forwardRef(({className:t,...e},n)=>p.jsx("textarea",{className:mt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));q8.displayName="Textarea";function Mq({businessId:t,businessName:e,onComplete:n,onBack:r}){const[s,i]=O.useState(""),[l,u]=O.useState(null),[f,m]=O.useState(null),[w,v]=O.useState(!1),E=O.useRef(null),{toast:I}=ci(),{user:P}=yr(),C=N=>{var V;const T=(V=N.target.files)==null?void 0:V[0];if(!T)return;if(!T.type.match("image.*")){I({title:"קובץ לא תקין",description:"אנא בחר קובץ תמונה בלבד (jpg, png, gif)",variant:"destructive"});return}u(T);const S=new FileReader;S.onload=$=>{var Y;m((Y=$.target)==null?void 0:Y.result)},S.readAsDataURL(T)},k=async()=>{if(!P){I({title:"נדרשת התחברות",description:"יש להתחבר למערכת כדי לשתף המלצות",variant:"destructive"});return}if(!s.trim()){I({title:"שדה חובה",description:"אנא כתוב את ההמלצה שלך",variant:"destructive"});return}if(!l){I({title:"תמונה חסרה",description:"אנא בחר תמונה להמלצה",variant:"destructive"});return}try{v(!0);const N=`recommendations/${P.uid}/${Date.now()}_${l.name}`,T=await RW(l,N);if(!T)throw new Error("Failed to upload image");n(s,T),v(!1)}catch(N){console.error("שגיאה בתהליך:",N),I({title:"שגיאה בתהליך",description:"אירעה שגיאה בתהליך. אנא נסה שוב.",variant:"destructive"}),v(!1)}};return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-8",children:p.jsx("div",{className:"w-full max-w-full md:max-w-xl xl:max-w-3xl bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 md:p-8",children:p.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-center md:text-right",children:"העלאת המלצה"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 text-center md:text-right",children:e}),p.jsx("div",{className:"w-full mb-6 md:mb-8",children:p.jsx(q8,{placeholder:"כתוב את ההמלצה שלך כאן...",value:s,onChange:N=>i(N.target.value),className:"w-full h-32 md:h-40 resize-none"})}),p.jsx("div",{className:"w-full mb-8 md:mb-10",children:p.jsx("div",{className:"flex items-center justify-center w-full",children:l?p.jsxs("div",{className:"relative w-full",children:[p.jsx("img",{src:f||"",alt:"Preview",className:"h-32 md:h-48 w-full object-cover rounded-lg"}),p.jsx(ze,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{u(null),m(null),E.current&&(E.current.value="")},children:"הסר"})]}):p.jsxs("label",{className:"flex flex-col w-full h-24 md:h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition duration-300",children:[p.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[p.jsx(UM,{className:"w-8 h-8 text-gray-400 mb-1"}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"העלה תמונה או וידאו"})]}),p.jsx("input",{ref:E,type:"file",className:"hidden",accept:"image/*,video/*",onChange:C})]})})}),p.jsxs("div",{className:"flex justify-between w-full mt-8 lg:mt-6 max-w-xl mx-auto md:mx-0",children:[p.jsx(ze,{onClick:k,disabled:w||!s.trim()||!l,className:"bg-gray-600 text-white hover:bg-gray-500 px-10 py-6 text-lg md:px-12",children:w?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"h-5 w-5 ml-2 animate-spin rounded-full border-2 border-white border-r-transparent"}),"שומר..."]}):"המשך"}),p.jsx(ze,{variant:"outline",onClick:r,disabled:w,className:"bg-gray-50 text-gray-700 hover:bg-gray-100 px-8 py-6 text-lg md:px-10",children:"חזור"})]})]})})})}function Lq(t,e,n){return new Promise((r,s)=>{try{const i=new URL("https://www.facebook.com/sharer/sharer.php");i.searchParams.append("u",t||window.location.href),e&&i.searchParams.append("quote",e);const l=550,u=450,f=(window.screen.width-l)/2,m=(window.screen.height-u)/2,w=window.open(i.toString(),"שתף בפייסבוק",`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${l}, height=${u}, top=${m}, left=${f}`);if(w){console.log("חלון שיתוף פייסבוק נפתח בהצלחה");const v=setInterval(()=>{w.closed&&(clearInterval(v),r({success:!0}))},1e3);r({success:!0})}else console.error("לא ניתן לפתוח את חלון השיתוף. ייתכן שחוסם חלונות קופצים מופעל."),s(new Error("לא ניתן לפתוח את חלון השיתוף"))}catch(i){console.error("שגיאה בשיתוף לפייסבוק:",i),s(i)}})}function Fq({businessName:t,recommendationText:e,imageUrl:n,recommendationId:r,onBack:s,onComplete:i}){const{toast:l}=ci();yr();const[u,f]=O.useState(!1),m=()=>`${window.location.origin}/recommendation/${r}`,w=async()=>{f(!0);try{const v=`המלצה על ${t}: ${e}`;console.log("מנסה לשתף בפייסבוק עם התמונה:",n),await Lq(m(),v,n),l({title:"נשלח בהצלחה"}),i()}catch(v){console.error("שגיאה בשיתוף:",v),l({title:"שגיאה בשיתוף",description:"לא הצלחנו לשתף את ההמלצה בפייסבוק. אנא נסה שוב מאוחר יותר.",variant:"destructive"})}finally{f(!1)}};return p.jsx("div",{className:"min-h-screen flex flex-col items-center px-4 py-8 md:px-8 lg:py-12",children:p.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-8 lg:mb-12",children:[p.jsx(n2,{className:"h-12 w-12 text-primary-500 mx-auto mb-4"}),p.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold mb-3",children:"שיתוף ברשתות"}),p.jsxs("p",{className:"text-gray-600 text-lg max-w-2xl mx-auto",children:["שתף את ההמלצה שלך ברשתות החברתיות כדי לעזור לחברים שלך לגלות את ",t]})]}),p.jsx("div",{className:"w-full flex flex-col items-center mb-8",children:p.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-md w-full max-w-lg",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-right",children:"שתף עם חברים"}),p.jsxs("div",{className:"mb-6",children:[p.jsx("p",{className:"text-base font-medium mb-2 text-center",children:"הקישור להמלצה שלך:"}),p.jsxs("div",{className:"flex items-center justify-between bg-gray-50 border border-gray-200 rounded-lg p-3",children:[p.jsx("div",{className:"truncate text-sm text-gray-600 text-left flex-grow",dir:"rtl",children:m()}),p.jsx(ze,{variant:"ghost",size:"sm",className:"mr-2 hover:bg-gray-200",onClick:()=>{navigator.clipboard.writeText(m()),l({title:"הקישור הועתק",description:"הקישור הועתק ללוח. כעת תוכל להדביק אותו בכל מקום."})},children:"העתק"})]}),p.jsx("p",{className:"text-sm text-gray-500 mt-2 text-right",children:"הקישור ייחודי להמלצה שלך ויוביל ישירות אליה"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs(ze,{className:"w-full bg-[#1877F2] hover:bg-[#166FE5] flex items-center justify-center py-6 text-lg font-semibold",onClick:w,disabled:u,children:[p.jsx("svg",{className:"h-6 w-6 ml-3 fill-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",children:p.jsx("path",{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"})}),"שתף בפייסבוק"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"group relative",children:[p.jsxs(ze,{className:"w-full bg-gray-400 hover:bg-gray-400 flex items-center justify-center py-4 text-base cursor-not-allowed opacity-70",disabled:!0,children:[p.jsx("svg",{className:"h-5 w-5 ml-2 fill-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:p.jsx("path",{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"})}),"אינסטגרם"]}),p.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-white text-gray-800 text-sm rounded-lg p-2 border border-gray-200 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none whitespace-nowrap z-50",children:"יתווסף בהמשך"})]}),p.jsxs("div",{className:"group relative",children:[p.jsxs(ze,{className:"w-full bg-gray-400 hover:bg-gray-400 flex items-center justify-center py-4 text-base cursor-not-allowed opacity-70",disabled:!0,children:[p.jsx("svg",{className:"h-5 w-5 ml-2 fill-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:p.jsx("path",{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"})}),"טיקטוק"]}),p.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-white text-gray-800 text-sm rounded-lg p-2 border border-gray-200 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none whitespace-nowrap z-50",children:"יתווסף בהמשך"})]})]})]})]})}),p.jsxs("div",{className:"flex justify-between w-full mt-8 lg:mt-6 max-w-xl mx-auto",children:[p.jsx(ze,{onClick:i,disabled:u,className:"bg-gray-600 text-white hover:bg-gray-500 px-10 py-6 text-lg",children:"סיום"}),p.jsx(ze,{variant:"outline",onClick:s,disabled:u,className:"bg-gray-50 text-gray-700 hover:bg-gray-100 px-8 py-6 text-lg",children:"חזור"})]})]})})}function jq(){const{businessId:t}=Yf(),[,e]=bl(),{toast:n}=ci(),{user:r,isAuthenticated:s}=yr(),[i,l]=O.useState("create"),[u,f]=O.useState(null),[m,w]=O.useState(!0),[v,E]=O.useState(null);O.useEffect(()=>{async function N(){if(!t){e("/");return}try{const T=await __(t);if(!T){n({title:"עסק לא נמצא",description:"לא ניתן למצוא את העסק המבוקש",variant:"destructive"}),e("/");return}f(T)}catch(T){console.error("שגיאה בטעינת נתוני העסק:",T),n({title:"שגיאה בטעינת נתוני העסק",description:"אנא נסה שוב מאוחר יותר",variant:"destructive"}),e("/")}finally{w(!1)}}if(!s){n({title:"נדרשת התחברות",description:"יש להתחבר כדי לשתף המלצות"}),e(`/auth?redirect=/business/${t}/scan`);return}N()},[t,e,n,s]);const I=async(N,T,S)=>{try{if(w(!0),!u)throw new Error("פרטי העסק אינם זמינים");const V={businessId:N,businessName:u.name||"",businessImage:u.image||"",text:T,imageUrl:S,userId:(r==null?void 0:r.uid)||"anonymous",userName:(r==null?void 0:r.displayName)||"משתמש אנונימי",userPhotoURL:(r==null?void 0:r.photoURL)||"",rating:5,discount:u.discount||"10% הנחה",savedCount:0,createdAt:new Date().toISOString()};console.log("יוצר המלצה חדשה:",V);let $;try{$=await SW(V),console.log("המלצה נשמרה בהצלחה:",$)}catch(L){console.error("שגיאה בשמירת המלצה:",L),$={id:`rec_${Date.now()}`,...V},n({title:"שימו לב",description:"ההמלצה נשמרה באופן זמני. חלק מהפונקציונליות עשויה לא לעבוד באופן מלא."})}const Y={id:typeof $=="object"&&$.id?$.id:`rec_${Date.now()}`,text:T,imageUrl:S};E(Y);const M=typeof $=="object"&&$.id?$.id:Y.id,j=window.location.origin+"/recommendation/"+M;console.log("נוצר קישור ייחודי להמלצה:",j),l("share")}catch(V){console.error("Error in recommendation creation flow:",V),n({title:"שגיאה ביצירת המלצה",description:"אירעה שגיאה ביצירת ההמלצה. אנא נסה שוב.",variant:"destructive"})}finally{w(!1)}},P=()=>{l("complete")},C=()=>{i==="share"?l("create"):e("/")},k=()=>{e("/")};return m?p.jsx("div",{className:"container mx-auto p-4 text-center",children:p.jsxs("div",{className:"animate-pulse",children:[p.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mx-auto mb-4"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mx-auto mb-8"}),p.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded-md mx-auto mb-8"}),p.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded-md w-1/4 mx-auto"})]})}):i==="complete"?p.jsx("div",{className:"container mx-auto p-4 text-center",children:p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 max-w-full md:max-w-xl xl:max-w-3xl mx-auto",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("svg",{className:"h-16 w-16 text-green-500 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),p.jsx("h2",{className:"text-xl font-bold mb-2",children:"תודה על השיתוף!"}),p.jsx("p",{className:"text-gray-600 mb-6",children:"ההמלצה שלך פורסמה בהצלחה. אתה מוזמן לקרוא המלצות נוספות או לשתף המלצות על עסקים נוספים."})]}),p.jsxs("div",{className:"flex flex-col space-y-3",children:[p.jsx(ze,{onClick:k,className:"w-full",children:"חזרה לדף הבית"}),p.jsx(ze,{variant:"outline",onClick:()=>e("/profile"),className:"w-full",children:"צפייה בהמלצות"})]})]})}):p.jsx("div",{className:"container mx-auto p-4",children:p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 max-w-full md:max-w-xl xl:max-w-3xl mx-auto",children:[i==="create"&&u&&p.jsx(Mq,{businessId:t||"",businessName:u.name,onComplete:(N,T)=>{I(t||"temp_id",N,T)},onBack:C}),i==="share"&&v&&u&&p.jsx(Fq,{businessName:u.name,recommendationText:v.text,imageUrl:v.imageUrl,recommendationId:v.id,onBack:C,onComplete:P})]})})}function Bq(){var L,G,X,H;const[t,e]=bl(),n=Yf(),{toast:r}=ci(),{user:s}=yr(),[i,l]=O.useState(!0),[u,f]=O.useState(null),[m,w]=O.useState(null),E=new URLSearchParams(window.location.search).get("referrer");O.useEffect(()=>{async function z(){const ee=n.id;if(console.log("מחפש המלצה עם מזהה:",ee),!ee)return console.error("חסר מזהה המלצה"),null;try{const xe=await p6(100);return console.log("כל ההמלצות שנטענו:",xe),xe.find(we=>{const oe=we.id===ee,ue=we.id&&we.id.includes&&we.id.includes(ee);return oe||ue})}catch(xe){return console.error("שגיאה בחיפוש המלצה:",xe),null}}async function de(){try{if(l(!0),!n.id){r({title:"שגיאה",description:"מזהה המלצה חסר",variant:"destructive"}),e("/");return}console.log("מחפש המלצה לפי מזהה:",n.id);const ee=await z();if(ee){console.log("נמצאה ההמלצה!",ee);const xe=ee,we={id:xe.id,businessId:xe.businessId,businessName:xe.businessName||"עסק לא ידוע",description:xe.text||xe.description||"אין תיאור",discount:xe.discount||"10% הנחה",rating:xe.rating||5,imageUrl:xe.imageUrl||"",expiryDate:xe.validUntil||new Date(Date.now()+30*24*60*60*1e3).toISOString(),savedCount:xe.savedCount||0,creator:{id:xe.userId||E||"user-1",name:xe.userName||"יוצר ההמלצה",photoUrl:xe.userPhotoURL||""}};f(we);try{const oe=await __(we.businessId);if(oe&&typeof oe=="object"){const ue={id:oe.id||"",name:oe.name||"",category:oe.category||"",description:oe.description||"",address:oe.address||"",image:oe.image||"",businessImage:oe.businessImage||void 0};w(ue)}}catch(oe){console.error("שגיאה בטעינת פרטי העסק:",oe)}}else{console.warn("לא נמצאה המלצה מתאימה, מציג מידע לדוגמה");const xe={id:n.id,businessId:"business-demo",businessName:"עסק לדוגמה",description:"זו המלצה לדוגמה שנוצרה בגלל שלא מצאנו את ההמלצה המקורית.",discount:"15% הנחה",rating:4.5,imageUrl:"",expiryDate:new Date(Date.now()+30*24*60*60*1e3).toISOString(),savedCount:0,creator:{id:E||"user-demo",name:"משתמש לדוגמה",photoUrl:""}};f(xe),w({id:"business-demo",name:"עסק לדוגמה",category:"עסק כללי",description:"זהו עסק לדוגמה שנוצר כי לא נמצא העסק המקורי.",address:"רחוב לדוגמה 123, תל אביב",image:""})}}catch(ee){console.error("שגיאה בטעינת המלצה:",ee),r({title:"שגיאה בטעינת המלצה",description:"לא ניתן לטעון את המלצה המבוקשת.",variant:"destructive"})}finally{l(!1)}}de()},[n.id,r,e,E]);const I=async()=>{var z,de,ee;if(!s){r({title:"נדרשת התחברות",description:"עליך להתחבר כדי לשמור המלצות",variant:"destructive"}),e("/login");return}try{if(u){if(((z=u.creator)==null?void 0:z.id)===s.uid){r({title:"לא ניתן לשמור",description:"אתה לא יכול לשמור המלצה שיצרת בעצמך",variant:"destructive"});return}console.log("שומר המלצה:",{recommendationId:u.id,creatorId:(de=u.creator)==null?void 0:de.id,currentUserId:s.uid,isOwnRecommendation:((ee=u.creator)==null?void 0:ee.id)===s.uid}),await E_(s.uid,u.id),r({title:"נשמר בהצלחה",description:"ההמלצה נשמרה באיזור האישי שלך"})}}catch(xe){console.error("שגיאה בשמירת המלצה:",xe),r({title:"שגיאה בשמירה",description:"לא ניתן לשמור את ההמלצה. אנא נסה שוב מאוחר יותר.",variant:"destructive"})}},P=()=>{e("/")},C=async z=>{var de;if(!s){r({title:"נדרשת התחברות",description:"עליך להיות מחובר כדי לדרג המלצות",variant:"destructive"});return}if(u){if(((de=u.creator)==null?void 0:de.id)===s.uid){r({title:"לא ניתן לדרג",description:"אתה לא יכול לדרג המלצה שיצרת בעצמך",variant:"destructive"});return}try{await dp(u.id,z,s.uid),f(ee=>ee&&{...ee,rating:z}),r({title:"דירוג נשמר",description:`דירגת את ההמלצה ב-${z} כוכבים`})}catch(ee){console.error("Error rating recommendation:",ee),r({title:"שגיאה בדירוג",description:"לא ניתן לשמור את הדירוג. אנא נסה שוב מאוחר יותר.",variant:"destructive"})}}};if(i)return p.jsx("div",{className:"flex justify-center items-center min-h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})});if(!u)return p.jsx("div",{className:"container mx-auto py-8 px-4",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4",children:"לא נמצאה המלצה"}),p.jsx("p",{className:"text-gray-600 mb-6",children:"ההמלצה שחיפשת אינה קיימת או שהוסרה."}),p.jsx(ze,{onClick:P,children:"חזרה לדף הבית"})]})});const k=`${window.location.origin}/recommendation/${u.id}`,N=(m==null?void 0:m.name)||u.businessName||"עסק לא ידוע",T=(m==null?void 0:m.image)||u.imageUrl||"",S=(m==null?void 0:m.category)||"",V=u.description||"אין תיאור",$=u.discount||"10% הנחה";typeof u.savedCount=="number"&&u.savedCount;const Y=u.expiryDate?new Date(u.expiryDate).toLocaleDateString("he-IL"):"",M=((L=u.creator)==null?void 0:L.name)||"ממליץ אנונימי",j=((G=u.creator)==null?void 0:G.photoUrl)||`https://ui-avatars.com/api/?name=${encodeURIComponent(M)}`;return p.jsx("div",{className:"container mx-auto py-8 px-4",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 max-w-6xl mx-auto",children:[p.jsx("div",{className:"lg:col-span-3 order-2 lg:order-1",children:p.jsx(on,{className:"p-6 bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-200 sticky top-4",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex justify-center items-center mb-4",children:p.jsx("div",{className:"bg-amber-500 text-white rounded-full p-4",children:p.jsx(go,{className:"h-8 w-8 fill-current"})})}),p.jsx("h3",{className:"text-2xl font-bold text-amber-800 mb-2",children:u.rating?`${u.rating}/5`:"טרם דורג"}),p.jsx("p",{className:"text-amber-700 text-sm mb-4",children:"דירוג ההמלצה"}),p.jsx("div",{className:"flex justify-center space-x-1 mb-6",children:[1,2,3,4,5].map(z=>{var de;return p.jsx("button",{onClick:()=>C(z),className:"border-none bg-transparent p-0 m-0 outline-none focus:outline-none cursor-pointer hover:scale-110 transition-transform",disabled:!s||!u||((de=u.creator)==null?void 0:de.id)===s.uid,children:p.jsx(go,{className:`h-6 w-6 ${z<=(u.rating||0)?"text-amber-400 fill-current":"text-gray-300 hover:text-amber-200"}`})},z)})}),s&&((X=u.creator)==null?void 0:X.id)!==s.uid?p.jsx("p",{className:"text-sm text-amber-600 text-center",children:"לחץ על כוכב כדי לדרג את ההמלצה"}):s&&((H=u.creator)==null?void 0:H.id)===s.uid?p.jsx("p",{className:"text-sm text-gray-500 text-center",children:"זוהי ההמלצה שלך"}):p.jsx(ze,{variant:"outline",className:"w-full border-amber-300 text-amber-700 hover:bg-amber-100",size:"lg",onClick:()=>{r({title:"נדרשת התחברות",description:"עליך להיות מחובר כדי לדרג המלצות",variant:"destructive"})},children:"התחבר כדי לדרג"})]})})}),p.jsx("div",{className:"lg:col-span-9 order-1 lg:order-2",children:p.jsxs(on,{className:"p-0 overflow-hidden shadow-lg",children:[p.jsxs("div",{className:"relative h-64 w-full",children:[p.jsx("img",{src:T,alt:N,className:"w-full h-full object-cover"}),p.jsx("div",{className:"absolute top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-full font-bold text-lg shadow-lg",children:$})]}),p.jsxs("div",{className:"p-6",children:[p.jsx("div",{className:"flex items-center justify-between mb-4",children:p.jsx("h1",{className:"text-3xl font-bold",children:N})}),p.jsx("div",{className:"mb-4 text-gray-600 text-lg",children:S}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold mb-3",children:"המלצה"}),p.jsx("p",{className:"text-gray-800 text-lg leading-relaxed",children:V})]}),p.jsx(md,{className:"my-6"}),p.jsxs("div",{className:"flex items-center mb-6",children:[p.jsx("img",{src:j,alt:M,className:"h-12 w-12 rounded-full ml-4"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-gray-500",children:'הומלץ ע"י'}),p.jsx("p",{className:"text-lg font-semibold",children:M})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[p.jsxs(ze,{className:"w-full flex items-center justify-center h-12",onClick:()=>{navigator.clipboard.writeText(k),r({title:"הקישור הועתק",description:"הקישור הועתק ללוח. כעת תוכל להדביק אותו בכל מקום."})},variant:"outline",children:[p.jsx(RM,{className:"h-5 w-5 ml-2"}),"העתק קישור"]}),p.jsx(ze,{className:"w-full flex items-center justify-center bg-[#1877F2] hover:bg-[#166FE5] text-white h-12",onClick:()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(k)}`,"_blank"),children:"שתף בפייסבוק"})]}),p.jsx("div",{className:"flex justify-center mb-6",children:p.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[p.jsx("span",{className:"text-sm",children:"בתוקף עד"}),p.jsx("span",{className:"text-sm font-semibold",children:Y})]})}),p.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[p.jsx(ze,{className:"w-full h-12 text-lg",onClick:I,children:"שמור באיזור האישי"}),p.jsxs(ze,{className:"w-full h-12",variant:"outline",onClick:P,children:[p.jsx(EM,{className:"h-4 w-4 ml-1"}),"חזרה לדף הבית"]})]})]})]})})]})})}var Be;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Be||(Be={}));var KA=new Map([[Be.QR_CODE,"QR_CODE"],[Be.AZTEC,"AZTEC"],[Be.CODABAR,"CODABAR"],[Be.CODE_39,"CODE_39"],[Be.CODE_93,"CODE_93"],[Be.CODE_128,"CODE_128"],[Be.DATA_MATRIX,"DATA_MATRIX"],[Be.MAXICODE,"MAXICODE"],[Be.ITF,"ITF"],[Be.EAN_13,"EAN_13"],[Be.EAN_8,"EAN_8"],[Be.PDF_417,"PDF_417"],[Be.RSS_14,"RSS_14"],[Be.RSS_EXPANDED,"RSS_EXPANDED"],[Be.UPC_A,"UPC_A"],[Be.UPC_E,"UPC_E"],[Be.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),XA;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(XA||(XA={}));function Vq(t){return Object.values(Be).includes(t)}var Jg;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Jg||(Jg={}));var Uq=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Jg.SCAN_TYPE_CAMERA,Jg.SCAN_TYPE_FILE],t}(),K8=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!KA.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,KA.get(e))},t}(),YA=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Uw;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Uw||(Uw={}));var zq=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Uw.UNKWOWN_ERROR}},t}(),Hq=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Mo(t){return typeof t>"u"||t===null}var xu=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),X8=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(s),l=Object.keys(e),u=0,f=l;u<f.length;u++){var m=f[u];if(i.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},t}(),zw={exports:{}};(function(t,e){(function(n,r){r(e)})(zd,function(n){function r(F){return F==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,o){F.__proto__=o}||function(F,o){for(var a in o)o.hasOwnProperty(a)&&(F[a]=o[a])};function i(F,o){s(F,o);function a(){this.constructor=F}F.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}function l(F,o){var a=Object.setPrototypeOf;a?a(F,o):F.__proto__=o}function u(F,o){o===void 0&&(o=F.constructor);var a=Error.captureStackTrace;a&&a(F,o)}var f=function(F){i(o,F);function o(a){var c=this.constructor,d=F.call(this,a)||this;return Object.defineProperty(d,"name",{value:c.name,enumerable:!1}),l(d,c.prototype),u(d),d}return o}(Error);class m extends f{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}m.kind="Exception";class w extends m{}w.kind="ArgumentException";class v extends m{}v.kind="IllegalArgumentException";class E{constructor(o){if(this.binarizer=o,o===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,a){return this.binarizer.getBlackRow(o,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,a,c,d){const h=this.binarizer.getLuminanceSource().crop(o,a,c,d);return new E(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new E(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new E(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends m{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class P{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class C{static arraycopy(o,a,c,d,h){for(;h--;)c[d++]=o[a++]}static currentTimeMillis(){return Date.now()}}class k extends m{}k.kind="IndexOutOfBoundsException";class N extends k{constructor(o=void 0,a=void 0){super(a),this.index=o,this.message=a}}N.kind="ArrayIndexOutOfBoundsException";class T{static fill(o,a){for(let c=0,d=o.length;c<d;c++)o[c]=a}static fillWithin(o,a,c,d){T.rangeCheck(o.length,a,c);for(let h=a;h<c;h++)o[h]=d}static rangeCheck(o,a,c){if(a>c)throw new v("fromIndex("+a+") > toIndex("+c+")");if(a<0)throw new N(a);if(c>o)throw new N(c)}static asList(...o){return o}static create(o,a,c){return Array.from({length:o}).map(h=>Array.from({length:a}).fill(c))}static createInt32Array(o,a,c){return Array.from({length:o}).map(h=>Int32Array.from({length:a}).fill(c))}static equals(o,a){if(!o||!a||!o.length||!a.length||o.length!==a.length)return!1;for(let c=0,d=o.length;c<d;c++)if(o[c]!==a[c])return!1;return!0}static hashCode(o){if(o===null)return 0;let a=1;for(const c of o)a=31*a+c;return a}static fillUint8Array(o,a){for(let c=0;c!==o.length;c++)o[c]=a}static copyOf(o,a){return o.slice(0,a)}static copyOfUint8Array(o,a){if(o.length<=a){const c=new Uint8Array(a);return c.set(o),c}return o.slice(0,a)}static copyOfRange(o,a,c){const d=c-a,h=new Int32Array(d);return C.arraycopy(o,a,h,0,d),h}static binarySearch(o,a,c){c===void 0&&(c=T.numberComparator);let d=0,h=o.length-1;for(;d<=h;){const g=h+d>>1,y=c(a,o[g]);if(y>0)d=g+1;else if(y<0)h=g-1;else return g}return-d-1}static numberComparator(o,a){return o-a}}class S{static numberOfTrailingZeros(o){let a;if(o===0)return 32;let c=31;return a=o<<16,a!==0&&(c-=16,o=a),a=o<<8,a!==0&&(c-=8,o=a),a=o<<4,a!==0&&(c-=4,o=a),a=o<<2,a!==0&&(c-=2,o=a),c-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let a=1;return o>>>16||(a+=16,o<<=16),o>>>24||(a+=8,o<<=8),o>>>28||(a+=4,o<<=4),o>>>30||(a+=2,o<<=2),a-=o>>>31,a}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,a){return Math.trunc(o/a)}static parseInt(o,a=void 0){return parseInt(o,a)}}S.MIN_VALUE_32_BITS=-2147483648,S.MAX_VALUE=Number.MAX_SAFE_INTEGER;class V{constructor(o,a){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,a==null?this.bits=V.makeArray(o):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const a=V.makeArray(o);C.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const a=this.size;if(o>=a)return a;const c=this.bits;let d=Math.floor(o/32),h=c[d];h&=~((1<<(o&31))-1);const g=c.length;for(;h===0;){if(++d===g)return a;h=c[d]}const y=d*32+S.numberOfTrailingZeros(h);return y>a?a:y}getNextUnset(o){const a=this.size;if(o>=a)return a;const c=this.bits;let d=Math.floor(o/32),h=~c[d];h&=~((1<<(o&31))-1);const g=c.length;for(;h===0;){if(++d===g)return a;h=~c[d]}const y=d*32+S.numberOfTrailingZeros(h);return y>a?a:y}setBulk(o,a){this.bits[Math.floor(o/32)]=a}setRange(o,a){if(a<o||o<0||a>this.size)throw new v;if(a===o)return;a--;const c=Math.floor(o/32),d=Math.floor(a/32),h=this.bits;for(let g=c;g<=d;g++){const y=g>c?0:o&31,b=(2<<(g<d?31:a&31))-(1<<y);h[g]|=b}}clear(){const o=this.bits.length,a=this.bits;for(let c=0;c<o;c++)a[c]=0}isRange(o,a,c){if(a<o||o<0||a>this.size)throw new v;if(a===o)return!0;a--;const d=Math.floor(o/32),h=Math.floor(a/32),g=this.bits;for(let y=d;y<=h;y++){const _=y>d?0:o&31,R=(2<<(y<h?31:a&31))-(1<<_)&4294967295;if((g[y]&R)!==(c?R:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,a){if(a<0||a>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let c=a;c>0;c--)this.appendBit((o>>c-1&1)===1)}appendBitArray(o){const a=o.size;this.ensureCapacity(this.size+a);for(let c=0;c<a;c++)this.appendBit(o.get(c))}xor(o){if(this.size!==o.size)throw new v("Sizes don't match");const a=this.bits;for(let c=0,d=a.length;c<d;c++)a[c]^=o.bits[c]}toBytes(o,a,c,d){for(let h=0;h<d;h++){let g=0;for(let y=0;y<8;y++)this.get(o)&&(g|=1<<7-y),o++;a[c+h]=g}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),c=a+1,d=this.bits;for(let h=0;h<c;h++){let g=d[h];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,o[a-h]=g}if(this.size!==c*32){const h=c*32-this.size;let g=o[0]>>>h;for(let y=1;y<c;y++){const _=o[y];g|=_<<32-h,o[y-1]=g,g=_>>>h}o[c-1]=g}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof V))return!1;const a=o;return this.size===a.size&&T.equals(this.bits,a.bits)}hashCode(){return 31*this.size+T.hashCode(this.bits)}toString(){let o="";for(let a=0,c=this.size;a<c;a++)a&7||(o+=" "),o+=this.get(a)?"X":".";return o}clone(){return new V(this.size,this.bits.slice())}}var $;(function(F){F[F.OTHER=0]="OTHER",F[F.PURE_BARCODE=1]="PURE_BARCODE",F[F.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",F[F.TRY_HARDER=3]="TRY_HARDER",F[F.CHARACTER_SET=4]="CHARACTER_SET",F[F.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",F[F.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",F[F.ASSUME_GS1=7]="ASSUME_GS1",F[F.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",F[F.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",F[F.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})($||($={}));var Y=$;class M extends m{static getFormatInstance(){return new M}}M.kind="FormatException";var j;(function(F){F[F.Cp437=0]="Cp437",F[F.ISO8859_1=1]="ISO8859_1",F[F.ISO8859_2=2]="ISO8859_2",F[F.ISO8859_3=3]="ISO8859_3",F[F.ISO8859_4=4]="ISO8859_4",F[F.ISO8859_5=5]="ISO8859_5",F[F.ISO8859_6=6]="ISO8859_6",F[F.ISO8859_7=7]="ISO8859_7",F[F.ISO8859_8=8]="ISO8859_8",F[F.ISO8859_9=9]="ISO8859_9",F[F.ISO8859_10=10]="ISO8859_10",F[F.ISO8859_11=11]="ISO8859_11",F[F.ISO8859_13=12]="ISO8859_13",F[F.ISO8859_14=13]="ISO8859_14",F[F.ISO8859_15=14]="ISO8859_15",F[F.ISO8859_16=15]="ISO8859_16",F[F.SJIS=16]="SJIS",F[F.Cp1250=17]="Cp1250",F[F.Cp1251=18]="Cp1251",F[F.Cp1252=19]="Cp1252",F[F.Cp1256=20]="Cp1256",F[F.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",F[F.UTF8=22]="UTF8",F[F.ASCII=23]="ASCII",F[F.Big5=24]="Big5",F[F.GB18030=25]="GB18030",F[F.EUC_KR=26]="EUC_KR"})(j||(j={}));class L{constructor(o,a,c,...d){this.valueIdentifier=o,this.name=c,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=d,L.VALUE_IDENTIFIER_TO_ECI.set(o,this),L.NAME_TO_ECI.set(c,this);const h=this.values;for(let g=0,y=h.length;g!==y;g++){const _=h[g];L.VALUES_TO_ECI.set(_,this)}for(const g of d)L.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new M("incorect value");const a=L.VALUES_TO_ECI.get(o);if(a===void 0)throw new M("incorect value");return a}static getCharacterSetECIByName(o){const a=L.NAME_TO_ECI.get(o);if(a===void 0)throw new M("incorect value");return a}equals(o){if(!(o instanceof L))return!1;const a=o;return this.getName()===a.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(j.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(j.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(j.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(j.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(j.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(j.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(j.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(j.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(j.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(j.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(j.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(j.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(j.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(j.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(j.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(j.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(j.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(j.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(j.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(j.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(j.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(j.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(j.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(j.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(j.Big5,28,"Big5"),L.GB18030=new L(j.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(j.EUC_KR,30,"EUC_KR","EUC-KR");class G extends m{}G.kind="UnsupportedOperationException";class X{static decode(o,a){const c=this.encodingName(a);return this.customDecoder?this.customDecoder(o,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(o,c):new TextDecoder(c).decode(o)}static shouldDecodeOnFallback(o){return!X.isBrowser()&&o==="ISO-8859-1"}static encode(o,a){const c=this.encodingName(a);return this.customEncoder?this.customEncoder(o,c):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof L?o:L.getCharacterSetECIByName(o)}static decodeFallback(o,a){const c=this.encodingCharacterSet(a);if(X.isDecodeFallbackSupported(c)){let d="";for(let h=0,g=o.length;h<g;h++){let y=o[h].toString(16);y.length<2&&(y="0"+y),d+="%"+y}return decodeURIComponent(d)}if(c.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new G(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(L.UTF8)||o.equals(L.ISO8859_1)||o.equals(L.ASCII)}static encodeFallback(o){const c=btoa(unescape(encodeURIComponent(o))).split(""),d=[];for(let h=0;h<c.length;h++)d.push(c[h].charCodeAt(0));return new Uint8Array(d)}}class H{static castAsNonUtf8Char(o,a=null){const c=a?a.getName():this.ISO88591;return X.decode(new Uint8Array([o]),c)}static guessEncoding(o,a){if(a!=null&&a.get(Y.CHARACTER_SET)!==void 0)return a.get(Y.CHARACTER_SET).toString();const c=o.length;let d=!0,h=!0,g=!0,y=0,_=0,b=0,R=0,B=0,U=0,K=0,Z=0,J=0,se=0,ce=0;const be=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let Ce=0;Ce<c&&(d||h||g);Ce++){const ve=o[Ce]&255;g&&(y>0?ve&128?y--:g=!1:ve&128&&(ve&64?(y++,ve&32?(y++,ve&16?(y++,ve&8?g=!1:R++):b++):_++):g=!1)),d&&(ve>127&&ve<160?d=!1:ve>159&&(ve<192||ve===215||ve===247)&&ce++),h&&(B>0?ve<64||ve===127||ve>252?h=!1:B--:ve===128||ve===160||ve>239?h=!1:ve>160&&ve<224?(U++,Z=0,K++,K>J&&(J=K)):ve>127?(B++,K=0,Z++,Z>se&&(se=Z)):(K=0,Z=0))}return g&&y>0&&(g=!1),h&&B>0&&(h=!1),g&&(be||_+b+R>0)?H.UTF8:h&&(H.ASSUME_SHIFT_JIS||J>=3||se>=3)?H.SHIFT_JIS:d&&h?J===2&&U===2||ce*10>=c?H.SHIFT_JIS:H.ISO88591:d?H.ISO88591:h?H.SHIFT_JIS:g?H.UTF8:H.PLATFORM_DEFAULT_ENCODING}static format(o,...a){let c=-1;function d(g,y,_,b,R,B){if(g==="%%")return"%";if(a[++c]===void 0)return;g=b?parseInt(b.substr(1)):void 0;let U=R?parseInt(R.substr(1)):void 0,K;switch(B){case"s":K=a[c];break;case"c":K=a[c][0];break;case"f":K=parseFloat(a[c]).toFixed(g);break;case"p":K=parseFloat(a[c]).toPrecision(g);break;case"e":K=parseFloat(a[c]).toExponential(g);break;case"x":K=parseInt(a[c]).toString(U||16);break;case"d":K=parseFloat(parseInt(a[c],U||10).toPrecision(g)).toFixed(0);break}K=typeof K=="object"?JSON.stringify(K):(+K).toString(U);let Z=parseInt(_),J=_&&_[0]+""=="0"?"0":" ";for(;K.length<Z;)K=y!==void 0?K+J:J+K;return K}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(h,d)}static getBytes(o,a){return X.encode(o,a)}static getCharCode(o,a=0){return o.charCodeAt(a)}static getCharAt(o){return String.fromCharCode(o)}}H.SHIFT_JIS=L.SJIS.getName(),H.GB2312="GB2312",H.ISO88591=L.ISO8859_1.getName(),H.EUC_JP="EUC_JP",H.UTF8=L.UTF8.getName(),H.PLATFORM_DEFAULT_ENCODING=H.UTF8,H.ASSUME_SHIFT_JIS=!1;class z{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=H.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,a,c){for(let d=a;a<a+c;d++)this.append(o[d]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,a){this.value=this.value.substr(0,o)+a+this.value.substr(o+1)}substring(o,a){return this.value.substring(o,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,a){this.value=this.value.substr(0,o)+a+this.value.substr(o+a.length)}}class de{constructor(o,a,c,d){if(this.width=o,this.height=a,this.rowSize=c,this.bits=d,a==null&&(a=o),this.height=a,o<1||a<1)throw new v("Both dimensions must be greater than 0");c==null&&(c=Math.floor((o+31)/32)),this.rowSize=c,d==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const a=o.length,c=o[0].length,d=new de(c,a);for(let h=0;h<a;h++){const g=o[h];for(let y=0;y<c;y++)g[y]&&d.set(y,h)}return d}static parseFromString(o,a,c){if(o===null)throw new v("stringRepresentation cannot be null");const d=new Array(o.length);let h=0,g=0,y=-1,_=0,b=0;for(;b<o.length;)if(o.charAt(b)===`
`||o.charAt(b)==="\r"){if(h>g){if(y===-1)y=h-g;else if(h-g!==y)throw new v("row lengths do not match");g=h,_++}b++}else if(o.substring(b,b+a.length)===a)b+=a.length,d[h]=!0,h++;else if(o.substring(b,b+c.length)===c)b+=c.length,d[h]=!1,h++;else throw new v("illegal character encountered: "+o.substring(b));if(h>g){if(y===-1)y=h-g;else if(h-g!==y)throw new v("row lengths do not match");_++}const R=new de(y,_);for(let B=0;B<h;B++)d[B]&&R.set(Math.floor(B%y),Math.floor(B/y));return R}get(o,a){const c=a*this.rowSize+Math.floor(o/32);return(this.bits[c]>>>(o&31)&1)!==0}set(o,a){const c=a*this.rowSize+Math.floor(o/32);this.bits[c]|=1<<(o&31)&4294967295}unset(o,a){const c=a*this.rowSize+Math.floor(o/32);this.bits[c]&=~(1<<(o&31)&4294967295)}flip(o,a){const c=a*this.rowSize+Math.floor(o/32);this.bits[c]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new v("input matrix dimensions do not match");const a=new V(Math.floor(this.width/32)+1),c=this.rowSize,d=this.bits;for(let h=0,g=this.height;h<g;h++){const y=h*c,_=o.getRow(h,a).getBitArray();for(let b=0;b<c;b++)d[y+b]^=_[b]}}clear(){const o=this.bits,a=o.length;for(let c=0;c<a;c++)o[c]=0}setRegion(o,a,c,d){if(a<0||o<0)throw new v("Left and top must be nonnegative");if(d<1||c<1)throw new v("Height and width must be at least 1");const h=o+c,g=a+d;if(g>this.height||h>this.width)throw new v("The region must fit inside the matrix");const y=this.rowSize,_=this.bits;for(let b=a;b<g;b++){const R=b*y;for(let B=o;B<h;B++)_[R+Math.floor(B/32)]|=1<<(B&31)&4294967295}}getRow(o,a){a==null||a.getSize()<this.width?a=new V(this.width):a.clear();const c=this.rowSize,d=this.bits,h=o*c;for(let g=0;g<c;g++)a.setBulk(g*32,d[h+g]);return a}setRow(o,a){C.arraycopy(a.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),a=this.getHeight();let c=new V(o),d=new V(o);for(let h=0,g=Math.floor((a+1)/2);h<g;h++)c=this.getRow(h,c),d=this.getRow(a-1-h,d),c.reverse(),d.reverse(),this.setRow(h,d),this.setRow(a-1-h,c)}getEnclosingRectangle(){const o=this.width,a=this.height,c=this.rowSize,d=this.bits;let h=o,g=a,y=-1,_=-1;for(let b=0;b<a;b++)for(let R=0;R<c;R++){const B=d[b*c+R];if(B!==0){if(b<g&&(g=b),b>_&&(_=b),R*32<h){let U=0;for(;!(B<<31-U&4294967295);)U++;R*32+U<h&&(h=R*32+U)}if(R*32+31>y){let U=31;for(;!(B>>>U);)U--;R*32+U>y&&(y=R*32+U)}}}return y<h||_<g?null:Int32Array.from([h,g,y-h+1,_-g+1])}getTopLeftOnBit(){const o=this.rowSize,a=this.bits;let c=0;for(;c<a.length&&a[c]===0;)c++;if(c===a.length)return null;const d=c/o;let h=c%o*32;const g=a[c];let y=0;for(;!(g<<31-y&4294967295);)y++;return h+=y,Int32Array.from([h,d])}getBottomRightOnBit(){const o=this.rowSize,a=this.bits;let c=a.length-1;for(;c>=0&&a[c]===0;)c--;if(c<0)return null;const d=Math.floor(c/o);let h=Math.floor(c%o)*32;const g=a[c];let y=31;for(;!(g>>>y);)y--;return h+=y,Int32Array.from([h,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof de))return!1;const a=o;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&T.equals(this.bits,a.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+T.hashCode(this.bits),o}toString(o="X ",a="  ",c=`
`){return this.buildToString(o,a,c)}buildToString(o,a,c){let d=new z;for(let h=0,g=this.height;h<g;h++){for(let y=0,_=this.width;y<_;y++)d.append(this.get(y,h)?o:a);d.append(c)}return d.toString()}clone(){return new de(this.width,this.height,this.rowSize,this.bits.slice())}}class ee extends m{static getNotFoundInstance(){return new ee}}ee.kind="NotFoundException";class xe extends P{constructor(o){super(o),this.luminances=xe.EMPTY,this.buckets=new Int32Array(xe.LUMINANCE_BUCKETS)}getBlackRow(o,a){const c=this.getLuminanceSource(),d=c.getWidth();a==null||a.getSize()<d?a=new V(d):a.clear(),this.initArrays(d);const h=c.getRow(o,this.luminances),g=this.buckets;for(let _=0;_<d;_++)g[(h[_]&255)>>xe.LUMINANCE_SHIFT]++;const y=xe.estimateBlackPoint(g);if(d<3)for(let _=0;_<d;_++)(h[_]&255)<y&&a.set(_);else{let _=h[0]&255,b=h[1]&255;for(let R=1;R<d-1;R++){const B=h[R+1]&255;(b*4-_-B)/2<y&&a.set(R),_=b,b=B}}return a}getBlackMatrix(){const o=this.getLuminanceSource(),a=o.getWidth(),c=o.getHeight(),d=new de(a,c);this.initArrays(a);const h=this.buckets;for(let _=1;_<5;_++){const b=Math.floor(c*_/5),R=o.getRow(b,this.luminances),B=Math.floor(a*4/5);for(let U=Math.floor(a/5);U<B;U++){const K=R[U]&255;h[K>>xe.LUMINANCE_SHIFT]++}}const g=xe.estimateBlackPoint(h),y=o.getMatrix();for(let _=0;_<c;_++){const b=_*a;for(let R=0;R<a;R++)(y[b+R]&255)<g&&d.set(R,_)}return d}createBinarizer(o){return new xe(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const a=this.buckets;for(let c=0;c<xe.LUMINANCE_BUCKETS;c++)a[c]=0}static estimateBlackPoint(o){const a=o.length;let c=0,d=0,h=0;for(let R=0;R<a;R++)o[R]>h&&(d=R,h=o[R]),o[R]>c&&(c=o[R]);let g=0,y=0;for(let R=0;R<a;R++){const B=R-d,U=o[R]*B*B;U>y&&(g=R,y=U)}if(d>g){const R=d;d=g,g=R}if(g-d<=a/16)throw new ee;let _=g-1,b=-1;for(let R=g-1;R>d;R--){const B=R-d,U=B*B*(g-R)*(c-o[R]);U>b&&(_=R,b=U)}return _<<xe.LUMINANCE_SHIFT}}xe.LUMINANCE_BITS=5,xe.LUMINANCE_SHIFT=8-xe.LUMINANCE_BITS,xe.LUMINANCE_BUCKETS=1<<xe.LUMINANCE_BITS,xe.EMPTY=Uint8ClampedArray.from([0]);class we extends xe{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),a=o.getWidth(),c=o.getHeight();if(a>=we.MINIMUM_DIMENSION&&c>=we.MINIMUM_DIMENSION){const d=o.getMatrix();let h=a>>we.BLOCK_SIZE_POWER;a&we.BLOCK_SIZE_MASK&&h++;let g=c>>we.BLOCK_SIZE_POWER;c&we.BLOCK_SIZE_MASK&&g++;const y=we.calculateBlackPoints(d,h,g,a,c),_=new de(a,c);we.calculateThresholdForBlock(d,h,g,a,c,y,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new we(o)}static calculateThresholdForBlock(o,a,c,d,h,g,y){const _=h-we.BLOCK_SIZE,b=d-we.BLOCK_SIZE;for(let R=0;R<c;R++){let B=R<<we.BLOCK_SIZE_POWER;B>_&&(B=_);const U=we.cap(R,2,c-3);for(let K=0;K<a;K++){let Z=K<<we.BLOCK_SIZE_POWER;Z>b&&(Z=b);const J=we.cap(K,2,a-3);let se=0;for(let be=-2;be<=2;be++){const Ce=g[U+be];se+=Ce[J-2]+Ce[J-1]+Ce[J]+Ce[J+1]+Ce[J+2]}const ce=se/25;we.thresholdBlock(o,Z,B,ce,d,y)}}}static cap(o,a,c){return o<a?a:o>c?c:o}static thresholdBlock(o,a,c,d,h,g){for(let y=0,_=c*h+a;y<we.BLOCK_SIZE;y++,_+=h)for(let b=0;b<we.BLOCK_SIZE;b++)(o[_+b]&255)<=d&&g.set(a+b,c+y)}static calculateBlackPoints(o,a,c,d,h){const g=h-we.BLOCK_SIZE,y=d-we.BLOCK_SIZE,_=new Array(c);for(let b=0;b<c;b++){_[b]=new Int32Array(a);let R=b<<we.BLOCK_SIZE_POWER;R>g&&(R=g);for(let B=0;B<a;B++){let U=B<<we.BLOCK_SIZE_POWER;U>y&&(U=y);let K=0,Z=255,J=0;for(let ce=0,be=R*d+U;ce<we.BLOCK_SIZE;ce++,be+=d){for(let Ce=0;Ce<we.BLOCK_SIZE;Ce++){const ve=o[be+Ce]&255;K+=ve,ve<Z&&(Z=ve),ve>J&&(J=ve)}if(J-Z>we.MIN_DYNAMIC_RANGE)for(ce++,be+=d;ce<we.BLOCK_SIZE;ce++,be+=d)for(let Ce=0;Ce<we.BLOCK_SIZE;Ce++)K+=o[be+Ce]&255}let se=K>>we.BLOCK_SIZE_POWER*2;if(J-Z<=we.MIN_DYNAMIC_RANGE&&(se=Z/2,b>0&&B>0)){const ce=(_[b-1][B]+2*_[b][B-1]+_[b-1][B-1])/4;Z<ce&&(se=ce)}_[b][B]=se}}return _}}we.BLOCK_SIZE_POWER=3,we.BLOCK_SIZE=1<<we.BLOCK_SIZE_POWER,we.BLOCK_SIZE_MASK=we.BLOCK_SIZE-1,we.MINIMUM_DIMENSION=we.BLOCK_SIZE*5,we.MIN_DYNAMIC_RANGE=24;class oe{constructor(o,a){this.width=o,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,a,c,d){throw new G("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new G("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new G("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let a=new z;for(let c=0;c<this.height;c++){const d=this.getRow(c,o);for(let h=0;h<this.width;h++){const g=d[h]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",a.append(y)}a.append(`
`)}return a.toString()}}class ue extends oe{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,a){const c=this.delegate.getRow(o,a),d=this.getWidth();for(let h=0;h<d;h++)c[h]=255-(c[h]&255);return c}getMatrix(){const o=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(a);for(let d=0;d<a;d++)c[d]=255-(o[d]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(o,a,c,d){return new ue(this.delegate.crop(o,a,c,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ue(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ue(this.delegate.rotateCounterClockwise45())}}class Ie extends oe{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=Ie.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const a=o.getContext("2d").getImageData(0,0,o.width,o.height);return Ie.toGrayscaleBuffer(a.data,o.width,o.height)}static toGrayscaleBuffer(o,a,c){const d=new Uint8ClampedArray(a*c);for(let h=0,g=0,y=o.length;h<y;h+=4,g++){let _;if(o[h+3]===0)_=255;else{const R=o[h],B=o[h+1],U=o[h+2];_=306*R+601*B+117*U+512>>10}d[g]=_}return d}getRow(o,a){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);const c=this.getWidth(),d=o*c;return a===null?a=this.buffer.slice(d,d+c):(a.length<c&&(a=new Uint8ClampedArray(c)),a.set(this.buffer.slice(d,d+c))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,a,c,d){return super.crop(o,a,c,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const a=this.getTempCanvasElement(),c=a.getContext("2d"),d=o*Ie.DEGREE_TO_RADIANS,h=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(d))*h+Math.abs(Math.sin(d))*g),_=Math.ceil(Math.abs(Math.sin(d))*h+Math.abs(Math.cos(d))*g);return a.width=y,a.height=_,c.translate(y/2,_/2),c.rotate(d),c.drawImage(this.canvas,h/-2,g/-2),this.buffer=Ie.makeBufferFromCanvasImageData(a),this}invert(){return new ue(this)}}Ie.DEGREE_TO_RADIANS=Math.PI/180;class Ge{constructor(o,a,c){this.deviceId=o,this.label=a,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var He=(globalThis||zd||self||window||void 0)&&(globalThis||zd||self||window||void 0).__awaiter||function(F,o,a,c){function d(h){return h instanceof a?h:new a(function(g){g(h)})}return new(a||(a=Promise))(function(h,g){function y(R){try{b(c.next(R))}catch(B){g(B)}}function _(R){try{b(c.throw(R))}catch(B){g(B)}}function b(R){R.done?h(R.value):d(R.value).then(y,_)}b((c=c.apply(F,o||[])).next())})};class at{constructor(o,a=500,c){this.reader=o,this.timeBetweenScansMillis=a,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return He(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const c of o){const d=c.kind==="video"?"videoinput":c.kind;if(d!=="videoinput")continue;const h=c.deviceId||c.id,g=c.label||`Video device ${a.length+1}`,y=c.groupId,_={deviceId:h,label:g,kind:d,groupId:y};a.push(_)}return a})}getVideoInputDevices(){return He(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new Ge(a.deviceId,a.label))})}findDeviceById(o){return He(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(c=>c.deviceId===o):null})}decodeFromInputVideoDevice(o,a){return He(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,a)})}decodeOnceFromVideoDevice(o,a){return He(this,void 0,void 0,function*(){this.reset();let c;o?c={deviceId:{exact:o}}:c={facingMode:"environment"};const d={video:c};return yield this.decodeOnceFromConstraints(d,a)})}decodeOnceFromConstraints(o,a){return He(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(c,a)})}decodeOnceFromStream(o,a){return He(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(o,a);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(o,a,c){return He(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,a,c)})}decodeFromVideoDevice(o,a,c){return He(this,void 0,void 0,function*(){let d;o?d={deviceId:{exact:o}}:d={facingMode:"environment"};const h={video:d};return yield this.decodeFromConstraints(h,a,c)})}decodeFromConstraints(o,a,c){return He(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(d,a,c)})}decodeFromStream(o,a,c){return He(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(o,a);return yield this.decodeContinuously(d,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,a){return He(this,void 0,void 0,function*(){const c=this.prepareVideoElement(a);return this.addVideoSource(c,o),this.videoElement=c,this.stream=o,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(o){return new Promise((a,c)=>this.playVideoOnLoad(o,()=>a()))}playVideoOnLoad(o,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",a),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return He(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,a){const c=document.getElementById(o);if(!c)throw new w(`element with id '${o}' not found`);if(c.nodeName.toLowerCase()!==a.toLowerCase())throw new w(`element with id '${o}' must be an ${a} element`);return c}decodeFromImage(o,a){if(!o&&!a)throw new w("either imageElement with a src set or an url must be provided");return a&&!o?this.decodeFromImageUrl(a):this.decodeFromImageElement(o)}decodeFromVideo(o,a){if(!o&&!a)throw new w("Either an element with a src set or an URL must be provided");return a&&!o?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,a,c){if(o===void 0&&a===void 0)throw new w("Either an element with a src set or an URL must be provided");return a&&!o?this.decodeFromVideoUrlContinuously(a,c):this.decodeFromVideoElementContinuously(o,c)}decodeFromImageElement(o){if(!o)throw new w("An image element must be provided.");this.reset();const a=this.prepareImageElement(o);this.imageElement=a;let c;return this.isImageLoaded(a)?c=this.decodeOnce(a,!1,!0):c=this._decodeOnLoadImage(a),c}decodeFromVideoElement(o){const a=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(o,a){const c=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(c,a)}_decodeFromVideoElementSetup(o){if(!o)throw new w("A video element must be provided.");this.reset();const a=this.prepareVideoElement(o);return this.videoElement=a,a}decodeFromImageUrl(o){if(!o)throw new w("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const c=this._decodeOnLoadImage(a);return a.src=o,c}decodeFromVideoUrl(o){if(!o)throw new w("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElement(a);return a.src=o,c}decodeFromVideoUrlContinuously(o,a){if(!o)throw new w("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(c,a);return c.src=o,d}_decodeOnLoadImage(o){return new Promise((a,c)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(a,c),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return He(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,a){return He(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,a)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let a;return typeof o>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof o=="string"&&(a=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(a=o),a}prepareVideoElement(o){let a;return!o&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof o=="string"&&(a=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(a=o),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(o,a=!0,c=!0){this._stopAsyncDecode=!1;const d=(h,g)=>{if(this._stopAsyncDecode){g(new ee("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(o);h(y)}catch(y){const _=a&&y instanceof ee,R=(y instanceof I||y instanceof M)&&c;if(_||R)return setTimeout(d,this._timeBetweenDecodingAttempts,h,g);g(y)}};return new Promise((h,g)=>d(h,g))}decodeContinuously(o,a){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const d=this.decode(o);a(d,null),setTimeout(c,this.timeBetweenScansMillis)}catch(d){a(null,d);const h=d instanceof I||d instanceof M,g=d instanceof ee;(h||g)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(o){const a=this.createBinaryBitmap(o);return this.decodeBitmap(a)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,a,c){a||(a={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(o,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(o,a,c=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(o,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const a=this.getCaptureCanvas(o),c=new Ie(a),d=new we(c);return new E(d)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const a=this.createCaptureCanvas(o);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let c,d;return typeof o<"u"&&(o instanceof HTMLVideoElement?(c=o.videoWidth,d=o.videoHeight):o instanceof HTMLImageElement&&(c=o.naturalWidth||o.width,d=o.naturalHeight||o.height)),a.style.width=c+"px",a.style.height=d+"px",a.width=c,a.height=d,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,a){try{o.srcObject=a}catch{o.src=URL.createObjectURL(a)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class _t{constructor(o,a,c=a==null?0:8*a.length,d,h,g=C.currentTimeMillis()){this.text=o,this.rawBytes=a,this.numBits=c,this.resultPoints=d,this.format=h,this.timestamp=g,this.text=o,this.rawBytes=a,c==null?this.numBits=a==null?0:8*a.length:this.numBits=c,this.resultPoints=d,this.format=h,this.resultMetadata=null,g==null?this.timestamp=C.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,a)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const a=this.resultPoints;if(a===null)this.resultPoints=o;else if(o!==null&&o.length>0){const c=new Array(a.length+o.length);C.arraycopy(a,0,c,0,a.length),C.arraycopy(o,0,c,a.length,o.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Vn;(function(F){F[F.AZTEC=0]="AZTEC",F[F.CODABAR=1]="CODABAR",F[F.CODE_39=2]="CODE_39",F[F.CODE_93=3]="CODE_93",F[F.CODE_128=4]="CODE_128",F[F.DATA_MATRIX=5]="DATA_MATRIX",F[F.EAN_8=6]="EAN_8",F[F.EAN_13=7]="EAN_13",F[F.ITF=8]="ITF",F[F.MAXICODE=9]="MAXICODE",F[F.PDF_417=10]="PDF_417",F[F.QR_CODE=11]="QR_CODE",F[F.RSS_14=12]="RSS_14",F[F.RSS_EXPANDED=13]="RSS_EXPANDED",F[F.UPC_A=14]="UPC_A",F[F.UPC_E=15]="UPC_E",F[F.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Vn||(Vn={}));var Oe=Vn,Zt;(function(F){F[F.OTHER=0]="OTHER",F[F.ORIENTATION=1]="ORIENTATION",F[F.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",F[F.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",F[F.ISSUE_NUMBER=4]="ISSUE_NUMBER",F[F.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",F[F.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",F[F.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",F[F.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",F[F.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",F[F.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Zt||(Zt={}));var qt=Zt;class yn{constructor(o,a,c,d,h=-1,g=-1){this.rawBytes=o,this.text=a,this.byteSegments=c,this.ecLevel=d,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=g,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Jn{exp(o){return this.expTable[o]}log(o){if(o===0)throw new v;return this.logTable[o]}static addOrSubtract(o,a){return o^a}}class Jt{constructor(o,a){if(a.length===0)throw new v;this.field=o;const c=a.length;if(c>1&&a[0]===0){let d=1;for(;d<c&&a[d]===0;)d++;d===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-d),C.arraycopy(a,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const a=this.coefficients;let c;if(o===1){c=0;for(let g=0,y=a.length;g!==y;g++){const _=a[g];c=Jn.addOrSubtract(c,_)}return c}c=a[0];const d=a.length,h=this.field;for(let g=1;g<d;g++)c=Jn.addOrSubtract(h.multiply(o,c),a[g]);return c}addOrSubtract(o){if(!this.field.equals(o.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let a=this.coefficients,c=o.coefficients;if(a.length>c.length){const g=a;a=c,c=g}let d=new Int32Array(c.length);const h=c.length-a.length;C.arraycopy(c,0,d,0,h);for(let g=h;g<c.length;g++)d[g]=Jn.addOrSubtract(a[g-h],c[g]);return new Jt(this.field,d)}multiply(o){if(!this.field.equals(o.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const a=this.coefficients,c=a.length,d=o.coefficients,h=d.length,g=new Int32Array(c+h-1),y=this.field;for(let _=0;_<c;_++){const b=a[_];for(let R=0;R<h;R++)g[_+R]=Jn.addOrSubtract(g[_+R],y.multiply(b,d[R]))}return new Jt(y,g)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const a=this.coefficients.length,c=this.field,d=new Int32Array(a),h=this.coefficients;for(let g=0;g<a;g++)d[g]=c.multiply(h[g],o);return new Jt(c,d)}multiplyByMonomial(o,a){if(o<0)throw new v;if(a===0)return this.field.getZero();const c=this.coefficients,d=c.length,h=new Int32Array(d+o),g=this.field;for(let y=0;y<d;y++)h[y]=g.multiply(c[y],a);return new Jt(g,h)}divide(o){if(!this.field.equals(o.field))throw new v("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new v("Divide by 0");const a=this.field;let c=a.getZero(),d=this;const h=o.getCoefficient(o.getDegree()),g=a.inverse(h);for(;d.getDegree()>=o.getDegree()&&!d.isZero();){const y=d.getDegree()-o.getDegree(),_=a.multiply(d.getCoefficient(d.getDegree()),g),b=o.multiplyByMonomial(y,_),R=a.buildMonomial(y,_);c=c.addOrSubtract(R),d=d.addOrSubtract(b)}return[c,d]}toString(){let o="";for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);if(c!==0){if(c<0?(o+=" - ",c=-c):o.length>0&&(o+=" + "),a===0||c!==1){const d=this.field.log(c);d===0?o+="1":d===1?o+="a":(o+="a^",o+=d)}a!==0&&(a===1?o+="x":(o+="x^",o+=a))}}return o}}class os extends m{}os.kind="ArithmeticException";class lt extends Jn{constructor(o,a,c){super(),this.primitive=o,this.size=a,this.generatorBase=c;const d=new Int32Array(a);let h=1;for(let y=0;y<a;y++)d[y]=h,h*=2,h>=a&&(h^=o,h&=a-1);this.expTable=d;const g=new Int32Array(a);for(let y=0;y<a-1;y++)g[d[y]]=y;this.logTable=g,this.zero=new Jt(this,Int32Array.from([0])),this.one=new Jt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,a){if(o<0)throw new v;if(a===0)return this.zero;const c=new Int32Array(o+1);return c[0]=a,new Jt(this,c)}inverse(o){if(o===0)throw new os;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,a){return o===0||a===0?0:this.expTable[(this.logTable[o]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+S.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}lt.AZTEC_DATA_12=new lt(4201,4096,1),lt.AZTEC_DATA_10=new lt(1033,1024,1),lt.AZTEC_DATA_6=new lt(67,64,1),lt.AZTEC_PARAM=new lt(19,16,1),lt.QR_CODE_FIELD_256=new lt(285,256,0),lt.DATA_MATRIX_FIELD_256=new lt(301,256,1),lt.AZTEC_DATA_8=lt.DATA_MATRIX_FIELD_256,lt.MAXICODE_FIELD_64=lt.AZTEC_DATA_6;class Rr extends m{}Rr.kind="ReedSolomonException";class ur extends m{}ur.kind="IllegalStateException";class _s{constructor(o){this.field=o}decode(o,a){const c=this.field,d=new Jt(c,o),h=new Int32Array(a);let g=!0;for(let K=0;K<a;K++){const Z=d.evaluateAt(c.exp(K+c.getGeneratorBase()));h[h.length-1-K]=Z,Z!==0&&(g=!1)}if(g)return;const y=new Jt(c,h),_=this.runEuclideanAlgorithm(c.buildMonomial(a,1),y,a),b=_[0],R=_[1],B=this.findErrorLocations(b),U=this.findErrorMagnitudes(R,B);for(let K=0;K<B.length;K++){const Z=o.length-1-c.log(B[K]);if(Z<0)throw new Rr("Bad error location");o[Z]=lt.addOrSubtract(o[Z],U[K])}}runEuclideanAlgorithm(o,a,c){if(o.getDegree()<a.getDegree()){const K=o;o=a,a=K}const d=this.field;let h=o,g=a,y=d.getZero(),_=d.getOne();for(;g.getDegree()>=(c/2|0);){let K=h,Z=y;if(h=g,y=_,h.isZero())throw new Rr("r_{i-1} was zero");g=K;let J=d.getZero();const se=h.getCoefficient(h.getDegree()),ce=d.inverse(se);for(;g.getDegree()>=h.getDegree()&&!g.isZero();){const be=g.getDegree()-h.getDegree(),Ce=d.multiply(g.getCoefficient(g.getDegree()),ce);J=J.addOrSubtract(d.buildMonomial(be,Ce)),g=g.addOrSubtract(h.multiplyByMonomial(be,Ce))}if(_=J.multiply(y).addOrSubtract(Z),g.getDegree()>=h.getDegree())throw new ur("Division algorithm failed to reduce polynomial?")}const b=_.getCoefficient(0);if(b===0)throw new Rr("sigmaTilde(0) was zero");const R=d.inverse(b),B=_.multiplyScalar(R),U=g.multiplyScalar(R);return[B,U]}findErrorLocations(o){const a=o.getDegree();if(a===1)return Int32Array.from([o.getCoefficient(1)]);const c=new Int32Array(a);let d=0;const h=this.field;for(let g=1;g<h.getSize()&&d<a;g++)o.evaluateAt(g)===0&&(c[d]=h.inverse(g),d++);if(d!==a)throw new Rr("Error locator degree does not match number of roots");return c}findErrorMagnitudes(o,a){const c=a.length,d=new Int32Array(c),h=this.field;for(let g=0;g<c;g++){const y=h.inverse(a[g]);let _=1;for(let b=0;b<c;b++)if(g!==b){const R=h.multiply(a[b],y),B=R&1?R&-2:R|1;_=h.multiply(_,B)}d[g]=h.multiply(o.evaluateAt(y),h.inverse(_)),h.getGeneratorBase()!==0&&(d[g]=h.multiply(d[g],y))}return d}}var xn;(function(F){F[F.UPPER=0]="UPPER",F[F.LOWER=1]="LOWER",F[F.MIXED=2]="MIXED",F[F.DIGIT=3]="DIGIT",F[F.PUNCT=4]="PUNCT",F[F.BINARY=5]="BINARY"})(xn||(xn={}));class Lt{decode(o){this.ddata=o;let a=o.getBits(),c=this.extractBits(a),d=this.correctBits(c),h=Lt.convertBoolArrayToByteArray(d),g=Lt.getEncodedData(d),y=new yn(h,g,null,null);return y.setNumBits(d.length),y}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let a=o.length,c=xn.UPPER,d=xn.UPPER,h="",g=0;for(;g<a;)if(d===xn.BINARY){if(a-g<5)break;let y=Lt.readCode(o,g,5);if(g+=5,y===0){if(a-g<11)break;y=Lt.readCode(o,g,11)+31,g+=11}for(let _=0;_<y;_++){if(a-g<8){g=a;break}const b=Lt.readCode(o,g,8);h+=H.castAsNonUtf8Char(b),g+=8}d=c}else{let y=d===xn.DIGIT?4:5;if(a-g<y)break;let _=Lt.readCode(o,g,y);g+=y;let b=Lt.getCharacter(d,_);b.startsWith("CTRL_")?(c=d,d=Lt.getTable(b.charAt(5)),b.charAt(6)==="L"&&(c=d)):(h+=b,d=c)}return h}static getTable(o){switch(o){case"L":return xn.LOWER;case"P":return xn.PUNCT;case"M":return xn.MIXED;case"D":return xn.DIGIT;case"B":return xn.BINARY;case"U":default:return xn.UPPER}}static getCharacter(o,a){switch(o){case xn.UPPER:return Lt.UPPER_TABLE[a];case xn.LOWER:return Lt.LOWER_TABLE[a];case xn.MIXED:return Lt.MIXED_TABLE[a];case xn.PUNCT:return Lt.PUNCT_TABLE[a];case xn.DIGIT:return Lt.DIGIT_TABLE[a];default:throw new ur("Bad table")}}correctBits(o){let a,c;this.ddata.getNbLayers()<=2?(c=6,a=lt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,a=lt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,a=lt.AZTEC_DATA_10):(c=12,a=lt.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),h=o.length/c;if(h<d)throw new M;let g=o.length%c,y=new Int32Array(h);for(let U=0;U<h;U++,g+=c)y[U]=Lt.readCode(o,g,c);try{new _s(a).decode(y,h-d)}catch(U){throw new M(U)}let _=(1<<c)-1,b=0;for(let U=0;U<d;U++){let K=y[U];if(K===0||K===_)throw new M;(K===1||K===_-1)&&b++}let R=new Array(d*c-b),B=0;for(let U=0;U<d;U++){let K=y[U];if(K===1||K===_-1)R.fill(K>1,B,B+c-1),B+=c-1;else for(let Z=c-1;Z>=0;--Z)R[B++]=(K&1<<Z)!==0}return R}extractBits(o){let a=this.ddata.isCompact(),c=this.ddata.getNbLayers(),d=(a?11:14)+c*4,h=new Int32Array(d),g=new Array(this.totalBitsInLayer(c,a));if(a)for(let y=0;y<h.length;y++)h[y]=y;else{let y=d+1+2*S.truncDivision(S.truncDivision(d,2)-1,15),_=d/2,b=S.truncDivision(y,2);for(let R=0;R<_;R++){let B=R+S.truncDivision(R,15);h[_-R-1]=b-B-1,h[_+R]=b+B+1}}for(let y=0,_=0;y<c;y++){let b=(c-y)*4+(a?9:12),R=y*2,B=d-1-R;for(let U=0;U<b;U++){let K=U*2;for(let Z=0;Z<2;Z++)g[_+K+Z]=o.get(h[R+Z],h[R+U]),g[_+2*b+K+Z]=o.get(h[R+U],h[B-Z]),g[_+4*b+K+Z]=o.get(h[B-Z],h[B-U]),g[_+6*b+K+Z]=o.get(h[B-U],h[R+Z])}_+=b*8}return g}static readCode(o,a,c){let d=0;for(let h=a;h<a+c;h++)d<<=1,o[h]&&(d|=1);return d}static readByte(o,a){let c=o.length-a;return c>=8?Lt.readCode(o,a,8):Lt.readCode(o,a,c)<<8-c}static convertBoolArrayToByteArray(o){let a=new Uint8Array((o.length+7)/8);for(let c=0;c<a.length;c++)a[c]=Lt.readByte(o,8*c);return a}totalBitsInLayer(o,a){return((a?88:112)+16*o)*o}}Lt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Lt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Lt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Lt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Lt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ct{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,a,c,d){const h=o-c,g=a-d;return Math.sqrt(h*h+g*g)}static sum(o){let a=0;for(let c=0,d=o.length;c!==d;c++){const h=o[c];a+=h}return a}}class bo{static floatToIntBits(o){return o}}bo.MAX_VALUE=Number.MAX_SAFE_INTEGER;class je{constructor(o,a){this.x=o,this.y=a}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof je){const a=o;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*bo.floatToIntBits(this.x)+bo.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const a=this.distance(o[0],o[1]),c=this.distance(o[1],o[2]),d=this.distance(o[0],o[2]);let h,g,y;if(c>=a&&c>=d?(g=o[0],h=o[1],y=o[2]):d>=c&&d>=a?(g=o[1],h=o[0],y=o[2]):(g=o[2],h=o[0],y=o[1]),this.crossProductZ(h,g,y)<0){const _=h;h=y,y=_}o[0]=h,o[1]=g,o[2]=y}static distance(o,a){return ct.distance(o.x,o.y,a.x,a.y)}static crossProductZ(o,a,c){const d=a.x,h=a.y;return(c.x-d)*(o.y-h)-(c.y-h)*(o.x-d)}}class Q{constructor(o,a){this.bits=o,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class ie extends Q{constructor(o,a,c,d,h){super(o,a),this.compact=c,this.nbDatablocks=d,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class he{constructor(o,a,c,d){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),a==null&&(a=he.INIT_SIZE),c==null&&(c=o.getWidth()/2|0),d==null&&(d=o.getHeight()/2|0);const h=a/2|0;if(this.leftInit=c-h,this.rightInit=c+h,this.upInit=d-h,this.downInit=d+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}detect(){let o=this.leftInit,a=this.rightInit,c=this.upInit,d=this.downInit,h=!1,g=!0,y=!1,_=!1,b=!1,R=!1,B=!1;const U=this.width,K=this.height;for(;g;){g=!1;let Z=!0;for(;(Z||!_)&&a<U;)Z=this.containsBlackPoint(c,d,a,!1),Z?(a++,g=!0,_=!0):_||a++;if(a>=U){h=!0;break}let J=!0;for(;(J||!b)&&d<K;)J=this.containsBlackPoint(o,a,d,!0),J?(d++,g=!0,b=!0):b||d++;if(d>=K){h=!0;break}let se=!0;for(;(se||!R)&&o>=0;)se=this.containsBlackPoint(c,d,o,!1),se?(o--,g=!0,R=!0):R||o--;if(o<0){h=!0;break}let ce=!0;for(;(ce||!B)&&c>=0;)ce=this.containsBlackPoint(o,a,c,!0),ce?(c--,g=!0,B=!0):B||c--;if(c<0){h=!0;break}g&&(y=!0)}if(!h&&y){const Z=a-o;let J=null;for(let Ce=1;J===null&&Ce<Z;Ce++)J=this.getBlackPointOnSegment(o,d-Ce,o+Ce,d);if(J==null)throw new ee;let se=null;for(let Ce=1;se===null&&Ce<Z;Ce++)se=this.getBlackPointOnSegment(o,c+Ce,o+Ce,c);if(se==null)throw new ee;let ce=null;for(let Ce=1;ce===null&&Ce<Z;Ce++)ce=this.getBlackPointOnSegment(a,c+Ce,a-Ce,c);if(ce==null)throw new ee;let be=null;for(let Ce=1;be===null&&Ce<Z;Ce++)be=this.getBlackPointOnSegment(a,d-Ce,a-Ce,d);if(be==null)throw new ee;return this.centerEdges(be,J,ce,se)}else throw new ee}getBlackPointOnSegment(o,a,c,d){const h=ct.round(ct.distance(o,a,c,d)),g=(c-o)/h,y=(d-a)/h,_=this.image;for(let b=0;b<h;b++){const R=ct.round(o+b*g),B=ct.round(a+b*y);if(_.get(R,B))return new je(R,B)}return null}centerEdges(o,a,c,d){const h=o.getX(),g=o.getY(),y=a.getX(),_=a.getY(),b=c.getX(),R=c.getY(),B=d.getX(),U=d.getY(),K=he.CORR;return h<this.width/2?[new je(B-K,U+K),new je(y+K,_+K),new je(b-K,R-K),new je(h+K,g-K)]:[new je(B+K,U+K),new je(y+K,_-K),new je(b-K,R+K),new je(h-K,g-K)]}containsBlackPoint(o,a,c,d){const h=this.image;if(d){for(let g=o;g<=a;g++)if(h.get(g,c))return!0}else for(let g=o;g<=a;g++)if(h.get(c,g))return!0;return!1}}he.INIT_SIZE=10,he.CORR=1;class ke{static checkAndNudgePoints(o,a){const c=o.getWidth(),d=o.getHeight();let h=!0;for(let g=0;g<a.length&&h;g+=2){const y=Math.floor(a[g]),_=Math.floor(a[g+1]);if(y<-1||y>c||_<-1||_>d)throw new ee;h=!1,y===-1?(a[g]=0,h=!0):y===c&&(a[g]=c-1,h=!0),_===-1?(a[g+1]=0,h=!0):_===d&&(a[g+1]=d-1,h=!0)}h=!0;for(let g=a.length-2;g>=0&&h;g-=2){const y=Math.floor(a[g]),_=Math.floor(a[g+1]);if(y<-1||y>c||_<-1||_>d)throw new ee;h=!1,y===-1?(a[g]=0,h=!0):y===c&&(a[g]=c-1,h=!0),_===-1?(a[g+1]=0,h=!0):_===d&&(a[g+1]=d-1,h=!0)}}}class pe{constructor(o,a,c,d,h,g,y,_,b){this.a11=o,this.a21=a,this.a31=c,this.a12=d,this.a22=h,this.a32=g,this.a13=y,this.a23=_,this.a33=b}static quadrilateralToQuadrilateral(o,a,c,d,h,g,y,_,b,R,B,U,K,Z,J,se){const ce=pe.quadrilateralToSquare(o,a,c,d,h,g,y,_);return pe.squareToQuadrilateral(b,R,B,U,K,Z,J,se).times(ce)}transformPoints(o){const a=o.length,c=this.a11,d=this.a12,h=this.a13,g=this.a21,y=this.a22,_=this.a23,b=this.a31,R=this.a32,B=this.a33;for(let U=0;U<a;U+=2){const K=o[U],Z=o[U+1],J=h*K+_*Z+B;o[U]=(c*K+g*Z+b)/J,o[U+1]=(d*K+y*Z+R)/J}}transformPointsWithValues(o,a){const c=this.a11,d=this.a12,h=this.a13,g=this.a21,y=this.a22,_=this.a23,b=this.a31,R=this.a32,B=this.a33,U=o.length;for(let K=0;K<U;K++){const Z=o[K],J=a[K],se=h*Z+_*J+B;o[K]=(c*Z+g*J+b)/se,a[K]=(d*Z+y*J+R)/se}}static squareToQuadrilateral(o,a,c,d,h,g,y,_){const b=o-c+h-y,R=a-d+g-_;if(b===0&&R===0)return new pe(c-o,h-c,o,d-a,g-d,a,0,0,1);{const B=c-h,U=y-h,K=d-g,Z=_-g,J=B*Z-U*K,se=(b*Z-U*R)/J,ce=(B*R-b*K)/J;return new pe(c-o+se*c,y-o+ce*y,o,d-a+se*d,_-a+ce*_,a,se,ce,1)}}static quadrilateralToSquare(o,a,c,d,h,g,y,_){return pe.squareToQuadrilateral(o,a,c,d,h,g,y,_).buildAdjoint()}buildAdjoint(){return new pe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new pe(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class ye extends ke{sampleGrid(o,a,c,d,h,g,y,_,b,R,B,U,K,Z,J,se,ce,be,Ce){const ve=pe.quadrilateralToQuadrilateral(d,h,g,y,_,b,R,B,U,K,Z,J,se,ce,be,Ce);return this.sampleGridWithTransform(o,a,c,ve)}sampleGridWithTransform(o,a,c,d){if(a<=0||c<=0)throw new ee;const h=new de(a,c),g=new Float32Array(2*a);for(let y=0;y<c;y++){const _=g.length,b=y+.5;for(let R=0;R<_;R+=2)g[R]=R/2+.5,g[R+1]=b;d.transformPoints(g),ke.checkAndNudgePoints(o,g);try{for(let R=0;R<_;R+=2)o.get(Math.floor(g[R]),Math.floor(g[R+1]))&&h.set(R/2,y)}catch{throw new ee}}return h}}class Ne{static setGridSampler(o){Ne.gridSampler=o}static getInstance(){return Ne.gridSampler}}Ne.gridSampler=new ye;class Ye{constructor(o,a){this.x=o,this.y=a}toResultPoint(){return new je(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class en{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let a=this.getMatrixCenter(),c=this.getBullsEyeCorners(a);if(o){let g=c[0];c[0]=c[2],c[2]=g}this.extractParameters(c);let d=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),h=this.getMatrixCornerPoints(c);return new ie(d,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new ee;let a=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(o[0],o[1],a),this.sampleLine(o[1],o[2],a),this.sampleLine(o[2],o[3],a),this.sampleLine(o[3],o[0],a)]);this.shift=this.getRotation(c,a);let d=0;for(let g=0;g<4;g++){let y=c[(this.shift+g)%4];this.compact?(d<<=7,d+=y>>1&127):(d<<=10,d+=(y>>2&992)+(y>>1&31))}let h=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(o,a){let c=0;o.forEach((d,h,g)=>{let y=(d>>a-2<<1)+(d&1);c=(c<<3)+y}),c=((c&1)<<11)+(c>>1);for(let d=0;d<4;d++)if(S.bitCount(c^this.EXPECTED_CORNER_BITS[d])<=2)return d;throw new ee}getCorrectedParameterData(o,a){let c,d;a?(c=7,d=2):(c=10,d=4);let h=c-d,g=new Int32Array(c);for(let _=c-1;_>=0;--_)g[_]=o&15,o>>=4;try{new _s(lt.AZTEC_PARAM).decode(g,h)}catch{throw new ee}let y=0;for(let _=0;_<d;_++)y=(y<<4)+g[_];return y}getBullsEyeCorners(o){let a=o,c=o,d=o,h=o,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let B=this.getFirstDifferent(a,g,1,-1),U=this.getFirstDifferent(c,g,1,1),K=this.getFirstDifferent(d,g,-1,1),Z=this.getFirstDifferent(h,g,-1,-1);if(this.nbCenterLayers>2){let J=this.distancePoint(Z,B)*this.nbCenterLayers/(this.distancePoint(h,a)*(this.nbCenterLayers+2));if(J<.75||J>1.25||!this.isWhiteOrBlackRectangle(B,U,K,Z))break}a=B,c=U,d=K,h=Z,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;let y=new je(a.getX()+.5,a.getY()-.5),_=new je(c.getX()+.5,c.getY()+.5),b=new je(d.getX()-.5,d.getY()+.5),R=new je(h.getX()-.5,h.getY()-.5);return this.expandSquare([y,_,b,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,a,c,d;try{let y=new he(this.image).detect();o=y[0],a=y[1],c=y[2],d=y[3]}catch{let _=this.image.getWidth()/2,b=this.image.getHeight()/2;o=this.getFirstDifferent(new Ye(_+7,b-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Ye(_+7,b+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Ye(_-7,b+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new Ye(_-7,b-7),!1,-1,-1).toResultPoint()}let h=ct.round((o.getX()+d.getX()+a.getX()+c.getX())/4),g=ct.round((o.getY()+d.getY()+a.getY()+c.getY())/4);try{let y=new he(this.image,15,h,g).detect();o=y[0],a=y[1],c=y[2],d=y[3]}catch{o=this.getFirstDifferent(new Ye(h+7,g-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Ye(h+7,g+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Ye(h-7,g+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new Ye(h-7,g-7),!1,-1,-1).toResultPoint()}return h=ct.round((o.getX()+d.getX()+a.getX()+c.getX())/4),g=ct.round((o.getY()+d.getY()+a.getY()+c.getY())/4),new Ye(h,g)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,a,c,d,h){let g=Ne.getInstance(),y=this.getDimension(),_=y/2-this.nbCenterLayers,b=y/2+this.nbCenterLayers;return g.sampleGrid(o,y,y,_,_,b,_,b,b,_,b,a.getX(),a.getY(),c.getX(),c.getY(),d.getX(),d.getY(),h.getX(),h.getY())}sampleLine(o,a,c){let d=0,h=this.distanceResultPoint(o,a),g=h/c,y=o.getX(),_=o.getY(),b=g*(a.getX()-o.getX())/h,R=g*(a.getY()-o.getY())/h;for(let B=0;B<c;B++)this.image.get(ct.round(y+B*b),ct.round(_+B*R))&&(d|=1<<c-B-1);return d}isWhiteOrBlackRectangle(o,a,c,d){let h=3;o=new Ye(o.getX()-h,o.getY()+h),a=new Ye(a.getX()-h,a.getY()-h),c=new Ye(c.getX()+h,c.getY()-h),d=new Ye(d.getX()+h,d.getY()+h);let g=this.getColor(d,o);if(g===0)return!1;let y=this.getColor(o,a);return y!==g||(y=this.getColor(a,c),y!==g)?!1:(y=this.getColor(c,d),y===g)}getColor(o,a){let c=this.distancePoint(o,a),d=(a.getX()-o.getX())/c,h=(a.getY()-o.getY())/c,g=0,y=o.getX(),_=o.getY(),b=this.image.get(o.getX(),o.getY()),R=Math.ceil(c);for(let U=0;U<R;U++)y+=d,_+=h,this.image.get(ct.round(y),ct.round(_))!==b&&g++;let B=g/c;return B>.1&&B<.9?0:B<=.1===b?1:-1}getFirstDifferent(o,a,c,d){let h=o.getX()+c,g=o.getY()+d;for(;this.isValid(h,g)&&this.image.get(h,g)===a;)h+=c,g+=d;for(h-=c,g-=d;this.isValid(h,g)&&this.image.get(h,g)===a;)h+=c;for(h-=c;this.isValid(h,g)&&this.image.get(h,g)===a;)g+=d;return g-=d,new Ye(h,g)}expandSquare(o,a,c){let d=c/(2*a),h=o[0].getX()-o[2].getX(),g=o[0].getY()-o[2].getY(),y=(o[0].getX()+o[2].getX())/2,_=(o[0].getY()+o[2].getY())/2,b=new je(y+d*h,_+d*g),R=new je(y-d*h,_-d*g);h=o[1].getX()-o[3].getX(),g=o[1].getY()-o[3].getY(),y=(o[1].getX()+o[3].getX())/2,_=(o[1].getY()+o[3].getY())/2;let B=new je(y+d*h,_+d*g),U=new je(y-d*h,_-d*g);return[b,B,R,U]}isValid(o,a){return o>=0&&o<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(o){let a=ct.round(o.getX()),c=ct.round(o.getY());return this.isValid(a,c)}distancePoint(o,a){return ct.distance(o.getX(),o.getY(),a.getX(),a.getY())}distanceResultPoint(o,a){return ct.distance(o.getX(),o.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(S.truncDivision(this.nbLayers-4,8)+1)+15}}class Cn{decode(o,a=null){let c=null,d=new en(o.getBlackMatrix()),h=null,g=null;try{let R=d.detectMirror(!1);h=R.getPoints(),this.reportFoundResultPoints(a,h),g=new Lt().decode(R)}catch(R){c=R}if(g==null)try{let R=d.detectMirror(!0);h=R.getPoints(),this.reportFoundResultPoints(a,h),g=new Lt().decode(R)}catch(R){throw c??R}let y=new _t(g.getText(),g.getRawBytes(),g.getNumBits(),h,Oe.AZTEC,C.currentTimeMillis()),_=g.getByteSegments();_!=null&&y.putMetadata(qt.BYTE_SEGMENTS,_);let b=g.getECLevel();return b!=null&&y.putMetadata(qt.ERROR_CORRECTION_LEVEL,b),y}reportFoundResultPoints(o,a){if(o!=null){let c=o.get(Y.NEED_RESULT_POINT_CALLBACK);c!=null&&a.forEach((d,h,g)=>{c.foundPossibleResultPoint(d)})}}reset(){}}class Co extends at{constructor(o=500){super(new Cn,o)}}class Xt{decode(o,a){try{return this.doDecode(o,a)}catch{if(a&&a.get(Y.TRY_HARDER)===!0&&o.isRotateSupported()){const h=o.rotateCounterClockwise(),g=this.doDecode(h,a),y=g.getResultMetadata();let _=270;y!==null&&y.get(qt.ORIENTATION)===!0&&(_=_+y.get(qt.ORIENTATION)%360),g.putMetadata(qt.ORIENTATION,_);const b=g.getResultPoints();if(b!==null){const R=h.getHeight();for(let B=0;B<b.length;B++)b[B]=new je(R-b[B].getY()-1,b[B].getX())}return g}else throw new ee}}reset(){}doDecode(o,a){const c=o.getWidth(),d=o.getHeight();let h=new V(c);const g=a&&a.get(Y.TRY_HARDER)===!0,y=Math.max(1,d>>(g?8:5));let _;g?_=d:_=15;const b=Math.trunc(d/2);for(let R=0;R<_;R++){const B=Math.trunc((R+1)/2),U=(R&1)===0,K=b+y*(U?B:-B);if(K<0||K>=d)break;try{h=o.getBlackRow(K,h)}catch{continue}for(let Z=0;Z<2;Z++){if(Z===1&&(h.reverse(),a&&a.get(Y.NEED_RESULT_POINT_CALLBACK)===!0)){const J=new Map;a.forEach((se,ce)=>J.set(ce,se)),J.delete(Y.NEED_RESULT_POINT_CALLBACK),a=J}try{const J=this.decodeRow(K,h,a);if(Z===1){J.putMetadata(qt.ORIENTATION,180);const se=J.getResultPoints();se!==null&&(se[0]=new je(c-se[0].getX()-1,se[0].getY()),se[1]=new je(c-se[1].getX()-1,se[1].getY()))}return J}catch{}}}throw new ee}static recordPattern(o,a,c){const d=c.length;for(let b=0;b<d;b++)c[b]=0;const h=o.getSize();if(a>=h)throw new ee;let g=!o.get(a),y=0,_=a;for(;_<h;){if(o.get(_)!==g)c[y]++;else{if(++y===d)break;c[y]=1,g=!g}_++}if(!(y===d||y===d-1&&_===h))throw new ee}static recordPatternInReverse(o,a,c){let d=c.length,h=o.get(a);for(;a>0&&d>=0;)o.get(--a)!==h&&(d--,h=!h);if(d>=0)throw new ee;Xt.recordPattern(o,a+1,c)}static patternMatchVariance(o,a,c){const d=o.length;let h=0,g=0;for(let b=0;b<d;b++)h+=o[b],g+=a[b];if(h<g)return Number.POSITIVE_INFINITY;const y=h/g;c*=y;let _=0;for(let b=0;b<d;b++){const R=o[b],B=a[b]*y,U=R>B?R-B:B-R;if(U>c)return Number.POSITIVE_INFINITY;_+=U}return _/h}}class Ae extends Xt{static findStartPattern(o){const a=o.getSize(),c=o.getNextSet(0);let d=0,h=Int32Array.from([0,0,0,0,0,0]),g=c,y=!1;const _=6;for(let b=c;b<a;b++)if(o.get(b)!==y)h[d]++;else{if(d===_-1){let R=Ae.MAX_AVG_VARIANCE,B=-1;for(let U=Ae.CODE_START_A;U<=Ae.CODE_START_C;U++){const K=Xt.patternMatchVariance(h,Ae.CODE_PATTERNS[U],Ae.MAX_INDIVIDUAL_VARIANCE);K<R&&(R=K,B=U)}if(B>=0&&o.isRange(Math.max(0,g-(b-g)/2),g,!1))return Int32Array.from([g,b,B]);g+=h[0]+h[1],h=h.slice(2,h.length-1),h[d-1]=0,h[d]=0,d--}else d++;h[d]=1,y=!y}throw new ee}static decodeCode(o,a,c){Xt.recordPattern(o,c,a);let d=Ae.MAX_AVG_VARIANCE,h=-1;for(let g=0;g<Ae.CODE_PATTERNS.length;g++){const y=Ae.CODE_PATTERNS[g],_=this.patternMatchVariance(a,y,Ae.MAX_INDIVIDUAL_VARIANCE);_<d&&(d=_,h=g)}if(h>=0)return h;throw new ee}decodeRow(o,a,c){const d=c&&c.get(Y.ASSUME_GS1)===!0,h=Ae.findStartPattern(a),g=h[2];let y=0;const _=new Uint8Array(20);_[y++]=g;let b;switch(g){case Ae.CODE_START_A:b=Ae.CODE_CODE_A;break;case Ae.CODE_START_B:b=Ae.CODE_CODE_B;break;case Ae.CODE_START_C:b=Ae.CODE_CODE_C;break;default:throw new M}let R=!1,B=!1,U="",K=h[0],Z=h[1];const J=Int32Array.from([0,0,0,0,0,0]);let se=0,ce=0,be=g,Ce=0,ve=!0,bt=!1,ut=!1;for(;!R;){const qc=B;switch(B=!1,se=ce,ce=Ae.decodeCode(a,J,Z),_[y++]=ce,ce!==Ae.CODE_STOP&&(ve=!0),ce!==Ae.CODE_STOP&&(Ce++,be+=Ce*ce),K=Z,Z+=J.reduce((bP,CP)=>bP+CP,0),ce){case Ae.CODE_START_A:case Ae.CODE_START_B:case Ae.CODE_START_C:throw new M}switch(b){case Ae.CODE_CODE_A:if(ce<64)ut===bt?U+=String.fromCharCode(32+ce):U+=String.fromCharCode(32+ce+128),ut=!1;else if(ce<96)ut===bt?U+=String.fromCharCode(ce-64):U+=String.fromCharCode(ce+64),ut=!1;else switch(ce!==Ae.CODE_STOP&&(ve=!1),ce){case Ae.CODE_FNC_1:d&&(U.length===0?U+="]C1":U+="");break;case Ae.CODE_FNC_2:case Ae.CODE_FNC_3:break;case Ae.CODE_FNC_4_A:!bt&&ut?(bt=!0,ut=!1):bt&&ut?(bt=!1,ut=!1):ut=!0;break;case Ae.CODE_SHIFT:B=!0,b=Ae.CODE_CODE_B;break;case Ae.CODE_CODE_B:b=Ae.CODE_CODE_B;break;case Ae.CODE_CODE_C:b=Ae.CODE_CODE_C;break;case Ae.CODE_STOP:R=!0;break}break;case Ae.CODE_CODE_B:if(ce<96)ut===bt?U+=String.fromCharCode(32+ce):U+=String.fromCharCode(32+ce+128),ut=!1;else switch(ce!==Ae.CODE_STOP&&(ve=!1),ce){case Ae.CODE_FNC_1:d&&(U.length===0?U+="]C1":U+="");break;case Ae.CODE_FNC_2:case Ae.CODE_FNC_3:break;case Ae.CODE_FNC_4_B:!bt&&ut?(bt=!0,ut=!1):bt&&ut?(bt=!1,ut=!1):ut=!0;break;case Ae.CODE_SHIFT:B=!0,b=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_A:b=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_C:b=Ae.CODE_CODE_C;break;case Ae.CODE_STOP:R=!0;break}break;case Ae.CODE_CODE_C:if(ce<100)ce<10&&(U+="0"),U+=ce;else switch(ce!==Ae.CODE_STOP&&(ve=!1),ce){case Ae.CODE_FNC_1:d&&(U.length===0?U+="]C1":U+="");break;case Ae.CODE_CODE_A:b=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_B:b=Ae.CODE_CODE_B;break;case Ae.CODE_STOP:R=!0;break}break}qc&&(b=b===Ae.CODE_CODE_A?Ae.CODE_CODE_B:Ae.CODE_CODE_A)}const ds=Z-K;if(Z=a.getNextUnset(Z),!a.isRange(Z,Math.min(a.getSize(),Z+(Z-K)/2),!1))throw new ee;if(be-=Ce*se,be%103!==se)throw new I;const gi=U.length;if(gi===0)throw new ee;gi>0&&ve&&(b===Ae.CODE_CODE_C?U=U.substring(0,gi-2):U=U.substring(0,gi-1));const hs=(h[1]+h[0])/2,Qt=K+ds/2,vr=_.length,Ss=new Uint8Array(vr);for(let qc=0;qc<vr;qc++)Ss[qc]=_[qc];const $c=[new je(hs,o),new je(Qt,o)];return new _t(U,Ss,0,$c,Oe.CODE_128,new Date().getTime())}}Ae.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ae.MAX_AVG_VARIANCE=.25,Ae.MAX_INDIVIDUAL_VARIANCE=.7,Ae.CODE_SHIFT=98,Ae.CODE_CODE_C=99,Ae.CODE_CODE_B=100,Ae.CODE_CODE_A=101,Ae.CODE_FNC_1=102,Ae.CODE_FNC_2=97,Ae.CODE_FNC_3=96,Ae.CODE_FNC_4_A=101,Ae.CODE_FNC_4_B=100,Ae.CODE_START_A=103,Ae.CODE_START_B=104,Ae.CODE_START_C=105,Ae.CODE_STOP=106;class an extends Xt{constructor(o=!1,a=!1){super(),this.usingCheckDigit=o,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,a,c){let d=this.counters;d.fill(0),this.decodeRowResult="";let h=an.findAsteriskPattern(a,d),g=a.getNextSet(h[1]),y=a.getSize(),_,b;do{an.recordPattern(a,g,d);let J=an.toNarrowWidePattern(d);if(J<0)throw new ee;_=an.patternToChar(J),this.decodeRowResult+=_,b=g;for(let se of d)g+=se;g=a.getNextSet(g)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let J of d)R+=J;let B=g-b-R;if(g!==y&&B*2<R)throw new ee;if(this.usingCheckDigit){let J=this.decodeRowResult.length-1,se=0;for(let ce=0;ce<J;ce++)se+=an.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ce));if(this.decodeRowResult.charAt(J)!==an.ALPHABET_STRING.charAt(se%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,J)}if(this.decodeRowResult.length===0)throw new ee;let U;this.extendedMode?U=an.decodeExtended(this.decodeRowResult):U=this.decodeRowResult;let K=(h[1]+h[0])/2,Z=b+R/2;return new _t(U,null,0,[new je(K,o),new je(Z,o)],Oe.CODE_39,new Date().getTime())}static findAsteriskPattern(o,a){let c=o.getSize(),d=o.getNextSet(0),h=0,g=d,y=!1,_=a.length;for(let b=d;b<c;b++)if(o.get(b)!==y)a[h]++;else{if(h===_-1){if(this.toNarrowWidePattern(a)===an.ASTERISK_ENCODING&&o.isRange(Math.max(0,g-Math.floor((b-g)/2)),g,!1))return[g,b];g+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,y=!y}throw new ee}static toNarrowWidePattern(o){let a=o.length,c=0,d;do{let h=2147483647;for(let _ of o)_<h&&_>c&&(h=_);c=h,d=0;let g=0,y=0;for(let _=0;_<a;_++){let b=o[_];b>c&&(y|=1<<a-1-_,d++,g+=b)}if(d===3){for(let _=0;_<a&&d>0;_++){let b=o[_];if(b>c&&(d--,b*2>=g))return-1}return y}}while(d>3);return-1}static patternToChar(o){for(let a=0;a<an.CHARACTER_ENCODINGS.length;a++)if(an.CHARACTER_ENCODINGS[a]===o)return an.ALPHABET_STRING.charAt(a);if(o===an.ASTERISK_ENCODING)return"*";throw new ee}static decodeExtended(o){let a=o.length,c="";for(let d=0;d<a;d++){let h=o.charAt(d);if(h==="+"||h==="$"||h==="%"||h==="/"){let g=o.charAt(d+1),y="\0";switch(h){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new M;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new M;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new M;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new M;break}c+=y,d++}else c+=h}return c}}an.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",an.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],an.ASTERISK_ENCODING=148;class Ft extends Xt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,a,c){let d=this.decodeStart(a),h=this.decodeEnd(a),g=new z;Ft.decodeMiddle(a,d[1],h[0],g);let y=g.toString(),_=null;c!=null&&(_=c.get(Y.ALLOWED_LENGTHS)),_==null&&(_=Ft.DEFAULT_ALLOWED_LENGTHS);let b=y.length,R=!1,B=0;for(let Z of _){if(b===Z){R=!0;break}Z>B&&(B=Z)}if(!R&&b>B&&(R=!0),!R)throw new M;const U=[new je(d[1],o),new je(h[0],o)];return new _t(y,null,0,U,Oe.ITF,new Date().getTime())}static decodeMiddle(o,a,c,d){let h=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(h.fill(0),g.fill(0),y.fill(0);a<c;){Xt.recordPattern(o,a,h);for(let b=0;b<5;b++){let R=2*b;g[b]=h[R],y[b]=h[R+1]}let _=Ft.decodeDigit(g);d.append(_.toString()),_=this.decodeDigit(y),d.append(_.toString()),h.forEach(function(b){a+=b})}}decodeStart(o){let a=Ft.skipWhiteSpace(o),c=Ft.findGuardPattern(o,a,Ft.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(o,c[0]),c}validateQuietZone(o,a){let c=this.narrowLineWidth*10;c=c<a?c:a;for(let d=a-1;c>0&&d>=0&&!o.get(d);d--)c--;if(c!==0)throw new ee}static skipWhiteSpace(o){const a=o.getSize(),c=o.getNextSet(0);if(c===a)throw new ee;return c}decodeEnd(o){o.reverse();try{let a=Ft.skipWhiteSpace(o),c;try{c=Ft.findGuardPattern(o,a,Ft.END_PATTERN_REVERSED[0])}catch(h){h instanceof ee&&(c=Ft.findGuardPattern(o,a,Ft.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,c[0]);let d=c[0];return c[0]=o.getSize()-c[1],c[1]=o.getSize()-d,c}finally{o.reverse()}}static findGuardPattern(o,a,c){let d=c.length,h=new Int32Array(d),g=o.getSize(),y=!1,_=0,b=a;h.fill(0);for(let R=a;R<g;R++)if(o.get(R)!==y)h[_]++;else{if(_===d-1){if(Xt.patternMatchVariance(h,c,Ft.MAX_INDIVIDUAL_VARIANCE)<Ft.MAX_AVG_VARIANCE)return[b,R];b+=h[0]+h[1],C.arraycopy(h,2,h,0,_-1),h[_-1]=0,h[_]=0,_--}else _++;h[_]=1,y=!y}throw new ee}static decodeDigit(o){let a=Ft.MAX_AVG_VARIANCE,c=-1,d=Ft.PATTERNS.length;for(let h=0;h<d;h++){let g=Ft.PATTERNS[h],y=Xt.patternMatchVariance(o,g,Ft.MAX_INDIVIDUAL_VARIANCE);y<a?(a=y,c=h):y===a&&(c=-1)}if(c>=0)return c%10;throw new ee}}Ft.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ft.MAX_AVG_VARIANCE=.38,Ft.MAX_INDIVIDUAL_VARIANCE=.5,Ft.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ft.START_PATTERN=Int32Array.from([1,1,1,1]),Ft.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class tn extends Xt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let a=!1,c,d=0,h=Int32Array.from([0,0,0]);for(;!a;){h=Int32Array.from([0,0,0]),c=tn.findGuardPattern(o,d,!1,this.START_END_PATTERN,h);let g=c[0];d=c[1];let y=g-(d-g);y>=0&&(a=o.isRange(y,g,!1))}return c}static checkChecksum(o){return tn.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let a=o.length;if(a===0)return!1;let c=parseInt(o.charAt(a-1),10);return tn.getStandardUPCEANChecksum(o.substring(0,a-1))===c}static getStandardUPCEANChecksum(o){let a=o.length,c=0;for(let d=a-1;d>=0;d-=2){let h=o.charAt(d).charCodeAt(0)-48;if(h<0||h>9)throw new M;c+=h}c*=3;for(let d=a-2;d>=0;d-=2){let h=o.charAt(d).charCodeAt(0)-48;if(h<0||h>9)throw new M;c+=h}return(1e3-c)%10}static decodeEnd(o,a){return tn.findGuardPattern(o,a,!1,tn.START_END_PATTERN,new Int32Array(tn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,a,c,d){return this.findGuardPattern(o,a,c,d,new Int32Array(d.length))}static findGuardPattern(o,a,c,d,h){let g=o.getSize();a=c?o.getNextUnset(a):o.getNextSet(a);let y=0,_=a,b=d.length,R=c;for(let B=a;B<g;B++)if(o.get(B)!==R)h[y]++;else{if(y===b-1){if(Xt.patternMatchVariance(h,d,tn.MAX_INDIVIDUAL_VARIANCE)<tn.MAX_AVG_VARIANCE)return Int32Array.from([_,B]);_+=h[0]+h[1];let U=h.slice(2,h.length-1);for(let K=0;K<y-1;K++)h[K]=U[K];h[y-1]=0,h[y]=0,y--}else y++;h[y]=1,R=!R}throw new ee}static decodeDigit(o,a,c,d){this.recordPattern(o,c,a);let h=this.MAX_AVG_VARIANCE,g=-1,y=d.length;for(let _=0;_<y;_++){let b=d[_],R=Xt.patternMatchVariance(a,b,tn.MAX_INDIVIDUAL_VARIANCE);R<h&&(h=R,g=_)}if(g>=0)return g;throw new ee}}tn.MAX_AVG_VARIANCE=.48,tn.MAX_INDIVIDUAL_VARIANCE=.7,tn.START_END_PATTERN=Int32Array.from([1,1,1]),tn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),tn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),tn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class $s{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,a,c){let d=this.decodeRowStringBuffer,h=this.decodeMiddle(a,c,d),g=d.toString(),y=$s.parseExtensionString(g),_=[new je((c[0]+c[1])/2,o),new je(h,o)],b=new _t(g,null,0,_,Oe.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&b.putAllMetadata(y),b}decodeMiddle(o,a,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=o.getSize(),g=a[1],y=0;for(let b=0;b<5&&g<h;b++){let R=tn.decodeDigit(o,d,g,tn.L_AND_G_PATTERNS);c+=String.fromCharCode(48+R%10);for(let B of d)g+=B;R>=10&&(y|=1<<4-b),b!==4&&(g=o.getNextSet(g),g=o.getNextUnset(g))}if(c.length!==5)throw new ee;let _=this.determineCheckDigit(y);if($s.extensionChecksum(c.toString())!==_)throw new ee;return g}static extensionChecksum(o){let a=o.length,c=0;for(let d=a-2;d>=0;d-=2)c+=o.charAt(d).charCodeAt(0)-48;c*=3;for(let d=a-1;d>=0;d-=2)c+=o.charAt(d).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(o){for(let a=0;a<10;a++)if(o===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new ee}static parseExtensionString(o){if(o.length!==5)return null;let a=$s.parseExtension5String(o);return a==null?null:new Map([[qt.SUGGESTED_PRICE,a]])}static parseExtension5String(o){let a;switch(o.charAt(0)){case"0":a="£";break;case"5":a="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let c=parseInt(o.substring(1)),d=(c/100).toString(),h=c%100,g=h<10?"0"+h:h.toString();return a+d+"."+g}}class Vc{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,a,c){let d=this.decodeRowStringBuffer,h=this.decodeMiddle(a,c,d),g=d.toString(),y=Vc.parseExtensionString(g),_=[new je((c[0]+c[1])/2,o),new je(h,o)],b=new _t(g,null,0,_,Oe.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&b.putAllMetadata(y),b}decodeMiddle(o,a,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=o.getSize(),g=a[1],y=0;for(let _=0;_<2&&g<h;_++){let b=tn.decodeDigit(o,d,g,tn.L_AND_G_PATTERNS);c+=String.fromCharCode(48+b%10);for(let R of d)g+=R;b>=10&&(y|=1<<1-_),_!==1&&(g=o.getNextSet(g),g=o.getNextUnset(g))}if(c.length!==2)throw new ee;if(parseInt(c.toString())%4!==y)throw new ee;return g}static parseExtensionString(o){return o.length!==2?null:new Map([[qt.ISSUE_NUMBER,parseInt(o)]])}}class Dd{static decodeRow(o,a,c){let d=tn.findGuardPattern(a,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new $s().decodeRow(o,a,d)}catch{return new Vc().decodeRow(o,a,d)}}}Dd.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class xt extends tn{constructor(){super(),this.decodeRowStringBuffer="",xt.L_AND_G_PATTERNS=xt.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let a=xt.L_PATTERNS[o-10],c=new Int32Array(a.length);for(let d=0;d<a.length;d++)c[d]=a[a.length-d-1];xt.L_AND_G_PATTERNS[o]=c}}decodeRow(o,a,c){let d=xt.findStartGuardPattern(a),h=c==null?null:c.get(Y.NEED_RESULT_POINT_CALLBACK);if(h!=null){const ve=new je((d[0]+d[1])/2,o);h.foundPossibleResultPoint(ve)}let g=this.decodeMiddle(a,d,this.decodeRowStringBuffer),y=g.rowOffset,_=g.resultString;if(h!=null){const ve=new je(y,o);h.foundPossibleResultPoint(ve)}let b=this.decodeEnd(a,y);if(h!=null){const ve=new je((b[0]+b[1])/2,o);h.foundPossibleResultPoint(ve)}let R=b[1],B=R+(R-b[0]);if(B>=a.getSize()||!a.isRange(R,B,!1))throw new ee;let U=_.toString();if(U.length<8)throw new M;if(!xt.checkChecksum(U))throw new I;let K=(d[1]+d[0])/2,Z=(b[1]+b[0])/2,J=this.getBarcodeFormat(),se=[new je(K,o),new je(Z,o)],ce=new _t(U,null,0,se,J,new Date().getTime()),be=0;try{let ve=Dd.decodeRow(o,a,b[1]);ce.putMetadata(qt.UPC_EAN_EXTENSION,ve.getText()),ce.putAllMetadata(ve.getResultMetadata()),ce.addResultPoints(ve.getResultPoints()),be=ve.getText().length}catch{}let Ce=c==null?null:c.get(Y.ALLOWED_EAN_EXTENSIONS);if(Ce!=null){let ve=!1;for(let bt in Ce)if(be.toString()===bt){ve=!0;break}if(!ve)throw new ee}return ce}decodeEnd(o,a){return xt.findGuardPattern(o,a,!1,xt.START_END_PATTERN,new Int32Array(xt.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return xt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let a=o.length;if(a===0)return!1;let c=parseInt(o.charAt(a-1),10);return xt.getStandardUPCEANChecksum(o.substring(0,a-1))===c}static getStandardUPCEANChecksum(o){let a=o.length,c=0;for(let d=a-1;d>=0;d-=2){let h=o.charAt(d).charCodeAt(0)-48;if(h<0||h>9)throw new M;c+=h}c*=3;for(let d=a-2;d>=0;d-=2){let h=o.charAt(d).charCodeAt(0)-48;if(h<0||h>9)throw new M;c+=h}return(1e3-c)%10}}class ui extends xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,a,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=o.getSize(),g=a[1],y=0;for(let b=0;b<6&&g<h;b++){let R=xt.decodeDigit(o,d,g,xt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+R%10);for(let B of d)g+=B;R>=10&&(y|=1<<5-b)}c=ui.determineFirstDigit(c,y),g=xt.findGuardPattern(o,g,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<6&&g<h;b++){let R=xt.decodeDigit(o,d,g,xt.L_PATTERNS);c+=String.fromCharCode(48+R);for(let B of d)g+=B}return{rowOffset:g,resultString:c}}getBarcodeFormat(){return Oe.EAN_13}static determineFirstDigit(o,a){for(let c=0;c<10;c++)if(a===this.FIRST_DIGIT_ENCODINGS[c])return o=String.fromCharCode(48+c)+o,o;throw new ee}}ui.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Uc extends xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,a,c){const d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=o.getSize(),g=a[1];for(let _=0;_<4&&g<h;_++){let b=xt.decodeDigit(o,d,g,xt.L_PATTERNS);c+=String.fromCharCode(48+b);for(let R of d)g+=R}g=xt.findGuardPattern(o,g,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&g<h;_++){let b=xt.decodeDigit(o,d,g,xt.L_PATTERNS);c+=String.fromCharCode(48+b);for(let R of d)g+=R}return{rowOffset:g,resultString:c}}getBarcodeFormat(){return Oe.EAN_8}}class Fi extends xt{constructor(){super(...arguments),this.ean13Reader=new ui}getBarcodeFormat(){return Oe.UPC_A}decode(o,a){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,a,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,a,c))}decodeMiddle(o,a,c){return this.ean13Reader.decodeMiddle(o,a,c)}maybeReturnResult(o){let a=o.getText();if(a.charAt(0)==="0"){let c=new _t(a.substring(1),null,null,o.getResultPoints(),Oe.UPC_A);return o.getResultMetadata()!=null&&c.putAllMetadata(o.getResultMetadata()),c}else throw new ee}reset(){this.ean13Reader.reset()}}class as extends xt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,a,c){const d=this.decodeMiddleCounters.map(b=>b);d[0]=0,d[1]=0,d[2]=0,d[3]=0;const h=o.getSize();let g=a[1],y=0;for(let b=0;b<6&&g<h;b++){const R=as.decodeDigit(o,d,g,as.L_AND_G_PATTERNS);c+=String.fromCharCode(48+R%10);for(let B of d)g+=B;R>=10&&(y|=1<<5-b)}let _=as.determineNumSysAndCheckDigit(c,y);return{rowOffset:g,resultString:_}}decodeEnd(o,a){return as.findGuardPatternWithoutCounters(o,a,!0,as.MIDDLE_END_PATTERN)}checkChecksum(o){return xt.checkChecksum(as.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,a){for(let c=0;c<=1;c++)for(let d=0;d<10;d++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][d]){let h=String.fromCharCode(48+c),g=String.fromCharCode(48+d);return h+o+g}throw ee.getNotFoundInstance()}getBarcodeFormat(){return Oe.UPC_E}static convertUPCEtoUPCA(o){const a=o.slice(1,7).split("").map(h=>h.charCodeAt(0)),c=new z;c.append(o.charAt(0));let d=a[5];switch(d){case 0:case 1:case 2:c.appendChars(a,0,2),c.append(d),c.append("0000"),c.appendChars(a,2,3);break;case 3:c.appendChars(a,0,3),c.append("00000"),c.appendChars(a,3,2);break;case 4:c.appendChars(a,0,4),c.append("00000"),c.append(a[4]);break;default:c.appendChars(a,0,5),c.append("0000"),c.append(d);break}return o.length>=8&&c.append(o.charAt(7)),c.toString()}}as.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),as.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class aa extends Xt{constructor(o){super();let a=o==null?null:o.get(Y.POSSIBLE_FORMATS),c=[];r(a)?(c.push(new ui),c.push(new Fi),c.push(new Uc),c.push(new as)):(a.indexOf(Oe.EAN_13)>-1&&c.push(new ui),a.indexOf(Oe.UPC_A)>-1&&c.push(new Fi),a.indexOf(Oe.EAN_8)>-1&&c.push(new Uc),a.indexOf(Oe.UPC_E)>-1&&c.push(new as)),this.readers=c}decodeRow(o,a,c){for(let d of this.readers)try{const h=d.decodeRow(o,a,c),g=h.getBarcodeFormat()===Oe.EAN_13&&h.getText().charAt(0)==="0",y=c==null?null:c.get(Y.POSSIBLE_FORMATS),_=y==null||y.includes(Oe.UPC_A);if(g&&_){const b=h.getRawBytes(),R=new _t(h.getText().substring(1),b,b?b.length:null,h.getResultPoints(),Oe.UPC_A);return R.putAllMetadata(h.getResultMetadata()),R}return h}catch{}throw new ee}reset(){for(let o of this.readers)o.reset()}}class er extends Xt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,a){for(let c=0;c<a.length;c++)if(Xt.patternMatchVariance(o,a[c],er.MAX_INDIVIDUAL_VARIANCE)<er.MAX_AVG_VARIANCE)return c;throw new ee}static count(o){return ct.sum(new Int32Array(o))}static increment(o,a){let c=0,d=a[0];for(let h=1;h<o.length;h++)a[h]>d&&(d=a[h],c=h);o[c]++}static decrement(o,a){let c=0,d=a[0];for(let h=1;h<o.length;h++)a[h]<d&&(d=a[h],c=h);o[c]--}static isFinderPattern(o){let a=o[0]+o[1],c=a+o[2]+o[3],d=a/c;if(d>=er.MIN_FINDER_PATTERN_RATIO&&d<=er.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of o)y>g&&(g=y),y<h&&(h=y);return g<10*h}return!1}}er.MAX_AVG_VARIANCE=.2,er.MAX_INDIVIDUAL_VARIANCE=.45,er.MIN_FINDER_PATTERN_RATIO=9.5/12,er.MAX_FINDER_PATTERN_RATIO=12.5/14;class qs{constructor(o,a){this.value=o,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof qs))return!1;const a=o;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Nl{constructor(o,a,c,d,h){this.value=o,this.startEnd=a,this.value=o,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new je(c,h)),this.resultPoints.push(new je(d,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof Nl))return!1;const a=o;return this.value===a.value}hashCode(){return this.value}}class nn{constructor(){}static getRSSvalue(o,a,c){let d=0;for(let _ of o)d+=_;let h=0,g=0,y=o.length;for(let _=0;_<y-1;_++){let b;for(b=1,g|=1<<_;b<o[_];b++,g&=~(1<<_)){let R=nn.combins(d-b-1,y-_-2);if(c&&g===0&&d-b-(y-_-1)>=y-_-1&&(R-=nn.combins(d-b-(y-_),y-_-2)),y-_-1>1){let B=0;for(let U=d-b-(y-_-2);U>a;U--)B+=nn.combins(d-b-U-1,y-_-3);R-=B*(y-1-_)}else d-b>a&&R--;h+=R}d-=b}return h}static combins(o,a){let c,d;o-a>a?(d=a,c=o-a):(d=o-a,c=a);let h=1,g=1;for(let y=o;y>c;y--)h*=y,g<=d&&(h/=g,g++);for(;g<=d;)h/=g,g++;return h}}class _0{static buildBitArray(o){let a=o.length*2-1;o[o.length-1].getRightChar()==null&&(a-=1);let c=12*a,d=new V(c),h=0,y=o[0].getRightChar().getValue();for(let _=11;_>=0;--_)y&1<<_&&d.set(h),h++;for(let _=1;_<o.length;++_){let b=o[_],R=b.getLeftChar().getValue();for(let B=11;B>=0;--B)R&1<<B&&d.set(h),h++;if(b.getRightChar()!=null){let B=b.getRightChar().getValue();for(let U=11;U>=0;--U)B&1<<U&&d.set(h),h++}}return d}}class Es{constructor(o,a){a?this.decodedInformation=null:(this.finished=o,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ao{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class kr extends Ao{constructor(o,a){super(o),this.value=a}getValue(){return this.value}isFNC1(){return this.value===kr.FNC1}}kr.FNC1="$";class To extends Ao{constructor(o,a,c){super(o),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class tr extends Ao{constructor(o,a,c){if(super(o),a<0||a>10||c<0||c>10)throw new M;this.firstDigit=a,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===tr.FNC1}isSecondDigitFNC1(){return this.secondDigit===tr.FNC1}isAnyFNC1(){return this.firstDigit===tr.FNC1||this.secondDigit===tr.FNC1}}tr.FNC1=10;class De{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new ee;let a=o.substring(0,2);for(let h of De.TWO_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===De.VARIABLE_LENGTH?De.processVariableAI(2,h[2],o):De.processFixedAI(2,h[1],o);if(o.length<3)throw new ee;let c=o.substring(0,3);for(let h of De.THREE_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===De.VARIABLE_LENGTH?De.processVariableAI(3,h[2],o):De.processFixedAI(3,h[1],o);for(let h of De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,h[2],o):De.processFixedAI(4,h[1],o);if(o.length<4)throw new ee;let d=o.substring(0,4);for(let h of De.FOUR_DIGIT_DATA_LENGTH)if(h[0]===d)return h[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,h[2],o):De.processFixedAI(4,h[1],o);throw new ee}static processFixedAI(o,a,c){if(c.length<o)throw new ee;let d=c.substring(0,o);if(c.length<o+a)throw new ee;let h=c.substring(o,o+a),g=c.substring(o+a),y="("+d+")"+h,_=De.parseFieldsInGeneralPurpose(g);return _==null?y:y+_}static processVariableAI(o,a,c){let d=c.substring(0,o),h;c.length<o+a?h=c.length:h=o+a;let g=c.substring(o,h),y=c.substring(h),_="("+d+")"+g,b=De.parseFieldsInGeneralPurpose(y);return b==null?_:_+b}}De.VARIABLE_LENGTH=[],De.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",De.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",De.VARIABLE_LENGTH,20],["22",De.VARIABLE_LENGTH,29],["30",De.VARIABLE_LENGTH,8],["37",De.VARIABLE_LENGTH,8],["90",De.VARIABLE_LENGTH,30],["91",De.VARIABLE_LENGTH,30],["92",De.VARIABLE_LENGTH,30],["93",De.VARIABLE_LENGTH,30],["94",De.VARIABLE_LENGTH,30],["95",De.VARIABLE_LENGTH,30],["96",De.VARIABLE_LENGTH,30],["97",De.VARIABLE_LENGTH,3],["98",De.VARIABLE_LENGTH,30],["99",De.VARIABLE_LENGTH,30]],De.THREE_DIGIT_DATA_LENGTH=[["240",De.VARIABLE_LENGTH,30],["241",De.VARIABLE_LENGTH,30],["242",De.VARIABLE_LENGTH,6],["250",De.VARIABLE_LENGTH,30],["251",De.VARIABLE_LENGTH,30],["253",De.VARIABLE_LENGTH,17],["254",De.VARIABLE_LENGTH,20],["400",De.VARIABLE_LENGTH,30],["401",De.VARIABLE_LENGTH,30],["402",17],["403",De.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",De.VARIABLE_LENGTH,20],["421",De.VARIABLE_LENGTH,15],["422",3],["423",De.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",De.VARIABLE_LENGTH,15],["391",De.VARIABLE_LENGTH,18],["392",De.VARIABLE_LENGTH,15],["393",De.VARIABLE_LENGTH,18],["703",De.VARIABLE_LENGTH,30]],De.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",De.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",De.VARIABLE_LENGTH,20],["8003",De.VARIABLE_LENGTH,30],["8004",De.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",De.VARIABLE_LENGTH,30],["8008",De.VARIABLE_LENGTH,12],["8018",18],["8020",De.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",De.VARIABLE_LENGTH,70],["8200",De.VARIABLE_LENGTH,70]];class la{constructor(o){this.buffer=new z,this.information=o}decodeAllCodes(o,a){let c=a,d=null;do{let h=this.decodeGeneralPurposeField(c,d),g=De.parseFieldsInGeneralPurpose(h.getNewString());if(g!=null&&o.append(g),h.isRemaining()?d=""+h.getRemainingValue():d=null,c===h.getNewPosition())break;c=h.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let a=o;a<o+3;++a)if(this.information.get(a))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(o,4);return h===0?new tr(this.information.getSize(),tr.FNC1,tr.FNC1):new tr(this.information.getSize(),h-1,tr.FNC1)}let a=this.extractNumericValueFromBitArray(o,7),c=(a-8)/11,d=(a-8)%11;return new tr(o+7,c,d)}extractNumericValueFromBitArray(o,a){return la.extractNumericValueFromBitArray(this.information,o,a)}static extractNumericValueFromBitArray(o,a,c){let d=0;for(let h=0;h<c;++h)o.get(a+h)&&(d|=1<<c-h-1);return d}decodeGeneralPurposeField(o,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(o);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new To(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new To(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,a;do{let c=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),o=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),o=a.isFinished()):(a=this.parseNumericBlock(),o=a.isFinished()),!(c!==this.current.getPosition())&&!o)break}while(!o);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let a;return o.isSecondDigitFNC1()?a=new To(this.current.getPosition(),this.buffer.toString()):a=new To(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new Es(!0,a)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let a=new To(this.current.getPosition(),this.buffer.toString());return new Es(!0,a)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Es(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let a=new To(this.current.getPosition(),this.buffer.toString());return new Es(!0,a)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Es(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let a=new To(this.current.getPosition(),this.buffer.toString());return new Es(!0,a)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Es(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(o,5);if(a>=5&&a<16)return!0;if(o+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,7);if(c>=64&&c<116)return!0;if(o+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(o,8);return d>=232&&d<253}decodeIsoIec646(o){let a=this.extractNumericValueFromBitArray(o,5);if(a===15)return new kr(o+5,kr.FNC1);if(a>=5&&a<15)return new kr(o+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(o,7);if(c>=64&&c<90)return new kr(o+7,""+(c+1));if(c>=90&&c<116)return new kr(o+7,""+(c+7));let d=this.extractNumericValueFromBitArray(o,8),h;switch(d){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new M}return new kr(o+8,h)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(o,5);if(a>=5&&a<16)return!0;if(o+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,6);return c>=16&&c<63}decodeAlphanumeric(o){let a=this.extractNumericValueFromBitArray(o,5);if(a===15)return new kr(o+5,kr.FNC1);if(a>=5&&a<15)return new kr(o+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(o,6);if(c>=32&&c<58)return new kr(o+6,""+(c+33));let d;switch(c){case 58:d="*";break;case 59:d=",";break;case 60:d="-";break;case 61:d=".";break;case 62:d="/";break;default:throw new ur("Decoding invalid alphanumeric value: "+c)}return new kr(o+6,d)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let a=0;a<5&&a+o<this.information.getSize();++a)if(a===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+a))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let a=o;a<o+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let a=0;a<4&&a+o<this.information.getSize();++a)if(this.information.get(o+a))return!1;return!0}}class ca{constructor(o){this.information=o,this.generalDecoder=new la(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class xr extends ca{constructor(o){super(o)}encodeCompressedGtin(o,a){o.append("(01)");let c=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,a,c)}encodeCompressedGtinWithoutAI(o,a,c){for(let d=0;d<4;++d){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*d,10);h/100===0&&o.append("0"),h/10===0&&o.append("0"),o.append(h)}xr.appendCheckDigit(o,c)}static appendCheckDigit(o,a){let c=0;for(let d=0;d<13;d++){let h=o.charAt(d+a).charCodeAt(0)-48;c+=d&1?h:3*h}c=10-c%10,c===10&&(c=0),o.append(c)}}xr.GTIN_SIZE=40;class ji extends xr{constructor(o){super(o)}parseInformation(){let o=new z;o.append("(01)");let a=o.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(ji.HEADER_SIZE,4);return o.append(c),this.encodeCompressedGtinWithoutAI(o,ji.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(o,ji.HEADER_SIZE+44)}}ji.HEADER_SIZE=4;class Io extends ca{constructor(o){super(o)}parseInformation(){let o=new z;return this.getGeneralDecoder().decodeAllCodes(o,Io.HEADER_SIZE)}}Io.HEADER_SIZE=5;class bs extends xr{constructor(o){super(o)}encodeCompressedWeight(o,a,c){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(a,c);this.addWeightCode(o,d);let h=this.checkWeight(d),g=1e5;for(let y=0;y<5;++y)h/g===0&&o.append("0"),g/=10;o.append(h)}}class Cs extends bs{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=Cs.HEADER_SIZE+bs.GTIN_SIZE+Cs.WEIGHT_SIZE)throw new ee;let o=new z;return this.encodeCompressedGtin(o,Cs.HEADER_SIZE),this.encodeCompressedWeight(o,Cs.HEADER_SIZE+bs.GTIN_SIZE,Cs.WEIGHT_SIZE),o.toString()}}Cs.HEADER_SIZE=5,Cs.WEIGHT_SIZE=15;class E0 extends Cs{constructor(o){super(o)}addWeightCode(o,a){o.append("(3103)")}checkWeight(o){return o}}class Md extends Cs{constructor(o){super(o)}addWeightCode(o,a){a<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class ls extends xr{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<ls.HEADER_SIZE+xr.GTIN_SIZE)throw new ee;let o=new z;this.encodeCompressedGtin(o,ls.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(ls.HEADER_SIZE+xr.GTIN_SIZE,ls.LAST_DIGIT_SIZE);o.append("(392"),o.append(a),o.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(ls.HEADER_SIZE+xr.GTIN_SIZE+ls.LAST_DIGIT_SIZE,null);return o.append(c.getNewString()),o.toString()}}ls.HEADER_SIZE=8,ls.LAST_DIGIT_SIZE=2;class dr extends xr{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<dr.HEADER_SIZE+xr.GTIN_SIZE)throw new ee;let o=new z;this.encodeCompressedGtin(o,dr.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(dr.HEADER_SIZE+xr.GTIN_SIZE,dr.LAST_DIGIT_SIZE);o.append("(393"),o.append(a),o.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(dr.HEADER_SIZE+xr.GTIN_SIZE+dr.LAST_DIGIT_SIZE,dr.FIRST_THREE_DIGITS_SIZE);c/100==0&&o.append("0"),c/10==0&&o.append("0"),o.append(c);let d=this.getGeneralDecoder().decodeGeneralPurposeField(dr.HEADER_SIZE+xr.GTIN_SIZE+dr.LAST_DIGIT_SIZE+dr.FIRST_THREE_DIGITS_SIZE,null);return o.append(d.getNewString()),o.toString()}}dr.HEADER_SIZE=8,dr.LAST_DIGIT_SIZE=2,dr.FIRST_THREE_DIGITS_SIZE=10;class Yt extends bs{constructor(o,a,c){super(o),this.dateCode=c,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=Yt.HEADER_SIZE+Yt.GTIN_SIZE+Yt.WEIGHT_SIZE+Yt.DATE_SIZE)throw new ee;let o=new z;return this.encodeCompressedGtin(o,Yt.HEADER_SIZE),this.encodeCompressedWeight(o,Yt.HEADER_SIZE+Yt.GTIN_SIZE,Yt.WEIGHT_SIZE),this.encodeCompressedDate(o,Yt.HEADER_SIZE+Yt.GTIN_SIZE+Yt.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(a,Yt.DATE_SIZE);if(c==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let d=c%32;c/=32;let h=c%12+1;c/=12;let g=c;g/10==0&&o.append("0"),o.append(g),h/10==0&&o.append("0"),o.append(h),d/10==0&&o.append("0"),o.append(d)}addWeightCode(o,a){o.append("("),o.append(this.firstAIdigits),o.append(a/1e5),o.append(")")}checkWeight(o){return o%1e5}}Yt.HEADER_SIZE=8,Yt.WEIGHT_SIZE=20,Yt.DATE_SIZE=16;function b0(F){try{if(F.get(1))return new ji(F);if(!F.get(2))return new Io(F);switch(la.extractNumericValueFromBitArray(F,1,4)){case 4:return new E0(F);case 5:return new Md(F)}switch(la.extractNumericValueFromBitArray(F,1,5)){case 12:return new ls(F);case 13:return new dr(F)}switch(la.extractNumericValueFromBitArray(F,1,7)){case 56:return new Yt(F,"310","11");case 57:return new Yt(F,"320","11");case 58:return new Yt(F,"310","13");case 59:return new Yt(F,"320","13");case 60:return new Yt(F,"310","15");case 61:return new Yt(F,"320","15");case 62:return new Yt(F,"310","17");case 63:return new Yt(F,"320","17")}}catch(o){throw console.log(o),new ur("unknown decoder: "+F)}}class As{constructor(o,a,c,d){this.leftchar=o,this.rightchar=a,this.finderpattern=c,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,a){return o instanceof As?As.equalsOrNull(o.leftchar,a.leftchar)&&As.equalsOrNull(o.rightchar,a.rightchar)&&As.equalsOrNull(o.finderpattern,a.finderpattern):!1}static equalsOrNull(o,a){return o===null?a===null:As.equals(o,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class zc{constructor(o,a,c){this.pairs=o,this.rowNumber=a,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,a){return o instanceof zc?this.checkEqualitity(o,a)&&o.wasReversed===a.wasReversed:!1}checkEqualitity(o,a){if(!o||!a)return;let c;return o.forEach((d,h)=>{a.forEach(g=>{d.getLeftChar().getValue()===g.getLeftChar().getValue()&&d.getRightChar().getValue()===g.getRightChar().getValue()&&d.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(c=!0)})}),c}}class me extends er{constructor(o){super(...arguments),this.pairs=new Array(me.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,a,c){this.pairs.length=0,this.startFromEven=!1;try{return me.constructResult(this.decodeRow2pairs(o,a))}catch(d){this.verbose&&console.log(d)}return this.pairs.length=0,this.startFromEven=!0,me.constructResult(this.decodeRow2pairs(o,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,a){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,o))}catch(h){if(h instanceof ee){if(!this.pairs.length)throw new ee;c=!0}}if(this.checkChecksum())return this.pairs;let d;if(this.rows.length?d=!0:d=!1,this.storeRow(o,!1),d){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new ee}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return o&&(this.rows=this.rows.reverse()),a}checkRows(o,a){for(let c=a;c<this.rows.length;c++){let d=this.rows[c];this.pairs.length=0;for(let g of o)this.pairs.push(g.getPairs());if(this.pairs.push(d.getPairs()),!me.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(o);h.push(d);try{return this.checkRows(h,c+1)}catch(g){this.verbose&&console.log(g)}}throw new ee}static isValidSequence(o){for(let a of me.FINDER_PATTERN_SEQUENCES){if(o.length>a.length)continue;let c=!0;for(let d=0;d<o.length;d++)if(o[d].getFinderPattern().getValue()!=a[d]){c=!1;break}if(c)return!0}return!1}storeRow(o,a){let c=0,d=!1,h=!1;for(;c<this.rows.length;){let g=this.rows[c];if(g.getRowNumber()>o){h=g.isEquivalent(this.pairs);break}d=g.isEquivalent(this.pairs),c++}h||d||me.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new zc(this.pairs,o,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,a){for(let c of a)if(c.getPairs().length!==o.length){for(let d of c.getPairs())for(let h of o)if(As.equals(d,h))break}}static isPartialRow(o,a){for(let c of a){let d=!0;for(let h of o){let g=!1;for(let y of c.getPairs())if(h.equals(y)){g=!0;break}if(!g){d=!1;break}}if(d)return!0}return!1}getRows(){return this.rows}static constructResult(o){let a=_0.buildBitArray(o),d=b0(a).parseInformation(),h=o[0].getFinderPattern().getResultPoints(),g=o[o.length-1].getFinderPattern().getResultPoints(),y=[h[0],h[1],g[0],g[1]];return new _t(d,null,null,y,Oe.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),a=o.getLeftChar(),c=o.getRightChar();if(c==null)return!1;let d=c.getChecksumPortion(),h=2;for(let y=1;y<this.pairs.size();++y){let _=this.pairs.get(y);d+=_.getLeftChar().getChecksumPortion(),h++;let b=_.getRightChar();b!=null&&(d+=b.getChecksumPortion(),h++)}return d%=211,211*(h-4)+d==a.getValue()}static getNextSecondBar(o,a){let c;return o.get(a)?(c=o.getNextUnset(a),c=o.getNextSet(c)):(c=o.getNextSet(a),c=o.getNextUnset(c)),c}retrieveNextPair(o,a,c){let d=a.length%2==0;this.startFromEven&&(d=!d);let h,g=!0,y=-1;do this.findNextPair(o,a,y),h=this.parseFoundFinderPattern(o,c,d),h==null?y=me.getNextSecondBar(o,this.startEnd[0]):g=!1;while(g);let _=this.decodeDataCharacter(o,h,d,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new ee;let b;try{b=this.decodeDataCharacter(o,h,d,!1)}catch(R){b=null,this.verbose&&console.log(R)}return new As(_,b,h,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,a,c){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=o.getSize(),g;c>=0?g=c:this.isEmptyPair(a)?g=0:g=a[a.length-1].getFinderPattern().getStartEnd()[1];let y=a.length%2!=0;this.startFromEven&&(y=!y);let _=!1;for(;g<h&&(_=!o.get(g),!!_);)g++;let b=0,R=g;for(let B=g;B<h;B++)if(o.get(B)!=_)d[b]++;else{if(b==3){if(y&&me.reverseCounters(d),me.isFinderPattern(d)){this.startEnd[0]=R,this.startEnd[1]=B;return}y&&me.reverseCounters(d),R+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,b--}else b++;d[b]=1,_=!_}throw new ee}static reverseCounters(o){let a=o.length;for(let c=0;c<a/2;++c){let d=o[c];o[c]=o[a-c-1],o[a-c-1]=d}}parseFoundFinderPattern(o,a,c){let d,h,g;if(c){let b=this.startEnd[0]-1;for(;b>=0&&!o.get(b);)b--;b++,d=this.startEnd[0]-b,h=b,g=this.startEnd[1]}else h=this.startEnd[0],g=o.getNextUnset(this.startEnd[1]+1),d=g-this.startEnd[1];let y=this.getDecodeFinderCounters();C.arraycopy(y,0,y,1,y.length-1),y[0]=d;let _;try{_=this.parseFinderValue(y,me.FINDER_PATTERNS)}catch{return null}return new Nl(_,[h,g],h,g,a)}decodeDataCharacter(o,a,c,d){let h=this.getDataCharacterCounters();for(let Qt=0;Qt<h.length;Qt++)h[Qt]=0;if(d)me.recordPatternInReverse(o,a.getStartEnd()[0],h);else{me.recordPattern(o,a.getStartEnd()[1],h);for(let Qt=0,vr=h.length-1;Qt<vr;Qt++,vr--){let Ss=h[Qt];h[Qt]=h[vr],h[vr]=Ss}}let g=17,y=ct.sum(new Int32Array(h))/g,_=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(y-_)/_>.3)throw new ee;let b=this.getOddCounts(),R=this.getEvenCounts(),B=this.getOddRoundingErrors(),U=this.getEvenRoundingErrors();for(let Qt=0;Qt<h.length;Qt++){let vr=1*h[Qt]/y,Ss=vr+.5;if(Ss<1){if(vr<.3)throw new ee;Ss=1}else if(Ss>8){if(vr>8.7)throw new ee;Ss=8}let $c=Qt/2;Qt&1?(R[$c]=Ss,U[$c]=vr-Ss):(b[$c]=Ss,B[$c]=vr-Ss)}this.adjustOddEvenCounts(g);let K=4*a.getValue()+(c?0:2)+(d?0:1)-1,Z=0,J=0;for(let Qt=b.length-1;Qt>=0;Qt--){if(me.isNotA1left(a,c,d)){let vr=me.WEIGHTS[K][2*Qt];J+=b[Qt]*vr}Z+=b[Qt]}let se=0;for(let Qt=R.length-1;Qt>=0;Qt--)if(me.isNotA1left(a,c,d)){let vr=me.WEIGHTS[K][2*Qt+1];se+=R[Qt]*vr}let ce=J+se;if(Z&1||Z>13||Z<4)throw new ee;let be=(13-Z)/2,Ce=me.SYMBOL_WIDEST[be],ve=9-Ce,bt=nn.getRSSvalue(b,Ce,!0),ut=nn.getRSSvalue(R,ve,!1),ds=me.EVEN_TOTAL_SUBSET[be],gi=me.GSUM[be],hs=bt*ds+ut+gi;return new qs(hs,ce)}static isNotA1left(o,a,c){return!(o.getValue()==0&&a&&c)}adjustOddEvenCounts(o){let a=ct.sum(new Int32Array(this.getOddCounts())),c=ct.sum(new Int32Array(this.getEvenCounts())),d=!1,h=!1;a>13?h=!0:a<4&&(d=!0);let g=!1,y=!1;c>13?y=!0:c<4&&(g=!0);let _=a+c-o,b=(a&1)==1,R=(c&1)==0;if(_==1)if(b){if(R)throw new ee;h=!0}else{if(!R)throw new ee;y=!0}else if(_==-1)if(b){if(R)throw new ee;d=!0}else{if(!R)throw new ee;g=!0}else if(_==0){if(b){if(!R)throw new ee;a<c?(d=!0,y=!0):(h=!0,g=!0)}else if(R)throw new ee}else throw new ee;if(d){if(h)throw new ee;me.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&me.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new ee;me.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&me.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}me.SYMBOL_WIDEST=[7,5,4,3,1],me.EVEN_TOTAL_SUBSET=[4,20,52,104,204],me.GSUM=[0,348,1388,2948,3988],me.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],me.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],me.FINDER_PAT_A=0,me.FINDER_PAT_B=1,me.FINDER_PAT_C=2,me.FINDER_PAT_D=3,me.FINDER_PAT_E=4,me.FINDER_PAT_F=5,me.FINDER_PATTERN_SEQUENCES=[[me.FINDER_PAT_A,me.FINDER_PAT_A],[me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B],[me.FINDER_PAT_A,me.FINDER_PAT_C,me.FINDER_PAT_B,me.FINDER_PAT_D],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_C],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_D,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_D],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_E],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F]],me.MAX_PAIRS=11;class Rl extends qs{constructor(o,a,c){super(o,a),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Bt extends er{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,a,c){const d=this.decodePair(a,!1,o,c);Bt.addOrTally(this.possibleLeftPairs,d),a.reverse();let h=this.decodePair(a,!0,o,c);Bt.addOrTally(this.possibleRightPairs,h),a.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Bt.checkChecksum(g,y))return Bt.constructResult(g,y)}throw new ee}static addOrTally(o,a){if(a==null)return;let c=!1;for(let d of o)if(d.getValue()===a.getValue()){d.incrementCount(),c=!0;break}c||o.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,a){let c=4537077*o.getValue()+a.getValue(),d=new String(c).toString(),h=new z;for(let b=13-d.length;b>0;b--)h.append("0");h.append(d);let g=0;for(let b=0;b<13;b++){let R=h.charAt(b).charCodeAt(0)-48;g+=b&1?R:3*R}g=10-g%10,g===10&&(g=0),h.append(g.toString());let y=o.getFinderPattern().getResultPoints(),_=a.getFinderPattern().getResultPoints();return new _t(h.toString(),null,0,[y[0],y[1],_[0],_[1]],Oe.RSS_14,new Date().getTime())}static checkChecksum(o,a){let c=(o.getChecksumPortion()+16*a.getChecksumPortion())%79,d=9*o.getFinderPattern().getValue()+a.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,c===d}decodePair(o,a,c,d){try{let h=this.findFinderPattern(o,a),g=this.parseFoundFinderPattern(o,c,a,h),y=d==null?null:d.get(Y.NEED_RESULT_POINT_CALLBACK);if(y!=null){let R=(h[0]+h[1])/2;a&&(R=o.getSize()-1-R),y.foundPossibleResultPoint(new je(R,c))}let _=this.decodeDataCharacter(o,g,!0),b=this.decodeDataCharacter(o,g,!1);return new Rl(1597*_.getValue()+b.getValue(),_.getChecksumPortion()+4*b.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(o,a,c){let d=this.getDataCharacterCounters();for(let se=0;se<d.length;se++)d[se]=0;if(c)Xt.recordPatternInReverse(o,a.getStartEnd()[0],d);else{Xt.recordPattern(o,a.getStartEnd()[1]+1,d);for(let se=0,ce=d.length-1;se<ce;se++,ce--){let be=d[se];d[se]=d[ce],d[ce]=be}}let h=c?16:15,g=ct.sum(new Int32Array(d))/h,y=this.getOddCounts(),_=this.getEvenCounts(),b=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let se=0;se<d.length;se++){let ce=d[se]/g,be=Math.floor(ce+.5);be<1?be=1:be>8&&(be=8);let Ce=Math.floor(se/2);se&1?(_[Ce]=be,R[Ce]=ce-be):(y[Ce]=be,b[Ce]=ce-be)}this.adjustOddEvenCounts(c,h);let B=0,U=0;for(let se=y.length-1;se>=0;se--)U*=9,U+=y[se],B+=y[se];let K=0,Z=0;for(let se=_.length-1;se>=0;se--)K*=9,K+=_[se],Z+=_[se];let J=U+3*K;if(c){if(B&1||B>12||B<4)throw new ee;let se=(12-B)/2,ce=Bt.OUTSIDE_ODD_WIDEST[se],be=9-ce,Ce=nn.getRSSvalue(y,ce,!1),ve=nn.getRSSvalue(_,be,!0),bt=Bt.OUTSIDE_EVEN_TOTAL_SUBSET[se],ut=Bt.OUTSIDE_GSUM[se];return new qs(Ce*bt+ve+ut,J)}else{if(Z&1||Z>10||Z<4)throw new ee;let se=(10-Z)/2,ce=Bt.INSIDE_ODD_WIDEST[se],be=9-ce,Ce=nn.getRSSvalue(y,ce,!0),ve=nn.getRSSvalue(_,be,!1),bt=Bt.INSIDE_ODD_TOTAL_SUBSET[se],ut=Bt.INSIDE_GSUM[se];return new qs(ve*bt+Ce+ut,J)}}findFinderPattern(o,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=o.getSize(),h=!1,g=0;for(;g<d&&(h=!o.get(g),a!==h);)g++;let y=0,_=g;for(let b=g;b<d;b++)if(o.get(b)!==h)c[y]++;else{if(y===3){if(er.isFinderPattern(c))return[_,b];_+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,y--}else y++;c[y]=1,h=!h}throw new ee}parseFoundFinderPattern(o,a,c,d){let h=o.get(d[0]),g=d[0]-1;for(;g>=0&&h!==o.get(g);)g--;g++;const y=d[0]-g,_=this.getDecodeFinderCounters(),b=new Int32Array(_.length);C.arraycopy(_,0,b,1,_.length-1),b[0]=y;const R=this.parseFinderValue(b,Bt.FINDER_PATTERNS);let B=g,U=d[1];return c&&(B=o.getSize()-1-B,U=o.getSize()-1-U),new Nl(R,[g,d[1]],B,U,a)}adjustOddEvenCounts(o,a){let c=ct.sum(new Int32Array(this.getOddCounts())),d=ct.sum(new Int32Array(this.getEvenCounts())),h=!1,g=!1,y=!1,_=!1;o?(c>12?g=!0:c<4&&(h=!0),d>12?_=!0:d<4&&(y=!0)):(c>11?g=!0:c<5&&(h=!0),d>10?_=!0:d<4&&(y=!0));let b=c+d-a,R=(c&1)===(o?1:0),B=(d&1)===1;if(b===1)if(R){if(B)throw new ee;g=!0}else{if(!B)throw new ee;_=!0}else if(b===-1)if(R){if(B)throw new ee;h=!0}else{if(!B)throw new ee;y=!0}else if(b===0){if(R){if(!B)throw new ee;c<d?(h=!0,_=!0):(g=!0,y=!0)}else if(B)throw new ee}else throw new ee;if(h){if(g)throw new ee;er.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&er.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(_)throw new ee;er.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&er.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Bt.OUTSIDE_GSUM=[0,161,961,2015,2715],Bt.INSIDE_GSUM=[0,336,1036,1516],Bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Bt.INSIDE_ODD_WIDEST=[2,4,6,8],Bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Bi extends Xt{constructor(o,a){super(),this.readers=[],this.verbose=a===!0;const c=o?o.get(Y.POSSIBLE_FORMATS):null,d=o&&o.get(Y.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(Oe.EAN_13)||c.includes(Oe.UPC_A)||c.includes(Oe.EAN_8)||c.includes(Oe.UPC_E))&&this.readers.push(new aa(o)),c.includes(Oe.CODE_39)&&this.readers.push(new an(d)),c.includes(Oe.CODE_128)&&this.readers.push(new Ae),c.includes(Oe.ITF)&&this.readers.push(new Ft),c.includes(Oe.RSS_14)&&this.readers.push(new Bt),c.includes(Oe.RSS_EXPANDED)&&this.readers.push(new me(this.verbose))):(this.readers.push(new aa(o)),this.readers.push(new an),this.readers.push(new aa(o)),this.readers.push(new Ae),this.readers.push(new Ft),this.readers.push(new Bt),this.readers.push(new me(this.verbose)))}decodeRow(o,a,c){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(o,a,c)}catch{}throw new ee}reset(){this.readers.forEach(o=>o.reset())}}class Ap extends at{constructor(o=500,a){super(new Bi(a),o,a)}}class Ot{constructor(o,a,c){this.ecCodewords=o,this.ecBlocks=[a],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Nt{constructor(o,a){this.count=o,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class yt{constructor(o,a,c,d,h,g){this.versionNumber=o,this.symbolSizeRows=a,this.symbolSizeColumns=c,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=h,this.ecBlocks=g;let y=0;const _=g.getECCodewords(),b=g.getECBlocks();for(let R of b)y+=R.getCount()*(R.getDataCodewords()+_);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,a){if(o&1||a&1)throw new M;for(let c of yt.VERSIONS)if(c.symbolSizeRows===o&&c.symbolSizeColumns===a)return c;throw new M}toString(){return""+this.versionNumber}static buildVersions(){return[new yt(1,10,10,8,8,new Ot(5,new Nt(1,3))),new yt(2,12,12,10,10,new Ot(7,new Nt(1,5))),new yt(3,14,14,12,12,new Ot(10,new Nt(1,8))),new yt(4,16,16,14,14,new Ot(12,new Nt(1,12))),new yt(5,18,18,16,16,new Ot(14,new Nt(1,18))),new yt(6,20,20,18,18,new Ot(18,new Nt(1,22))),new yt(7,22,22,20,20,new Ot(20,new Nt(1,30))),new yt(8,24,24,22,22,new Ot(24,new Nt(1,36))),new yt(9,26,26,24,24,new Ot(28,new Nt(1,44))),new yt(10,32,32,14,14,new Ot(36,new Nt(1,62))),new yt(11,36,36,16,16,new Ot(42,new Nt(1,86))),new yt(12,40,40,18,18,new Ot(48,new Nt(1,114))),new yt(13,44,44,20,20,new Ot(56,new Nt(1,144))),new yt(14,48,48,22,22,new Ot(68,new Nt(1,174))),new yt(15,52,52,24,24,new Ot(42,new Nt(2,102))),new yt(16,64,64,14,14,new Ot(56,new Nt(2,140))),new yt(17,72,72,16,16,new Ot(36,new Nt(4,92))),new yt(18,80,80,18,18,new Ot(48,new Nt(4,114))),new yt(19,88,88,20,20,new Ot(56,new Nt(4,144))),new yt(20,96,96,22,22,new Ot(68,new Nt(4,174))),new yt(21,104,104,24,24,new Ot(56,new Nt(6,136))),new yt(22,120,120,18,18,new Ot(68,new Nt(6,175))),new yt(23,132,132,20,20,new Ot(62,new Nt(8,163))),new yt(24,144,144,22,22,new Ot(62,new Nt(8,156),new Nt(2,155))),new yt(25,8,18,6,16,new Ot(7,new Nt(1,5))),new yt(26,8,32,6,14,new Ot(11,new Nt(1,10))),new yt(27,12,26,10,24,new Ot(14,new Nt(1,16))),new yt(28,12,36,10,16,new Ot(18,new Nt(1,22))),new yt(29,16,36,14,16,new Ot(24,new Nt(1,32))),new yt(30,16,48,14,22,new Ot(28,new Nt(1,49)))]}}yt.VERSIONS=yt.buildVersions();class kl{constructor(o){const a=o.getHeight();if(a<8||a>144||a&1)throw new M;this.version=kl.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new de(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const a=o.getHeight(),c=o.getWidth();return yt.getVersionForDimensions(a,c)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let a=0,c=4,d=0;const h=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,_=!1,b=!1,R=!1;do if(c===h&&d===0&&!y)o[a++]=this.readCorner1(h,g)&255,c-=2,d+=2,y=!0;else if(c===h-2&&d===0&&g&3&&!_)o[a++]=this.readCorner2(h,g)&255,c-=2,d+=2,_=!0;else if(c===h+4&&d===2&&!(g&7)&&!b)o[a++]=this.readCorner3(h,g)&255,c-=2,d+=2,b=!0;else if(c===h-2&&d===0&&(g&7)===4&&!R)o[a++]=this.readCorner4(h,g)&255,c-=2,d+=2,R=!0;else{do c<h&&d>=0&&!this.readMappingMatrix.get(d,c)&&(o[a++]=this.readUtah(c,d,h,g)&255),c-=2,d+=2;while(c>=0&&d<g);c+=1,d+=3;do c>=0&&d<g&&!this.readMappingMatrix.get(d,c)&&(o[a++]=this.readUtah(c,d,h,g)&255),c+=2,d-=2;while(c<h&&d>=0);c+=3,d+=1}while(c<h||d<g);if(a!==this.version.getTotalCodewords())throw new M;return o}readModule(o,a,c,d){return o<0&&(o+=c,a+=4-(c+4&7)),a<0&&(a+=d,o+=4-(d+4&7)),this.readMappingMatrix.set(a,o),this.mappingBitMatrix.get(a,o)}readUtah(o,a,c,d){let h=0;return this.readModule(o-2,a-2,c,d)&&(h|=1),h<<=1,this.readModule(o-2,a-1,c,d)&&(h|=1),h<<=1,this.readModule(o-1,a-2,c,d)&&(h|=1),h<<=1,this.readModule(o-1,a-1,c,d)&&(h|=1),h<<=1,this.readModule(o-1,a,c,d)&&(h|=1),h<<=1,this.readModule(o,a-2,c,d)&&(h|=1),h<<=1,this.readModule(o,a-1,c,d)&&(h|=1),h<<=1,this.readModule(o,a,c,d)&&(h|=1),h}readCorner1(o,a){let c=0;return this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,1,o,a)&&(c|=1),c<<=1,this.readModule(o-1,2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c<<=1,this.readModule(2,a-1,o,a)&&(c|=1),c<<=1,this.readModule(3,a-1,o,a)&&(c|=1),c}readCorner2(o,a){let c=0;return this.readModule(o-3,0,o,a)&&(c|=1),c<<=1,this.readModule(o-2,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(0,a-4,o,a)&&(c|=1),c<<=1,this.readModule(0,a-3,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c}readCorner3(o,a){let c=0;return this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,a-1,o,a)&&(c|=1),c<<=1,this.readModule(0,a-3,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-3,o,a)&&(c|=1),c<<=1,this.readModule(1,a-2,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c}readCorner4(o,a){let c=0;return this.readModule(o-3,0,o,a)&&(c|=1),c<<=1,this.readModule(o-2,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c<<=1,this.readModule(2,a-1,o,a)&&(c|=1),c<<=1,this.readModule(3,a-1,o,a)&&(c|=1),c}extractDataRegion(o){const a=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(o.getHeight()!==a)throw new v("Dimension of bitMatrix must match the version size");const d=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),g=a/d|0,y=c/h|0,_=g*d,b=y*h,R=new de(b,_);for(let B=0;B<g;++B){const U=B*d;for(let K=0;K<y;++K){const Z=K*h;for(let J=0;J<d;++J){const se=B*(d+2)+1+J,ce=U+J;for(let be=0;be<h;++be){const Ce=K*(h+2)+1+be;if(o.get(Ce,se)){const ve=Z+be;R.set(ve,ce)}}}}}return R}}class Pl{constructor(o,a){this.numDataCodewords=o,this.codewords=a}static getDataBlocks(o,a){const c=a.getECBlocks();let d=0;const h=c.getECBlocks();for(let J of h)d+=J.getCount();const g=new Array(d);let y=0;for(let J of h)for(let se=0;se<J.getCount();se++){const ce=J.getDataCodewords(),be=c.getECCodewords()+ce;g[y++]=new Pl(ce,new Uint8Array(be))}const b=g[0].codewords.length-c.getECCodewords(),R=b-1;let B=0;for(let J=0;J<R;J++)for(let se=0;se<y;se++)g[se].codewords[J]=o[B++];const U=a.getVersionNumber()===24,K=U?8:y;for(let J=0;J<K;J++)g[J].codewords[b-1]=o[B++];const Z=g[0].codewords.length;for(let J=b;J<Z;J++)for(let se=0;se<y;se++){const ce=U?(se+8)%y:se,be=U&&ce>7?J-1:J;g[ce].codewords[be]=o[B++]}if(B!==o.length)throw new v;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Hc{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new v(""+o);let a=0,c=this.bitOffset,d=this.byteOffset;const h=this.bytes;if(c>0){const g=8-c,y=o<g?o:g,_=g-y,b=255>>8-y<<_;a=(h[d]&b)>>_,o-=y,c+=y,c===8&&(c=0,d++)}if(o>0){for(;o>=8;)a=a<<8|h[d]&255,d++,o-=8;if(o>0){const g=8-o,y=255>>g<<g;a=a<<o|(h[d]&y)>>g,c+=o}}return this.bitOffset=c,this.byteOffset=d,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Pn;(function(F){F[F.PAD_ENCODE=0]="PAD_ENCODE",F[F.ASCII_ENCODE=1]="ASCII_ENCODE",F[F.C40_ENCODE=2]="C40_ENCODE",F[F.TEXT_ENCODE=3]="TEXT_ENCODE",F[F.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",F[F.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",F[F.BASE256_ENCODE=6]="BASE256_ENCODE"})(Pn||(Pn={}));class Vi{static decode(o){const a=new Hc(o),c=new z,d=new z,h=new Array;let g=Pn.ASCII_ENCODE;do if(g===Pn.ASCII_ENCODE)g=this.decodeAsciiSegment(a,c,d);else{switch(g){case Pn.C40_ENCODE:this.decodeC40Segment(a,c);break;case Pn.TEXT_ENCODE:this.decodeTextSegment(a,c);break;case Pn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,c);break;case Pn.EDIFACT_ENCODE:this.decodeEdifactSegment(a,c);break;case Pn.BASE256_ENCODE:this.decodeBase256Segment(a,c,h);break;default:throw new M}g=Pn.ASCII_ENCODE}while(g!==Pn.PAD_ENCODE&&a.available()>0);return d.length()>0&&c.append(d.toString()),new yn(o,c.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(o,a,c){let d=!1;do{let h=o.readBits(8);if(h===0)throw new M;if(h<=128)return d&&(h+=128),a.append(String.fromCharCode(h-1)),Pn.ASCII_ENCODE;if(h===129)return Pn.PAD_ENCODE;if(h<=229){const g=h-130;g<10&&a.append("0"),a.append(""+g)}else switch(h){case 230:return Pn.C40_ENCODE;case 231:return Pn.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:d=!0;break;case 236:a.append("[)>05"),c.insert(0,"");break;case 237:a.append("[)>06"),c.insert(0,"");break;case 238:return Pn.ANSIX12_ENCODE;case 239:return Pn.TEXT_ENCODE;case 240:return Pn.EDIFACT_ENCODE;case 241:break;default:if(h!==254||o.available()!==0)throw new M;break}}while(o.available()>0);return Pn.ASCII_ENCODE}static decodeC40Segment(o,a){let c=!1;const d=[];let h=0;do{if(o.available()===8)return;const g=o.readBits(8);if(g===254)return;this.parseTwoBytes(g,o.readBits(8),d);for(let y=0;y<3;y++){const _=d[y];switch(h){case 0:if(_<3)h=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const b=this.C40_BASIC_SET_CHARS[_];c?(a.append(String.fromCharCode(b.charCodeAt(0)+128)),c=!1):a.append(b)}else throw new M;break;case 1:c?(a.append(String.fromCharCode(_+128)),c=!1):a.append(String.fromCharCode(_)),h=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const b=this.C40_SHIFT2_SET_CHARS[_];c?(a.append(String.fromCharCode(b.charCodeAt(0)+128)),c=!1):a.append(b)}else switch(_){case 27:a.append("");break;case 30:c=!0;break;default:throw new M}h=0;break;case 3:c?(a.append(String.fromCharCode(_+224)),c=!1):a.append(String.fromCharCode(_+96)),h=0;break;default:throw new M}}}while(o.available()>0)}static decodeTextSegment(o,a){let c=!1,d=[],h=0;do{if(o.available()===8)return;const g=o.readBits(8);if(g===254)return;this.parseTwoBytes(g,o.readBits(8),d);for(let y=0;y<3;y++){const _=d[y];switch(h){case 0:if(_<3)h=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const b=this.TEXT_BASIC_SET_CHARS[_];c?(a.append(String.fromCharCode(b.charCodeAt(0)+128)),c=!1):a.append(b)}else throw new M;break;case 1:c?(a.append(String.fromCharCode(_+128)),c=!1):a.append(String.fromCharCode(_)),h=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const b=this.TEXT_SHIFT2_SET_CHARS[_];c?(a.append(String.fromCharCode(b.charCodeAt(0)+128)),c=!1):a.append(b)}else switch(_){case 27:a.append("");break;case 30:c=!0;break;default:throw new M}h=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const b=this.TEXT_SHIFT3_SET_CHARS[_];c?(a.append(String.fromCharCode(b.charCodeAt(0)+128)),c=!1):a.append(b),h=0}else throw new M;break;default:throw new M}}}while(o.available()>0)}static decodeAnsiX12Segment(o,a){const c=[];do{if(o.available()===8)return;const d=o.readBits(8);if(d===254)return;this.parseTwoBytes(d,o.readBits(8),c);for(let h=0;h<3;h++){const g=c[h];switch(g){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(g<14)a.append(String.fromCharCode(g+44));else if(g<40)a.append(String.fromCharCode(g+51));else throw new M;break}}}while(o.available()>0)}static parseTwoBytes(o,a,c){let d=(o<<8)+a-1,h=Math.floor(d/1600);c[0]=h,d-=h*1600,h=Math.floor(d/40),c[1]=h,c[2]=d-h*40}static decodeEdifactSegment(o,a){do{if(o.available()<=16)return;for(let c=0;c<4;c++){let d=o.readBits(6);if(d===31){const h=8-o.getBitOffset();h!==8&&o.readBits(h);return}d&32||(d|=64),a.append(String.fromCharCode(d))}}while(o.available()>0)}static decodeBase256Segment(o,a,c){let d=1+o.getByteOffset();const h=this.unrandomize255State(o.readBits(8),d++);let g;if(h===0?g=o.available()/8|0:h<250?g=h:g=250*(h-249)+this.unrandomize255State(o.readBits(8),d++),g<0)throw new M;const y=new Uint8Array(g);for(let _=0;_<g;_++){if(o.available()<8)throw new M;y[_]=this.unrandomize255State(o.readBits(8),d++)}c.push(y);try{a.append(X.decode(y,H.ISO88591))}catch(_){throw new ur("Platform does not support required encoding: "+_.message)}}static unrandomize255State(o,a){const c=149*a%255+1,d=o-c;return d>=0?d:d+256}}Vi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Vi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Vi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Vi.TEXT_SHIFT2_SET_CHARS=Vi.C40_SHIFT2_SET_CHARS,Vi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Tp{constructor(){this.rsDecoder=new _s(lt.DATA_MATRIX_FIELD_256)}decode(o){const a=new kl(o),c=a.getVersion(),d=a.readCodewords(),h=Pl.getDataBlocks(d,c);let g=0;for(let b of h)g+=b.getNumDataCodewords();const y=new Uint8Array(g),_=h.length;for(let b=0;b<_;b++){const R=h[b],B=R.getCodewords(),U=R.getNumDataCodewords();this.correctErrors(B,U);for(let K=0;K<U;K++)y[K*_+b]=B[K]}return Vi.decode(y)}correctErrors(o,a){const c=new Int32Array(o);try{this.rsDecoder.decode(c,o.length-a)}catch{throw new I}for(let d=0;d<a;d++)o[d]=c[d]}}class wn{constructor(o){this.image=o,this.rectangleDetector=new he(this.image)}detect(){const o=this.rectangleDetector.detect();let a=this.detectSolid1(o);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new ee;a=this.shiftToModuleCenter(a);const c=a[0],d=a[1],h=a[2],g=a[3];let y=this.transitionsBetween(c,g)+1,_=this.transitionsBetween(h,g)+1;(y&1)===1&&(y+=1),(_&1)===1&&(_+=1),4*y<7*_&&4*_<7*y&&(y=_=Math.max(y,_));let b=wn.sampleGrid(this.image,c,d,h,g,y,_);return new Q(b,[c,d,h,g])}static shiftPoint(o,a,c){let d=(a.getX()-o.getX())/(c+1),h=(a.getY()-o.getY())/(c+1);return new je(o.getX()+d,o.getY()+h)}static moveAway(o,a,c){let d=o.getX(),h=o.getY();return d<a?d-=1:d+=1,h<c?h-=1:h+=1,new je(d,h)}detectSolid1(o){let a=o[0],c=o[1],d=o[3],h=o[2],g=this.transitionsBetween(a,c),y=this.transitionsBetween(c,d),_=this.transitionsBetween(d,h),b=this.transitionsBetween(h,a),R=g,B=[h,a,c,d];return R>y&&(R=y,B[0]=a,B[1]=c,B[2]=d,B[3]=h),R>_&&(R=_,B[0]=c,B[1]=d,B[2]=h,B[3]=a),R>b&&(B[0]=d,B[1]=h,B[2]=a,B[3]=c),B}detectSolid2(o){let a=o[0],c=o[1],d=o[2],h=o[3],g=this.transitionsBetween(a,h),y=wn.shiftPoint(c,d,(g+1)*4),_=wn.shiftPoint(d,c,(g+1)*4),b=this.transitionsBetween(y,a),R=this.transitionsBetween(_,h);return b<R?(o[0]=a,o[1]=c,o[2]=d,o[3]=h):(o[0]=c,o[1]=d,o[2]=h,o[3]=a),o}correctTopRight(o){let a=o[0],c=o[1],d=o[2],h=o[3],g=this.transitionsBetween(a,h),y=this.transitionsBetween(c,h),_=wn.shiftPoint(a,c,(y+1)*4),b=wn.shiftPoint(d,c,(g+1)*4);g=this.transitionsBetween(_,h),y=this.transitionsBetween(b,h);let R=new je(h.getX()+(d.getX()-c.getX())/(g+1),h.getY()+(d.getY()-c.getY())/(g+1)),B=new je(h.getX()+(a.getX()-c.getX())/(y+1),h.getY()+(a.getY()-c.getY())/(y+1));if(!this.isValid(R))return this.isValid(B)?B:null;if(!this.isValid(B))return R;let U=this.transitionsBetween(_,R)+this.transitionsBetween(b,R),K=this.transitionsBetween(_,B)+this.transitionsBetween(b,B);return U>K?R:B}shiftToModuleCenter(o){let a=o[0],c=o[1],d=o[2],h=o[3],g=this.transitionsBetween(a,h)+1,y=this.transitionsBetween(d,h)+1,_=wn.shiftPoint(a,c,y*4),b=wn.shiftPoint(d,c,g*4);g=this.transitionsBetween(_,h)+1,y=this.transitionsBetween(b,h)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let R=(a.getX()+c.getX()+d.getX()+h.getX())/4,B=(a.getY()+c.getY()+d.getY()+h.getY())/4;a=wn.moveAway(a,R,B),c=wn.moveAway(c,R,B),d=wn.moveAway(d,R,B),h=wn.moveAway(h,R,B);let U,K;return _=wn.shiftPoint(a,c,y*4),_=wn.shiftPoint(_,h,g*4),U=wn.shiftPoint(c,a,y*4),U=wn.shiftPoint(U,d,g*4),b=wn.shiftPoint(d,h,y*4),b=wn.shiftPoint(b,c,g*4),K=wn.shiftPoint(h,d,y*4),K=wn.shiftPoint(K,a,g*4),[_,U,b,K]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,a,c,d,h,g,y){return Ne.getInstance().sampleGrid(o,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,a.getX(),a.getY(),h.getX(),h.getY(),d.getX(),d.getY(),c.getX(),c.getY())}transitionsBetween(o,a){let c=Math.trunc(o.getX()),d=Math.trunc(o.getY()),h=Math.trunc(a.getX()),g=Math.trunc(a.getY()),y=Math.abs(g-d)>Math.abs(h-c);if(y){let J=c;c=d,d=J,J=h,h=g,g=J}let _=Math.abs(h-c),b=Math.abs(g-d),R=-_/2,B=d<g?1:-1,U=c<h?1:-1,K=0,Z=this.image.get(y?d:c,y?c:d);for(let J=c,se=d;J!==h;J+=U){let ce=this.image.get(y?se:J,y?J:se);if(ce!==Z&&(K++,Z=ce),R+=b,R>0){if(se===g)break;se+=B,R-=_}}return K}}class di{constructor(){this.decoder=new Tp}decode(o,a=null){let c,d;if(a!=null&&a.has(Y.PURE_BARCODE)){const b=di.extractPureBits(o.getBlackMatrix());c=this.decoder.decode(b),d=di.NO_POINTS}else{const b=new wn(o.getBlackMatrix()).detect();c=this.decoder.decode(b.getBits()),d=b.getPoints()}const h=c.getRawBytes(),g=new _t(c.getText(),h,8*h.length,d,Oe.DATA_MATRIX,C.currentTimeMillis()),y=c.getByteSegments();y!=null&&g.putMetadata(qt.BYTE_SEGMENTS,y);const _=c.getECLevel();return _!=null&&g.putMetadata(qt.ERROR_CORRECTION_LEVEL,_),g}reset(){}static extractPureBits(o){const a=o.getTopLeftOnBit(),c=o.getBottomRightOnBit();if(a==null||c==null)throw new ee;const d=this.moduleSize(a,o);let h=a[1];const g=c[1];let y=a[0];const b=(c[0]-y+1)/d,R=(g-h+1)/d;if(b<=0||R<=0)throw new ee;const B=d/2;h+=B,y+=B;const U=new de(b,R);for(let K=0;K<R;K++){const Z=h+K*d;for(let J=0;J<b;J++)o.get(y+J*d,Z)&&U.set(J,K)}return U}static moduleSize(o,a){const c=a.getWidth();let d=o[0];const h=o[1];for(;d<c&&a.get(d,h);)d++;if(d===c)throw new ee;const g=d-o[0];if(g===0)throw new ee;return g}}di.NO_POINTS=[];class Ip extends at{constructor(o=500){super(new di,o)}}var cs;(function(F){F[F.L=0]="L",F[F.M=1]="M",F[F.Q=2]="Q",F[F.H=3]="H"})(cs||(cs={}));class Et{constructor(o,a,c){this.value=o,this.stringValue=a,this.bits=c,Et.FOR_BITS.set(c,this),Et.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return Et.L;case"M":return Et.M;case"Q":return Et.Q;case"H":return Et.H;default:throw new w(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof Et))return!1;const a=o;return this.value===a.value}static forBits(o){if(o<0||o>=Et.FOR_BITS.size)throw new v;return Et.FOR_BITS.get(o)}}Et.FOR_BITS=new Map,Et.FOR_VALUE=new Map,Et.L=new Et(cs.L,"L",1),Et.M=new Et(cs.M,"M",0),Et.Q=new Et(cs.Q,"Q",3),Et.H=new Et(cs.H,"H",2);class Un{constructor(o){this.errorCorrectionLevel=Et.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,a){return S.bitCount(o^a)}static decodeFormatInformation(o,a){const c=Un.doDecodeFormatInformation(o,a);return c!==null?c:Un.doDecodeFormatInformation(o^Un.FORMAT_INFO_MASK_QR,a^Un.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,a){let c=Number.MAX_SAFE_INTEGER,d=0;for(const h of Un.FORMAT_INFO_DECODE_LOOKUP){const g=h[0];if(g===o||g===a)return new Un(h[1]);let y=Un.numBitsDiffering(o,g);y<c&&(d=h[1],c=y),o!==a&&(y=Un.numBitsDiffering(a,g),y<c&&(d=h[1],c=y))}return c<=3?new Un(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof Un))return!1;const a=o;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Un.FORMAT_INFO_MASK_QR=21522,Un.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class re{constructor(o,...a){this.ecCodewordsPerBlock=o,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const a=this.ecBlocks;for(const c of a)o+=c.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class q{constructor(o,a){this.count=o,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Se{constructor(o,a,...c){this.versionNumber=o,this.alignmentPatternCenters=a,this.ecBlocks=c;let d=0;const h=c[0].getECCodewordsPerBlock(),g=c[0].getECBlocks();for(const y of g)d+=y.getCount()*(y.getDataCodewords()+h);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new M;try{return this.getVersionForNumber((o-17)/4)}catch{throw new M}}static getVersionForNumber(o){if(o<1||o>40)throw new v;return Se.VERSIONS[o-1]}static decodeVersionInformation(o){let a=Number.MAX_SAFE_INTEGER,c=0;for(let d=0;d<Se.VERSION_DECODE_INFO.length;d++){const h=Se.VERSION_DECODE_INFO[d];if(h===o)return Se.getVersionForNumber(d+7);const g=Un.numBitsDiffering(o,h);g<a&&(c=d+7,a=g)}return a<=3?Se.getVersionForNumber(c):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),a=new de(o);a.setRegion(0,0,9,9),a.setRegion(o-8,0,8,9),a.setRegion(0,o-8,9,8);const c=this.alignmentPatternCenters.length;for(let d=0;d<c;d++){const h=this.alignmentPatternCenters[d]-2;for(let g=0;g<c;g++)d===0&&(g===0||g===c-1)||d===c-1&&g===0||a.setRegion(this.alignmentPatternCenters[g]-2,h,5,5)}return a.setRegion(6,9,1,o-17),a.setRegion(9,6,o-17,1),this.versionNumber>6&&(a.setRegion(o-11,0,3,6),a.setRegion(0,o-11,6,3)),a}toString(){return""+this.versionNumber}}Se.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Se.VERSIONS=[new Se(1,new Int32Array(0),new re(7,new q(1,19)),new re(10,new q(1,16)),new re(13,new q(1,13)),new re(17,new q(1,9))),new Se(2,Int32Array.from([6,18]),new re(10,new q(1,34)),new re(16,new q(1,28)),new re(22,new q(1,22)),new re(28,new q(1,16))),new Se(3,Int32Array.from([6,22]),new re(15,new q(1,55)),new re(26,new q(1,44)),new re(18,new q(2,17)),new re(22,new q(2,13))),new Se(4,Int32Array.from([6,26]),new re(20,new q(1,80)),new re(18,new q(2,32)),new re(26,new q(2,24)),new re(16,new q(4,9))),new Se(5,Int32Array.from([6,30]),new re(26,new q(1,108)),new re(24,new q(2,43)),new re(18,new q(2,15),new q(2,16)),new re(22,new q(2,11),new q(2,12))),new Se(6,Int32Array.from([6,34]),new re(18,new q(2,68)),new re(16,new q(4,27)),new re(24,new q(4,19)),new re(28,new q(4,15))),new Se(7,Int32Array.from([6,22,38]),new re(20,new q(2,78)),new re(18,new q(4,31)),new re(18,new q(2,14),new q(4,15)),new re(26,new q(4,13),new q(1,14))),new Se(8,Int32Array.from([6,24,42]),new re(24,new q(2,97)),new re(22,new q(2,38),new q(2,39)),new re(22,new q(4,18),new q(2,19)),new re(26,new q(4,14),new q(2,15))),new Se(9,Int32Array.from([6,26,46]),new re(30,new q(2,116)),new re(22,new q(3,36),new q(2,37)),new re(20,new q(4,16),new q(4,17)),new re(24,new q(4,12),new q(4,13))),new Se(10,Int32Array.from([6,28,50]),new re(18,new q(2,68),new q(2,69)),new re(26,new q(4,43),new q(1,44)),new re(24,new q(6,19),new q(2,20)),new re(28,new q(6,15),new q(2,16))),new Se(11,Int32Array.from([6,30,54]),new re(20,new q(4,81)),new re(30,new q(1,50),new q(4,51)),new re(28,new q(4,22),new q(4,23)),new re(24,new q(3,12),new q(8,13))),new Se(12,Int32Array.from([6,32,58]),new re(24,new q(2,92),new q(2,93)),new re(22,new q(6,36),new q(2,37)),new re(26,new q(4,20),new q(6,21)),new re(28,new q(7,14),new q(4,15))),new Se(13,Int32Array.from([6,34,62]),new re(26,new q(4,107)),new re(22,new q(8,37),new q(1,38)),new re(24,new q(8,20),new q(4,21)),new re(22,new q(12,11),new q(4,12))),new Se(14,Int32Array.from([6,26,46,66]),new re(30,new q(3,115),new q(1,116)),new re(24,new q(4,40),new q(5,41)),new re(20,new q(11,16),new q(5,17)),new re(24,new q(11,12),new q(5,13))),new Se(15,Int32Array.from([6,26,48,70]),new re(22,new q(5,87),new q(1,88)),new re(24,new q(5,41),new q(5,42)),new re(30,new q(5,24),new q(7,25)),new re(24,new q(11,12),new q(7,13))),new Se(16,Int32Array.from([6,26,50,74]),new re(24,new q(5,98),new q(1,99)),new re(28,new q(7,45),new q(3,46)),new re(24,new q(15,19),new q(2,20)),new re(30,new q(3,15),new q(13,16))),new Se(17,Int32Array.from([6,30,54,78]),new re(28,new q(1,107),new q(5,108)),new re(28,new q(10,46),new q(1,47)),new re(28,new q(1,22),new q(15,23)),new re(28,new q(2,14),new q(17,15))),new Se(18,Int32Array.from([6,30,56,82]),new re(30,new q(5,120),new q(1,121)),new re(26,new q(9,43),new q(4,44)),new re(28,new q(17,22),new q(1,23)),new re(28,new q(2,14),new q(19,15))),new Se(19,Int32Array.from([6,30,58,86]),new re(28,new q(3,113),new q(4,114)),new re(26,new q(3,44),new q(11,45)),new re(26,new q(17,21),new q(4,22)),new re(26,new q(9,13),new q(16,14))),new Se(20,Int32Array.from([6,34,62,90]),new re(28,new q(3,107),new q(5,108)),new re(26,new q(3,41),new q(13,42)),new re(30,new q(15,24),new q(5,25)),new re(28,new q(15,15),new q(10,16))),new Se(21,Int32Array.from([6,28,50,72,94]),new re(28,new q(4,116),new q(4,117)),new re(26,new q(17,42)),new re(28,new q(17,22),new q(6,23)),new re(30,new q(19,16),new q(6,17))),new Se(22,Int32Array.from([6,26,50,74,98]),new re(28,new q(2,111),new q(7,112)),new re(28,new q(17,46)),new re(30,new q(7,24),new q(16,25)),new re(24,new q(34,13))),new Se(23,Int32Array.from([6,30,54,78,102]),new re(30,new q(4,121),new q(5,122)),new re(28,new q(4,47),new q(14,48)),new re(30,new q(11,24),new q(14,25)),new re(30,new q(16,15),new q(14,16))),new Se(24,Int32Array.from([6,28,54,80,106]),new re(30,new q(6,117),new q(4,118)),new re(28,new q(6,45),new q(14,46)),new re(30,new q(11,24),new q(16,25)),new re(30,new q(30,16),new q(2,17))),new Se(25,Int32Array.from([6,32,58,84,110]),new re(26,new q(8,106),new q(4,107)),new re(28,new q(8,47),new q(13,48)),new re(30,new q(7,24),new q(22,25)),new re(30,new q(22,15),new q(13,16))),new Se(26,Int32Array.from([6,30,58,86,114]),new re(28,new q(10,114),new q(2,115)),new re(28,new q(19,46),new q(4,47)),new re(28,new q(28,22),new q(6,23)),new re(30,new q(33,16),new q(4,17))),new Se(27,Int32Array.from([6,34,62,90,118]),new re(30,new q(8,122),new q(4,123)),new re(28,new q(22,45),new q(3,46)),new re(30,new q(8,23),new q(26,24)),new re(30,new q(12,15),new q(28,16))),new Se(28,Int32Array.from([6,26,50,74,98,122]),new re(30,new q(3,117),new q(10,118)),new re(28,new q(3,45),new q(23,46)),new re(30,new q(4,24),new q(31,25)),new re(30,new q(11,15),new q(31,16))),new Se(29,Int32Array.from([6,30,54,78,102,126]),new re(30,new q(7,116),new q(7,117)),new re(28,new q(21,45),new q(7,46)),new re(30,new q(1,23),new q(37,24)),new re(30,new q(19,15),new q(26,16))),new Se(30,Int32Array.from([6,26,52,78,104,130]),new re(30,new q(5,115),new q(10,116)),new re(28,new q(19,47),new q(10,48)),new re(30,new q(15,24),new q(25,25)),new re(30,new q(23,15),new q(25,16))),new Se(31,Int32Array.from([6,30,56,82,108,134]),new re(30,new q(13,115),new q(3,116)),new re(28,new q(2,46),new q(29,47)),new re(30,new q(42,24),new q(1,25)),new re(30,new q(23,15),new q(28,16))),new Se(32,Int32Array.from([6,34,60,86,112,138]),new re(30,new q(17,115)),new re(28,new q(10,46),new q(23,47)),new re(30,new q(10,24),new q(35,25)),new re(30,new q(19,15),new q(35,16))),new Se(33,Int32Array.from([6,30,58,86,114,142]),new re(30,new q(17,115),new q(1,116)),new re(28,new q(14,46),new q(21,47)),new re(30,new q(29,24),new q(19,25)),new re(30,new q(11,15),new q(46,16))),new Se(34,Int32Array.from([6,34,62,90,118,146]),new re(30,new q(13,115),new q(6,116)),new re(28,new q(14,46),new q(23,47)),new re(30,new q(44,24),new q(7,25)),new re(30,new q(59,16),new q(1,17))),new Se(35,Int32Array.from([6,30,54,78,102,126,150]),new re(30,new q(12,121),new q(7,122)),new re(28,new q(12,47),new q(26,48)),new re(30,new q(39,24),new q(14,25)),new re(30,new q(22,15),new q(41,16))),new Se(36,Int32Array.from([6,24,50,76,102,128,154]),new re(30,new q(6,121),new q(14,122)),new re(28,new q(6,47),new q(34,48)),new re(30,new q(46,24),new q(10,25)),new re(30,new q(2,15),new q(64,16))),new Se(37,Int32Array.from([6,28,54,80,106,132,158]),new re(30,new q(17,122),new q(4,123)),new re(28,new q(29,46),new q(14,47)),new re(30,new q(49,24),new q(10,25)),new re(30,new q(24,15),new q(46,16))),new Se(38,Int32Array.from([6,32,58,84,110,136,162]),new re(30,new q(4,122),new q(18,123)),new re(28,new q(13,46),new q(32,47)),new re(30,new q(48,24),new q(14,25)),new re(30,new q(42,15),new q(32,16))),new Se(39,Int32Array.from([6,26,54,82,110,138,166]),new re(30,new q(20,117),new q(4,118)),new re(28,new q(40,47),new q(7,48)),new re(30,new q(43,24),new q(22,25)),new re(30,new q(10,15),new q(67,16))),new Se(40,Int32Array.from([6,30,58,86,114,142,170]),new re(30,new q(19,118),new q(6,119)),new re(28,new q(18,47),new q(31,48)),new re(30,new q(34,24),new q(34,25)),new re(30,new q(20,15),new q(61,16)))];var An;(function(F){F[F.DATA_MASK_000=0]="DATA_MASK_000",F[F.DATA_MASK_001=1]="DATA_MASK_001",F[F.DATA_MASK_010=2]="DATA_MASK_010",F[F.DATA_MASK_011=3]="DATA_MASK_011",F[F.DATA_MASK_100=4]="DATA_MASK_100",F[F.DATA_MASK_101=5]="DATA_MASK_101",F[F.DATA_MASK_110=6]="DATA_MASK_110",F[F.DATA_MASK_111=7]="DATA_MASK_111"})(An||(An={}));class hr{constructor(o,a){this.value=o,this.isMasked=a}unmaskBitMatrix(o,a){for(let c=0;c<a;c++)for(let d=0;d<a;d++)this.isMasked(c,d)&&o.flip(d,c)}}hr.values=new Map([[An.DATA_MASK_000,new hr(An.DATA_MASK_000,(F,o)=>(F+o&1)===0)],[An.DATA_MASK_001,new hr(An.DATA_MASK_001,(F,o)=>(F&1)===0)],[An.DATA_MASK_010,new hr(An.DATA_MASK_010,(F,o)=>o%3===0)],[An.DATA_MASK_011,new hr(An.DATA_MASK_011,(F,o)=>(F+o)%3===0)],[An.DATA_MASK_100,new hr(An.DATA_MASK_100,(F,o)=>(Math.floor(F/2)+Math.floor(o/3)&1)===0)],[An.DATA_MASK_101,new hr(An.DATA_MASK_101,(F,o)=>F*o%6===0)],[An.DATA_MASK_110,new hr(An.DATA_MASK_110,(F,o)=>F*o%6<3)],[An.DATA_MASK_111,new hr(An.DATA_MASK_111,(F,o)=>(F+o+F*o%3&1)===0)]]);class Ol{constructor(o){const a=o.getHeight();if(a<21||(a&3)!==1)throw new M;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let h=0;h<6;h++)o=this.copyBit(h,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let h=5;h>=0;h--)o=this.copyBit(8,h,o);const a=this.bitMatrix.getHeight();let c=0;const d=a-7;for(let h=a-1;h>=d;h--)c=this.copyBit(8,h,c);for(let h=a-8;h<a;h++)c=this.copyBit(h,8,c);if(this.parsedFormatInfo=Un.decodeFormatInformation(o,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new M}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),a=Math.floor((o-17)/4);if(a<=6)return Se.getVersionForNumber(a);let c=0;const d=o-11;for(let g=5;g>=0;g--)for(let y=o-9;y>=d;y--)c=this.copyBit(y,g,c);let h=Se.decodeVersionInformation(c);if(h!==null&&h.getDimensionForVersion()===o)return this.parsedVersion=h,h;c=0;for(let g=5;g>=0;g--)for(let y=o-9;y>=d;y--)c=this.copyBit(g,y,c);if(h=Se.decodeVersionInformation(c),h!==null&&h.getDimensionForVersion()===o)return this.parsedVersion=h,h;throw new M}copyBit(o,a,c){return(this.isMirror?this.bitMatrix.get(a,o):this.bitMatrix.get(o,a))?c<<1|1:c<<1}readCodewords(){const o=this.readFormatInformation(),a=this.readVersion(),c=hr.values.get(o.getDataMask()),d=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,d);const h=a.buildFunctionPattern();let g=!0;const y=new Uint8Array(a.getTotalCodewords());let _=0,b=0,R=0;for(let B=d-1;B>0;B-=2){B===6&&B--;for(let U=0;U<d;U++){const K=g?d-1-U:U;for(let Z=0;Z<2;Z++)h.get(B-Z,K)||(R++,b<<=1,this.bitMatrix.get(B-Z,K)&&(b|=1),R===8&&(y[_++]=b,R=0,b=0))}g=!g}if(_!==a.getTotalCodewords())throw new M;return y}remask(){if(this.parsedFormatInfo===null)return;const o=hr.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let a=0,c=o.getWidth();a<c;a++)for(let d=a+1,h=o.getHeight();d<h;d++)o.get(a,d)!==o.get(d,a)&&(o.flip(d,a),o.flip(a,d))}}class Ld{constructor(o,a){this.numDataCodewords=o,this.codewords=a}static getDataBlocks(o,a,c){if(o.length!==a.getTotalCodewords())throw new v;const d=a.getECBlocksForLevel(c);let h=0;const g=d.getECBlocks();for(const Z of g)h+=Z.getCount();const y=new Array(h);let _=0;for(const Z of g)for(let J=0;J<Z.getCount();J++){const se=Z.getDataCodewords(),ce=d.getECCodewordsPerBlock()+se;y[_++]=new Ld(se,new Uint8Array(ce))}const b=y[0].codewords.length;let R=y.length-1;for(;R>=0&&y[R].codewords.length!==b;)R--;R++;const B=b-d.getECCodewordsPerBlock();let U=0;for(let Z=0;Z<B;Z++)for(let J=0;J<_;J++)y[J].codewords[Z]=o[U++];for(let Z=R;Z<_;Z++)y[Z].codewords[B]=o[U++];const K=y[0].codewords.length;for(let Z=B;Z<K;Z++)for(let J=0;J<_;J++){const se=J<R?Z:Z+1;y[J].codewords[se]=o[U++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Wr;(function(F){F[F.TERMINATOR=0]="TERMINATOR",F[F.NUMERIC=1]="NUMERIC",F[F.ALPHANUMERIC=2]="ALPHANUMERIC",F[F.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",F[F.BYTE=4]="BYTE",F[F.ECI=5]="ECI",F[F.KANJI=6]="KANJI",F[F.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",F[F.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",F[F.HANZI=9]="HANZI"})(Wr||(Wr={}));class $e{constructor(o,a,c,d){this.value=o,this.stringValue=a,this.characterCountBitsForVersions=c,this.bits=d,$e.FOR_BITS.set(d,this),$e.FOR_VALUE.set(o,this)}static forBits(o){const a=$e.FOR_BITS.get(o);if(a===void 0)throw new v;return a}getCharacterCountBits(o){const a=o.getVersionNumber();let c;return a<=9?c=0:a<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof $e))return!1;const a=o;return this.value===a.value}toString(){return this.stringValue}}$e.FOR_BITS=new Map,$e.FOR_VALUE=new Map,$e.TERMINATOR=new $e(Wr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),$e.NUMERIC=new $e(Wr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),$e.ALPHANUMERIC=new $e(Wr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),$e.STRUCTURED_APPEND=new $e(Wr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),$e.BYTE=new $e(Wr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),$e.ECI=new $e(Wr.ECI,"ECI",Int32Array.from([0,0,0]),7),$e.KANJI=new $e(Wr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),$e.FNC1_FIRST_POSITION=new $e(Wr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),$e.FNC1_SECOND_POSITION=new $e(Wr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),$e.HANZI=new $e(Wr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class ln{static decode(o,a,c,d){const h=new Hc(o);let g=new z;const y=new Array;let _=-1,b=-1;try{let R=null,B=!1,U;do{if(h.available()<4)U=$e.TERMINATOR;else{const K=h.readBits(4);U=$e.forBits(K)}switch(U){case $e.TERMINATOR:break;case $e.FNC1_FIRST_POSITION:case $e.FNC1_SECOND_POSITION:B=!0;break;case $e.STRUCTURED_APPEND:if(h.available()<16)throw new M;_=h.readBits(8),b=h.readBits(8);break;case $e.ECI:const K=ln.parseECIValue(h);if(R=L.getCharacterSetECIByValue(K),R===null)throw new M;break;case $e.HANZI:const Z=h.readBits(4),J=h.readBits(U.getCharacterCountBits(a));Z===ln.GB2312_SUBSET&&ln.decodeHanziSegment(h,g,J);break;default:const se=h.readBits(U.getCharacterCountBits(a));switch(U){case $e.NUMERIC:ln.decodeNumericSegment(h,g,se);break;case $e.ALPHANUMERIC:ln.decodeAlphanumericSegment(h,g,se,B);break;case $e.BYTE:ln.decodeByteSegment(h,g,se,R,y,d);break;case $e.KANJI:ln.decodeKanjiSegment(h,g,se);break;default:throw new M}break}}while(U!==$e.TERMINATOR)}catch{throw new M}return new yn(o,g.toString(),y.length===0?null:y,c===null?null:c.toString(),_,b)}static decodeHanziSegment(o,a,c){if(c*13>o.available())throw new M;const d=new Uint8Array(2*c);let h=0;for(;c>0;){const g=o.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,d[h]=y>>8&255,d[h+1]=y&255,h+=2,c--}try{a.append(X.decode(d,H.GB2312))}catch(g){throw new M(g)}}static decodeKanjiSegment(o,a,c){if(c*13>o.available())throw new M;const d=new Uint8Array(2*c);let h=0;for(;c>0;){const g=o.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,d[h]=y>>8,d[h+1]=y,h+=2,c--}try{a.append(X.decode(d,H.SHIFT_JIS))}catch(g){throw new M(g)}}static decodeByteSegment(o,a,c,d,h,g){if(8*c>o.available())throw new M;const y=new Uint8Array(c);for(let b=0;b<c;b++)y[b]=o.readBits(8);let _;d===null?_=H.guessEncoding(y,g):_=d.getName();try{a.append(X.decode(y,_))}catch(b){throw new M(b)}h.push(y)}static toAlphaNumericChar(o){if(o>=ln.ALPHANUMERIC_CHARS.length)throw new M;return ln.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,a,c,d){const h=a.length();for(;c>1;){if(o.available()<11)throw new M;const g=o.readBits(11);a.append(ln.toAlphaNumericChar(Math.floor(g/45))),a.append(ln.toAlphaNumericChar(g%45)),c-=2}if(c===1){if(o.available()<6)throw new M;a.append(ln.toAlphaNumericChar(o.readBits(6)))}if(d)for(let g=h;g<a.length();g++)a.charAt(g)==="%"&&(g<a.length()-1&&a.charAt(g+1)==="%"?a.deleteCharAt(g+1):a.setCharAt(g,""))}static decodeNumericSegment(o,a,c){for(;c>=3;){if(o.available()<10)throw new M;const d=o.readBits(10);if(d>=1e3)throw new M;a.append(ln.toAlphaNumericChar(Math.floor(d/100))),a.append(ln.toAlphaNumericChar(Math.floor(d/10)%10)),a.append(ln.toAlphaNumericChar(d%10)),c-=3}if(c===2){if(o.available()<7)throw new M;const d=o.readBits(7);if(d>=100)throw new M;a.append(ln.toAlphaNumericChar(Math.floor(d/10))),a.append(ln.toAlphaNumericChar(d%10))}else if(c===1){if(o.available()<4)throw new M;const d=o.readBits(4);if(d>=10)throw new M;a.append(ln.toAlphaNumericChar(d))}}static parseECIValue(o){const a=o.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const c=o.readBits(8);return(a&63)<<8&4294967295|c}if((a&224)===192){const c=o.readBits(16);return(a&31)<<16&4294967295|c}throw new M}}ln.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",ln.GB2312_SUBSET=1;class C0{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const a=o[0];o[0]=o[2],o[2]=a}}class Sp{constructor(){this.rsDecoder=new _s(lt.QR_CODE_FIELD_256)}decodeBooleanArray(o,a){return this.decodeBitMatrix(de.parseFromBooleanArray(o),a)}decodeBitMatrix(o,a){const c=new Ol(o);let d=null;try{return this.decodeBitMatrixParser(c,a)}catch(h){d=h}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const h=this.decodeBitMatrixParser(c,a);return h.setOther(new C0(!0)),h}catch(h){throw d!==null?d:h}}decodeBitMatrixParser(o,a){const c=o.readVersion(),d=o.readFormatInformation().getErrorCorrectionLevel(),h=o.readCodewords(),g=Ld.getDataBlocks(h,c,d);let y=0;for(const R of g)y+=R.getNumDataCodewords();const _=new Uint8Array(y);let b=0;for(const R of g){const B=R.getCodewords(),U=R.getNumDataCodewords();this.correctErrors(B,U);for(let K=0;K<U;K++)_[b++]=B[K]}return ln.decode(_,c,d,a)}correctErrors(o,a){const c=new Int32Array(o);try{this.rsDecoder.decode(c,o.length-a)}catch{throw new I}for(let d=0;d<a;d++)o[d]=c[d]}}class So extends je{constructor(o,a,c){super(o,a),this.estimatedModuleSize=c}aboutEquals(o,a,c){if(Math.abs(a-this.getY())<=o&&Math.abs(c-this.getX())<=o){const d=Math.abs(o-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(o,a,c){const d=(this.getX()+a)/2,h=(this.getY()+o)/2,g=(this.estimatedModuleSize+c)/2;return new So(d,h,g)}}class Ts{constructor(o,a,c,d,h,g,y){this.image=o,this.startX=a,this.startY=c,this.width=d,this.height=h,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,a=this.height,c=this.width,d=o+c,h=this.startY+a/2,g=new Int32Array(3),y=this.image;for(let _=0;_<a;_++){const b=h+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));g[0]=0,g[1]=0,g[2]=0;let R=o;for(;R<d&&!y.get(R,b);)R++;let B=0;for(;R<d;){if(y.get(R,b))if(B===1)g[1]++;else if(B===2){if(this.foundPatternCross(g)){const U=this.handlePossibleCenter(g,b,R);if(U!==null)return U}g[0]=g[2],g[1]=1,g[2]=0,B=1}else g[++B]++;else B===1&&B++,g[B]++;R++}if(this.foundPatternCross(g)){const U=this.handlePossibleCenter(g,b,d);if(U!==null)return U}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee}static centerFromEnd(o,a){return a-o[2]-o[1]/2}foundPatternCross(o){const a=this.moduleSize,c=a/2;for(let d=0;d<3;d++)if(Math.abs(a-o[d])>=c)return!1;return!0}crossCheckVertical(o,a,c,d){const h=this.image,g=h.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let _=o;for(;_>=0&&h.get(a,_)&&y[1]<=c;)y[1]++,_--;if(_<0||y[1]>c)return NaN;for(;_>=0&&!h.get(a,_)&&y[0]<=c;)y[0]++,_--;if(y[0]>c)return NaN;for(_=o+1;_<g&&h.get(a,_)&&y[1]<=c;)y[1]++,_++;if(_===g||y[1]>c)return NaN;for(;_<g&&!h.get(a,_)&&y[2]<=c;)y[2]++,_++;if(y[2]>c)return NaN;const b=y[0]+y[1]+y[2];return 5*Math.abs(b-d)>=2*d?NaN:this.foundPatternCross(y)?Ts.centerFromEnd(y,_):NaN}handlePossibleCenter(o,a,c){const d=o[0]+o[1]+o[2],h=Ts.centerFromEnd(o,c),g=this.crossCheckVertical(a,h,2*o[1],d);if(!isNaN(g)){const y=(o[0]+o[1]+o[2])/3;for(const b of this.possibleCenters)if(b.aboutEquals(y,g,h))return b.combineEstimate(g,h,y);const _=new So(h,g,y);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class Wc extends je{constructor(o,a,c,d){super(o,a),this.estimatedModuleSize=c,this.count=d,d===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,a,c){if(Math.abs(a-this.getY())<=o&&Math.abs(c-this.getX())<=o){const d=Math.abs(o-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(o,a,c){const d=this.count+1,h=(this.count*this.getX()+a)/d,g=(this.count*this.getY()+o)/d,y=(this.count*this.estimatedModuleSize+c)/d;return new Wc(h,g,y,d)}}class A0{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class zn{constructor(o,a){this.image=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const a=o!=null&&o.get(Y.TRY_HARDER)!==void 0,c=o!=null&&o.get(Y.PURE_BARCODE)!==void 0,d=this.image,h=d.getHeight(),g=d.getWidth();let y=Math.floor(3*h/(4*zn.MAX_MODULES));(y<zn.MIN_SKIP||a)&&(y=zn.MIN_SKIP);let _=!1;const b=new Int32Array(5);for(let B=y-1;B<h&&!_;B+=y){b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0;let U=0;for(let K=0;K<g;K++)if(d.get(K,B))(U&1)===1&&U++,b[U]++;else if(U&1)b[U]++;else if(U===4)if(zn.foundPatternCross(b)){if(this.handlePossibleCenter(b,B,K,c)===!0)if(y=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const J=this.findRowSkip();J>b[2]&&(B+=J-b[2]-y,K=g-1)}else{b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,U=3;continue}U=0,b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0}else b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,U=3;else b[++U]++;zn.foundPatternCross(b)&&this.handlePossibleCenter(b,B,g,c)===!0&&(y=b[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return je.orderBestPatterns(R),new A0(R)}static centerFromEnd(o,a){return a-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let a=0;for(let h=0;h<5;h++){const g=o[h];if(g===0)return!1;a+=g}if(a<7)return!1;const c=a/7,d=c/2;return Math.abs(c-o[0])<d&&Math.abs(c-o[1])<d&&Math.abs(3*c-o[2])<3*d&&Math.abs(c-o[3])<d&&Math.abs(c-o[4])<d}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,a,c,d){const h=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;o>=g&&a>=g&&y.get(a-g,o-g);)h[2]++,g++;if(o<g||a<g)return!1;for(;o>=g&&a>=g&&!y.get(a-g,o-g)&&h[1]<=c;)h[1]++,g++;if(o<g||a<g||h[1]>c)return!1;for(;o>=g&&a>=g&&y.get(a-g,o-g)&&h[0]<=c;)h[0]++,g++;if(h[0]>c)return!1;const _=y.getHeight(),b=y.getWidth();for(g=1;o+g<_&&a+g<b&&y.get(a+g,o+g);)h[2]++,g++;if(o+g>=_||a+g>=b)return!1;for(;o+g<_&&a+g<b&&!y.get(a+g,o+g)&&h[3]<c;)h[3]++,g++;if(o+g>=_||a+g>=b||h[3]>=c)return!1;for(;o+g<_&&a+g<b&&y.get(a+g,o+g)&&h[4]<c;)h[4]++,g++;if(h[4]>=c)return!1;const R=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(R-d)<2*d&&zn.foundPatternCross(h)}crossCheckVertical(o,a,c,d){const h=this.image,g=h.getHeight(),y=this.getCrossCheckStateCount();let _=o;for(;_>=0&&h.get(a,_);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!h.get(a,_)&&y[1]<=c;)y[1]++,_--;if(_<0||y[1]>c)return NaN;for(;_>=0&&h.get(a,_)&&y[0]<=c;)y[0]++,_--;if(y[0]>c)return NaN;for(_=o+1;_<g&&h.get(a,_);)y[2]++,_++;if(_===g)return NaN;for(;_<g&&!h.get(a,_)&&y[3]<c;)y[3]++,_++;if(_===g||y[3]>=c)return NaN;for(;_<g&&h.get(a,_)&&y[4]<c;)y[4]++,_++;if(y[4]>=c)return NaN;const b=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(b-d)>=2*d?NaN:zn.foundPatternCross(y)?zn.centerFromEnd(y,_):NaN}crossCheckHorizontal(o,a,c,d){const h=this.image,g=h.getWidth(),y=this.getCrossCheckStateCount();let _=o;for(;_>=0&&h.get(_,a);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!h.get(_,a)&&y[1]<=c;)y[1]++,_--;if(_<0||y[1]>c)return NaN;for(;_>=0&&h.get(_,a)&&y[0]<=c;)y[0]++,_--;if(y[0]>c)return NaN;for(_=o+1;_<g&&h.get(_,a);)y[2]++,_++;if(_===g)return NaN;for(;_<g&&!h.get(_,a)&&y[3]<c;)y[3]++,_++;if(_===g||y[3]>=c)return NaN;for(;_<g&&h.get(_,a)&&y[4]<c;)y[4]++,_++;if(y[4]>=c)return NaN;const b=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(b-d)>=d?NaN:zn.foundPatternCross(y)?zn.centerFromEnd(y,_):NaN}handlePossibleCenter(o,a,c,d){const h=o[0]+o[1]+o[2]+o[3]+o[4];let g=zn.centerFromEnd(o,c),y=this.crossCheckVertical(a,Math.floor(g),o[2],h);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),o[2],h),!isNaN(g)&&(!d||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),o[2],h)))){const _=h/7;let b=!1;const R=this.possibleCenters;for(let B=0,U=R.length;B<U;B++){const K=R[B];if(K.aboutEquals(_,y,g)){R[B]=K.combineEstimate(y,g,_),b=!0;break}}if(!b){const B=new Wc(g,y,_);R.push(B),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(B)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const c of this.possibleCenters)if(c.getCount()>=zn.CENTER_QUORUM)if(a==null)a=c;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-c.getX())-Math.abs(a.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,a=0;const c=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=zn.CENTER_QUORUM&&(o++,a+=g.getEstimatedModuleSize());if(o<3)return!1;const d=a/c;let h=0;for(const g of this.possibleCenters)h+=Math.abs(g.getEstimatedModuleSize()-d);return h<=.05*a}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new ee;const a=this.possibleCenters;let c;if(o>3){let d=0,h=0;for(const _ of this.possibleCenters){const b=_.getEstimatedModuleSize();d+=b,h+=b*b}c=d/o;let g=Math.sqrt(h/o-c*c);a.sort((_,b)=>{const R=Math.abs(b.getEstimatedModuleSize()-c),B=Math.abs(_.getEstimatedModuleSize()-c);return R<B?-1:R>B?1:0});const y=Math.max(.2*c,g);for(let _=0;_<a.length&&a.length>3;_++){const b=a[_];Math.abs(b.getEstimatedModuleSize()-c)>y&&(a.splice(_,1),_--)}}if(a.length>3){let d=0;for(const h of a)d+=h.getEstimatedModuleSize();c=d/a.length,a.sort((h,g)=>{if(g.getCount()===h.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-c),_=Math.abs(h.getEstimatedModuleSize()-c);return y<_?1:y>_?-1:0}else return g.getCount()-h.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}zn.CENTER_QUORUM=2,zn.MIN_SKIP=3,zn.MAX_MODULES=57;class Ks{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(Y.NEED_RESULT_POINT_CALLBACK);const c=new zn(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(c)}processFinderPatternInfo(o){const a=o.getTopLeft(),c=o.getTopRight(),d=o.getBottomLeft(),h=this.calculateModuleSize(a,c,d);if(h<1)throw new ee("No pattern found in proccess finder.");const g=Ks.computeDimension(a,c,d,h),y=Se.getProvisionalVersionForDimension(g),_=y.getDimensionForVersion()-7;let b=null;if(y.getAlignmentPatternCenters().length>0){const K=c.getX()-a.getX()+d.getX(),Z=c.getY()-a.getY()+d.getY(),J=1-3/_,se=Math.floor(a.getX()+J*(K-a.getX())),ce=Math.floor(a.getY()+J*(Z-a.getY()));for(let be=4;be<=16;be<<=1)try{b=this.findAlignmentInRegion(h,se,ce,be);break}catch(Ce){if(!(Ce instanceof ee))throw Ce}}const R=Ks.createTransform(a,c,d,b,g),B=Ks.sampleGrid(this.image,R,g);let U;return b===null?U=[d,a,c]:U=[d,a,c,b],new Q(B,U)}static createTransform(o,a,c,d,h){const g=h-3.5;let y,_,b,R;return d!==null?(y=d.getX(),_=d.getY(),b=g-3,R=b):(y=a.getX()-o.getX()+c.getX(),_=a.getY()-o.getY()+c.getY(),b=g,R=g),pe.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,b,R,3.5,g,o.getX(),o.getY(),a.getX(),a.getY(),y,_,c.getX(),c.getY())}static sampleGrid(o,a,c){return Ne.getInstance().sampleGridWithTransform(o,c,c,a)}static computeDimension(o,a,c,d){const h=ct.round(je.distance(o,a)/d),g=ct.round(je.distance(o,c)/d);let y=Math.floor((h+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new ee("Dimensions could be not found.")}return y}calculateModuleSize(o,a,c){return(this.calculateModuleSizeOneWay(o,a)+this.calculateModuleSizeOneWay(o,c))/2}calculateModuleSizeOneWay(o,a){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(a.getX()),Math.floor(a.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(c)?d/7:isNaN(d)?c/7:(c+d)/14}sizeOfBlackWhiteBlackRunBothWays(o,a,c,d){let h=this.sizeOfBlackWhiteBlackRun(o,a,c,d),g=1,y=o-(c-o);y<0?(g=o/(o-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-o)/(y-o),y=this.image.getWidth()-1);let _=Math.floor(a-(d-a)*g);return g=1,_<0?(g=a/(a-_),_=0):_>=this.image.getHeight()&&(g=(this.image.getHeight()-1-a)/(_-a),_=this.image.getHeight()-1),y=Math.floor(o+(y-o)*g),h+=this.sizeOfBlackWhiteBlackRun(o,a,y,_),h-1}sizeOfBlackWhiteBlackRun(o,a,c,d){const h=Math.abs(d-a)>Math.abs(c-o);if(h){let K=o;o=a,a=K,K=c,c=d,d=K}const g=Math.abs(c-o),y=Math.abs(d-a);let _=-g/2;const b=o<c?1:-1,R=a<d?1:-1;let B=0;const U=c+b;for(let K=o,Z=a;K!==U;K+=b){const J=h?Z:K,se=h?K:Z;if(B===1===this.image.get(J,se)){if(B===2)return ct.distance(K,Z,o,a);B++}if(_+=y,_>0){if(Z===d)break;Z+=R,_-=g}}return B===2?ct.distance(c+b,d,o,a):NaN}findAlignmentInRegion(o,a,c,d){const h=Math.floor(d*o),g=Math.max(0,a-h),y=Math.min(this.image.getWidth()-1,a+h);if(y-g<o*3)throw new ee("Alignment top exceeds estimated module size.");const _=Math.max(0,c-h),b=Math.min(this.image.getHeight()-1,c+h);if(b-_<o*3)throw new ee("Alignment bottom exceeds estimated module size.");return new Ts(this.image,g,_,y-g,b-_,o,this.resultPointCallback).find()}}class Ui{constructor(){this.decoder=new Sp}getDecoder(){return this.decoder}decode(o,a){let c,d;if(a!=null&&a.get(Y.PURE_BARCODE)!==void 0){const _=Ui.extractPureBits(o.getBlackMatrix());c=this.decoder.decodeBitMatrix(_,a),d=Ui.NO_POINTS}else{const _=new Ks(o.getBlackMatrix()).detect(a);c=this.decoder.decodeBitMatrix(_.getBits(),a),d=_.getPoints()}c.getOther()instanceof C0&&c.getOther().applyMirroredCorrection(d);const h=new _t(c.getText(),c.getRawBytes(),void 0,d,Oe.QR_CODE,void 0),g=c.getByteSegments();g!==null&&h.putMetadata(qt.BYTE_SEGMENTS,g);const y=c.getECLevel();return y!==null&&h.putMetadata(qt.ERROR_CORRECTION_LEVEL,y),c.hasStructuredAppend()&&(h.putMetadata(qt.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),h.putMetadata(qt.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),h}reset(){}static extractPureBits(o){const a=o.getTopLeftOnBit(),c=o.getBottomRightOnBit();if(a===null||c===null)throw new ee;const d=this.moduleSize(a,o);let h=a[1],g=c[1],y=a[0],_=c[0];if(y>=_||h>=g)throw new ee;if(g-h!==_-y&&(_=y+(g-h),_>=o.getWidth()))throw new ee;const b=Math.round((_-y+1)/d),R=Math.round((g-h+1)/d);if(b<=0||R<=0)throw new ee;if(R!==b)throw new ee;const B=Math.floor(d/2);h+=B,y+=B;const U=y+Math.floor((b-1)*d)-_;if(U>0){if(U>B)throw new ee;y-=U}const K=h+Math.floor((R-1)*d)-g;if(K>0){if(K>B)throw new ee;h-=K}const Z=new de(b,R);for(let J=0;J<R;J++){const se=h+Math.floor(J*d);for(let ce=0;ce<b;ce++)o.get(y+Math.floor(ce*d),se)&&Z.set(ce,J)}return Z}static moduleSize(o,a){const c=a.getHeight(),d=a.getWidth();let h=o[0],g=o[1],y=!0,_=0;for(;h<d&&g<c;){if(y!==a.get(h,g)){if(++_===5)break;y=!y}h++,g++}if(h===d||g===c)throw new ee;return(h-o[0])/7}}Ui.NO_POINTS=new Array;class Qe{PDF417Common(){}static getBitCountSum(o){return ct.sum(o)}static toIntArray(o){if(o==null||!o.length)return Qe.EMPTY_INT_ARRAY;const a=new Int32Array(o.length);let c=0;for(const d of o)a[c++]=d;return a}static getCodeword(o){const a=T.binarySearch(Qe.SYMBOL_TABLE,o&262143);return a<0?-1:(Qe.CODEWORD_TABLE[a]-1)%Qe.NUMBER_OF_CODEWORDS}}Qe.NUMBER_OF_CODEWORDS=929,Qe.MAX_CODEWORDS_IN_BARCODE=Qe.NUMBER_OF_CODEWORDS-1,Qe.MIN_ROWS_IN_BARCODE=3,Qe.MAX_ROWS_IN_BARCODE=90,Qe.MODULES_IN_CODEWORD=17,Qe.MODULES_IN_STOP_PATTERN=18,Qe.BARS_IN_MODULE=8,Qe.EMPTY_INT_ARRAY=new Int32Array([]),Qe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Qe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Np{constructor(o,a){this.bits=o,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Ze{static detectMultiple(o,a,c){let d=o.getBlackMatrix(),h=Ze.detect(c,d);return h.length||(d=d.clone(),d.rotate180(),h=Ze.detect(c,d)),new Np(d,h)}static detect(o,a){const c=new Array;let d=0,h=0,g=!1;for(;d<a.getHeight();){const y=Ze.findVertices(a,d,h);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,h=0;for(const _ of c)_[1]!=null&&(d=Math.trunc(Math.max(d,_[1].getY()))),_[3]!=null&&(d=Math.max(d,Math.trunc(_[3].getY())));d+=Ze.ROW_STEP;continue}if(g=!0,c.push(y),!o)break;y[2]!=null?(h=Math.trunc(y[2].getX()),d=Math.trunc(y[2].getY())):(h=Math.trunc(y[4].getX()),d=Math.trunc(y[4].getY()))}return c}static findVertices(o,a,c){const d=o.getHeight(),h=o.getWidth(),g=new Array(8);return Ze.copyToResult(g,Ze.findRowsWithPattern(o,d,h,a,c,Ze.START_PATTERN),Ze.INDEXES_START_PATTERN),g[4]!=null&&(c=Math.trunc(g[4].getX()),a=Math.trunc(g[4].getY())),Ze.copyToResult(g,Ze.findRowsWithPattern(o,d,h,a,c,Ze.STOP_PATTERN),Ze.INDEXES_STOP_PATTERN),g}static copyToResult(o,a,c){for(let d=0;d<c.length;d++)o[c[d]]=a[d]}static findRowsWithPattern(o,a,c,d,h,g){const y=new Array(4);let _=!1;const b=new Int32Array(g.length);for(;d<a;d+=Ze.ROW_STEP){let B=Ze.findGuardPattern(o,h,d,c,!1,g,b);if(B!=null){for(;d>0;){const U=Ze.findGuardPattern(o,h,--d,c,!1,g,b);if(U!=null)B=U;else{d++;break}}y[0]=new je(B[0],d),y[1]=new je(B[1],d),_=!0;break}}let R=d+1;if(_){let B=0,U=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;R<a;R++){const K=Ze.findGuardPattern(o,U[0],R,c,!1,g,b);if(K!=null&&Math.abs(U[0]-K[0])<Ze.MAX_PATTERN_DRIFT&&Math.abs(U[1]-K[1])<Ze.MAX_PATTERN_DRIFT)U=K,B=0;else{if(B>Ze.SKIPPED_ROW_COUNT_MAX)break;B++}}R-=B+1,y[2]=new je(U[0],R),y[3]=new je(U[1],R)}return R-d<Ze.BARCODE_MIN_HEIGHT&&T.fill(y,null),y}static findGuardPattern(o,a,c,d,h,g,y){T.fillWithin(y,0,y.length,0);let _=a,b=0;for(;o.get(_,c)&&_>0&&b++<Ze.MAX_PIXEL_DRIFT;)_--;let R=_,B=0,U=g.length;for(let K=h;R<d;R++)if(o.get(R,c)!==K)y[B]++;else{if(B===U-1){if(Ze.patternMatchVariance(y,g,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE)return new Int32Array([_,R]);_+=y[0]+y[1],C.arraycopy(y,2,y,0,B-1),y[B-1]=0,y[B]=0,B--}else B++;y[B]=1,K=!K}return B===U-1&&Ze.patternMatchVariance(y,g,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE?new Int32Array([_,R-1]):null}static patternMatchVariance(o,a,c){let d=o.length,h=0,g=0;for(let b=0;b<d;b++)h+=o[b],g+=a[b];if(h<g)return 1/0;let y=h/g;c*=y;let _=0;for(let b=0;b<d;b++){let R=o[b],B=a[b]*y,U=R>B?R-B:B-R;if(U>c)return 1/0;_+=U}return _/h}}Ze.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ze.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ze.MAX_AVG_VARIANCE=.42,Ze.MAX_INDIVIDUAL_VARIANCE=.8,Ze.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ze.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ze.MAX_PIXEL_DRIFT=3,Ze.MAX_PATTERN_DRIFT=5,Ze.SKIPPED_ROW_COUNT_MAX=25,Ze.ROW_STEP=5,Ze.BARCODE_MIN_HEIGHT=10;class nr{constructor(o,a){if(a.length===0)throw new v;this.field=o;let c=a.length;if(c>1&&a[0]===0){let d=1;for(;d<c&&a[d]===0;)d++;d===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-d),C.arraycopy(a,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let d=0;for(let h of this.coefficients)d=this.field.add(d,h);return d}let a=this.coefficients[0],c=this.coefficients.length;for(let d=1;d<c;d++)a=this.field.add(this.field.multiply(o,a),this.coefficients[d]);return a}add(o){if(!this.field.equals(o.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let a=this.coefficients,c=o.coefficients;if(a.length>c.length){let g=a;a=c,c=g}let d=new Int32Array(c.length),h=c.length-a.length;C.arraycopy(c,0,d,0,h);for(let g=h;g<c.length;g++)d[g]=this.field.add(a[g-h],c[g]);return new nr(this.field,d)}subtract(o){if(!this.field.equals(o.field))throw new v("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof nr?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new nr(this.field,new Int32Array([0]));let a=this.coefficients,c=a.length,d=o.coefficients,h=d.length,g=new Int32Array(c+h-1);for(let y=0;y<c;y++){let _=a[y];for(let b=0;b<h;b++)g[y+b]=this.field.add(g[y+b],this.field.multiply(_,d[b]))}return new nr(this.field,g)}negative(){let o=this.coefficients.length,a=new Int32Array(o);for(let c=0;c<o;c++)a[c]=this.field.subtract(0,this.coefficients[c]);return new nr(this.field,a)}multiplyScalar(o){if(o===0)return new nr(this.field,new Int32Array([0]));if(o===1)return this;let a=this.coefficients.length,c=new Int32Array(a);for(let d=0;d<a;d++)c[d]=this.field.multiply(this.coefficients[d],o);return new nr(this.field,c)}multiplyByMonomial(o,a){if(o<0)throw new v;if(a===0)return new nr(this.field,new Int32Array([0]));let c=this.coefficients.length,d=new Int32Array(c+o);for(let h=0;h<c;h++)d[h]=this.field.multiply(this.coefficients[h],a);return new nr(this.field,d)}toString(){let o=new z;for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);c!==0&&(c<0?(o.append(" - "),c=-c):o.length()>0&&o.append(" + "),(a===0||c!==1)&&o.append(c),a!==0&&(a===1?o.append("x"):(o.append("x^"),o.append(a))))}return o.toString()}}class Rp{add(o,a){return(o+a)%this.modulus}subtract(o,a){return(this.modulus+o-a)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new v;return this.logTable[o]}inverse(o){if(o===0)throw new os;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,a){return o===0||a===0?0:this.expTable[(this.logTable[o]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class ua extends Rp{constructor(o,a){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let c=1;for(let d=0;d<o;d++)this.expTable[d]=c,c=c*a%o;for(let d=0;d<o-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new nr(this,new Int32Array([0])),this.one=new nr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,a){if(o<0)throw new v;if(a===0)return this.zero;let c=new Int32Array(o+1);return c[0]=a,new nr(this,c)}}ua.PDF417_GF=new ua(Qe.NUMBER_OF_CODEWORDS,3);class Dl{constructor(){this.field=ua.PDF417_GF}decode(o,a,c){let d=new nr(this.field,o),h=new Int32Array(a),g=!1;for(let Z=a;Z>0;Z--){let J=d.evaluateAt(this.field.exp(Z));h[a-Z]=J,J!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(c!=null)for(const Z of c){let J=this.field.exp(o.length-1-Z),se=new nr(this.field,new Int32Array([this.field.subtract(0,J),1]));y=y.multiply(se)}let _=new nr(this.field,h),b=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),_,a),R=b[0],B=b[1],U=this.findErrorLocations(R),K=this.findErrorMagnitudes(B,R,U);for(let Z=0;Z<U.length;Z++){let J=o.length-1-this.field.log(U[Z]);if(J<0)throw I.getChecksumInstance();o[J]=this.field.subtract(o[J],K[Z])}return U.length}runEuclideanAlgorithm(o,a,c){if(o.getDegree()<a.getDegree()){let U=o;o=a,a=U}let d=o,h=a,g=this.field.getZero(),y=this.field.getOne();for(;h.getDegree()>=Math.round(c/2);){let U=d,K=g;if(d=h,g=y,d.isZero())throw I.getChecksumInstance();h=U;let Z=this.field.getZero(),J=d.getCoefficient(d.getDegree()),se=this.field.inverse(J);for(;h.getDegree()>=d.getDegree()&&!h.isZero();){let ce=h.getDegree()-d.getDegree(),be=this.field.multiply(h.getCoefficient(h.getDegree()),se);Z=Z.add(this.field.buildMonomial(ce,be)),h=h.subtract(d.multiplyByMonomial(ce,be))}y=Z.multiply(g).subtract(K).negative()}let _=y.getCoefficient(0);if(_===0)throw I.getChecksumInstance();let b=this.field.inverse(_),R=y.multiply(b),B=h.multiply(b);return[R,B]}findErrorLocations(o){let a=o.getDegree(),c=new Int32Array(a),d=0;for(let h=1;h<this.field.getSize()&&d<a;h++)o.evaluateAt(h)===0&&(c[d]=this.field.inverse(h),d++);if(d!==a)throw I.getChecksumInstance();return c}findErrorMagnitudes(o,a,c){let d=a.getDegree(),h=new Int32Array(d);for(let b=1;b<=d;b++)h[d-b]=this.field.multiply(b,a.getCoefficient(b));let g=new nr(this.field,h),y=c.length,_=new Int32Array(y);for(let b=0;b<y;b++){let R=this.field.inverse(c[b]),B=this.field.subtract(0,o.evaluateAt(R)),U=this.field.inverse(g.evaluateAt(R));_[b]=this.field.multiply(B,U)}return _}}class zi{constructor(o,a,c,d,h){o instanceof zi?this.constructor_2(o):this.constructor_1(o,a,c,d,h)}constructor_1(o,a,c,d,h){const g=a==null||c==null,y=d==null||h==null;if(g&&y)throw new ee;g?(a=new je(0,d.getY()),c=new je(0,h.getY())):y&&(d=new je(o.getWidth()-1,a.getY()),h=new je(o.getWidth()-1,c.getY())),this.image=o,this.topLeft=a,this.bottomLeft=c,this.topRight=d,this.bottomRight=h,this.minX=Math.trunc(Math.min(a.getX(),c.getX())),this.maxX=Math.trunc(Math.max(d.getX(),h.getX())),this.minY=Math.trunc(Math.min(a.getY(),d.getY())),this.maxY=Math.trunc(Math.max(c.getY(),h.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,a){return o==null?a:a==null?o:new zi(o.image,o.topLeft,o.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(o,a,c){let d=this.topLeft,h=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(o>0){let _=c?this.topLeft:this.topRight,b=Math.trunc(_.getY()-o);b<0&&(b=0);let R=new je(_.getX(),b);c?d=R:g=R}if(a>0){let _=c?this.bottomLeft:this.bottomRight,b=Math.trunc(_.getY()+a);b>=this.image.getHeight()&&(b=this.image.getHeight()-1);let R=new je(_.getX(),b);c?h=R:y=R}return new zi(this.image,d,h,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ml{constructor(o,a,c,d){this.columnCount=o,this.errorCorrectionLevel=d,this.rowCountUpperPart=a,this.rowCountLowerPart=c,this.rowCount=a+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class hi{constructor(){this.buffer=""}static form(o,a){let c=-1;function d(g,y,_,b,R,B){if(g==="%%")return"%";if(a[++c]===void 0)return;g=b?parseInt(b.substr(1)):void 0;let U=R?parseInt(R.substr(1)):void 0,K;switch(B){case"s":K=a[c];break;case"c":K=a[c][0];break;case"f":K=parseFloat(a[c]).toFixed(g);break;case"p":K=parseFloat(a[c]).toPrecision(g);break;case"e":K=parseFloat(a[c]).toExponential(g);break;case"x":K=parseInt(a[c]).toString(U||16);break;case"d":K=parseFloat(parseInt(a[c],U||10).toPrecision(g)).toFixed(0);break}K=typeof K=="object"?JSON.stringify(K):(+K).toString(U);let Z=parseInt(_),J=_&&_[0]+""=="0"?"0":" ";for(;K.length<Z;)K=y!==void 0?K+J:J+K;return K}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(h,d)}format(o,...a){this.buffer+=hi.form(o,a)}toString(){return this.buffer}}class da{constructor(o){this.boundingBox=new zi(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let a=this.getCodeword(o);if(a!=null)return a;for(let c=1;c<da.MAX_NEARBY_DISTANCE;c++){let d=this.imageRowToCodewordIndex(o)-c;if(d>=0&&(a=this.codewords[d],a!=null)||(d=this.imageRowToCodewordIndex(o)+c,d<this.codewords.length&&(a=this.codewords[d],a!=null)))return a}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,a){this.codewords[this.imageRowToCodewordIndex(o)]=a}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new hi;let a=0;for(const c of this.codewords){if(c==null){o.format("%3d:    |   %n",a++);continue}o.format("%3d: %3d|%3d%n",a++,c.getRowNumber(),c.getValue())}return o.toString()}}da.MAX_NEARBY_DISTANCE=5;class No{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let a=this.values.get(o);a==null&&(a=0),a++,this.values.set(o,a)}getValue(){let o=-1,a=new Array;for(const[c,d]of this.values.entries()){const h={getKey:()=>c,getValue:()=>d};h.getValue()>o?(o=h.getValue(),a=[],a.push(h.getKey())):h.getValue()===o&&a.push(h.getKey())}return Qe.toIntArray(a)}getConfidence(o){return this.values.get(o)}}class cn extends da{constructor(o,a){super(o),this._isLeft=a}setRowNumbers(){for(let o of this.getCodewords())o!=null&&o.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,o);let c=this.getBoundingBox(),d=this._isLeft?c.getTopLeft():c.getTopRight(),h=this._isLeft?c.getBottomLeft():c.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(d.getY())),y=this.imageRowToCodewordIndex(Math.trunc(h.getY())),_=-1,b=1,R=0;for(let B=g;B<y;B++){if(a[B]==null)continue;let U=a[B],K=U.getRowNumber()-_;if(K===0)R++;else if(K===1)b=Math.max(b,R),R=1,_=U.getRowNumber();else if(K<0||U.getRowNumber()>=o.getRowCount()||K>B)a[B]=null;else{let Z;b>2?Z=(b-2)*K:Z=K;let J=Z>=B;for(let se=1;se<=Z&&!J;se++)J=a[B-se]!=null;J?a[B]=null:(_=U.getRowNumber(),R=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let a=new Int32Array(o.getRowCount());for(let c of this.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=a.length)continue;a[d]++}return a}adjustIncompleteIndicatorColumnRowNumbers(o){let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),d=this._isLeft?a.getBottomLeft():a.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=this.imageRowToCodewordIndex(Math.trunc(d.getY())),y=this.getCodewords(),_=-1;for(let b=h;b<g;b++){if(y[b]==null)continue;let R=y[b];R.setRowNumberAsRowIndicatorColumn();let B=R.getRowNumber()-_;B===0||(B===1?_=R.getRowNumber():R.getRowNumber()>=o.getRowCount()?y[b]=null:_=R.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),a=new No,c=new No,d=new No,h=new No;for(let y of o){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let _=y.getValue()%30,b=y.getRowNumber();switch(this._isLeft||(b+=2),b%3){case 0:c.setValue(_*3+1);break;case 1:h.setValue(_/3),d.setValue(_%3);break;case 2:a.setValue(_+1);break}}if(a.getValue().length===0||c.getValue().length===0||d.getValue().length===0||h.getValue().length===0||a.getValue()[0]<1||c.getValue()[0]+d.getValue()[0]<Qe.MIN_ROWS_IN_BARCODE||c.getValue()[0]+d.getValue()[0]>Qe.MAX_ROWS_IN_BARCODE)return null;let g=new Ml(a.getValue()[0],c.getValue()[0],d.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(o,g),g}removeIncorrectCodewords(o,a){for(let c=0;c<o.length;c++){let d=o[c];if(o[c]==null)continue;let h=d.getValue()%30,g=d.getRowNumber();if(g>a.getRowCount()){o[c]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:h*3+1!==a.getRowCountUpperPart()&&(o[c]=null);break;case 1:(Math.trunc(h/3)!==a.getErrorCorrectionLevel()||h%3!==a.getRowCountLowerPart())&&(o[c]=null);break;case 2:h+1!==a.getColumnCount()&&(o[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ll{constructor(o,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=Qe.MAX_CODEWORDS_IN_BARCODE,a;do a=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o!=null&&o.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let c=this.detectionResultColumns[a].getCodewords();for(let d=0;d<c.length;d++)c[d]!=null&&(c[d].hasValidRowNumber()||this.adjustRowNumbers(a,d,c))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<o.length;c++)if(o[c]!=null&&a[c]!=null&&o[c].getRowNumber()===a[c].getRowNumber())for(let d=1;d<=this.barcodeColumnCount;d++){let h=this.detectionResultColumns[d].getCodewords()[c];h!=null&&(h.setRowNumber(o[c].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let d=a[c].getRowNumber(),h=0;for(let g=this.barcodeColumnCount+1;g>0&&h<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[c];y!=null&&(h=Ll.adjustRowNumberIfValid(d,h,y),y.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,a=this.detectionResultColumns[0].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let d=a[c].getRowNumber(),h=0;for(let g=1;g<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[c];y!=null&&(h=Ll.adjustRowNumberIfValid(d,h,y),y.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,a,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(o)?(c.setRowNumber(o),a=0):++a),a}adjustRowNumbers(o,a,c){if(!this.detectionResultColumns[o-1])return;let d=c[a],h=this.detectionResultColumns[o-1].getCodewords(),g=h;this.detectionResultColumns[o+1]!=null&&(g=this.detectionResultColumns[o+1].getCodewords());let y=new Array(14);y[2]=h[a],y[3]=g[a],a>0&&(y[0]=c[a-1],y[4]=h[a-1],y[5]=g[a-1]),a>1&&(y[8]=c[a-2],y[10]=h[a-2],y[11]=g[a-2]),a<c.length-1&&(y[1]=c[a+1],y[6]=h[a+1],y[7]=g[a+1]),a<c.length-2&&(y[9]=c[a+2],y[12]=h[a+2],y[13]=g[a+2]);for(let _ of y)if(Ll.adjustRowNumber(d,_))return}static adjustRowNumber(o,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===o.getBucket()?(o.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,a){this.detectionResultColumns[o]=a}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new hi;for(let c=0;c<o.getCodewords().length;c++){a.format("CW %3d:",c);for(let d=0;d<this.barcodeColumnCount+2;d++){if(this.detectionResultColumns[d]==null){a.format("    |   ");continue}let h=this.detectionResultColumns[d].getCodewords()[c];if(h==null){a.format("    |   ");continue}a.format(" %3d|%3d",h.getRowNumber(),h.getValue())}a.format("%n")}return a.toString()}}class Fl{constructor(o,a,c,d){this.rowNumber=Fl.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(a),this.bucket=Math.trunc(c),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==Fl.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}Fl.BARCODE_ROW_UNKNOWN=-1;class wr{static initialize(){for(let o=0;o<Qe.SYMBOL_TABLE.length;o++){let a=Qe.SYMBOL_TABLE[o],c=a&1;for(let d=0;d<Qe.BARS_IN_MODULE;d++){let h=0;for(;(a&1)===c;)h+=1,a>>=1;c=a&1,wr.RATIOS_TABLE[o]||(wr.RATIOS_TABLE[o]=new Array(Qe.BARS_IN_MODULE)),wr.RATIOS_TABLE[o][Qe.BARS_IN_MODULE-d-1]=Math.fround(h/Qe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let a=wr.getDecodedCodewordValue(wr.sampleBitCounts(o));return a!==-1?a:wr.getClosestDecodedValue(o)}static sampleBitCounts(o){let a=ct.sum(o),c=new Int32Array(Qe.BARS_IN_MODULE),d=0,h=0;for(let g=0;g<Qe.MODULES_IN_CODEWORD;g++){let y=a/(2*Qe.MODULES_IN_CODEWORD)+g*a/Qe.MODULES_IN_CODEWORD;h+o[d]<=y&&(h+=o[d],d++),c[d]++}return c}static getDecodedCodewordValue(o){let a=wr.getBitValue(o);return Qe.getCodeword(a)===-1?-1:a}static getBitValue(o){let a=0;for(let c=0;c<o.length;c++)for(let d=0;d<o[c];d++)a=a<<1|(c%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(o){let a=ct.sum(o),c=new Array(Qe.BARS_IN_MODULE);if(a>1)for(let g=0;g<c.length;g++)c[g]=Math.fround(o[g]/a);let d=bo.MAX_VALUE,h=-1;this.bSymbolTableReady||wr.initialize();for(let g=0;g<wr.RATIOS_TABLE.length;g++){let y=0,_=wr.RATIOS_TABLE[g];for(let b=0;b<Qe.BARS_IN_MODULE;b++){let R=Math.fround(_[b]-c[b]);if(y+=Math.fround(R*R),y>=d)break}y<d&&(d=y,h=Qe.SYMBOL_TABLE[g])}return h}}wr.bSymbolTableReady=!1,wr.RATIOS_TABLE=new Array(Qe.SYMBOL_TABLE.length).map(F=>new Array(Qe.BARS_IN_MODULE));class Fd{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class jd{static parseLong(o,a=void 0){return parseInt(o,a)}}class jl extends m{}jl.kind="NullPointerException";class T0{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,a,c){if(o==null)throw new jl;if(a<0||a>o.length||c<0||a+c>o.length||a+c<0)throw new k;if(c===0)return;for(let d=0;d<c;d++)this.write(o[a+d])}flush(){}close(){}}class fi extends m{}class I0 extends T0{constructor(o=32){if(super(),this.count=0,o<0)throw new v("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let c=this.buf.length<<1;if(c-o<0&&(c=o),c<0){if(o<0)throw new fi;c=S.MAX_VALUE}this.buf=T.copyOfUint8Array(this.buf,c)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,a,c){if(a<0||a>o.length||c<0||a+c-o.length>0)throw new k;this.ensureCapacity(this.count+c),C.arraycopy(o,a,this.buf,this.count,c),this.count+=c}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return T.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var Vt;(function(F){F[F.ALPHA=0]="ALPHA",F[F.LOWER=1]="LOWER",F[F.MIXED=2]="MIXED",F[F.PUNCT=3]="PUNCT",F[F.ALPHA_SHIFT=4]="ALPHA_SHIFT",F[F.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Vt||(Vt={}));function ha(){if(typeof window<"u")return window.BigInt||null;if(typeof zd<"u")return zd.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Bl;function Xs(F){if(typeof Bl>"u"&&(Bl=ha()),Bl===null)throw new Error("BigInt is not supported!");return Bl(F)}function Gc(){let F=[];F[0]=Xs(1);let o=Xs(900);F[1]=o;for(let a=2;a<16;a++)F[a]=F[a-1]*o;return F}class ae{static decode(o,a){let c=new z(""),d=L.ISO8859_1;c.enableDecoding(d);let h=1,g=o[h++],y=new Fd;for(;h<o[0];){switch(g){case ae.TEXT_COMPACTION_MODE_LATCH:h=ae.textCompaction(o,h,c);break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:h=ae.byteCompaction(g,o,d,h,c);break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[h++]);break;case ae.NUMERIC_COMPACTION_MODE_LATCH:h=ae.numericCompaction(o,h,c);break;case ae.ECI_CHARSET:L.getCharacterSetECIByValue(o[h++]);break;case ae.ECI_GENERAL_PURPOSE:h+=2;break;case ae.ECI_USER_DEFINED:h++;break;case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=ae.decodeMacroBlock(o,h,y);break;case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:throw new M;default:h--,h=ae.textCompaction(o,h,c);break}if(h<o.length)g=o[h++];else throw M.getFormatInstance()}if(c.length()===0)throw M.getFormatInstance();let _=new yn(null,c.toString(),null,a);return _.setOther(y),_}static decodeMacroBlock(o,a,c){if(a+ae.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw M.getFormatInstance();let d=new Int32Array(ae.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<ae.NUMBER_OF_SEQUENCE_CODEWORDS;y++,a++)d[y]=o[a];c.setSegmentIndex(S.parseInt(ae.decodeBase900toBase10(d,ae.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new z;a=ae.textCompaction(o,a,h),c.setFileId(h.toString());let g=-1;for(o[a]===ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=a+1);a<o[0];)switch(o[a]){case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,o[a]){case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new z;a=ae.textCompaction(o,a+1,y),c.setFileName(y.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new z;a=ae.textCompaction(o,a+1,_),c.setSender(_.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let b=new z;a=ae.textCompaction(o,a+1,b),c.setAddressee(b.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new z;a=ae.numericCompaction(o,a+1,R),c.setSegmentCount(S.parseInt(R.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let B=new z;a=ae.numericCompaction(o,a+1,B),c.setTimestamp(jd.parseLong(B.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let U=new z;a=ae.numericCompaction(o,a+1,U),c.setChecksum(S.parseInt(U.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let K=new z;a=ae.numericCompaction(o,a+1,K),c.setFileSize(jd.parseLong(K.toString()));break;default:throw M.getFormatInstance()}break;case ae.MACRO_PDF417_TERMINATOR:a++,c.setLastSegment(!0);break;default:throw M.getFormatInstance()}if(g!==-1){let y=a-g;c.isLastSegment()&&y--,c.setOptionalData(T.copyOfRange(o,g,g+y))}return a}static textCompaction(o,a,c){let d=new Int32Array((o[0]-a)*2),h=new Int32Array((o[0]-a)*2),g=0,y=!1;for(;a<o[0]&&!y;){let _=o[a++];if(_<ae.TEXT_COMPACTION_MODE_LATCH)d[g]=_/30,d[g+1]=_%30,g+=2;else switch(_){case ae.TEXT_COMPACTION_MODE_LATCH:d[g++]=ae.TEXT_COMPACTION_MODE_LATCH;break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:a--,y=!0;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[g]=ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=o[a++],h[g]=_,g++;break}}return ae.decodeTextCompaction(d,h,g,c),a}static decodeTextCompaction(o,a,c,d){let h=Vt.ALPHA,g=Vt.ALPHA,y=0;for(;y<c;){let _=o[y],b="";switch(h){case Vt.ALPHA:if(_<26)b=String.fromCharCode(65+_);else switch(_){case 26:b=" ";break;case ae.LL:h=Vt.LOWER;break;case ae.ML:h=Vt.MIXED;break;case ae.PS:g=h,h=Vt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[y]);break;case ae.TEXT_COMPACTION_MODE_LATCH:h=Vt.ALPHA;break}break;case Vt.LOWER:if(_<26)b=String.fromCharCode(97+_);else switch(_){case 26:b=" ";break;case ae.AS:g=h,h=Vt.ALPHA_SHIFT;break;case ae.ML:h=Vt.MIXED;break;case ae.PS:g=h,h=Vt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[y]);break;case ae.TEXT_COMPACTION_MODE_LATCH:h=Vt.ALPHA;break}break;case Vt.MIXED:if(_<ae.PL)b=ae.MIXED_CHARS[_];else switch(_){case ae.PL:h=Vt.PUNCT;break;case 26:b=" ";break;case ae.LL:h=Vt.LOWER;break;case ae.AL:h=Vt.ALPHA;break;case ae.PS:g=h,h=Vt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[y]);break;case ae.TEXT_COMPACTION_MODE_LATCH:h=Vt.ALPHA;break}break;case Vt.PUNCT:if(_<ae.PAL)b=ae.PUNCT_CHARS[_];else switch(_){case ae.PAL:h=Vt.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[y]);break;case ae.TEXT_COMPACTION_MODE_LATCH:h=Vt.ALPHA;break}break;case Vt.ALPHA_SHIFT:if(h=g,_<26)b=String.fromCharCode(65+_);else switch(_){case 26:b=" ";break;case ae.TEXT_COMPACTION_MODE_LATCH:h=Vt.ALPHA;break}break;case Vt.PUNCT_SHIFT:if(h=g,_<ae.PAL)b=ae.PUNCT_CHARS[_];else switch(_){case ae.PAL:h=Vt.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[y]);break;case ae.TEXT_COMPACTION_MODE_LATCH:h=Vt.ALPHA;break}break}b!==""&&d.append(b),y++}}static byteCompaction(o,a,c,d,h){let g=new I0,y=0,_=0,b=!1;switch(o){case ae.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),B=a[d++];for(;d<a[0]&&!b;)switch(R[y++]=B,_=900*_+B,B=a[d++],B){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:d--,b=!0;break;default:if(y%5===0&&y>0){for(let U=0;U<6;++U)g.write(Number(Xs(_)>>Xs(8*(5-U))));_=0,y=0}break}d===a[0]&&B<ae.TEXT_COMPACTION_MODE_LATCH&&(R[y++]=B);for(let U=0;U<y;U++)g.write(R[U]);break;case ae.BYTE_COMPACTION_MODE_LATCH_6:for(;d<a[0]&&!b;){let U=a[d++];if(U<ae.TEXT_COMPACTION_MODE_LATCH)y++,_=900*_+U;else switch(U){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:d--,b=!0;break}if(y%5===0&&y>0){for(let K=0;K<6;++K)g.write(Number(Xs(_)>>Xs(8*(5-K))));_=0,y=0}}break}return h.append(X.decode(g.toByteArray(),c)),d}static numericCompaction(o,a,c){let d=0,h=!1,g=new Int32Array(ae.MAX_NUMERIC_CODEWORDS);for(;a<o[0]&&!h;){let y=o[a++];if(a===o[0]&&(h=!0),y<ae.TEXT_COMPACTION_MODE_LATCH)g[d]=y,d++;else switch(y){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:a--,h=!0;break}(d%ae.MAX_NUMERIC_CODEWORDS===0||y===ae.NUMERIC_COMPACTION_MODE_LATCH||h)&&d>0&&(c.append(ae.decodeBase900toBase10(g,d)),d=0)}return a}static decodeBase900toBase10(o,a){let c=Xs(0);for(let h=0;h<a;h++)c+=ae.EXP900[a-h-1]*Xs(o[h]);let d=c.toString();if(d.charAt(0)!=="1")throw new M;return d.substring(1)}}ae.TEXT_COMPACTION_MODE_LATCH=900,ae.BYTE_COMPACTION_MODE_LATCH=901,ae.NUMERIC_COMPACTION_MODE_LATCH=902,ae.BYTE_COMPACTION_MODE_LATCH_6=924,ae.ECI_USER_DEFINED=925,ae.ECI_GENERAL_PURPOSE=926,ae.ECI_CHARSET=927,ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ae.MACRO_PDF417_TERMINATOR=922,ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ae.MAX_NUMERIC_CODEWORDS=15,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ae.PL=25,ae.LL=27,ae.AS=27,ae.ML=28,ae.AL=28,ae.PS=29,ae.PAL=29,ae.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ae.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ae.EXP900=ha()?Gc():[],ae.NUMBER_OF_SEQUENCE_CODEWORDS=2;class it{constructor(){}static decode(o,a,c,d,h,g,y){let _=new zi(o,a,c,d,h),b=null,R=null,B;for(let Z=!0;;Z=!1){if(a!=null&&(b=it.getRowIndicatorColumn(o,_,a,!0,g,y)),d!=null&&(R=it.getRowIndicatorColumn(o,_,d,!1,g,y)),B=it.merge(b,R),B==null)throw ee.getNotFoundInstance();let J=B.getBoundingBox();if(Z&&J!=null&&(J.getMinY()<_.getMinY()||J.getMaxY()>_.getMaxY()))_=J;else break}B.setBoundingBox(_);let U=B.getBarcodeColumnCount()+1;B.setDetectionResultColumn(0,b),B.setDetectionResultColumn(U,R);let K=b!=null;for(let Z=1;Z<=U;Z++){let J=K?Z:U-Z;if(B.getDetectionResultColumn(J)!==void 0)continue;let se;J===0||J===U?se=new cn(_,J===0):se=new da(_),B.setDetectionResultColumn(J,se);let ce=-1,be=ce;for(let Ce=_.getMinY();Ce<=_.getMaxY();Ce++){if(ce=it.getStartColumn(B,J,Ce,K),ce<0||ce>_.getMaxX()){if(be===-1)continue;ce=be}let ve=it.detectCodeword(o,_.getMinX(),_.getMaxX(),K,ce,Ce,g,y);ve!=null&&(se.setCodeword(Ce,ve),be=ce,g=Math.min(g,ve.getWidth()),y=Math.max(y,ve.getWidth()))}}return it.createDecoderResult(B)}static merge(o,a){if(o==null&&a==null)return null;let c=it.getBarcodeMetadata(o,a);if(c==null)return null;let d=zi.merge(it.adjustBoundingBox(o),it.adjustBoundingBox(a));return new Ll(c,d)}static adjustBoundingBox(o){if(o==null)return null;let a=o.getRowHeights();if(a==null)return null;let c=it.getMax(a),d=0;for(let y of a)if(d+=c-y,y>0)break;let h=o.getCodewords();for(let y=0;d>0&&h[y]==null;y++)d--;let g=0;for(let y=a.length-1;y>=0&&(g+=c-a[y],!(a[y]>0));y--);for(let y=h.length-1;g>0&&h[y]==null;y--)g--;return o.getBoundingBox().addMissingRows(d,g,o.isLeft())}static getMax(o){let a=-1;for(let c of o)a=Math.max(a,c);return a}static getBarcodeMetadata(o,a){let c;if(o==null||(c=o.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let d;return a==null||(d=a.getBarcodeMetadata())==null?c:c.getColumnCount()!==d.getColumnCount()&&c.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&c.getRowCount()!==d.getRowCount()?null:c}static getRowIndicatorColumn(o,a,c,d,h,g){let y=new cn(a,d);for(let _=0;_<2;_++){let b=_===0?1:-1,R=Math.trunc(Math.trunc(c.getX()));for(let B=Math.trunc(Math.trunc(c.getY()));B<=a.getMaxY()&&B>=a.getMinY();B+=b){let U=it.detectCodeword(o,0,o.getWidth(),d,R,B,h,g);U!=null&&(y.setCodeword(B,U),d?R=U.getStartX():R=U.getEndX())}}return y}static adjustCodewordCount(o,a){let c=a[0][1],d=c.getValue(),h=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-it.getNumberOfECCodeWords(o.getBarcodeECLevel());if(d.length===0){if(h<1||h>Qe.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();c.setValue(h)}else d[0]!==h&&c.setValue(h)}static createDecoderResult(o){let a=it.createBarcodeMatrix(o);it.adjustCodewordCount(o,a);let c=new Array,d=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),h=[],g=new Array;for(let _=0;_<o.getBarcodeRowCount();_++)for(let b=0;b<o.getBarcodeColumnCount();b++){let R=a[_][b+1].getValue(),B=_*o.getBarcodeColumnCount()+b;R.length===0?c.push(B):R.length===1?d[B]=R[0]:(g.push(B),h.push(R))}let y=new Array(h.length);for(let _=0;_<y.length;_++)y[_]=h[_];return it.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),d,Qe.toIntArray(c),Qe.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(o,a,c,d,h){let g=new Int32Array(d.length),y=100;for(;y-- >0;){for(let _=0;_<g.length;_++)a[d[_]]=h[_][g[_]];try{return it.decodeCodewords(a,o,c)}catch(_){if(!(_ instanceof I))throw _}if(g.length===0)throw I.getChecksumInstance();for(let _=0;_<g.length;_++)if(g[_]<h[_].length-1){g[_]++;break}else if(g[_]=0,_===g.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(o){let a=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let d=0;d<a.length;d++)for(let h=0;h<a[d].length;h++)a[d][h]=new No;let c=0;for(let d of o.getDetectionResultColumns()){if(d!=null){for(let h of d.getCodewords())if(h!=null){let g=h.getRowNumber();if(g>=0){if(g>=a.length)continue;a[g][c].setValue(h.getValue())}}}c++}return a}static isValidBarcodeColumn(o,a){return a>=0&&a<=o.getBarcodeColumnCount()+1}static getStartColumn(o,a,c,d){let h=d?1:-1,g=null;if(it.isValidBarcodeColumn(o,a-h)&&(g=o.getDetectionResultColumn(a-h).getCodeword(c)),g!=null)return d?g.getEndX():g.getStartX();if(g=o.getDetectionResultColumn(a).getCodewordNearby(c),g!=null)return d?g.getStartX():g.getEndX();if(it.isValidBarcodeColumn(o,a-h)&&(g=o.getDetectionResultColumn(a-h).getCodewordNearby(c)),g!=null)return d?g.getEndX():g.getStartX();let y=0;for(;it.isValidBarcodeColumn(o,a-h);){a-=h;for(let _ of o.getDetectionResultColumn(a).getCodewords())if(_!=null)return(d?_.getEndX():_.getStartX())+h*y*(_.getEndX()-_.getStartX());y++}return d?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,a,c,d,h,g,y,_){h=it.adjustCodewordStartColumn(o,a,c,d,h,g);let b=it.getModuleBitCount(o,a,c,d,h,g);if(b==null)return null;let R,B=ct.sum(b);if(d)R=h+B;else{for(let Z=0;Z<b.length/2;Z++){let J=b[Z];b[Z]=b[b.length-1-Z],b[b.length-1-Z]=J}R=h,h=R-B}if(!it.checkCodewordSkew(B,y,_))return null;let U=wr.getDecodedValue(b),K=Qe.getCodeword(U);return K===-1?null:new Fl(h,R,it.getCodewordBucketNumber(U),K)}static getModuleBitCount(o,a,c,d,h,g){let y=h,_=new Int32Array(8),b=0,R=d?1:-1,B=d;for(;(d?y<c:y>=a)&&b<_.length;)o.get(y,g)===B?(_[b]++,y+=R):(b++,B=!B);return b===_.length||y===(d?c:a)&&b===_.length-1?_:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,a,c,d,h,g){let y=h,_=d?-1:1;for(let b=0;b<2;b++){for(;(d?y>=a:y<c)&&d===o.get(y,g);){if(Math.abs(h-y)>it.CODEWORD_SKEW_SIZE)return h;y+=_}_=-_,d=!d}return y}static checkCodewordSkew(o,a,c){return a-it.CODEWORD_SKEW_SIZE<=o&&o<=c+it.CODEWORD_SKEW_SIZE}static decodeCodewords(o,a,c){if(o.length===0)throw M.getFormatInstance();let d=1<<a+1,h=it.correctErrors(o,c,d);it.verifyCodewordCount(o,d);let g=ae.decode(o,""+a);return g.setErrorsCorrected(h),g.setErasures(c.length),g}static correctErrors(o,a,c){if(a!=null&&a.length>c/2+it.MAX_ERRORS||c<0||c>it.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return it.errorCorrection.decode(o,c,a)}static verifyCodewordCount(o,a){if(o.length<4)throw M.getFormatInstance();let c=o[0];if(c>o.length)throw M.getFormatInstance();if(c===0)if(a<o.length)o[0]=o.length-a;else throw M.getFormatInstance()}static getBitCountForCodeword(o){let a=new Int32Array(8),c=0,d=a.length-1;for(;!((o&1)!==c&&(c=o&1,d--,d<0));)a[d]++,o>>=1;return a}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return it.getCodewordBucketNumber(it.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let a=new hi;for(let c=0;c<o.length;c++){a.format("Row %2d: ",c);for(let d=0;d<o[c].length;d++){let h=o[c][d];h.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}a.format("%n")}return a.toString()}}it.CODEWORD_SKEW_SIZE=2,it.MAX_ERRORS=3,it.MAX_EC_CODEWORDS=512,it.errorCorrection=new Dl;class rr{decode(o,a=null){let c=rr.decode(o,a,!1);if(c==null||c.length===0||c[0]==null)throw ee.getNotFoundInstance();return c[0]}decodeMultiple(o,a=null){try{return rr.decode(o,a,!0)}catch(c){throw c instanceof M||c instanceof I?ee.getNotFoundInstance():c}}static decode(o,a,c){const d=new Array,h=Ze.detectMultiple(o,a,c);for(const g of h.getPoints()){const y=it.decode(h.getBits(),g[4],g[5],g[6],g[7],rr.getMinCodewordWidth(g),rr.getMaxCodewordWidth(g)),_=new _t(y.getText(),y.getRawBytes(),void 0,g,Oe.PDF_417);_.putMetadata(qt.ERROR_CORRECTION_LEVEL,y.getECLevel());const b=y.getOther();b!=null&&_.putMetadata(qt.PDF417_EXTRA_METADATA,b),d.push(_)}return d.map(g=>g)}static getMaxWidth(o,a){return o==null||a==null?0:Math.trunc(Math.abs(o.getX()-a.getX()))}static getMinWidth(o,a){return o==null||a==null?S.MAX_VALUE:Math.trunc(Math.abs(o.getX()-a.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(rr.getMaxWidth(o[0],o[4]),rr.getMaxWidth(o[6],o[2])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN),Math.max(rr.getMaxWidth(o[1],o[5]),rr.getMaxWidth(o[7],o[3])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(rr.getMinWidth(o[0],o[4]),rr.getMinWidth(o[6],o[2])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN),Math.min(rr.getMinWidth(o[1],o[5]),rr.getMinWidth(o[7],o[3])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN)))}reset(){}}class Vl extends m{}Vl.kind="ReaderException";class fa{constructor(o,a){this.verbose=o===!0,a&&this.setHints(a)}decode(o,a){return a&&this.setHints(a),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const a=!r(o)&&o.get(Y.TRY_HARDER)===!0,c=r(o)?null:o.get(Y.POSSIBLE_FORMATS),d=new Array;if(!r(c)){const h=c.some(g=>g===Oe.UPC_A||g===Oe.UPC_E||g===Oe.EAN_13||g===Oe.EAN_8||g===Oe.CODABAR||g===Oe.CODE_39||g===Oe.CODE_93||g===Oe.CODE_128||g===Oe.ITF||g===Oe.RSS_14||g===Oe.RSS_EXPANDED);h&&!a&&d.push(new Bi(o,this.verbose)),c.includes(Oe.QR_CODE)&&d.push(new Ui),c.includes(Oe.DATA_MATRIX)&&d.push(new di),c.includes(Oe.AZTEC)&&d.push(new Cn),c.includes(Oe.PDF_417)&&d.push(new rr),h&&a&&d.push(new Bi(o,this.verbose))}d.length===0&&(a||d.push(new Bi(o,this.verbose)),d.push(new Ui),d.push(new di),d.push(new Cn),d.push(new rr),a&&d.push(new Bi(o,this.verbose))),this.readers=d}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new Vl("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(o,this.hints)}catch(c){if(c instanceof Vl)continue}throw new ee("No MultiFormat Readers were able to detect the code.")}}class S0 extends at{constructor(o=null,a=500){const c=new fa;c.setHints(o),super(c,a)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class N0 extends at{constructor(o=500){super(new rr,o)}}class Bd extends at{constructor(o=500){super(new Ui,o)}}var Ul;(function(F){F[F.ERROR_CORRECTION=0]="ERROR_CORRECTION",F[F.CHARACTER_SET=1]="CHARACTER_SET",F[F.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",F[F.MIN_SIZE=3]="MIN_SIZE",F[F.MAX_SIZE=4]="MAX_SIZE",F[F.MARGIN=5]="MARGIN",F[F.PDF417_COMPACT=6]="PDF417_COMPACT",F[F.PDF417_COMPACTION=7]="PDF417_COMPACTION",F[F.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",F[F.AZTEC_LAYERS=9]="AZTEC_LAYERS",F[F.QR_VERSION=10]="QR_VERSION"})(Ul||(Ul={}));var On=Ul;class ga{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new Jt(o,Int32Array.from([1])))}buildGenerator(o){const a=this.cachedGenerators;if(o>=a.length){let c=a[a.length-1];const d=this.field;for(let h=a.length;h<=o;h++){const g=c.multiply(new Jt(d,Int32Array.from([1,d.exp(h-1+d.getGeneratorBase())])));a.push(g),c=g}}return a[o]}encode(o,a){if(a===0)throw new v("No error correction bytes");const c=o.length-a;if(c<=0)throw new v("No data bytes provided");const d=this.buildGenerator(a),h=new Int32Array(c);C.arraycopy(o,0,h,0,c);let g=new Jt(this.field,h);g=g.multiplyByMonomial(a,1);const _=g.divide(d)[1].getCoefficients(),b=a-_.length;for(let R=0;R<b;R++)o[c+R]=0;C.arraycopy(_,0,o,c+b,_.length)}}class un{constructor(){}static applyMaskPenaltyRule1(o){return un.applyMaskPenaltyRule1Internal(o,!0)+un.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let a=0;const c=o.getArray(),d=o.getWidth(),h=o.getHeight();for(let g=0;g<h-1;g++){const y=c[g];for(let _=0;_<d-1;_++){const b=y[_];b===y[_+1]&&b===c[g+1][_]&&b===c[g+1][_+1]&&a++}}return un.N2*a}static applyMaskPenaltyRule3(o){let a=0;const c=o.getArray(),d=o.getWidth(),h=o.getHeight();for(let g=0;g<h;g++)for(let y=0;y<d;y++){const _=c[g];y+6<d&&_[y]===1&&_[y+1]===0&&_[y+2]===1&&_[y+3]===1&&_[y+4]===1&&_[y+5]===0&&_[y+6]===1&&(un.isWhiteHorizontal(_,y-4,y)||un.isWhiteHorizontal(_,y+7,y+11))&&a++,g+6<h&&c[g][y]===1&&c[g+1][y]===0&&c[g+2][y]===1&&c[g+3][y]===1&&c[g+4][y]===1&&c[g+5][y]===0&&c[g+6][y]===1&&(un.isWhiteVertical(c,y,g-4,g)||un.isWhiteVertical(c,y,g+7,g+11))&&a++}return a*un.N3}static isWhiteHorizontal(o,a,c){a=Math.max(a,0),c=Math.min(c,o.length);for(let d=a;d<c;d++)if(o[d]===1)return!1;return!0}static isWhiteVertical(o,a,c,d){c=Math.max(c,0),d=Math.min(d,o.length);for(let h=c;h<d;h++)if(o[h][a]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let a=0;const c=o.getArray(),d=o.getWidth(),h=o.getHeight();for(let _=0;_<h;_++){const b=c[_];for(let R=0;R<d;R++)b[R]===1&&a++}const g=o.getHeight()*o.getWidth();return Math.floor(Math.abs(a*2-g)*10/g)*un.N4}static getDataMaskBit(o,a,c){let d,h;switch(o){case 0:d=c+a&1;break;case 1:d=c&1;break;case 2:d=a%3;break;case 3:d=(c+a)%3;break;case 4:d=Math.floor(c/2)+Math.floor(a/3)&1;break;case 5:h=c*a,d=(h&1)+h%3;break;case 6:h=c*a,d=(h&1)+h%3&1;break;case 7:h=c*a,d=h%3+(c+a&1)&1;break;default:throw new v("Invalid mask pattern: "+o)}return d===0}static applyMaskPenaltyRule1Internal(o,a){let c=0;const d=a?o.getHeight():o.getWidth(),h=a?o.getWidth():o.getHeight(),g=o.getArray();for(let y=0;y<d;y++){let _=0,b=-1;for(let R=0;R<h;R++){const B=a?g[y][R]:g[R][y];B===b?_++:(_>=5&&(c+=un.N1+(_-5)),_=1,b=B)}_>=5&&(c+=un.N1+(_-5))}return c}}un.N1=3,un.N2=3,un.N3=40,un.N4=10;class zl{constructor(o,a){this.width=o,this.height=a;const c=new Array(a);for(let d=0;d!==a;d++)c[d]=new Uint8Array(o);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(o,a){return this.bytes[a][o]}getArray(){return this.bytes}setNumber(o,a,c){this.bytes[a][o]=c}setBoolean(o,a,c){this.bytes[a][o]=c?1:0}clear(o){for(const a of this.bytes)T.fill(a,o)}equals(o){if(!(o instanceof zl))return!1;const a=o;if(this.width!==a.width||this.height!==a.height)return!1;for(let c=0,d=this.height;c<d;++c){const h=this.bytes[c],g=a.bytes[c];for(let y=0,_=this.width;y<_;++y)if(h[y]!==g[y])return!1}return!0}toString(){const o=new z;for(let a=0,c=this.height;a<c;++a){const d=this.bytes[a];for(let h=0,g=this.width;h<g;++h)switch(d[h]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class Gr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new z;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<Gr.NUM_MASK_PATTERNS}}Gr.NUM_MASK_PATTERNS=8;class Ut extends m{}Ut.kind="WriterException";class qe{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,a,c,d,h){qe.clearMatrix(h),qe.embedBasicPatterns(c,h),qe.embedTypeInfo(a,d,h),qe.maybeEmbedVersionInfo(c,h),qe.embedDataBits(o,d,h)}static embedBasicPatterns(o,a){qe.embedPositionDetectionPatternsAndSeparators(a),qe.embedDarkDotAtLeftBottomCorner(a),qe.maybeEmbedPositionAdjustmentPatterns(o,a),qe.embedTimingPatterns(a)}static embedTypeInfo(o,a,c){const d=new V;qe.makeTypeInfoBits(o,a,d);for(let h=0,g=d.getSize();h<g;++h){const y=d.get(d.getSize()-1-h),_=qe.TYPE_INFO_COORDINATES[h],b=_[0],R=_[1];if(c.setBoolean(b,R,y),h<8){const B=c.getWidth()-h-1;c.setBoolean(B,8,y)}else{const U=c.getHeight()-7+(h-8);c.setBoolean(8,U,y)}}}static maybeEmbedVersionInfo(o,a){if(o.getVersionNumber()<7)return;const c=new V;qe.makeVersionInfoBits(o,c);let d=6*3-1;for(let h=0;h<6;++h)for(let g=0;g<3;++g){const y=c.get(d);d--,a.setBoolean(h,a.getHeight()-11+g,y),a.setBoolean(a.getHeight()-11+g,h,y)}}static embedDataBits(o,a,c){let d=0,h=-1,g=c.getWidth()-1,y=c.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<c.getHeight();){for(let _=0;_<2;++_){const b=g-_;if(!qe.isEmpty(c.get(b,y)))continue;let R;d<o.getSize()?(R=o.get(d),++d):R=!1,a!==255&&un.getDataMaskBit(a,b,y)&&(R=!R),c.setBoolean(b,y,R)}y+=h}h=-h,y+=h,g-=2}if(d!==o.getSize())throw new Ut("Not all bits consumed: "+d+"/"+o.getSize())}static findMSBSet(o){return 32-S.numberOfLeadingZeros(o)}static calculateBCHCode(o,a){if(a===0)throw new v("0 polynomial");const c=qe.findMSBSet(a);for(o<<=c-1;qe.findMSBSet(o)>=c;)o^=a<<qe.findMSBSet(o)-c;return o}static makeTypeInfoBits(o,a,c){if(!Gr.isValidMaskPattern(a))throw new Ut("Invalid mask pattern");const d=o.getBits()<<3|a;c.appendBits(d,5);const h=qe.calculateBCHCode(d,qe.TYPE_INFO_POLY);c.appendBits(h,10);const g=new V;if(g.appendBits(qe.TYPE_INFO_MASK_PATTERN,15),c.xor(g),c.getSize()!==15)throw new Ut("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(o,a){a.appendBits(o.getVersionNumber(),6);const c=qe.calculateBCHCode(o.getVersionNumber(),qe.VERSION_INFO_POLY);if(a.appendBits(c,12),a.getSize()!==18)throw new Ut("should not happen but we got: "+a.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let a=8;a<o.getWidth()-8;++a){const c=(a+1)%2;qe.isEmpty(o.get(a,6))&&o.setNumber(a,6,c),qe.isEmpty(o.get(6,a))&&o.setNumber(6,a,c)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new Ut;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,a,c){for(let d=0;d<8;++d){if(!qe.isEmpty(c.get(o+d,a)))throw new Ut;c.setNumber(o+d,a,0)}}static embedVerticalSeparationPattern(o,a,c){for(let d=0;d<7;++d){if(!qe.isEmpty(c.get(o,a+d)))throw new Ut;c.setNumber(o,a+d,0)}}static embedPositionAdjustmentPattern(o,a,c){for(let d=0;d<5;++d){const h=qe.POSITION_ADJUSTMENT_PATTERN[d];for(let g=0;g<5;++g)c.setNumber(o+g,a+d,h[g])}}static embedPositionDetectionPattern(o,a,c){for(let d=0;d<7;++d){const h=qe.POSITION_DETECTION_PATTERN[d];for(let g=0;g<7;++g)c.setNumber(o+g,a+d,h[g])}}static embedPositionDetectionPatternsAndSeparators(o){const a=qe.POSITION_DETECTION_PATTERN[0].length;qe.embedPositionDetectionPattern(0,0,o),qe.embedPositionDetectionPattern(o.getWidth()-a,0,o),qe.embedPositionDetectionPattern(0,o.getWidth()-a,o);const c=8;qe.embedHorizontalSeparationPattern(0,c-1,o),qe.embedHorizontalSeparationPattern(o.getWidth()-c,c-1,o),qe.embedHorizontalSeparationPattern(0,o.getWidth()-c,o);const d=7;qe.embedVerticalSeparationPattern(d,0,o),qe.embedVerticalSeparationPattern(o.getHeight()-d-1,0,o),qe.embedVerticalSeparationPattern(d,o.getHeight()-d,o)}static maybeEmbedPositionAdjustmentPatterns(o,a){if(o.getVersionNumber()<2)return;const c=o.getVersionNumber()-1,d=qe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let h=0,g=d.length;h!==g;h++){const y=d[h];if(y>=0)for(let _=0;_!==g;_++){const b=d[_];b>=0&&qe.isEmpty(a.get(b,y))&&qe.embedPositionAdjustmentPattern(b-2,y-2,a)}}}}qe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),qe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),qe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),qe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),qe.VERSION_INFO_POLY=7973,qe.TYPE_INFO_POLY=1335,qe.TYPE_INFO_MASK_PATTERN=21522;class R0{constructor(o,a){this.dataBytes=o,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Kt{constructor(){}static calculateMaskPenalty(o){return un.applyMaskPenaltyRule1(o)+un.applyMaskPenaltyRule2(o)+un.applyMaskPenaltyRule3(o)+un.applyMaskPenaltyRule4(o)}static encode(o,a,c=null){let d=Kt.DEFAULT_BYTE_MODE_ENCODING;const h=c!==null&&c.get(On.CHARACTER_SET)!==void 0;h&&(d=c.get(On.CHARACTER_SET).toString());const g=this.chooseMode(o,d),y=new V;if(g===$e.BYTE&&(h||Kt.DEFAULT_BYTE_MODE_ENCODING!==d)){const Ce=L.getCharacterSetECIByName(d);Ce!==void 0&&this.appendECI(Ce,y)}this.appendModeInfo(g,y);const _=new V;this.appendBytes(o,g,_,d);let b;if(c!==null&&c.get(On.QR_VERSION)!==void 0){const Ce=Number.parseInt(c.get(On.QR_VERSION).toString(),10);b=Se.getVersionForNumber(Ce);const ve=this.calculateBitsNeeded(g,y,_,b);if(!this.willFit(ve,b,a))throw new Ut("Data too big for requested version")}else b=this.recommendVersion(a,g,y,_);const R=new V;R.appendBitArray(y);const B=g===$e.BYTE?_.getSizeInBytes():o.length;this.appendLengthInfo(B,b,g,R),R.appendBitArray(_);const U=b.getECBlocksForLevel(a),K=b.getTotalCodewords()-U.getTotalECCodewords();this.terminateBits(K,R);const Z=this.interleaveWithECBytes(R,b.getTotalCodewords(),K,U.getNumBlocks()),J=new Gr;J.setECLevel(a),J.setMode(g),J.setVersion(b);const se=b.getDimensionForVersion(),ce=new zl(se,se),be=this.chooseMaskPattern(Z,a,b,ce);return J.setMaskPattern(be),qe.buildMatrix(Z,a,b,be,ce),J.setMatrix(ce),J}static recommendVersion(o,a,c,d){const h=this.calculateBitsNeeded(a,c,d,Se.getVersionForNumber(1)),g=this.chooseVersion(h,o),y=this.calculateBitsNeeded(a,c,d,g);return this.chooseVersion(y,o)}static calculateBitsNeeded(o,a,c,d){return a.getSize()+o.getCharacterCountBits(d)+c.getSize()}static getAlphanumericCode(o){return o<Kt.ALPHANUMERIC_TABLE.length?Kt.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,a=null){if(L.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(o))return $e.KANJI;let c=!1,d=!1;for(let h=0,g=o.length;h<g;++h){const y=o.charAt(h);if(Kt.isDigit(y))c=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)d=!0;else return $e.BYTE}return d?$e.ALPHANUMERIC:c?$e.NUMERIC:$e.BYTE}static isOnlyDoubleByteKanji(o){let a;try{a=X.encode(o,L.SJIS)}catch{return!1}const c=a.length;if(c%2!==0)return!1;for(let d=0;d<c;d+=2){const h=a[d]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(o,a,c,d){let h=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<Gr.NUM_MASK_PATTERNS;y++){qe.buildMatrix(o,a,c,y,d);let _=this.calculateMaskPenalty(d);_<h&&(h=_,g=y)}return g}static chooseVersion(o,a){for(let c=1;c<=40;c++){const d=Se.getVersionForNumber(c);if(Kt.willFit(o,d,a))return d}throw new Ut("Data too big")}static willFit(o,a,c){const d=a.getTotalCodewords(),g=a.getECBlocksForLevel(c).getTotalECCodewords(),y=d-g,_=(o+7)/8;return y>=_}static terminateBits(o,a){const c=o*8;if(a.getSize()>c)throw new Ut("data bits cannot fit in the QR Code"+a.getSize()+" > "+c);for(let g=0;g<4&&a.getSize()<c;++g)a.appendBit(!1);const d=a.getSize()&7;if(d>0)for(let g=d;g<8;g++)a.appendBit(!1);const h=o-a.getSizeInBytes();for(let g=0;g<h;++g)a.appendBits(g&1?17:236,8);if(a.getSize()!==c)throw new Ut("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,a,c,d,h,g){if(d>=c)throw new Ut("Block ID too large");const y=o%c,_=c-y,b=Math.floor(o/c),R=b+1,B=Math.floor(a/c),U=B+1,K=b-B,Z=R-U;if(K!==Z)throw new Ut("EC bytes mismatch");if(c!==_+y)throw new Ut("RS blocks mismatch");if(o!==(B+K)*_+(U+Z)*y)throw new Ut("Total bytes mismatch");d<_?(h[0]=B,g[0]=K):(h[0]=U,g[0]=Z)}static interleaveWithECBytes(o,a,c,d){if(o.getSizeInBytes()!==c)throw new Ut("Number of bits and data bytes does not match");let h=0,g=0,y=0;const _=new Array;for(let R=0;R<d;++R){const B=new Int32Array(1),U=new Int32Array(1);Kt.getNumDataBytesAndNumECBytesForBlockID(a,c,d,R,B,U);const K=B[0],Z=new Uint8Array(K);o.toBytes(8*h,Z,0,K);const J=Kt.generateECBytes(Z,U[0]);_.push(new R0(Z,J)),g=Math.max(g,K),y=Math.max(y,J.length),h+=B[0]}if(c!==h)throw new Ut("Data bytes does not match offset");const b=new V;for(let R=0;R<g;++R)for(const B of _){const U=B.getDataBytes();R<U.length&&b.appendBits(U[R],8)}for(let R=0;R<y;++R)for(const B of _){const U=B.getErrorCorrectionBytes();R<U.length&&b.appendBits(U[R],8)}if(a!==b.getSizeInBytes())throw new Ut("Interleaving error: "+a+" and "+b.getSizeInBytes()+" differ.");return b}static generateECBytes(o,a){const c=o.length,d=new Int32Array(c+a);for(let g=0;g<c;g++)d[g]=o[g]&255;new ga(lt.QR_CODE_FIELD_256).encode(d,a);const h=new Uint8Array(a);for(let g=0;g<a;g++)h[g]=d[c+g];return h}static appendModeInfo(o,a){a.appendBits(o.getBits(),4)}static appendLengthInfo(o,a,c,d){const h=c.getCharacterCountBits(a);if(o>=1<<h)throw new Ut(o+" is bigger than "+((1<<h)-1));d.appendBits(o,h)}static appendBytes(o,a,c,d){switch(a){case $e.NUMERIC:Kt.appendNumericBytes(o,c);break;case $e.ALPHANUMERIC:Kt.appendAlphanumericBytes(o,c);break;case $e.BYTE:Kt.append8BitBytes(o,c,d);break;case $e.KANJI:Kt.appendKanjiBytes(o,c);break;default:throw new Ut("Invalid mode: "+a)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const a=Kt.getDigit(o);return a>=0&&a<=9}static appendNumericBytes(o,a){const c=o.length;let d=0;for(;d<c;){const h=Kt.getDigit(o.charAt(d));if(d+2<c){const g=Kt.getDigit(o.charAt(d+1)),y=Kt.getDigit(o.charAt(d+2));a.appendBits(h*100+g*10+y,10),d+=3}else if(d+1<c){const g=Kt.getDigit(o.charAt(d+1));a.appendBits(h*10+g,7),d+=2}else a.appendBits(h,4),d++}}static appendAlphanumericBytes(o,a){const c=o.length;let d=0;for(;d<c;){const h=Kt.getAlphanumericCode(o.charCodeAt(d));if(h===-1)throw new Ut;if(d+1<c){const g=Kt.getAlphanumericCode(o.charCodeAt(d+1));if(g===-1)throw new Ut;a.appendBits(h*45+g,11),d+=2}else a.appendBits(h,6),d++}}static append8BitBytes(o,a,c){let d;try{d=X.encode(o,c)}catch(h){throw new Ut(h)}for(let h=0,g=d.length;h!==g;h++){const y=d[h];a.appendBits(y,8)}}static appendKanjiBytes(o,a){let c;try{c=X.encode(o,L.SJIS)}catch(h){throw new Ut(h)}const d=c.length;for(let h=0;h<d;h+=2){const g=c[h]&255,y=c[h+1]&255,_=g<<8&4294967295|y;let b=-1;if(_>=33088&&_<=40956?b=_-33088:_>=57408&&_<=60351&&(b=_-49472),b===-1)throw new Ut("Invalid byte sequence");const R=(b>>8)*192+(b&255);a.appendBits(R,13)}}static appendECI(o,a){a.appendBits($e.ECI.getBits(),4),a.appendBits(o.getValue(),8)}}Kt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Kt.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class Ys{write(o,a,c,d=null){if(o.length===0)throw new v("Found empty contents");if(a<0||c<0)throw new v("Requested dimensions are too small: "+a+"x"+c);let h=Et.L,g=Ys.QUIET_ZONE_SIZE;d!==null&&(d.get(On.ERROR_CORRECTION)!==void 0&&(h=Et.fromString(d.get(On.ERROR_CORRECTION).toString())),d.get(On.MARGIN)!==void 0&&(g=Number.parseInt(d.get(On.MARGIN).toString(),10)));const y=Kt.encode(o,h,d);return this.renderResult(y,a,c,g)}writeToDom(o,a,c,d,h=null){typeof o=="string"&&(o=document.querySelector(o));const g=this.write(a,c,d,h);o&&o.appendChild(g)}renderResult(o,a,c,d){const h=o.getMatrix();if(h===null)throw new ur;const g=h.getWidth(),y=h.getHeight(),_=g+d*2,b=y+d*2,R=Math.max(a,_),B=Math.max(c,b),U=Math.min(Math.floor(R/_),Math.floor(B/b)),K=Math.floor((R-g*U)/2),Z=Math.floor((B-y*U)/2),J=this.createSVGElement(R,B);for(let se=0,ce=Z;se<y;se++,ce+=U)for(let be=0,Ce=K;be<g;be++,Ce+=U)if(h.get(be,se)===1){const ve=this.createSvgRectElement(Ce,ce,U,U);J.appendChild(ve)}return J}createSVGElement(o,a){const c=document.createElementNS(Ys.SVG_NS,"svg");return c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",a.toString()),c}createSvgRectElement(o,a,c,d){const h=document.createElementNS(Ys.SVG_NS,"rect");return h.setAttributeNS(null,"x",o.toString()),h.setAttributeNS(null,"y",a.toString()),h.setAttributeNS(null,"height",c.toString()),h.setAttributeNS(null,"width",d.toString()),h.setAttributeNS(null,"fill","#000000"),h}}Ys.QUIET_ZONE_SIZE=4,Ys.SVG_NS="http://www.w3.org/2000/svg";class Xn{encode(o,a,c,d,h){if(o.length===0)throw new v("Found empty contents");if(a!==Oe.QR_CODE)throw new v("Can only encode QR_CODE, but got "+a);if(c<0||d<0)throw new v(`Requested dimensions are too small: ${c}x${d}`);let g=Et.L,y=Xn.QUIET_ZONE_SIZE;h!==null&&(h.get(On.ERROR_CORRECTION)!==void 0&&(g=Et.fromString(h.get(On.ERROR_CORRECTION).toString())),h.get(On.MARGIN)!==void 0&&(y=Number.parseInt(h.get(On.MARGIN).toString(),10)));const _=Kt.encode(o,g,h);return Xn.renderResult(_,c,d,y)}static renderResult(o,a,c,d){const h=o.getMatrix();if(h===null)throw new ur;const g=h.getWidth(),y=h.getHeight(),_=g+d*2,b=y+d*2,R=Math.max(a,_),B=Math.max(c,b),U=Math.min(Math.floor(R/_),Math.floor(B/b)),K=Math.floor((R-g*U)/2),Z=Math.floor((B-y*U)/2),J=new de(R,B);for(let se=0,ce=Z;se<y;se++,ce+=U)for(let be=0,Ce=K;be<g;be++,Ce+=U)h.get(be,se)===1&&J.setRegion(Ce,ce,U,U);return J}}Xn.QUIET_ZONE_SIZE=4;class k0{encode(o,a,c,d,h){let g;switch(a){case Oe.QR_CODE:g=new Xn;break;default:throw new v("No encoder available for format "+a)}return g.encode(o,a,c,d,h)}}class Is extends oe{constructor(o,a,c,d,h,g,y,_){if(super(g,y),this.yuvData=o,this.dataWidth=a,this.dataHeight=c,this.left=d,this.top=h,d+g>a||h+y>c)throw new v("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(g,y)}getRow(o,a){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);const c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));const d=(o+this.top)*this.dataWidth+this.left;return C.arraycopy(this.yuvData,d,a,0,c),a}getMatrix(){const o=this.getWidth(),a=this.getHeight();if(o===this.dataWidth&&a===this.dataHeight)return this.yuvData;const c=o*a,d=new Uint8ClampedArray(c);let h=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return C.arraycopy(this.yuvData,h,d,0,c),d;for(let g=0;g<a;g++){const y=g*o;C.arraycopy(this.yuvData,h,d,y,o),h+=this.dataWidth}return d}isCropSupported(){return!0}crop(o,a,c,d){return new Is(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+a,c,d,!1)}renderThumbnail(){const o=this.getWidth()/Is.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/Is.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(o*a),d=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let g=0;g<a;g++){const y=g*o;for(let _=0;_<o;_++){const b=d[h+_*Is.THUMBNAIL_SCALE_FACTOR]&255;c[y+_]=4278190080|b*65793}h+=this.dataWidth*Is.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/Is.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Is.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,a){const c=this.yuvData;for(let d=0,h=this.top*this.dataWidth+this.left;d<a;d++,h+=this.dataWidth){const g=h+o/2;for(let y=h,_=h+o-1;y<g;y++,_--){const b=c[y];c[y]=c[_],c[_]=b}}}invert(){return new ue(this)}}Is.THUMBNAIL_SCALE_FACTOR=2;class Hi extends oe{constructor(o,a,c,d,h,g,y){if(super(a,c),this.dataWidth=d,this.dataHeight=h,this.left=g,this.top=y,o.BYTES_PER_ELEMENT===4){const _=a*c,b=new Uint8ClampedArray(_);for(let R=0;R<_;R++){const B=o[R],U=B>>16&255,K=B>>7&510,Z=B&255;b[R]=(U+K+Z)/4&255}this.luminances=b}else this.luminances=o;if(d===void 0&&(this.dataWidth=a),h===void 0&&(this.dataHeight=c),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+c>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(o,a){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);const c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));const d=(o+this.top)*this.dataWidth+this.left;return C.arraycopy(this.luminances,d,a,0,c),a}getMatrix(){const o=this.getWidth(),a=this.getHeight();if(o===this.dataWidth&&a===this.dataHeight)return this.luminances;const c=o*a,d=new Uint8ClampedArray(c);let h=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return C.arraycopy(this.luminances,h,d,0,c),d;for(let g=0;g<a;g++){const y=g*o;C.arraycopy(this.luminances,h,d,y,o),h+=this.dataWidth}return d}isCropSupported(){return!0}crop(o,a,c,d){return new Hi(this.luminances,c,d,this.dataWidth,this.dataHeight,this.left+o,this.top+a)}invert(){return new ue(this)}}class x extends L{static forName(o){return this.getCharacterSetECIByName(o)}}class A{}A.ISO_8859_1=L.ISO8859_1;class D{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class W{static singletonList(o){return[o]}static min(o,a){return o.sort(a)[0]}}class ne{constructor(o){this.previous=o}getPrevious(){return this.previous}}class le extends ne{constructor(o,a,c){super(o),this.value=a,this.bitCount=c}appendTo(o,a){o.appendBits(this.value,this.bitCount)}add(o,a){return new le(this,o,a)}addBinaryShift(o,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new le(this,o,a)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+S.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class Te extends le{constructor(o,a,c){super(o,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=c}appendTo(o,a){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):c===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(a[this.binaryShiftStart+c],8)}addBinaryShift(o,a){return new Te(this,o,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Gt(F,o,a){return new Te(F,o,a)}function Tn(F,o,a){return new le(F,o,a)}const Rt=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],dn=0,Hn=1,sr=2,us=3,$r=4,Vd=new le(null,0,0),kp=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function _P(F){for(let o of F)T.fill(o,-1);return F[dn][$r]=0,F[Hn][$r]=0,F[Hn][dn]=28,F[us][$r]=0,F[sr][$r]=0,F[sr][dn]=15,F}const tE=_P(T.createInt32Array(6,6));class Wi{constructor(o,a,c,d){this.token=o,this.mode=a,this.binaryShiftByteCount=c,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,a){let c=this.bitCount,d=this.token;if(o!==this.mode){let g=kp[this.mode][o];d=Tn(d,g&65535,g>>16),c+=g>>16}let h=o===sr?4:5;return d=Tn(d,a,h),new Wi(d,o,0,c+h)}shiftAndAppend(o,a){let c=this.token,d=this.mode===sr?4:5;return c=Tn(c,tE[this.mode][o],d),c=Tn(c,a,5),new Wi(c,this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(o){let a=this.token,c=this.mode,d=this.bitCount;if(this.mode===$r||this.mode===sr){let y=kp[c][dn];a=Tn(a,y&65535,y>>16),d+=y>>16,c=dn}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new Wi(a,c,this.binaryShiftByteCount+1,d+h);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(o+1)),g}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=Gt(a,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new Wi(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let a=this.bitCount+(kp[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?a+=Wi.calculateBinaryShiftCost(o)-Wi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(a+=10),a<=o.bitCount}toBitArray(o){let a=[];for(let d=this.endBinaryShift(o.length).token;d!==null;d=d.getPrevious())a.unshift(d);let c=new V;for(const d of a)d.appendTo(c,o);return c}toString(){return H.format("%s bits=%d bytes=%d",Rt[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}Wi.INITIAL_STATE=new Wi(Vd,dn,0,0);function EP(F){const o=H.getCharCode(" "),a=H.getCharCode("."),c=H.getCharCode(",");F[dn][o]=1;const d=H.getCharCode("Z"),h=H.getCharCode("A");for(let U=h;U<=d;U++)F[dn][U]=U-h+2;F[Hn][o]=1;const g=H.getCharCode("z"),y=H.getCharCode("a");for(let U=y;U<=g;U++)F[Hn][U]=U-y+2;F[sr][o]=1;const _=H.getCharCode("9"),b=H.getCharCode("0");for(let U=b;U<=_;U++)F[sr][U]=U-b+2;F[sr][c]=12,F[sr][a]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let U=0;U<R.length;U++)F[us][H.getCharCode(R[U])]=U;const B=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let U=0;U<B.length;U++)H.getCharCode(B[U])>0&&(F[$r][H.getCharCode(B[U])]=U);return F}const Pp=EP(T.createInt32Array(5,256));class Ud{constructor(o){this.text=o}encode(){const o=H.getCharCode(" "),a=H.getCharCode(`
`);let c=W.singletonList(Wi.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let g,y=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case H.getCharCode("\r"):g=y===a?2:0;break;case H.getCharCode("."):g=y===o?3:0;break;case H.getCharCode(","):g=y===o?4:0;break;case H.getCharCode(":"):g=y===o?5:0;break;default:g=0}g>0?(c=Ud.updateStateListForPair(c,h,g),h++):c=this.updateStateListForChar(c,h)}return W.min(c,(h,g)=>h.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,a){const c=[];for(let d of o)this.updateStateForChar(d,a,c);return Ud.simplifyStates(c)}updateStateForChar(o,a,c){let d=this.text[a]&255,h=Pp[o.getMode()][d]>0,g=null;for(let y=0;y<=$r;y++){let _=Pp[y][d];if(_>0){if(g==null&&(g=o.endBinaryShift(a)),!h||y===o.getMode()||y===sr){const b=g.latchAndAppend(y,_);c.push(b)}if(!h&&tE[o.getMode()][y]>=0){const b=g.shiftAndAppend(y,_);c.push(b)}}}if(o.getBinaryShiftByteCount()>0||Pp[o.getMode()][d]===0){let y=o.addBinaryShiftChar(a);c.push(y)}}static updateStateListForPair(o,a,c){const d=[];for(let h of o)this.updateStateForPair(h,a,c,d);return this.simplifyStates(d)}static updateStateForPair(o,a,c,d){let h=o.endBinaryShift(a);if(d.push(h.latchAndAppend($r,c)),o.getMode()!==$r&&d.push(h.shiftAndAppend($r,c)),c===3||c===4){let g=h.latchAndAppend(sr,16-c).latchAndAppend(sr,1);d.push(g)}if(o.getBinaryShiftByteCount()>0){let g=o.addBinaryShiftChar(a).addBinaryShiftChar(a+1);d.push(g)}}static simplifyStates(o){let a=[];for(const c of o){let d=!0;for(const h of a){if(h.isBetterThanOrEqualTo(c)){d=!1;break}c.isBetterThanOrEqualTo(h)&&(a=a.filter(g=>g!==h))}d&&a.push(c)}return a}}class Dt{constructor(){}static encodeBytes(o){return Dt.encode(o,Dt.DEFAULT_EC_PERCENT,Dt.DEFAULT_AZTEC_LAYERS)}static encode(o,a,c){let d=new Ud(o).encode(),h=S.truncDivision(d.getSize()*a,100)+11,g=d.getSize()+h,y,_,b,R,B;if(c!==Dt.DEFAULT_AZTEC_LAYERS){if(y=c<0,_=Math.abs(c),_>(y?Dt.MAX_NB_BITS_COMPACT:Dt.MAX_NB_BITS))throw new v(H.format("Illegal value %s for layers",c));b=Dt.totalBitsInLayer(_,y),R=Dt.WORD_SIZE[_];let ve=b-b%R;if(B=Dt.stuffBits(d,R),B.getSize()+h>ve)throw new v("Data to large for user specified layer");if(y&&B.getSize()>R*64)throw new v("Data to large for user specified layer")}else{R=0,B=null;for(let ve=0;;ve++){if(ve>Dt.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(y=ve<=3,_=y?ve+1:ve,b=Dt.totalBitsInLayer(_,y),g>b)continue;(B==null||R!==Dt.WORD_SIZE[_])&&(R=Dt.WORD_SIZE[_],B=Dt.stuffBits(d,R));let bt=b-b%R;if(!(y&&B.getSize()>R*64)&&B.getSize()+h<=bt)break}}let U=Dt.generateCheckWords(B,b,R),K=B.getSize()/R,Z=Dt.generateModeMessage(y,_,K),J=(y?11:14)+_*4,se=new Int32Array(J),ce;if(y){ce=J;for(let ve=0;ve<se.length;ve++)se[ve]=ve}else{ce=J+1+2*S.truncDivision(S.truncDivision(J,2)-1,15);let ve=S.truncDivision(J,2),bt=S.truncDivision(ce,2);for(let ut=0;ut<ve;ut++){let ds=ut+S.truncDivision(ut,15);se[ve-ut-1]=bt-ds-1,se[ve+ut]=bt+ds+1}}let be=new de(ce);for(let ve=0,bt=0;ve<_;ve++){let ut=(_-ve)*4+(y?9:12);for(let ds=0;ds<ut;ds++){let gi=ds*2;for(let hs=0;hs<2;hs++)U.get(bt+gi+hs)&&be.set(se[ve*2+hs],se[ve*2+ds]),U.get(bt+ut*2+gi+hs)&&be.set(se[ve*2+ds],se[J-1-ve*2-hs]),U.get(bt+ut*4+gi+hs)&&be.set(se[J-1-ve*2-hs],se[J-1-ve*2-ds]),U.get(bt+ut*6+gi+hs)&&be.set(se[J-1-ve*2-ds],se[ve*2+hs])}bt+=ut*8}if(Dt.drawModeMessage(be,y,ce,Z),y)Dt.drawBullsEye(be,S.truncDivision(ce,2),5);else{Dt.drawBullsEye(be,S.truncDivision(ce,2),7);for(let ve=0,bt=0;ve<S.truncDivision(J,2)-1;ve+=15,bt+=16)for(let ut=S.truncDivision(ce,2)&1;ut<ce;ut+=2)be.set(S.truncDivision(ce,2)-bt,ut),be.set(S.truncDivision(ce,2)+bt,ut),be.set(ut,S.truncDivision(ce,2)-bt),be.set(ut,S.truncDivision(ce,2)+bt)}let Ce=new D;return Ce.setCompact(y),Ce.setSize(ce),Ce.setLayers(_),Ce.setCodeWords(K),Ce.setMatrix(be),Ce}static drawBullsEye(o,a,c){for(let d=0;d<c;d+=2)for(let h=a-d;h<=a+d;h++)o.set(h,a-d),o.set(h,a+d),o.set(a-d,h),o.set(a+d,h);o.set(a-c,a-c),o.set(a-c+1,a-c),o.set(a-c,a-c+1),o.set(a+c,a-c),o.set(a+c,a-c+1),o.set(a+c,a+c-1)}static generateModeMessage(o,a,c){let d=new V;return o?(d.appendBits(a-1,2),d.appendBits(c-1,6),d=Dt.generateCheckWords(d,28,4)):(d.appendBits(a-1,5),d.appendBits(c-1,11),d=Dt.generateCheckWords(d,40,4)),d}static drawModeMessage(o,a,c,d){let h=S.truncDivision(c,2);if(a)for(let g=0;g<7;g++){let y=h-3+g;d.get(g)&&o.set(y,h-5),d.get(g+7)&&o.set(h+5,y),d.get(20-g)&&o.set(y,h+5),d.get(27-g)&&o.set(h-5,y)}else for(let g=0;g<10;g++){let y=h-5+g+S.truncDivision(g,5);d.get(g)&&o.set(y,h-7),d.get(g+10)&&o.set(h+7,y),d.get(29-g)&&o.set(y,h+7),d.get(39-g)&&o.set(h-7,y)}}static generateCheckWords(o,a,c){let d=o.getSize()/c,h=new ga(Dt.getGF(c)),g=S.truncDivision(a,c),y=Dt.bitsToWords(o,c,g);h.encode(y,g-d);let _=a%c,b=new V;b.appendBits(0,_);for(const R of Array.from(y))b.appendBits(R,c);return b}static bitsToWords(o,a,c){let d=new Int32Array(c),h,g;for(h=0,g=o.getSize()/a;h<g;h++){let y=0;for(let _=0;_<a;_++)y|=o.get(h*a+_)?1<<a-_-1:0;d[h]=y}return d}static getGF(o){switch(o){case 4:return lt.AZTEC_PARAM;case 6:return lt.AZTEC_DATA_6;case 8:return lt.AZTEC_DATA_8;case 10:return lt.AZTEC_DATA_10;case 12:return lt.AZTEC_DATA_12;default:throw new v("Unsupported word size "+o)}}static stuffBits(o,a){let c=new V,d=o.getSize(),h=(1<<a)-2;for(let g=0;g<d;g+=a){let y=0;for(let _=0;_<a;_++)(g+_>=d||o.get(g+_))&&(y|=1<<a-1-_);(y&h)===h?(c.appendBits(y&h,a),g--):y&h?c.appendBits(y,a):(c.appendBits(y|1,a),g--)}return c}static totalBitsInLayer(o,a){return((a?88:112)+16*o)*o}}Dt.DEFAULT_EC_PERCENT=33,Dt.DEFAULT_AZTEC_LAYERS=0,Dt.MAX_NB_BITS=32,Dt.MAX_NB_BITS_COMPACT=4,Dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class P0{encode(o,a,c,d){return this.encodeWithHints(o,a,c,d,null)}encodeWithHints(o,a,c,d,h){let g=A.ISO_8859_1,y=Dt.DEFAULT_EC_PERCENT,_=Dt.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(On.CHARACTER_SET)&&(g=x.forName(h.get(On.CHARACTER_SET).toString())),h.has(On.ERROR_CORRECTION)&&(y=S.parseInt(h.get(On.ERROR_CORRECTION).toString())),h.has(On.AZTEC_LAYERS)&&(_=S.parseInt(h.get(On.AZTEC_LAYERS).toString()))),P0.encodeLayers(o,a,c,d,g,y,_)}static encodeLayers(o,a,c,d,h,g,y){if(a!==Oe.AZTEC)throw new v("Can only encode AZTEC, but got "+a);let _=Dt.encode(H.getBytes(o,h),g,y);return P0.renderResult(_,c,d)}static renderResult(o,a,c){let d=o.getMatrix();if(d==null)throw new ur;let h=d.getWidth(),g=d.getHeight(),y=Math.max(a,h),_=Math.max(c,g),b=Math.min(y/h,_/g),R=(y-h*b)/2,B=(_-g*b)/2,U=new de(y,_);for(let K=0,Z=B;K<g;K++,Z+=b)for(let J=0,se=R;J<h;J++,se+=b)d.get(J,K)&&U.setRegion(se,Z,b,b);return U}}n.AbstractExpandedDecoder=ca,n.ArgumentException=w,n.ArithmeticException=os,n.AztecCode=D,n.AztecCodeReader=Cn,n.AztecCodeWriter=P0,n.AztecDecoder=Lt,n.AztecDetector=en,n.AztecDetectorResult=ie,n.AztecEncoder=Dt,n.AztecHighLevelEncoder=Ud,n.AztecPoint=Ye,n.BarcodeFormat=Oe,n.Binarizer=P,n.BinaryBitmap=E,n.BitArray=V,n.BitMatrix=de,n.BitSource=Hc,n.BrowserAztecCodeReader=Co,n.BrowserBarcodeReader=Ap,n.BrowserCodeReader=at,n.BrowserDatamatrixCodeReader=Ip,n.BrowserMultiFormatReader=S0,n.BrowserPDF417Reader=N0,n.BrowserQRCodeReader=Bd,n.BrowserQRCodeSvgWriter=Ys,n.CharacterSetECI=L,n.ChecksumException=I,n.Code128Reader=Ae,n.Code39Reader=an,n.DataMatrixDecodedBitStreamParser=Vi,n.DataMatrixReader=di,n.DecodeHintType=Y,n.DecoderResult=yn,n.DefaultGridSampler=ye,n.DetectorResult=Q,n.EAN13Reader=ui,n.EncodeHintType=On,n.Exception=m,n.FormatException=M,n.GenericGF=lt,n.GenericGFPoly=Jt,n.GlobalHistogramBinarizer=xe,n.GridSampler=ke,n.GridSamplerInstance=Ne,n.HTMLCanvasElementLuminanceSource=Ie,n.HybridBinarizer=we,n.ITFReader=Ft,n.IllegalArgumentException=v,n.IllegalStateException=ur,n.InvertedLuminanceSource=ue,n.LuminanceSource=oe,n.MathUtils=ct,n.MultiFormatOneDReader=Bi,n.MultiFormatReader=fa,n.MultiFormatWriter=k0,n.NotFoundException=ee,n.OneDReader=Xt,n.PDF417DecodedBitStreamParser=ae,n.PDF417DecoderErrorCorrection=Dl,n.PDF417Reader=rr,n.PDF417ResultMetadata=Fd,n.PerspectiveTransform=pe,n.PlanarYUVLuminanceSource=Is,n.QRCodeByteMatrix=zl,n.QRCodeDataMask=hr,n.QRCodeDecodedBitStreamParser=ln,n.QRCodeDecoderErrorCorrectionLevel=Et,n.QRCodeDecoderFormatInformation=Un,n.QRCodeEncoder=Kt,n.QRCodeEncoderQRCode=Gr,n.QRCodeMaskUtil=un,n.QRCodeMatrixUtil=qe,n.QRCodeMode=$e,n.QRCodeReader=Ui,n.QRCodeVersion=Se,n.QRCodeWriter=Xn,n.RGBLuminanceSource=Hi,n.RSS14Reader=Bt,n.RSSExpandedReader=me,n.ReaderException=Vl,n.ReedSolomonDecoder=_s,n.ReedSolomonEncoder=ga,n.ReedSolomonException=Rr,n.Result=_t,n.ResultMetadataType=qt,n.ResultPoint=je,n.StringUtils=H,n.UnsupportedOperationException=G,n.VideoInputDevice=Ge,n.WhiteRectangleDetector=he,n.WriterException=Ut,n.ZXingArrays=T,n.ZXingCharset=x,n.ZXingInteger=S,n.ZXingStandardCharsets=A,n.ZXingStringBuilder=z,n.ZXingStringEncoding=X,n.ZXingSystem=C,n.createAbstractExpandedDecoder=b0,Object.defineProperty(n,"__esModule",{value:!0})})})(zw,zw.exports);var gn=zw.exports;const Wq=Xw(gn),Gq=IT({__proto__:null,default:Wq},[gn]);var QA=function(){function t(e,n,r){if(this.formatMap=new Map([[Be.QR_CODE,gn.BarcodeFormat.QR_CODE],[Be.AZTEC,gn.BarcodeFormat.AZTEC],[Be.CODABAR,gn.BarcodeFormat.CODABAR],[Be.CODE_39,gn.BarcodeFormat.CODE_39],[Be.CODE_93,gn.BarcodeFormat.CODE_93],[Be.CODE_128,gn.BarcodeFormat.CODE_128],[Be.DATA_MATRIX,gn.BarcodeFormat.DATA_MATRIX],[Be.MAXICODE,gn.BarcodeFormat.MAXICODE],[Be.ITF,gn.BarcodeFormat.ITF],[Be.EAN_13,gn.BarcodeFormat.EAN_13],[Be.EAN_8,gn.BarcodeFormat.EAN_8],[Be.PDF_417,gn.BarcodeFormat.PDF_417],[Be.RSS_14,gn.BarcodeFormat.RSS_14],[Be.RSS_EXPANDED,gn.BarcodeFormat.RSS_EXPANDED],[Be.UPC_A,gn.BarcodeFormat.UPC_A],[Be.UPC_E,gn.BarcodeFormat.UPC_E],[Be.UPC_EAN_EXTENSION,gn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Gq)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var s=this.createZXingFormats(e),i=new Map;i.set(gn.DecodeHintType.POSSIBLE_FORMATS,s),i.set(gn.DecodeHintType.TRY_HARDER,!1),this.hints=i}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,s){try{r(n.decode(e))}catch(i){s(i)}})},t.prototype.decode=function(e){var n=new gn.MultiFormatReader(this.verbose,this.hints),r=new gn.HTMLCanvasElementLuminanceSource(e),s=new gn.BinaryBitmap(new gn.HybridBinarizer(r)),i=n.decode(s);return{text:i.text,format:K8.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var i=s[r];this.formatMap.has(i)?n.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),$q=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function u(w){try{m(r.next(w))}catch(v){l(v)}}function f(w){try{m(r.throw(w))}catch(v){l(v)}}function m(w){w.done?i(w.value):s(w.value).then(u,f)}m((r=r.apply(t,e||[])).next())})},qq=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(m){return function(w){return f([m,w])}}function f(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,s&&(i=m[0]&2?s.return:m[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,m[1])).done)return i;switch(s=0,i&&(m=[m[0]&2,i.value]),m[0]){case 0:case 1:i=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){n.label=m[1];break}if(m[0]===6&&n.label<i[1]){n.label=i[1],i=m;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(m);break}i[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(w){m=[6,w],s=0}finally{r=i=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},ZA=function(){function t(e,n,r){if(this.formatMap=new Map([[Be.QR_CODE,"qr_code"],[Be.AZTEC,"aztec"],[Be.CODABAR,"codabar"],[Be.CODE_39,"code_39"],[Be.CODE_93,"code_93"],[Be.CODE_128,"code_128"],[Be.DATA_MATRIX,"data_matrix"],[Be.ITF,"itf"],[Be.EAN_13,"ean_13"],[Be.EAN_8,"ean_8"],[Be.PDF_417,"pdf417"],[Be.UPC_A,"upc_a"],[Be.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var s=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return $q(this,void 0,void 0,function(){var n,r;return qq(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=s.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:K8.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,s=0,i=e;s<i.length;s++){var l=i[s],u=l.boundingBox.width*l.boundingBox.height;u>r&&(r=u,n=l)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var i=s[r];this.formatMap.has(i)?n.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),JA=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function u(w){try{m(r.next(w))}catch(v){l(v)}}function f(w){try{m(r.throw(w))}catch(v){l(v)}}function m(w){w.done?i(w.value):s(w.value).then(u,f)}m((r=r.apply(t,e||[])).next())})},eT=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(m){return function(w){return f([m,w])}}function f(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,s&&(i=m[0]&2?s.return:m[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,m[1])).done)return i;switch(s=0,i&&(m=[m[0]&2,i.value]),m[0]){case 0:case 1:i=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){n.label=m[1];break}if(m[0]===6&&n.label<i[1]){n.label=i[1],i=m;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(m);break}i[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(w){m=[6,w],s=0}finally{r=i=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Kq=function(){function t(e,n,r,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&ZA.isSupported()?(this.primaryDecoder=new ZA(e,r,s),this.secondaryDecoder=new QA(e,r,s)):this.primaryDecoder=new QA(e,r,s)}return t.prototype.decodeAsync=function(e){return JA(this,void 0,void 0,function(){var n;return eT(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return JA(this,void 0,void 0,function(){var n,r;return eT(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,s.sent()];case 3:if(r=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var s=r[n];e+=s}var i=e/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),B_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),em=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function u(w){try{m(r.next(w))}catch(v){l(v)}}function f(w){try{m(r.throw(w))}catch(v){l(v)}}function m(w){w.done?i(w.value):s(w.value).then(u,f)}m((r=r.apply(t,e||[])).next())})},tm=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(m){return function(w){return f([m,w])}}function f(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,s&&(i=m[0]&2?s.return:m[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,m[1])).done)return i;switch(s=0,i&&(m=[m[0]&2,i.value]),m[0]){case 0:case 1:i=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){n.label=m[1];break}if(m[0]===6&&n.label<i[1]){n.label=i[1],i=m;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(m);break}i[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(w){m=[6,w],s=0}finally{r=i=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Y8=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),Xq=function(t){B_(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var s={advanced:[r]};return this.track.applyConstraints(s)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Y8),Yq=function(t){B_(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(Xq),Qq=function(t){B_(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(Y8),Zq=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new Yq(this.track)},t.prototype.torchFeature=function(){return new Qq(this.track)},t}(),Jq=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,s=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,s),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,s){return em(this,void 0,void 0,function(){var i,l;return tm(this,function(u){switch(u.label){case 0:return i=new t(e,n,s),r.aspectRatio?(l={aspectRatio:r.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:u.sent(),u.label=2;case 2:return i.setupSurface(),[2,i]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return em(this,void 0,void 0,function(){return tm(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var s=e.mediaStream.getVideoTracks(),i=s.length,l=0;e.mediaStream.getVideoTracks().forEach(function(u){e.mediaStream.removeTrack(u),u.stop(),++l,l>=i&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new Zq(this.getFirstTrackOrFail())},t}(),eK=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return em(this,void 0,void 0,function(){return tm(this,function(s){return[2,Jq.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return em(this,void 0,void 0,function(){var n,r;return tm(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=s.sent(),[2,new t(r)]}})})},t}(),tT=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function u(w){try{m(r.next(w))}catch(v){l(v)}}function f(w){try{m(r.throw(w))}catch(v){l(v)}}function m(w){w.done?i(w.value):s(w.value).then(u,f)}m((r=r.apply(t,e||[])).next())})},nT=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(m){return function(w){return f([m,w])}}function f(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,s&&(i=m[0]&2?s.return:m[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,m[1])).done)return i;switch(s=0,i&&(m=[m[0]&2,i.value]),m[0]){case 0:case 1:i=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){n.label=m[1];break}if(m[0]===6&&n.label<i[1]){n.label=i[1],i=m;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(m);break}i[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(w){m=[6,w],s=0}finally{r=i=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},tK=function(){function t(){}return t.failIfNotSupported=function(){return tT(this,void 0,void 0,function(){return nT(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return tT(this,void 0,void 0,function(){return nT(this,function(n){return[2,eK.create(e)]})})},t}(),nK=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function u(w){try{m(r.next(w))}catch(v){l(v)}}function f(w){try{m(r.throw(w))}catch(v){l(v)}}function m(w){w.done?i(w.value):s(w.value).then(u,f)}m((r=r.apply(t,e||[])).next())})},rK=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(m){return function(w){return f([m,w])}}function f(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,s&&(i=m[0]&2?s.return:m[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,m[1])).done)return i;switch(s=0,i&&(m=[m[0]&2,i.value]),m[0]){case 0:case 1:i=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){n.label=m[1];break}if(m[0]===6&&n.label<i[1]){n.label=i[1],i=m;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(m);break}i[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(w){m=[6,w],s=0}finally{r=i=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},sK=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=xu.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=xu.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return nK(this,void 0,void 0,function(){var e,n,r,s,i,l,u;return rK(this,function(f){switch(f.label){case 0:return e=function(m){for(var w=m.getVideoTracks(),v=0,E=w;v<E.length;v++){var I=E[v];I.enabled=!1,I.stop(),m.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=f.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=f.sent(),s=[],i=0,l=r;i<l.length;i++)u=l[i],u.kind==="videoinput"&&s.push({id:u.deviceId,label:u.label});return e(n),[2,s]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(i){for(var l=[],u=0,f=i;u<f.length;u++){var m=f[u];m.kind==="video"&&l.push({id:m.id,label:m.label})}e(l)},s=MediaStreamTrack;s.getSources(r)})},t}(),Mn;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Mn||(Mn={}));var iK=function(){function t(){this.state=Mn.NOT_STARTED,this.onGoingTransactionNewState=Mn.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Mn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Mn.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Mn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Mn.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Mn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Mn.UNKNOWN:throw"Transition from unknown is not allowed";case Mn.NOT_STARTED:this.failIfNewStateIs(e,[Mn.PAUSED]);break;case Mn.SCANNING:break;case Mn.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,s=n;r<s.length;r++){var i=s[r];if(e===i)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),oK=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Mn.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Mn.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Mn.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Mn.PAUSED},t}(),aK=function(){function t(){}return t.create=function(){return new oK(new iK)},t}(),lK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ns=function(t){lK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Uq),cK=function(){function t(e,n){this.logger=n,this.fps=Ns.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ns.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?X8.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Mo(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),ky=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new Hq(this.verbose),this.qrcode=new Kq(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=aK.create()}return t.prototype.start=function(e,n,r,s){var i=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;s?l=s:l=this.verbose?this.logger.log:function(){};var u=cK.create(n,this.logger);this.clearElement();var f=!1;u.videoConstraints&&(u.isMediaStreamConstraintsValid()?f=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=f,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:Ns.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var v=this,E=this.stateManagerProxy.startTransition(Mn.SCANNING);return new Promise(function(I,P){var C=m?u.videoConstraints:v.createVideoConstraints(e);if(!C){E.cancel(),P("videoConstraints should be defined");return}var k={};(!m||u.aspectRatio)&&(k.aspectRatio=u.aspectRatio);var N={onRenderSurfaceReady:function(T,S){v.setupUi(T,S,u),v.isScanning=!0,v.foreverScan(u,r,l)}};tK.failIfNotSupported().then(function(T){T.create(C).then(function(S){return S.render(i.element,k,N).then(function(V){v.renderedCamera=V,E.execute(),I(null)}).catch(function(V){E.cancel(),P(V)})}).catch(function(S){E.cancel(),P(xu.errorGettingUserMedia(S))})}).catch(function(T){E.cancel(),P(xu.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Mn.PAUSED),this.showPausedState(),(Mo(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Mn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Mn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var i=document.getElementById(Ns.SHADED_REGION_ELEMENT_ID);i&&e.element.removeChild(i)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),r(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),n.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Mo(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,i){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var l=new Image;l.onload=function(){var u=l.width,f=l.height,m=document.getElementById(r.elementId),w=m.clientWidth?m.clientWidth:Ns.DEFAULT_WIDTH,v=Math.max(m.clientHeight?m.clientHeight:f,Ns.FILE_SCAN_MIN_HEIGHT),E=r.computeCanvasDrawConfig(u,f,w,v);if(n){var I=r.createCanvasElement(w,v,"qr-canvas-visible");I.style.display="inline-block",m.appendChild(I);var P=I.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=w,P.canvas.height=v,P.drawImage(l,0,0,u,f,E.x,E.y,E.width,E.height)}var C=Ns.FILE_SCAN_HIDDEN_CANVAS_PADDING,k=Math.max(l.width,E.width),N=Math.max(l.height,E.height),T=k+2*C,S=N+2*C,V=r.createCanvasElement(T,S);m.appendChild(V);var $=V.getContext("2d");if(!$)throw"Unable to get 2d context from canvas";$.canvas.width=T,$.canvas.height=S,$.drawImage(l,0,0,u,f,C,C,k,N);try{r.qrcode.decodeRobustlyAsync(V).then(function(Y){s(YA.createFromQrcodeResult(Y))}).catch(i)}catch(Y){i("QR code parse error, error = ".concat(Y))}},l.onerror=i,l.onabort=i,l.onstalled=i,l.onsuspend=i,l.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return sK.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!X8.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Be.QR_CODE,Be.AZTEC,Be.CODABAR,Be.CODE_39,Be.CODE_93,Be.CODE_128,Be.DATA_MATRIX,Be.MAXICODE,Be.ITF,Be.EAN_13,Be.EAN_8,Be.PDF_417,Be.RSS_14,Be.RSS_EXPANDED,Be.UPC_A,Be.UPC_E,Be.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],s=0,i=e.formatsToSupport;s<i.length;s++){var l=i[s];Vq(l)?r.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Mo(e))return!0;if(!Mo(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Mo(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Mo(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var s=this,i=r.qrbox;this.validateQrboxConfig(i);var l=this.toQrdimensions(e,n,i),u=function(m){if(m<Ns.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ns.MIN_QR_BOX_SIZE,"px.")},f=function(m){return m>e&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=e),m};u(l.width),u(l.height),l.width=f(l.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var s=Mo(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(s);var i=this.toQrdimensions(e,n,s);i.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=r.isShadedBoxEnabled()&&i.height<=n,u={x:0,y:0,width:e,height:n},f=l?this.getShadedRegionBounds(e,n,i):u,m=this.createCanvasElement(f.width,f.height),w={willReadFrequently:!0},v=m.getContext("2d",w);v.canvas.width=f.width,v.canvas.height=f.height,this.element.append(m),l&&this.possiblyInsertShadingElement(this.element,e,n,i),this.createScannerPausedUiElement(this.element),this.qrRegion=f,this.context=v,this.canvasElement=m},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=xu.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return e(s.text,YA.createFromQrcodeResult(s)),r.possiblyUpdateShaders(!0),!0}).catch(function(s){r.possiblyUpdateShaders(!1);var i=xu.codeParseError(s);return n(i,zq.createFrom(i)),!1})},t.prototype.foreverScan=function(e,n,r){var s=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),l=i.videoWidth/i.clientWidth,u=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var f=this.qrRegion.width*l,m=this.qrRegion.height*u,w=this.qrRegion.x*l,v=this.qrRegion.y*u;this.context.drawImage(i,w,v,f,m,0,0,this.qrRegion.width,this.qrRegion.height);var E=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(e,n,r)},s.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(I){!I&&e.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(n,r).finally(function(){E()})):E()}).catch(function(I){s.logger.logError("Error happend while scanning context",I),E()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",s={user:!0,environment:!0},i="exact",l=function(P){if(P in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(P,"'")},u=Object.keys(e);if(u.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(u.length," keys");var f=Object.keys(e)[0];if(f!==n&&f!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(f===n){var m=e.facingMode;if(typeof m=="string"){if(l(m))return{facingMode:m}}else if(typeof m=="object")if(i in m){if(l(m["".concat(i)]))return{facingMode:{exact:m["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var w=typeof m;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var v=e.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(i in v)return{deviceId:{exact:v["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var E=typeof v;throw"Invalid type of 'deviceId' = ".concat(E)}}}var I=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},t.prototype.computeCanvasDrawConfig=function(e,n,r,s){if(e<=r&&n<=s){var i=(r-e)/2,l=(s-n)/2;return{x:i,y:l,width:e,height:n}}else{var u=e,f=n;return e>r&&(n=r/e*n,e=r),n>s&&(e=s/n*e,n=s),this.logger.log("Image downsampled from "+"".concat(u,"X").concat(f)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,s)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Ns.BORDER_SHADER_MATCH_COLOR:Ns.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var s=e,i=n,l=document.createElement("canvas");return l.style.width="".concat(s,"px"),l.style.height="".concat(i,"px"),l.style.display="none",l.id=Mo(r)?"qr-canvas":r,l},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,s){if(!(n-s.width<1||r-s.height<1)){var i=document.createElement("div");i.style.position="absolute";var l=(n-s.width)/2,u=(r-s.height)/2;if(i.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(Ns.SHADED_REGION_ELEMENT_ID),n-s.width<11||r-s.height<11)this.hasBorderShaders=!1;else{var f=5,m=40;this.insertShaderBorders(i,m,f,-f,null,0,!0),this.insertShaderBorders(i,m,f,-f,null,0,!1),this.insertShaderBorders(i,m,f,null,-f,0,!0),this.insertShaderBorders(i,m,f,null,-f,0,!1),this.insertShaderBorders(i,f,m+f,-f,null,-f,!0),this.insertShaderBorders(i,f,m+f,null,-f,-f,!0),this.insertShaderBorders(i,f,m+f,-f,null,-f,!1),this.insertShaderBorders(i,f,m+f,null,-f,-f,!1),this.hasBorderShaders=!0}e.append(i)}},t.prototype.insertShaderBorders=function(e,n,r,s,i,l,u){var f=document.createElement("div");f.style.position="absolute",f.style.backgroundColor=Ns.BORDER_SHADER_DEFAULT_COLOR,f.style.width="".concat(n,"px"),f.style.height="".concat(r,"px"),s!==null&&(f.style.top="".concat(s,"px")),i!==null&&(f.style.bottom="".concat(i,"px")),u?f.style.left="".concat(l,"px"):f.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(f),e.appendChild(f)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),rT;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(rT||(rT={}));const Q8=O.createContext({isOpen:!1,openScanner:()=>{},closeScanner:()=>{}}),Z8=()=>O.useContext(Q8),uK=({children:t})=>{const[e,n]=O.useState(!1),[r,s]=O.useState(()=>()=>{}),{toast:i}=ci(),[,l]=bl(),{user:u}=yr(),f=O.useRef(null),m="qr-reader",w=O.useRef(!1);O.useEffect(()=>()=>{f.current&&!w.current&&(w.current=!0,f.current.stop().catch(console.error))},[]);const v=O.useCallback(P=>{n(!0),s(P?()=>P:()=>C=>{console.log("ברירת מחדל: ניווט לדף העסק")})},[]),E=O.useCallback(async()=>{if(!w.current){if(w.current=!0,f.current)try{await f.current.stop()}catch(P){console.log("Scanner stop error on close:",P)}finally{f.current=null,w.current=!1}else w.current=!1;n(!1)}},[]),I=O.useCallback(async P=>{if(w.current){console.log("Already stopping, ignoring scan");return}if(w.current=!0,f.current)try{await f.current.stop(),console.log("Scanner stopped successfully")}catch(C){console.log("Scanner stop error:",C)}finally{f.current=null}n(!1),console.log("קוד QR נסרק בהצלחה:",P),console.log("מצב משתמש בסריקה:",u?"מחובר":"לא מחובר");try{let C="";if(P.startsWith("http")){console.log("מעבד URL:",P);const k=new URL(P),N=k.searchParams.get("businessId"),T=k.pathname.split("/").filter($=>$.length>0);console.log("מקטעי נתיב:",T);const S=T.findIndex($=>$==="business");console.log("אינדקס business:",S);let V="";S>=0&&S<T.length-1?V=T[S+1]:V=T.filter($=>$!=="scan")[T.length-1]||"",console.log("מזהה עסק מהנתיב:",V),C=N||V||"",console.log("מזהה עסק שחולץ:",C),C&&C.includes("?")&&(C=C.split("?")[0]),C&&C.includes("#")&&(C=C.split("#")[0])}else C=P,console.log("מזהה עסק ישיר:",C);i({title:"קוד QR נסרק בהצלחה",description:"מעבר לדף העסק..."}),C?(console.log("מנווט לדף עסק:",`/business/${C}`),r(C),l(`/business/${C}/scan`),setTimeout(()=>{i({title:"הופנית לדף העסק",description:"כעת תוכלי ליצור המלצה על העסק"}),w.current=!1},500)):(i({title:"שגיאה",description:"מזהה עסק לא חוקי",variant:"destructive"}),w.current=!1)}catch(C){console.error("שגיאה בעיבוד קוד QR:",C),i({title:"שגיאה",description:"לא ניתן לעבד את קוד ה-QR. נא לנסות שוב.",variant:"destructive"}),w.current=!1}},[r,l,i,u]);return O.useEffect(()=>{e&&setTimeout(()=>{document.getElementById(m)&&(w.current=!1,f.current=new ky(m),f.current.start({facingMode:"environment"},{fps:10,qrbox:{width:280,height:280}},C=>{I(C)},C=>{}).catch(C=>{console.error("Error starting QR scanner:",C),i({title:"שגיאה בהפעלת המצלמה",description:"לא ניתן להפעיל את מצלמת המכשיר, נא לאשר גישה למצלמה.",variant:"destructive"})}))},500)},[e,i,I]),O.useCallback(P=>{var N;const C=(N=P.target.files)==null?void 0:N[0];if(!C)return;i({title:"מעבד תמונה",description:"נא להמתין בזמן שהתמונה נסרקת..."}),f.current&&!w.current&&f.current.stop().catch(console.error),new ky(m).scanFile(C,!0).then(T=>{I(T)}).catch(T=>{console.error("שגיאה בסריקת קובץ:",T),i({title:"לא נמצא קוד QR",description:"לא ניתן לזהות קוד QR בתמונה שהועלתה. נא לנסות שוב.",variant:"destructive"}),setTimeout(()=>{e&&!w.current&&(f.current=new ky(m),f.current.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},S=>I(S),S=>console.log(S)).catch(console.error))},1e3)})},[I,e,i]),p.jsxs(Q8.Provider,{value:{isOpen:e,openScanner:v,closeScanner:E},children:[t,e&&p.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 rtl",children:p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-lg w-full mx-4 overflow-hidden",children:[p.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"סרוק קוד QR"}),p.jsx(ze,{variant:"ghost",size:"icon",onClick:E,children:p.jsx(N3,{className:"h-6 w-6"})})]}),p.jsx("div",{className:"p-4",children:p.jsx("div",{id:m,className:"bg-gray-100 dark:bg-gray-900 rounded-lg aspect-square w-full max-w-sm mx-auto flex items-center justify-center overflow-hidden",children:p.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:p.jsxs("div",{className:"absolute inset-[10%] border-0 z-20",children:[p.jsx("div",{className:"absolute top-0 right-0 w-14 h-14 border-t-4 border-r-4 border-white"}),p.jsx("div",{className:"absolute top-0 left-0 w-14 h-14 border-t-4 border-l-4 border-white"}),p.jsx("div",{className:"absolute bottom-0 right-0 w-14 h-14 border-b-4 border-r-4 border-white"}),p.jsx("div",{className:"absolute bottom-0 left-0 w-14 h-14 border-b-4 border-l-4 border-white"})]})})})})]})})]})};function dK(){var f,m,w,v,E,I,P;const{businessId:t}=Yf();yr();const{toast:e}=ci(),n=Z8(),[,r]=bl(),[s,i]=O.useState(null),[l,u]=O.useState(!0);return O.useEffect(()=>{(async()=>{if(t)try{const k=await __(t);k&&i(k)}catch(k){console.error("Error loading business data:",k),e({title:"שגיאה",description:"אירעה שגיאה בטעינת נתוני העסק",variant:"destructive"})}finally{u(!1)}})()},[t,e]),l?p.jsx("div",{className:"min-h-screen flex justify-center items-center",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):s?p.jsx("div",{className:"container mx-auto py-8 rtl",children:p.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[p.jsxs("div",{className:"md:w-3/5",children:[p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md mb-6",children:[p.jsx("div",{className:"mb-6",children:p.jsx("h1",{className:"text-3xl font-bold",children:s.name})}),p.jsx("div",{className:"relative h-64 w-full mb-6",children:p.jsx("img",{src:s.logoUrl||"https://placehold.co/600x400?text=No+Image",alt:s.name,className:"w-full h-full object-cover rounded-lg"})}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold mb-3",children:"תיאור"}),p.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:s.description}),p.jsxs("div",{className:"flex flex-row gap-2 justify-start mt-4",children:[p.jsx(ze,{variant:"outline",size:"sm",children:"אהבתי"}),p.jsx(ze,{variant:"outline",className:"bg-blue-50 text-blue-600 border-blue-100",size:"sm",children:"שיתוף"})]})]})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"פרטי קשר"}),p.jsxs("div",{className:"divide-y divide-gray-200 text-right bg-white rounded-lg overflow-hidden border border-gray-200",style:{direction:"rtl",textAlign:"right"},children:[p.jsxs("div",{className:"flex flex-row-reverse items-center py-2 px-2 justify-end",children:[p.jsx(e2,{className:"h-5 w-5 ml-2 text-gray-500 flex-shrink-0"}),p.jsx("span",{className:"font-medium mr-2",children:s.address})]}),p.jsxs("div",{className:"flex flex-row-reverse items-center py-2 px-2 justify-end",children:[p.jsx(S3,{className:"h-5 w-5 ml-2 text-gray-500 flex-shrink-0"}),p.jsx("span",{className:"font-medium mr-2",children:s.phone})]}),p.jsxs("div",{className:"flex flex-row-reverse items-center py-2 px-2 justify-end",children:[p.jsx(I3,{className:"h-5 w-5 ml-2 text-gray-500 flex-shrink-0"}),p.jsx("span",{className:"font-medium mr-2",children:s.website||s.email})]})]})]})]}),p.jsxs("div",{className:"md:w-2/5",children:[p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"שעות פעילות"}),p.jsxs("div",{className:"divide-y divide-gray-200 text-right bg-white rounded-lg overflow-hidden border border-gray-200",style:{direction:"rtl"},children:[p.jsxs("div",{className:"flex justify-between items-center py-2 px-2",children:[p.jsx("span",{children:((f=s.workingHours)==null?void 0:f.sunday)||"9:00-19:00"}),p.jsx("span",{className:"font-medium",children:"ראשון:"})]}),p.jsxs("div",{className:"flex justify-between items-center py-2 px-2",children:[p.jsx("span",{children:((m=s.workingHours)==null?void 0:m.monday)||"9:00-19:00"}),p.jsx("span",{className:"font-medium",children:"שני:"})]}),p.jsxs("div",{className:"flex justify-between items-center py-2 px-2",children:[p.jsx("span",{children:((w=s.workingHours)==null?void 0:w.tuesday)||"9:00-19:00"}),p.jsx("span",{className:"font-medium",children:"שלישי:"})]}),p.jsxs("div",{className:"flex justify-between items-center py-2 px-2",children:[p.jsx("span",{children:((v=s.workingHours)==null?void 0:v.wednesday)||"9:00-19:00"}),p.jsx("span",{className:"font-medium",children:"רביעי:"})]}),p.jsxs("div",{className:"flex justify-between items-center py-2 px-2",children:[p.jsx("span",{children:((E=s.workingHours)==null?void 0:E.thursday)||"9:00-19:00"}),p.jsx("span",{className:"font-medium",children:"חמישי:"})]}),p.jsxs("div",{className:"flex justify-between items-center py-2 px-2",children:[p.jsx("span",{children:((I=s.workingHours)==null?void 0:I.friday)||"9:00-14:00"}),p.jsx("span",{className:"font-medium",children:"שישי:"})]}),p.jsxs("div",{className:"flex justify-between items-center py-2 px-2",children:[p.jsx("span",{children:((P=s.workingHours)==null?void 0:P.saturday)||"סגור"}),p.jsx("span",{className:"font-medium",children:"שבת:"})]})]})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"הצע המלצה"}),p.jsxs(ze,{className:"w-full",onClick:()=>n.openScanner(),children:[p.jsx(t2,{className:"h-4 w-4 ml-2"}),"סרוק QR ליצירת המלצה"]})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"שתף המלצה לעסק זה"}),p.jsxs(ze,{className:"w-full bg-red-600 hover:bg-red-700",onClick:()=>r(`/business/${t}/scan`),children:[p.jsx(n2,{className:"h-4 w-4 ml-2"}),"שתף המלצה (כפתור זמני)"]}),p.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"כפתור זה ישמש לבדיקות בלבד ויוסר בגרסה הסופית (בפועל מה שיפתח את הדף שנמצא בכפתור זה סריקת הQR שמאממתת את הנוכחות הפיזית של המשתמש בבית העסק)"})]})]})]})}):p.jsxs("div",{className:"container mx-auto py-8 text-center",children:[p.jsx("h1",{className:"text-2xl font-bold mb-4",children:"העסק לא נמצא"}),p.jsx("p",{className:"mb-6",children:"לא הצלחנו למצוא את העסק המבוקש. ייתכן שהוא אינו קיים או שאין לך גישה אליו."}),p.jsx(ze,{onClick:()=>r("/"),children:"חזרה לדף הבית"})]})}var y0={},hK=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},J8={},Gs={};let V_;const fK=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Gs.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Gs.getSymbolTotalCodewords=function(e){return fK[e]};Gs.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Gs.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');V_=e};Gs.isKanjiModeEnabled=function(){return typeof V_<"u"};Gs.toSJIS=function(e){return V_(e)};var xp={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}})(xp);function ek(){this.buffer=[],this.length=0}ek.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var gK=ek;function x0(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}x0.prototype.set=function(t,e,n,r){const s=t*this.size+e;this.data[s]=n,r&&(this.reservedBit[s]=!0)};x0.prototype.get=function(t,e){return this.data[t*this.size+e]};x0.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};x0.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var mK=x0,tk={};(function(t){const e=Gs.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=e(r),l=i===145?26:Math.ceil((i-13)/(2*s-2))*2,u=[i-7];for(let f=1;f<s-1;f++)u[f]=u[f-1]-l;return u.push(6),u.reverse()},t.getPositions=function(r){const s=[],i=t.getRowColCoords(r),l=i.length;for(let u=0;u<l;u++)for(let f=0;f<l;f++)u===0&&f===0||u===0&&f===l-1||u===l-1&&f===0||s.push([i[u],i[f]]);return s}})(tk);var nk={};const pK=Gs.getSymbolSize,sT=7;nk.getPositions=function(e){const n=pK(e);return[[0,0],[n-sT,0],[0,n-sT]]};var rk={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const i=s.size;let l=0,u=0,f=0,m=null,w=null;for(let v=0;v<i;v++){u=f=0,m=w=null;for(let E=0;E<i;E++){let I=s.get(v,E);I===m?u++:(u>=5&&(l+=e.N1+(u-5)),m=I,u=1),I=s.get(E,v),I===w?f++:(f>=5&&(l+=e.N1+(f-5)),w=I,f=1)}u>=5&&(l+=e.N1+(u-5)),f>=5&&(l+=e.N1+(f-5))}return l},t.getPenaltyN2=function(s){const i=s.size;let l=0;for(let u=0;u<i-1;u++)for(let f=0;f<i-1;f++){const m=s.get(u,f)+s.get(u,f+1)+s.get(u+1,f)+s.get(u+1,f+1);(m===4||m===0)&&l++}return l*e.N2},t.getPenaltyN3=function(s){const i=s.size;let l=0,u=0,f=0;for(let m=0;m<i;m++){u=f=0;for(let w=0;w<i;w++)u=u<<1&2047|s.get(m,w),w>=10&&(u===1488||u===93)&&l++,f=f<<1&2047|s.get(w,m),w>=10&&(f===1488||f===93)&&l++}return l*e.N3},t.getPenaltyN4=function(s){let i=0;const l=s.data.length;for(let f=0;f<l;f++)i+=s.data[f];return Math.abs(Math.ceil(i*100/l/5)-10)*e.N4};function n(r,s,i){switch(r){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,i){const l=i.size;for(let u=0;u<l;u++)for(let f=0;f<l;f++)i.isReserved(f,u)||i.xor(f,u,n(s,f,u))},t.getBestMask=function(s,i){const l=Object.keys(t.Patterns).length;let u=0,f=1/0;for(let m=0;m<l;m++){i(m),t.applyMask(m,s);const w=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(m,s),w<f&&(f=w,u=m)}return u}})(rk);var wp={};const Va=xp,c1=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],u1=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];wp.getBlocksCount=function(e,n){switch(n){case Va.L:return c1[(e-1)*4+0];case Va.M:return c1[(e-1)*4+1];case Va.Q:return c1[(e-1)*4+2];case Va.H:return c1[(e-1)*4+3];default:return}};wp.getTotalCodewordsCount=function(e,n){switch(n){case Va.L:return u1[(e-1)*4+0];case Va.M:return u1[(e-1)*4+1];case Va.Q:return u1[(e-1)*4+2];case Va.H:return u1[(e-1)*4+3];default:return}};var sk={},vp={};const Mh=new Uint8Array(512),nm=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)Mh[n]=e,nm[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)Mh[n]=Mh[n-255]})();vp.log=function(e){if(e<1)throw new Error("log("+e+")");return nm[e]};vp.exp=function(e){return Mh[e]};vp.mul=function(e,n){return e===0||n===0?0:Mh[nm[e]+nm[n]]};(function(t){const e=vp;t.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let l=0;l<r.length;l++)for(let u=0;u<s.length;u++)i[l+u]^=e.mul(r[l],s[u]);return i},t.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const l=i[0];for(let f=0;f<s.length;f++)i[f]^=e.mul(s[f],l);let u=0;for(;u<i.length&&i[u]===0;)u++;i=i.slice(u)}return i},t.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=t.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(sk);const ik=sk;function U_(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}U_.prototype.initialize=function(e){this.degree=e,this.genPoly=ik.generateECPolynomial(this.degree)};U_.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=ik.mod(n,this.genPoly),s=this.degree-r.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(r,s),i}return r};var yK=U_,ok={},Sl={},z_={};z_.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Eo={};const ak="[0-9]+",xK="[A-Z $%*+\\-./:]+";let Mf="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Mf=Mf.replace(/u/g,"\\u");const wK="(?:(?![A-Z0-9 $%*+\\-./:]|"+Mf+`)(?:.|[\r
]))+`;Eo.KANJI=new RegExp(Mf,"g");Eo.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Eo.BYTE=new RegExp(wK,"g");Eo.NUMERIC=new RegExp(ak,"g");Eo.ALPHANUMERIC=new RegExp(xK,"g");const vK=new RegExp("^"+Mf+"$"),_K=new RegExp("^"+ak+"$"),EK=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Eo.testKanji=function(e){return vK.test(e)};Eo.testNumeric=function(e){return _K.test(e)};Eo.testAlphanumeric=function(e){return EK.test(e)};(function(t){const e=z_,n=Eo;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,l){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?i.ccBits[0]:l<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return n.testNumeric(i)?t.NUMERIC:n.testAlphanumeric(i)?t.ALPHANUMERIC:n.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,l){if(t.isValid(i))return i;try{return r(i)}catch{return l}}})(Sl);(function(t){const e=Gs,n=wp,r=xp,s=Sl,i=z_,l=7973,u=e.getBCHDigit(l);function f(E,I,P){for(let C=1;C<=40;C++)if(I<=t.getCapacity(C,P,E))return C}function m(E,I){return s.getCharCountIndicator(E,I)+4}function w(E,I){let P=0;return E.forEach(function(C){const k=m(C.mode,I);P+=k+C.getBitsLength()}),P}function v(E,I){for(let P=1;P<=40;P++)if(w(E,P)<=t.getCapacity(P,I,s.MIXED))return P}t.from=function(I,P){return i.isValid(I)?parseInt(I,10):P},t.getCapacity=function(I,P,C){if(!i.isValid(I))throw new Error("Invalid QR Code version");typeof C>"u"&&(C=s.BYTE);const k=e.getSymbolTotalCodewords(I),N=n.getTotalCodewordsCount(I,P),T=(k-N)*8;if(C===s.MIXED)return T;const S=T-m(C,I);switch(C){case s.NUMERIC:return Math.floor(S/10*3);case s.ALPHANUMERIC:return Math.floor(S/11*2);case s.KANJI:return Math.floor(S/13);case s.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(I,P){let C;const k=r.from(P,r.M);if(Array.isArray(I)){if(I.length>1)return v(I,k);if(I.length===0)return 1;C=I[0]}else C=I;return f(C.mode,C.getLength(),k)},t.getEncodedBits=function(I){if(!i.isValid(I)||I<7)throw new Error("Invalid QR Code version");let P=I<<12;for(;e.getBCHDigit(P)-u>=0;)P^=l<<e.getBCHDigit(P)-u;return I<<12|P}})(ok);var lk={};const Hw=Gs,ck=1335,bK=21522,iT=Hw.getBCHDigit(ck);lk.getEncodedBits=function(e,n){const r=e.bit<<3|n;let s=r<<10;for(;Hw.getBCHDigit(s)-iT>=0;)s^=ck<<Hw.getBCHDigit(s)-iT;return(r<<10|s)^bK};var uk={};const CK=Sl;function pd(t){this.mode=CK.NUMERIC,this.data=t.toString()}pd.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};pd.prototype.getLength=function(){return this.data.length};pd.prototype.getBitsLength=function(){return pd.getBitsLength(this.data.length)};pd.prototype.write=function(e){let n,r,s;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),s=parseInt(r,10),e.put(s,10);const i=this.data.length-n;i>0&&(r=this.data.substr(n),s=parseInt(r,10),e.put(s,i*3+1))};var AK=pd;const TK=Sl,Py=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function yd(t){this.mode=TK.ALPHANUMERIC,this.data=t}yd.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};yd.prototype.getLength=function(){return this.data.length};yd.prototype.getBitsLength=function(){return yd.getBitsLength(this.data.length)};yd.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Py.indexOf(this.data[n])*45;r+=Py.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(Py.indexOf(this.data[n]),6)};var IK=yd;const SK=Sl;function xd(t){this.mode=SK.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}xd.getBitsLength=function(e){return e*8};xd.prototype.getLength=function(){return this.data.length};xd.prototype.getBitsLength=function(){return xd.getBitsLength(this.data.length)};xd.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var NK=xd;const RK=Sl,kK=Gs;function wd(t){this.mode=RK.KANJI,this.data=t}wd.getBitsLength=function(e){return e*13};wd.prototype.getLength=function(){return this.data.length};wd.prototype.getBitsLength=function(){return wd.getBitsLength(this.data.length)};wd.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=kK.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var PK=wd,dk={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,s){var i={},l={};l[r]=0;var u=e.PriorityQueue.make();u.push(r,0);for(var f,m,w,v,E,I,P,C,k;!u.empty();){f=u.pop(),m=f.value,v=f.cost,E=n[m]||{};for(w in E)E.hasOwnProperty(w)&&(I=E[w],P=v+I,C=l[w],k=typeof l[w]>"u",(k||C>P)&&(l[w]=P,u.push(w,P),i[w]=m))}if(typeof s<"u"&&typeof l[s]>"u"){var N=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(N)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],i=r;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,r,s){var i=e.single_source_shortest_paths(n,r,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,s={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(dk);var OK=dk.exports;(function(t){const e=Sl,n=AK,r=IK,s=NK,i=PK,l=Eo,u=Gs,f=OK;function m(N){return unescape(encodeURIComponent(N)).length}function w(N,T,S){const V=[];let $;for(;($=N.exec(S))!==null;)V.push({data:$[0],index:$.index,mode:T,length:$[0].length});return V}function v(N){const T=w(l.NUMERIC,e.NUMERIC,N),S=w(l.ALPHANUMERIC,e.ALPHANUMERIC,N);let V,$;return u.isKanjiModeEnabled()?(V=w(l.BYTE,e.BYTE,N),$=w(l.KANJI,e.KANJI,N)):(V=w(l.BYTE_KANJI,e.BYTE,N),$=[]),T.concat(S,V,$).sort(function(M,j){return M.index-j.index}).map(function(M){return{data:M.data,mode:M.mode,length:M.length}})}function E(N,T){switch(T){case e.NUMERIC:return n.getBitsLength(N);case e.ALPHANUMERIC:return r.getBitsLength(N);case e.KANJI:return i.getBitsLength(N);case e.BYTE:return s.getBitsLength(N)}}function I(N){return N.reduce(function(T,S){const V=T.length-1>=0?T[T.length-1]:null;return V&&V.mode===S.mode?(T[T.length-1].data+=S.data,T):(T.push(S),T)},[])}function P(N){const T=[];for(let S=0;S<N.length;S++){const V=N[S];switch(V.mode){case e.NUMERIC:T.push([V,{data:V.data,mode:e.ALPHANUMERIC,length:V.length},{data:V.data,mode:e.BYTE,length:V.length}]);break;case e.ALPHANUMERIC:T.push([V,{data:V.data,mode:e.BYTE,length:V.length}]);break;case e.KANJI:T.push([V,{data:V.data,mode:e.BYTE,length:m(V.data)}]);break;case e.BYTE:T.push([{data:V.data,mode:e.BYTE,length:m(V.data)}])}}return T}function C(N,T){const S={},V={start:{}};let $=["start"];for(let Y=0;Y<N.length;Y++){const M=N[Y],j=[];for(let L=0;L<M.length;L++){const G=M[L],X=""+Y+L;j.push(X),S[X]={node:G,lastCount:0},V[X]={};for(let H=0;H<$.length;H++){const z=$[H];S[z]&&S[z].node.mode===G.mode?(V[z][X]=E(S[z].lastCount+G.length,G.mode)-E(S[z].lastCount,G.mode),S[z].lastCount+=G.length):(S[z]&&(S[z].lastCount=G.length),V[z][X]=E(G.length,G.mode)+4+e.getCharCountIndicator(G.mode,T))}}$=j}for(let Y=0;Y<$.length;Y++)V[$[Y]].end=0;return{map:V,table:S}}function k(N,T){let S;const V=e.getBestModeForData(N);if(S=e.from(T,V),S!==e.BYTE&&S.bit<V.bit)throw new Error('"'+N+'" cannot be encoded with mode '+e.toString(S)+`.
 Suggested mode is: `+e.toString(V));switch(S===e.KANJI&&!u.isKanjiModeEnabled()&&(S=e.BYTE),S){case e.NUMERIC:return new n(N);case e.ALPHANUMERIC:return new r(N);case e.KANJI:return new i(N);case e.BYTE:return new s(N)}}t.fromArray=function(T){return T.reduce(function(S,V){return typeof V=="string"?S.push(k(V,null)):V.data&&S.push(k(V.data,V.mode)),S},[])},t.fromString=function(T,S){const V=v(T,u.isKanjiModeEnabled()),$=P(V),Y=C($,S),M=f.find_path(Y.map,"start","end"),j=[];for(let L=1;L<M.length-1;L++)j.push(Y.table[M[L]].node);return t.fromArray(I(j))},t.rawSplit=function(T){return t.fromArray(v(T,u.isKanjiModeEnabled()))}})(uk);const _p=Gs,Oy=xp,DK=gK,MK=mK,LK=tk,FK=nk,Ww=rk,Gw=wp,jK=yK,rm=ok,BK=lk,VK=Sl,Dy=uk;function UK(t,e){const n=t.size,r=FK.getPositions(e);for(let s=0;s<r.length;s++){const i=r[s][0],l=r[s][1];for(let u=-1;u<=7;u++)if(!(i+u<=-1||n<=i+u))for(let f=-1;f<=7;f++)l+f<=-1||n<=l+f||(u>=0&&u<=6&&(f===0||f===6)||f>=0&&f<=6&&(u===0||u===6)||u>=2&&u<=4&&f>=2&&f<=4?t.set(i+u,l+f,!0,!0):t.set(i+u,l+f,!1,!0))}}function zK(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function HK(t,e){const n=LK.getPositions(e);for(let r=0;r<n.length;r++){const s=n[r][0],i=n[r][1];for(let l=-2;l<=2;l++)for(let u=-2;u<=2;u++)l===-2||l===2||u===-2||u===2||l===0&&u===0?t.set(s+l,i+u,!0,!0):t.set(s+l,i+u,!1,!0)}}function WK(t,e){const n=t.size,r=rm.getEncodedBits(e);let s,i,l;for(let u=0;u<18;u++)s=Math.floor(u/3),i=u%3+n-8-3,l=(r>>u&1)===1,t.set(s,i,l,!0),t.set(i,s,l,!0)}function My(t,e,n){const r=t.size,s=BK.getEncodedBits(e,n);let i,l;for(i=0;i<15;i++)l=(s>>i&1)===1,i<6?t.set(i,8,l,!0):i<8?t.set(i+1,8,l,!0):t.set(r-15+i,8,l,!0),i<8?t.set(8,r-i-1,l,!0):i<9?t.set(8,15-i-1+1,l,!0):t.set(8,15-i-1,l,!0);t.set(r-8,8,1,!0)}function GK(t,e){const n=t.size;let r=-1,s=n-1,i=7,l=0;for(let u=n-1;u>0;u-=2)for(u===6&&u--;;){for(let f=0;f<2;f++)if(!t.isReserved(s,u-f)){let m=!1;l<e.length&&(m=(e[l]>>>i&1)===1),t.set(s,u-f,m),i--,i===-1&&(l++,i=7)}if(s+=r,s<0||n<=s){s-=r,r=-r;break}}}function $K(t,e,n){const r=new DK;n.forEach(function(f){r.put(f.mode.bit,4),r.put(f.getLength(),VK.getCharCountIndicator(f.mode,t)),f.write(r)});const s=_p.getSymbolTotalCodewords(t),i=Gw.getTotalCodewordsCount(t,e),l=(s-i)*8;for(r.getLengthInBits()+4<=l&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const u=(l-r.getLengthInBits())/8;for(let f=0;f<u;f++)r.put(f%2?17:236,8);return qK(r,t,e)}function qK(t,e,n){const r=_p.getSymbolTotalCodewords(e),s=Gw.getTotalCodewordsCount(e,n),i=r-s,l=Gw.getBlocksCount(e,n),u=r%l,f=l-u,m=Math.floor(r/l),w=Math.floor(i/l),v=w+1,E=m-w,I=new jK(E);let P=0;const C=new Array(l),k=new Array(l);let N=0;const T=new Uint8Array(t.buffer);for(let M=0;M<l;M++){const j=M<f?w:v;C[M]=T.slice(P,P+j),k[M]=I.encode(C[M]),P+=j,N=Math.max(N,j)}const S=new Uint8Array(r);let V=0,$,Y;for($=0;$<N;$++)for(Y=0;Y<l;Y++)$<C[Y].length&&(S[V++]=C[Y][$]);for($=0;$<E;$++)for(Y=0;Y<l;Y++)S[V++]=k[Y][$];return S}function KK(t,e,n,r){let s;if(Array.isArray(t))s=Dy.fromArray(t);else if(typeof t=="string"){let m=e;if(!m){const w=Dy.rawSplit(t);m=rm.getBestVersionForData(w,n)}s=Dy.fromString(t,m||40)}else throw new Error("Invalid data");const i=rm.getBestVersionForData(s,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const l=$K(e,n,s),u=_p.getSymbolSize(e),f=new MK(u);return UK(f,e),zK(f),HK(f,e),My(f,n,0),e>=7&&WK(f,e),GK(f,l),isNaN(r)&&(r=Ww.getBestMask(f,My.bind(null,f,n))),Ww.applyMask(r,f),My(f,n,r),{modules:f,version:e,errorCorrectionLevel:n,maskPattern:r,segments:s}}J8.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=Oy.M,s,i;return typeof n<"u"&&(r=Oy.from(n.errorCorrectionLevel,Oy.M),s=rm.from(n.version),i=Ww.from(n.maskPattern),n.toSJISFunc&&_p.setToSJISFunction(n.toSJISFunc)),KK(e,s,r,i)};var hk={},H_={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,l=r.scale||4;return{width:i,scale:i?4:l,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){const i=t.getScale(r,s);return Math.floor((r+s.margin*2)*i)},t.qrToImageData=function(r,s,i){const l=s.modules.size,u=s.modules.data,f=t.getScale(l,i),m=Math.floor((l+i.margin*2)*f),w=i.margin*f,v=[i.color.light,i.color.dark];for(let E=0;E<m;E++)for(let I=0;I<m;I++){let P=(E*m+I)*4,C=i.color.light;if(E>=w&&I>=w&&E<m-w&&I<m-w){const k=Math.floor((E-w)/f),N=Math.floor((I-w)/f);C=v[u[k*l+N]?1:0]}r[P++]=C.r,r[P++]=C.g,r[P++]=C.b,r[P]=C.a}}})(H_);(function(t){const e=H_;function n(s,i,l){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=l,i.width=l,i.style.height=l+"px",i.style.width=l+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,l,u){let f=u,m=l;typeof f>"u"&&(!l||!l.getContext)&&(f=l,l=void 0),l||(m=r()),f=e.getOptions(f);const w=e.getImageWidth(i.modules.size,f),v=m.getContext("2d"),E=v.createImageData(w,w);return e.qrToImageData(E.data,i,f),n(v,m,w),v.putImageData(E,0,0),m},t.renderToDataURL=function(i,l,u){let f=u;typeof f>"u"&&(!l||!l.getContext)&&(f=l,l=void 0),f||(f={});const m=t.render(i,l,f),w=f.type||"image/png",v=f.rendererOpts||{};return m.toDataURL(w,v.quality)}})(hk);var fk={};const XK=H_;function oT(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Ly(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function YK(t,e,n){let r="",s=0,i=!1,l=0;for(let u=0;u<t.length;u++){const f=Math.floor(u%e),m=Math.floor(u/e);!f&&!i&&(i=!0),t[u]?(l++,u>0&&f>0&&t[u-1]||(r+=i?Ly("M",f+n,.5+m+n):Ly("m",s,0),s=0,i=!1),f+1<e&&t[u+1]||(r+=Ly("h",l),l=0)):s++}return r}fk.render=function(e,n,r){const s=XK.getOptions(n),i=e.modules.size,l=e.modules.data,u=i+s.margin*2,f=s.color.light.a?"<path "+oT(s.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",m="<path "+oT(s.color.dark,"stroke")+' d="'+YK(l,i,s.margin)+'"/>',w='viewBox="0 0 '+u+" "+u+'"',E='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+w+' shape-rendering="crispEdges">'+f+m+`</svg>
`;return typeof r=="function"&&r(null,E),E};const QK=hK,$w=J8,gk=hk,ZK=fk;function W_(t,e,n,r,s){const i=[].slice.call(arguments,1),l=i.length,u=typeof i[l-1]=="function";if(!u&&!QK())throw new Error("Callback required as last argument");if(u){if(l<2)throw new Error("Too few arguments provided");l===2?(s=n,n=e,e=r=void 0):l===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=n,n=e,e=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(n=e,e=r=void 0):l===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(f,m){try{const w=$w.create(n,r);f(t(w,e,r))}catch(w){m(w)}})}try{const f=$w.create(n,r);s(null,t(f,e,r))}catch(f){s(f)}}y0.create=$w.create;y0.toCanvas=W_.bind(null,gk.render);y0.toDataURL=W_.bind(null,gk.renderToDataURL);y0.toString=W_.bind(null,function(t,e,n){return ZK.render(t,n)});function JK(){var k;const[,t]=bD("/redeem-offer/:offerId"),e=t==null?void 0:t.offerId,{user:n}=yr(),[r,s]=O.useState(null),[i,l]=O.useState(!0),[u,f]=O.useState(!1),[m,w]=O.useState(!1),[v,E]=O.useState("");O.useEffect(()=>{(async()=>{var T;if(!(!n||!e))try{const V=(await f0(n.uid)).find($=>$.id===e);if(V){s(V),w(V.claimed||!1);const $=((T=V.recommendation)==null?void 0:T.businessName)||"עסק לא ידוע",Y=`SHAREIT:OFFER:${e}:${n.uid}:${$}`;y0.toDataURL(Y,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}).then(M=>{E(M)}).catch(M=>{console.error("Error generating QR code:",M)})}}catch(S){console.error("Error loading offer:",S)}finally{l(!1)}})()},[n,e]);const I=async()=>{var N;if(!(!e||!n||!r)){f(!0);try{const T=r.originalReferrerId||((N=r.recommendation)==null?void 0:N.userId);if(!T){console.error("לא נמצא מפיץ ההמלצה המקורי"),alert("שגיאה: לא ניתן למצוא את מפיץ ההמלצה המקורי");return}console.log("מפיץ ההמלצה המקורי:",T),console.log("ממש הטבה עבור:",e),await y6(e,T),w(!0),console.log("הטבה מומשה בהצלחה! נוספו 5 מטבעות למשתף ההמלצה:",T)}catch(T){console.error("Error claiming offer:",T)}finally{f(!1)}}};if(i)return p.jsx("div",{className:"container mx-auto px-4 py-8",dir:"rtl",children:p.jsx("div",{className:"max-w-md mx-auto",children:p.jsx(on,{className:"animate-pulse",children:p.jsxs(qn,{className:"p-8",children:[p.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),p.jsx("div",{className:"h-32 bg-gray-200 rounded mb-4"}),p.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})})})});if(!r)return p.jsx("div",{className:"container mx-auto px-4 py-8",dir:"rtl",children:p.jsx(on,{className:"max-w-md mx-auto text-center",children:p.jsxs(qn,{className:"p-8",children:[p.jsx("h2",{className:"text-xl font-bold mb-4",children:"הטבה לא נמצאה"}),p.jsx("p",{className:"text-gray-600",children:"לא הצלחנו למצוא את ההטבה המבוקשת"})]})})});const P=((k=r.recommendation)==null?void 0:k.businessName)||"עסק לא ידוע",C="10% הנחה";return`${e}${n==null?void 0:n.uid}${P}`,p.jsx("div",{className:"container mx-auto px-4 py-8",dir:"rtl",children:p.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[p.jsxs(on,{children:[p.jsxs(cp,{className:"text-center",children:[p.jsx(up,{className:"text-2xl font-bold",children:"מימוש הטבה"}),p.jsx("p",{className:"text-gray-600",children:"הצג את הקוד הזה לבעל העסק"})]}),p.jsxs(qn,{className:"p-6 text-center space-y-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-bold text-gray-900",children:P}),p.jsx(Zg,{className:"bg-green-100 text-green-800 mt-2",children:C})]}),p.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200",children:p.jsx("div",{className:"w-48 h-48 mx-auto flex items-center justify-center",children:v?p.jsx("img",{src:v,alt:"QR Code להטבה",className:"w-full h-full object-contain"}):p.jsx("div",{className:"bg-gray-100 rounded-lg w-full h-full flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx(t2,{className:"h-16 w-16 mx-auto mb-2 text-gray-400"}),p.jsx("p",{className:"text-xs text-gray-500",children:"יוצר QR Code..."})]})})})}),p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[p.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"קוד הטבה:"}),p.jsx("p",{className:"text-2xl font-bold font-mono tracking-wider",children:e?e.slice(-6).toUpperCase():"------"})]})]})]}),p.jsx(on,{className:"border-dashed border-2 border-blue-300 bg-blue-50",children:p.jsxs(qn,{className:"p-6 text-center",children:[p.jsx(BM,{className:"h-12 w-12 mx-auto mb-4 text-blue-600"}),p.jsx("h3",{className:"text-lg font-bold mb-2",children:"הדמיית מימוש בעל עסק"}),p.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"בתהליך האמיתי, בעל העסק יסרוק את הקוד או יקליד אותו"}),m?p.jsxs("div",{className:"text-center",children:[p.jsx(TM,{className:"h-16 w-16 mx-auto mb-4 text-green-500"}),p.jsx("h4",{className:"text-xl font-bold text-green-700 mb-2",children:"הטבה מומשה!"}),p.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600",children:[p.jsx(NM,{className:"h-5 w-5"}),p.jsx("span",{className:"font-medium",children:"נוספו 5 מטבעות למפיץ ההמלצה"})]})]}):p.jsx(ze,{onClick:I,disabled:u,className:"bg-blue-600 hover:bg-blue-700",size:"lg",children:u?"מבצע מימוש...":"מימוש הטבה"})]})}),p.jsx(on,{className:"bg-gray-50",children:p.jsxs(qn,{className:"p-4",children:[p.jsx("h4",{className:"font-bold mb-2",children:"איך זה עובד?"}),p.jsxs("ol",{className:"text-sm text-gray-600 space-y-1",children:[p.jsx("li",{children:"1. הראי את הקוד לבעל העסק"}),p.jsx("li",{children:"2. בעל העסק סורק/מקליד את הקוד"}),p.jsx("li",{children:"3. ההטבה ממומשת וחלה הנחה"}),p.jsx("li",{children:"4.  הממליץ מקבל 5 מטבעות"})]})]})})]})})}const eX={theme:"system",setTheme:()=>null},mk=O.createContext(eX);function tX({children:t,defaultTheme:e="system",storageKey:n="ui-theme",...r}){const[s,i]=O.useState(()=>localStorage.getItem(n)||e);O.useEffect(()=>{const u=window.document.documentElement;if(u.classList.remove("light","dark"),s==="system"){const f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";u.classList.add(f);return}u.classList.add(s)},[s]);const l={theme:s,setTheme:u=>{localStorage.setItem(n,u),i(u)}};return p.jsx(mk.Provider,{...r,value:l,children:t})}const nX=()=>{const t=O.useContext(mk);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};function rX({variant:t="default",size:e="default",className:n=""}){const{theme:r,setTheme:s}=nX();return p.jsxs(ze,{variant:t,size:e,className:n,onClick:()=>s(r==="light"?"dark":"light"),children:[p.jsx(VM,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),p.jsx(LM,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),p.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}var Fy=0;function sX(){O.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??aT()),document.body.insertAdjacentElement("beforeend",t[1]??aT()),Fy++,()=>{Fy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Fy--}},[])}function aT(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var jy="focusScope.autoFocusOnMount",By="focusScope.autoFocusOnUnmount",lT={bubbles:!1,cancelable:!0},iX="FocusScope",pk=O.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...l}=t,[u,f]=O.useState(null),m=Ur(s),w=Ur(i),v=O.useRef(null),E=pr(e,C=>f(C)),I=O.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;O.useEffect(()=>{if(r){let C=function(S){if(I.paused||!u)return;const V=S.target;u.contains(V)?v.current=V:va(v.current,{select:!0})},k=function(S){if(I.paused||!u)return;const V=S.relatedTarget;V!==null&&(u.contains(V)||va(v.current,{select:!0}))},N=function(S){if(document.activeElement===document.body)for(const $ of S)$.removedNodes.length>0&&va(u)};document.addEventListener("focusin",C),document.addEventListener("focusout",k);const T=new MutationObserver(N);return u&&T.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",k),T.disconnect()}}},[r,u,I.paused]),O.useEffect(()=>{if(u){uT.add(I);const C=document.activeElement;if(!u.contains(C)){const N=new CustomEvent(jy,lT);u.addEventListener(jy,m),u.dispatchEvent(N),N.defaultPrevented||(oX(dX(yk(u)),{select:!0}),document.activeElement===C&&va(u))}return()=>{u.removeEventListener(jy,m),setTimeout(()=>{const N=new CustomEvent(By,lT);u.addEventListener(By,w),u.dispatchEvent(N),N.defaultPrevented||va(C??document.body,{select:!0}),u.removeEventListener(By,w),uT.remove(I)},0)}}},[u,m,w,I]);const P=O.useCallback(C=>{if(!n&&!r||I.paused)return;const k=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,N=document.activeElement;if(k&&N){const T=C.currentTarget,[S,V]=aX(T);S&&V?!C.shiftKey&&N===V?(C.preventDefault(),n&&va(S,{select:!0})):C.shiftKey&&N===S&&(C.preventDefault(),n&&va(V,{select:!0})):N===T&&C.preventDefault()}},[n,r,I.paused]);return p.jsx(jt.div,{tabIndex:-1,...l,ref:E,onKeyDown:P})});pk.displayName=iX;function oX(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(va(r,{select:e}),document.activeElement!==n)return}function aX(t){const e=yk(t),n=cT(e,t),r=cT(e.reverse(),t);return[n,r]}function yk(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function cT(t,e){for(const n of t)if(!lX(n,{upTo:e}))return n}function lX(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function cX(t){return t instanceof HTMLInputElement&&"select"in t}function va(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&cX(t)&&e&&t.select()}}var uT=uX();function uX(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=dT(t,e),t.unshift(e)},remove(e){var n;t=dT(t,e),(n=t[0])==null||n.resume()}}}function dT(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function dX(t){return t.filter(e=>e.tagName!=="A")}var hX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Yc=new WeakMap,d1=new WeakMap,h1={},Vy=0,xk=function(t){return t&&(t.host||xk(t.parentNode))},fX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=xk(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},gX=function(t,e,n,r){var s=fX(e,Array.isArray(t)?t:[t]);h1[n]||(h1[n]=new WeakMap);var i=h1[n],l=[],u=new Set,f=new Set(s),m=function(v){!v||u.has(v)||(u.add(v),m(v.parentNode))};s.forEach(m);var w=function(v){!v||f.has(v)||Array.prototype.forEach.call(v.children,function(E){if(u.has(E))w(E);else try{var I=E.getAttribute(r),P=I!==null&&I!=="false",C=(Yc.get(E)||0)+1,k=(i.get(E)||0)+1;Yc.set(E,C),i.set(E,k),l.push(E),C===1&&P&&d1.set(E,!0),k===1&&E.setAttribute(n,"true"),P||E.setAttribute(r,"true")}catch(N){console.error("aria-hidden: cannot operate on ",E,N)}})};return w(e),u.clear(),Vy++,function(){l.forEach(function(v){var E=Yc.get(v)-1,I=i.get(v)-1;Yc.set(v,E),i.set(v,I),E||(d1.has(v)||v.removeAttribute(r),d1.delete(v)),I||v.removeAttribute(n)}),Vy--,Vy||(Yc=new WeakMap,Yc=new WeakMap,d1=new WeakMap,h1={})}},mX=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=hX(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),gX(r,s,n,"aria-hidden")):function(){return null}},U1="right-scroll-bar-position",z1="width-before-scroll-bar",pX="with-scroll-bars-hidden",yX="--removed-body-scroll-bar-size";function Uy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function xX(t,e){var n=O.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var wX=typeof window<"u"?O.useLayoutEffect:O.useEffect,hT=new WeakMap;function vX(t,e){var n=xX(null,function(r){return t.forEach(function(s){return Uy(s,r)})});return wX(function(){var r=hT.get(n);if(r){var s=new Set(r),i=new Set(t),l=n.current;s.forEach(function(u){i.has(u)||Uy(u,null)}),i.forEach(function(u){s.has(u)||Uy(u,l)})}hT.set(n,t)},[t]),n}function _X(t){return t}function EX(t,e){e===void 0&&(e=_X);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var l=e(i,r);return n.push(l),function(){n=n.filter(function(u){return u!==l})}},assignSyncMedium:function(i){for(r=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(u){return i(u)},filter:function(){return n}}},assignMedium:function(i){r=!0;var l=[];if(n.length){var u=n;n=[],u.forEach(i),l=n}var f=function(){var w=l;l=[],w.forEach(i)},m=function(){return Promise.resolve().then(f)};m(),n={push:function(w){l.push(w),m()},filter:function(w){return l=l.filter(w),n}}}};return s}function bX(t){t===void 0&&(t={});var e=EX(null);return e.options=Ji({async:!0,ssr:!1},t),e}var wk=function(t){var e=t.sideCar,n=r0(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return O.createElement(r,Ji({},n))};wk.isSideCarExport=!0;function CX(t,e){return t.useMedium(e),wk}var vk=bX(),zy=function(){},Ep=O.forwardRef(function(t,e){var n=O.useRef(null),r=O.useState({onScrollCapture:zy,onWheelCapture:zy,onTouchMoveCapture:zy}),s=r[0],i=r[1],l=t.forwardProps,u=t.children,f=t.className,m=t.removeScrollBar,w=t.enabled,v=t.shards,E=t.sideCar,I=t.noIsolation,P=t.inert,C=t.allowPinchZoom,k=t.as,N=k===void 0?"div":k,T=t.gapMode,S=r0(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),V=E,$=vX([n,e]),Y=Ji(Ji({},S),s);return O.createElement(O.Fragment,null,w&&O.createElement(V,{sideCar:vk,removeScrollBar:m,shards:v,noIsolation:I,inert:P,setCallbacks:i,allowPinchZoom:!!C,lockRef:n,gapMode:T}),l?O.cloneElement(O.Children.only(u),Ji(Ji({},Y),{ref:$})):O.createElement(N,Ji({},Y,{className:f,ref:$}),u))});Ep.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ep.classNames={fullWidth:z1,zeroRight:U1};var AX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function TX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=AX();return e&&t.setAttribute("nonce",e),t}function IX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function SX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var NX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=TX())&&(IX(e,n),SX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},RX=function(){var t=NX();return function(e,n){O.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},_k=function(){var t=RX(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},kX={left:0,top:0,right:0,gap:0},Hy=function(t){return parseInt(t||"",10)||0},PX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Hy(n),Hy(r),Hy(s)]},OX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return kX;var e=PX(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},DX=_k(),Ou="data-scroll-locked",MX=function(t,e,n,r){var s=t.left,i=t.top,l=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(pX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Ou,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(U1,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(z1,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(U1," .").concat(U1,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(z1," .").concat(z1,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ou,`] {
    `).concat(yX,": ").concat(u,`px;
  }
`)},fT=function(){var t=parseInt(document.body.getAttribute(Ou)||"0",10);return isFinite(t)?t:0},LX=function(){O.useEffect(function(){return document.body.setAttribute(Ou,(fT()+1).toString()),function(){var t=fT()-1;t<=0?document.body.removeAttribute(Ou):document.body.setAttribute(Ou,t.toString())}},[])},FX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;LX();var i=O.useMemo(function(){return OX(s)},[s]);return O.createElement(DX,{styles:MX(i,!e,s,n?"":"!important")})},qw=!1;if(typeof window<"u")try{var f1=Object.defineProperty({},"passive",{get:function(){return qw=!0,!0}});window.addEventListener("test",f1,f1),window.removeEventListener("test",f1,f1)}catch{qw=!1}var Qc=qw?{passive:!1}:!1,jX=function(t){return t.tagName==="TEXTAREA"},Ek=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!jX(t)&&n[e]==="visible")},BX=function(t){return Ek(t,"overflowY")},VX=function(t){return Ek(t,"overflowX")},gT=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=bk(t,r);if(s){var i=Ck(t,r),l=i[1],u=i[2];if(l>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},UX=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},zX=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},bk=function(t,e){return t==="v"?BX(e):VX(e)},Ck=function(t,e){return t==="v"?UX(e):zX(e)},HX=function(t,e){return t==="h"&&e==="rtl"?-1:1},WX=function(t,e,n,r,s){var i=HX(t,window.getComputedStyle(e).direction),l=i*r,u=n.target,f=e.contains(u),m=!1,w=l>0,v=0,E=0;do{var I=Ck(t,u),P=I[0],C=I[1],k=I[2],N=C-k-i*P;(P||N)&&bk(t,u)&&(v+=N,E+=P),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!f&&u!==document.body||f&&(e.contains(u)||e===u));return(w&&(Math.abs(v)<1||!s)||!w&&(Math.abs(E)<1||!s))&&(m=!0),m},g1=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},mT=function(t){return[t.deltaX,t.deltaY]},pT=function(t){return t&&"current"in t?t.current:t},GX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},$X=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},qX=0,Zc=[];function KX(t){var e=O.useRef([]),n=O.useRef([0,0]),r=O.useRef(),s=O.useState(qX++)[0],i=O.useState(_k)[0],l=O.useRef(t);O.useEffect(function(){l.current=t},[t]),O.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var C=MF([t.lockRef.current],(t.shards||[]).map(pT),!0).filter(Boolean);return C.forEach(function(k){return k.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),C.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=O.useCallback(function(C,k){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!l.current.allowPinchZoom;var N=g1(C),T=n.current,S="deltaX"in C?C.deltaX:T[0]-N[0],V="deltaY"in C?C.deltaY:T[1]-N[1],$,Y=C.target,M=Math.abs(S)>Math.abs(V)?"h":"v";if("touches"in C&&M==="h"&&Y.type==="range")return!1;var j=gT(M,Y);if(!j)return!0;if(j?$=M:($=M==="v"?"h":"v",j=gT(M,Y)),!j)return!1;if(!r.current&&"changedTouches"in C&&(S||V)&&(r.current=$),!$)return!0;var L=r.current||$;return WX(L,k,C,L==="h"?S:V,!0)},[]),f=O.useCallback(function(C){var k=C;if(!(!Zc.length||Zc[Zc.length-1]!==i)){var N="deltaY"in k?mT(k):g1(k),T=e.current.filter(function($){return $.name===k.type&&($.target===k.target||k.target===$.shadowParent)&&GX($.delta,N)})[0];if(T&&T.should){k.cancelable&&k.preventDefault();return}if(!T){var S=(l.current.shards||[]).map(pT).filter(Boolean).filter(function($){return $.contains(k.target)}),V=S.length>0?u(k,S[0]):!l.current.noIsolation;V&&k.cancelable&&k.preventDefault()}}},[]),m=O.useCallback(function(C,k,N,T){var S={name:C,delta:k,target:N,should:T,shadowParent:XX(N)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(V){return V!==S})},1)},[]),w=O.useCallback(function(C){n.current=g1(C),r.current=void 0},[]),v=O.useCallback(function(C){m(C.type,mT(C),C.target,u(C,t.lockRef.current))},[]),E=O.useCallback(function(C){m(C.type,g1(C),C.target,u(C,t.lockRef.current))},[]);O.useEffect(function(){return Zc.push(i),t.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:E}),document.addEventListener("wheel",f,Qc),document.addEventListener("touchmove",f,Qc),document.addEventListener("touchstart",w,Qc),function(){Zc=Zc.filter(function(C){return C!==i}),document.removeEventListener("wheel",f,Qc),document.removeEventListener("touchmove",f,Qc),document.removeEventListener("touchstart",w,Qc)}},[]);var I=t.removeScrollBar,P=t.inert;return O.createElement(O.Fragment,null,P?O.createElement(i,{styles:$X(s)}):null,I?O.createElement(FX,{gapMode:t.gapMode}):null)}function XX(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const YX=CX(vk,KX);var Ak=O.forwardRef(function(t,e){return O.createElement(Ep,Ji({},t,{ref:e,sideCar:YX}))});Ak.classNames=Ep.classNames;var Kw=["Enter"," "],QX=["ArrowDown","PageUp","Home"],Tk=["ArrowUp","PageDown","End"],ZX=[...QX,...Tk],JX={ltr:[...Kw,"ArrowRight"],rtl:[...Kw,"ArrowLeft"]},eY={ltr:["ArrowLeft"],rtl:["ArrowRight"]},w0="Menu",[Lf,tY,nY]=qv(w0),[jc,Ik]=ia(w0,[nY,km,yp]),bp=km(),Sk=yp(),[rY,Bc]=jc(w0),[sY,v0]=jc(w0),Nk=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:l=!0}=t,u=bp(e),[f,m]=O.useState(null),w=O.useRef(!1),v=Ur(i),E=M_(s);return O.useEffect(()=>{const I=()=>{w.current=!0,document.addEventListener("pointerdown",P,{capture:!0,once:!0}),document.addEventListener("pointermove",P,{capture:!0,once:!0})},P=()=>w.current=!1;return document.addEventListener("keydown",I,{capture:!0}),()=>{document.removeEventListener("keydown",I,{capture:!0}),document.removeEventListener("pointerdown",P,{capture:!0}),document.removeEventListener("pointermove",P,{capture:!0})}},[]),p.jsx(o4,{...u,children:p.jsx(rY,{scope:e,open:n,onOpenChange:v,content:f,onContentChange:m,children:p.jsx(sY,{scope:e,onClose:O.useCallback(()=>v(!1),[v]),isUsingKeyboardRef:w,dir:E,modal:l,children:r})})})};Nk.displayName=w0;var iY="MenuAnchor",G_=O.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=bp(n);return p.jsx(a4,{...s,...r,ref:e})});G_.displayName=iY;var $_="MenuPortal",[oY,Rk]=jc($_,{forceMount:void 0}),kk=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=Bc($_,e);return p.jsx(oY,{scope:e,forceMount:n,children:p.jsx(Cl,{present:n||i.open,children:p.jsx(Xv,{asChild:!0,container:s,children:r})})})};kk.displayName=$_;var ii="MenuContent",[aY,q_]=jc(ii),Pk=O.forwardRef((t,e)=>{const n=Rk(ii,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Bc(ii,t.__scopeMenu),l=v0(ii,t.__scopeMenu);return p.jsx(Lf.Provider,{scope:t.__scopeMenu,children:p.jsx(Cl,{present:r||i.open,children:p.jsx(Lf.Slot,{scope:t.__scopeMenu,children:l.modal?p.jsx(lY,{...s,ref:e}):p.jsx(cY,{...s,ref:e})})})})}),lY=O.forwardRef((t,e)=>{const n=Bc(ii,t.__scopeMenu),r=O.useRef(null),s=pr(e,r);return O.useEffect(()=>{const i=r.current;if(i)return mX(i)},[]),p.jsx(K_,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Xe(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),cY=O.forwardRef((t,e)=>{const n=Bc(ii,t.__scopeMenu);return p.jsx(K_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),uY=Jh("MenuContent.ScrollLock"),K_=O.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:f,onEscapeKeyDown:m,onPointerDownOutside:w,onFocusOutside:v,onInteractOutside:E,onDismiss:I,disableOutsideScroll:P,...C}=t,k=Bc(ii,n),N=v0(ii,n),T=bp(n),S=Sk(n),V=tY(n),[$,Y]=O.useState(null),M=O.useRef(null),j=pr(e,M,k.onContentChange),L=O.useRef(0),G=O.useRef(""),X=O.useRef(0),H=O.useRef(null),z=O.useRef("right"),de=O.useRef(0),ee=P?Ak:O.Fragment,xe=P?{as:uY,allowPinchZoom:!0}:void 0,we=ue=>{var Zt,qt;const Ie=G.current+ue,Ge=V().filter(yn=>!yn.disabled),He=document.activeElement,at=(Zt=Ge.find(yn=>yn.ref.current===He))==null?void 0:Zt.textValue,_t=Ge.map(yn=>yn.textValue),Vn=EY(_t,Ie,at),Oe=(qt=Ge.find(yn=>yn.textValue===Vn))==null?void 0:qt.ref.current;(function yn(Jn){G.current=Jn,window.clearTimeout(L.current),Jn!==""&&(L.current=window.setTimeout(()=>yn(""),1e3))})(Ie),Oe&&setTimeout(()=>Oe.focus())};O.useEffect(()=>()=>window.clearTimeout(L.current),[]),sX();const oe=O.useCallback(ue=>{var Ge,He;return z.current===((Ge=H.current)==null?void 0:Ge.side)&&CY(ue,(He=H.current)==null?void 0:He.area)},[]);return p.jsx(aY,{scope:n,searchRef:G,onItemEnter:O.useCallback(ue=>{oe(ue)&&ue.preventDefault()},[oe]),onItemLeave:O.useCallback(ue=>{var Ie;oe(ue)||((Ie=M.current)==null||Ie.focus(),Y(null))},[oe]),onTriggerLeave:O.useCallback(ue=>{oe(ue)&&ue.preventDefault()},[oe]),pointerGraceTimerRef:X,onPointerGraceIntentChange:O.useCallback(ue=>{H.current=ue},[]),children:p.jsx(ee,{...xe,children:p.jsx(pk,{asChild:!0,trapped:s,onMountAutoFocus:Xe(i,ue=>{var Ie;ue.preventDefault(),(Ie=M.current)==null||Ie.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:p.jsx(Cm,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:m,onPointerDownOutside:w,onFocusOutside:v,onInteractOutside:E,onDismiss:I,children:p.jsx(S8,{asChild:!0,...S,dir:N.dir,orientation:"vertical",loop:r,currentTabStopId:$,onCurrentTabStopIdChange:Y,onEntryFocus:Xe(f,ue=>{N.isUsingKeyboardRef.current||ue.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(l4,{role:"menu","aria-orientation":"vertical","data-state":Kk(k.open),"data-radix-menu-content":"",dir:N.dir,...T,...C,ref:j,style:{outline:"none",...C.style},onKeyDown:Xe(C.onKeyDown,ue=>{const Ge=ue.target.closest("[data-radix-menu-content]")===ue.currentTarget,He=ue.ctrlKey||ue.altKey||ue.metaKey,at=ue.key.length===1;Ge&&(ue.key==="Tab"&&ue.preventDefault(),!He&&at&&we(ue.key));const _t=M.current;if(ue.target!==_t||!ZX.includes(ue.key))return;ue.preventDefault();const Oe=V().filter(Zt=>!Zt.disabled).map(Zt=>Zt.ref.current);Tk.includes(ue.key)&&Oe.reverse(),vY(Oe)}),onBlur:Xe(t.onBlur,ue=>{ue.currentTarget.contains(ue.target)||(window.clearTimeout(L.current),G.current="")}),onPointerMove:Xe(t.onPointerMove,Ff(ue=>{const Ie=ue.target,Ge=de.current!==ue.clientX;if(ue.currentTarget.contains(Ie)&&Ge){const He=ue.clientX>de.current?"right":"left";z.current=He,de.current=ue.clientX}}))})})})})})})});Pk.displayName=ii;var dY="MenuGroup",X_=O.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(jt.div,{role:"group",...r,ref:e})});X_.displayName=dY;var hY="MenuLabel",Ok=O.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(jt.div,{...r,ref:e})});Ok.displayName=hY;var sm="MenuItem",yT="menu.itemSelect",Cp=O.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=O.useRef(null),l=v0(sm,t.__scopeMenu),u=q_(sm,t.__scopeMenu),f=pr(e,i),m=O.useRef(!1),w=()=>{const v=i.current;if(!n&&v){const E=new CustomEvent(yT,{bubbles:!0,cancelable:!0});v.addEventListener(yT,I=>r==null?void 0:r(I),{once:!0}),Kv(v,E),E.defaultPrevented?m.current=!1:l.onClose()}};return p.jsx(Dk,{...s,ref:f,disabled:n,onClick:Xe(t.onClick,w),onPointerDown:v=>{var E;(E=t.onPointerDown)==null||E.call(t,v),m.current=!0},onPointerUp:Xe(t.onPointerUp,v=>{var E;m.current||(E=v.currentTarget)==null||E.click()}),onKeyDown:Xe(t.onKeyDown,v=>{const E=u.searchRef.current!=="";n||E&&v.key===" "||Kw.includes(v.key)&&(v.currentTarget.click(),v.preventDefault())})})});Cp.displayName=sm;var Dk=O.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,l=q_(sm,n),u=Sk(n),f=O.useRef(null),m=pr(e,f),[w,v]=O.useState(!1),[E,I]=O.useState("");return O.useEffect(()=>{const P=f.current;P&&I((P.textContent??"").trim())},[i.children]),p.jsx(Lf.ItemSlot,{scope:n,disabled:r,textValue:s??E,children:p.jsx(N8,{asChild:!0,...u,focusable:!r,children:p.jsx(jt.div,{role:"menuitem","data-highlighted":w?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:m,onPointerMove:Xe(t.onPointerMove,Ff(P=>{r?l.onItemLeave(P):(l.onItemEnter(P),P.defaultPrevented||P.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Xe(t.onPointerLeave,Ff(P=>l.onItemLeave(P))),onFocus:Xe(t.onFocus,()=>v(!0)),onBlur:Xe(t.onBlur,()=>v(!1))})})})}),fY="MenuCheckboxItem",Mk=O.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return p.jsx(Vk,{scope:t.__scopeMenu,checked:n,children:p.jsx(Cp,{role:"menuitemcheckbox","aria-checked":im(n)?"mixed":n,...s,ref:e,"data-state":Q_(n),onSelect:Xe(s.onSelect,()=>r==null?void 0:r(im(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Mk.displayName=fY;var Lk="MenuRadioGroup",[gY,mY]=jc(Lk,{value:void 0,onValueChange:()=>{}}),Fk=O.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=Ur(r);return p.jsx(gY,{scope:t.__scopeMenu,value:n,onValueChange:i,children:p.jsx(X_,{...s,ref:e})})});Fk.displayName=Lk;var jk="MenuRadioItem",Bk=O.forwardRef((t,e)=>{const{value:n,...r}=t,s=mY(jk,t.__scopeMenu),i=n===s.value;return p.jsx(Vk,{scope:t.__scopeMenu,checked:i,children:p.jsx(Cp,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Q_(i),onSelect:Xe(r.onSelect,()=>{var l;return(l=s.onValueChange)==null?void 0:l.call(s,n)},{checkForDefaultPrevented:!1})})})});Bk.displayName=jk;var Y_="MenuItemIndicator",[Vk,pY]=jc(Y_,{checked:!1}),Uk=O.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=pY(Y_,n);return p.jsx(Cl,{present:r||im(i.checked)||i.checked===!0,children:p.jsx(jt.span,{...s,ref:e,"data-state":Q_(i.checked)})})});Uk.displayName=Y_;var yY="MenuSeparator",zk=O.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(jt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});zk.displayName=yY;var xY="MenuArrow",Hk=O.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=bp(n);return p.jsx(c4,{...s,...r,ref:e})});Hk.displayName=xY;var wY="MenuSub",[AQ,Wk]=jc(wY),mh="MenuSubTrigger",Gk=O.forwardRef((t,e)=>{const n=Bc(mh,t.__scopeMenu),r=v0(mh,t.__scopeMenu),s=Wk(mh,t.__scopeMenu),i=q_(mh,t.__scopeMenu),l=O.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:f}=i,m={__scopeMenu:t.__scopeMenu},w=O.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return O.useEffect(()=>w,[w]),O.useEffect(()=>{const v=u.current;return()=>{window.clearTimeout(v),f(null)}},[u,f]),p.jsx(G_,{asChild:!0,...m,children:p.jsx(Dk,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":Kk(n.open),...t,ref:bm(e,s.onTriggerChange),onClick:v=>{var E;(E=t.onClick)==null||E.call(t,v),!(t.disabled||v.defaultPrevented)&&(v.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Xe(t.onPointerMove,Ff(v=>{i.onItemEnter(v),!v.defaultPrevented&&!t.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),w()},100))})),onPointerLeave:Xe(t.onPointerLeave,Ff(v=>{var I,P;w();const E=(I=n.content)==null?void 0:I.getBoundingClientRect();if(E){const C=(P=n.content)==null?void 0:P.dataset.side,k=C==="right",N=k?-5:5,T=E[k?"left":"right"],S=E[k?"right":"left"];i.onPointerGraceIntentChange({area:[{x:v.clientX+N,y:v.clientY},{x:T,y:E.top},{x:S,y:E.top},{x:S,y:E.bottom},{x:T,y:E.bottom}],side:C}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(v),v.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Xe(t.onKeyDown,v=>{var I;const E=i.searchRef.current!=="";t.disabled||E&&v.key===" "||JX[r.dir].includes(v.key)&&(n.onOpenChange(!0),(I=n.content)==null||I.focus(),v.preventDefault())})})})});Gk.displayName=mh;var $k="MenuSubContent",qk=O.forwardRef((t,e)=>{const n=Rk(ii,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Bc(ii,t.__scopeMenu),l=v0(ii,t.__scopeMenu),u=Wk($k,t.__scopeMenu),f=O.useRef(null),m=pr(e,f);return p.jsx(Lf.Provider,{scope:t.__scopeMenu,children:p.jsx(Cl,{present:r||i.open,children:p.jsx(Lf.Slot,{scope:t.__scopeMenu,children:p.jsx(K_,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:m,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:w=>{var v;l.isUsingKeyboardRef.current&&((v=f.current)==null||v.focus()),w.preventDefault()},onCloseAutoFocus:w=>w.preventDefault(),onFocusOutside:Xe(t.onFocusOutside,w=>{w.target!==u.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Xe(t.onEscapeKeyDown,w=>{l.onClose(),w.preventDefault()}),onKeyDown:Xe(t.onKeyDown,w=>{var I;const v=w.currentTarget.contains(w.target),E=eY[l.dir].includes(w.key);v&&E&&(i.onOpenChange(!1),(I=u.trigger)==null||I.focus(),w.preventDefault())})})})})})});qk.displayName=$k;function Kk(t){return t?"open":"closed"}function im(t){return t==="indeterminate"}function Q_(t){return im(t)?"indeterminate":t?"checked":"unchecked"}function vY(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function _Y(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function EY(t,e,n){const s=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let l=_Y(t,Math.max(i,0));s.length===1&&(l=l.filter(m=>m!==n));const f=l.find(m=>m.toLowerCase().startsWith(s.toLowerCase()));return f!==n?f:void 0}function bY(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,l=e.length-1;i<e.length;l=i++){const u=e[i].x,f=e[i].y,m=e[l].x,w=e[l].y;f>r!=w>r&&n<(m-u)*(r-f)/(w-f)+u&&(s=!s)}return s}function CY(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return bY(n,e)}function Ff(t){return e=>e.pointerType==="mouse"?t(e):void 0}var AY=Nk,TY=G_,IY=kk,SY=Pk,NY=X_,RY=Ok,kY=Cp,PY=Mk,OY=Fk,DY=Bk,MY=Uk,LY=zk,FY=Hk,jY=Gk,BY=qk,Z_="DropdownMenu",[VY,TQ]=ia(Z_,[Ik]),is=Ik(),[UY,Xk]=VY(Z_),Yk=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:l,modal:u=!0}=t,f=is(e),m=O.useRef(null),[w=!1,v]=Qf({prop:s,defaultProp:i,onChange:l});return p.jsx(UY,{scope:e,triggerId:tf(),triggerRef:m,contentId:tf(),open:w,onOpenChange:v,onOpenToggle:O.useCallback(()=>v(E=>!E),[v]),modal:u,children:p.jsx(AY,{...f,open:w,onOpenChange:v,dir:r,modal:u,children:n})})};Yk.displayName=Z_;var Qk="DropdownMenuTrigger",Zk=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=Xk(Qk,n),l=is(n);return p.jsx(TY,{asChild:!0,...l,children:p.jsx(jt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:bm(e,i.triggerRef),onPointerDown:Xe(t.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(i.onOpenToggle(),i.open||u.preventDefault())}),onKeyDown:Xe(t.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&i.onOpenToggle(),u.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});Zk.displayName=Qk;var zY="DropdownMenuPortal",Jk=t=>{const{__scopeDropdownMenu:e,...n}=t,r=is(e);return p.jsx(IY,{...r,...n})};Jk.displayName=zY;var eP="DropdownMenuContent",tP=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Xk(eP,n),i=is(n),l=O.useRef(!1);return p.jsx(SY,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Xe(t.onCloseAutoFocus,u=>{var f;l.current||(f=s.triggerRef.current)==null||f.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:Xe(t.onInteractOutside,u=>{const f=u.detail.originalEvent,m=f.button===0&&f.ctrlKey===!0,w=f.button===2||m;(!s.modal||w)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tP.displayName=eP;var HY="DropdownMenuGroup",WY=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=is(n);return p.jsx(NY,{...s,...r,ref:e})});WY.displayName=HY;var GY="DropdownMenuLabel",nP=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=is(n);return p.jsx(RY,{...s,...r,ref:e})});nP.displayName=GY;var $Y="DropdownMenuItem",rP=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=is(n);return p.jsx(kY,{...s,...r,ref:e})});rP.displayName=$Y;var qY="DropdownMenuCheckboxItem",sP=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=is(n);return p.jsx(PY,{...s,...r,ref:e})});sP.displayName=qY;var KY="DropdownMenuRadioGroup",XY=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=is(n);return p.jsx(OY,{...s,...r,ref:e})});XY.displayName=KY;var YY="DropdownMenuRadioItem",iP=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=is(n);return p.jsx(DY,{...s,...r,ref:e})});iP.displayName=YY;var QY="DropdownMenuItemIndicator",oP=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=is(n);return p.jsx(MY,{...s,...r,ref:e})});oP.displayName=QY;var ZY="DropdownMenuSeparator",aP=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=is(n);return p.jsx(LY,{...s,...r,ref:e})});aP.displayName=ZY;var JY="DropdownMenuArrow",eQ=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=is(n);return p.jsx(FY,{...s,...r,ref:e})});eQ.displayName=JY;var tQ="DropdownMenuSubTrigger",lP=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=is(n);return p.jsx(jY,{...s,...r,ref:e})});lP.displayName=tQ;var nQ="DropdownMenuSubContent",cP=O.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=is(n);return p.jsx(BY,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});cP.displayName=nQ;var rQ=Yk,sQ=Zk,iQ=Jk,uP=tP,dP=nP,hP=rP,fP=sP,gP=iP,mP=oP,pP=aP,yP=lP,xP=cP;const wP=rQ,vP=sQ,oQ=O.forwardRef(({className:t,inset:e,children:n,...r},s)=>p.jsxs(yP,{ref:s,className:mt("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,p.jsx(CM,{className:"ml-auto"})]}));oQ.displayName=yP.displayName;const aQ=O.forwardRef(({className:t,...e},n)=>p.jsx(xP,{ref:n,className:mt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));aQ.displayName=xP.displayName;const J_=O.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(iQ,{children:p.jsx(uP,{ref:r,sideOffset:e,className:mt("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));J_.displayName=uP.displayName;const jf=O.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(hP,{ref:r,className:mt("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));jf.displayName=hP.displayName;const lQ=O.forwardRef(({className:t,children:e,checked:n,...r},s)=>p.jsxs(fP,{ref:s,className:mt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(mP,{children:p.jsx(Jv,{className:"h-4 w-4"})})}),e]}));lQ.displayName=fP.displayName;const cQ=O.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(gP,{ref:r,className:mt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(mP,{children:p.jsx(SM,{className:"h-2 w-2 fill-current"})})}),e]}));cQ.displayName=gP.displayName;const eE=O.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(dP,{ref:r,className:mt("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));eE.displayName=dP.displayName;const Bf=O.forwardRef(({className:t,...e},n)=>p.jsx(pP,{ref:n,className:mt("-mx-1 my-1 h-px bg-muted",t),...e}));Bf.displayName=pP.displayName;function uQ(){var l;const[t]=bl(),{user:e,logout:n}=yr(),[r,s]=O.useState(null);O.useEffect(()=>{(async()=>{try{const f=await x6();console.log("Logo URL loaded:",f),s(f)}catch(f){console.error("Failed to load logo:",f)}})()},[]);const i=[{name:"הפרופיל שלי",href:"/profile"},{name:"משתמשים",href:"/users"},{name:"בתי עסק",href:"/businesses"},{name:"בית",href:"/"}];return p.jsx("nav",{className:"hidden md:flex fixed top-0 left-0 right-0 h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 z-30 shadow-sm px-4",children:p.jsxs("div",{className:"container mx-auto flex justify-between items-center h-full",children:[p.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-start",children:[p.jsx(rX,{variant:"ghost",size:"icon"}),e?p.jsx(p.Fragment,{children:p.jsxs(wP,{children:[p.jsx(vP,{className:"focus:outline-none",children:p.jsx("div",{className:"flex items-center space-x-2",children:p.jsxs(fl,{children:[p.jsx(gl,{src:e.photoURL||""}),p.jsx(ml,{children:((l=e.displayName)==null?void 0:l.charAt(0))||"U"})]})})}),p.jsxs(J_,{align:"start",children:[p.jsxs(eE,{children:[e.displayName||"משתמש",p.jsx("p",{className:"text-xs text-gray-500",children:e.email})]}),p.jsx(Bf,{}),p.jsx(sn,{href:"/profile",children:p.jsxs(jf,{className:"cursor-pointer",children:[p.jsx(mg,{className:"ml-2 h-4 w-4"}),p.jsx("span",{children:"הפרופיל שלי"})]})}),p.jsx(Bf,{}),p.jsxs(jf,{onClick:()=>n(),className:"cursor-pointer",children:[p.jsx(T3,{className:"ml-2 h-4 w-4"}),p.jsx("span",{children:"התנתק"})]})]})]})}):p.jsx(sn,{href:"/auth",children:p.jsx("span",{className:"text-primary-600 dark:text-primary-500 font-semibold hover:underline",children:"התחבר / הירשם"})})]}),p.jsx("div",{className:"flex items-center space-x-12",children:i.map(u=>p.jsx(sn,{href:u.href,children:p.jsx("span",{className:`text-gray-700 dark:text-gray-200 hover:text-primary-600 dark:hover:text-primary-500 font-medium cursor-pointer px-4 py-1 text-lg ${t===u.href?"text-primary-600 dark:text-primary-500 font-bold border-b-2 border-primary-500":""}`,children:u.name})},u.href))}),p.jsx("div",{className:"flex-1 flex justify-end",children:p.jsx(sn,{href:"/",children:p.jsx("div",{className:"flex items-center text-primary-500 cursor-pointer",children:r?p.jsx("img",{src:r,alt:"ShareIt Logo",className:"h-16 w-auto"}):p.jsx("svg",{className:"w-16 h-16 text-primary-500",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"})})})})})]})})}function dQ(){var i;const[t]=bl(),{openScanner:e}=Z8(),{user:n,logout:r}=yr(),s=()=>{console.log("פותח סורק QR ממובייל"),e()};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"md:hidden fixed top-0 left-0 w-full z-40 flex justify-between items-center px-4 py-2 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[p.jsx("div",{}),p.jsx("div",{}),p.jsx("div",{className:"flex justify-end",children:n&&p.jsxs(wP,{children:[p.jsx(vP,{className:"focus:outline-none",children:p.jsxs(fl,{children:[p.jsx(gl,{src:n.photoURL||""}),p.jsx(ml,{children:((i=n.displayName)==null?void 0:i.charAt(0))||"U"})]})}),p.jsxs(J_,{align:"end",children:[p.jsxs(eE,{children:[n.displayName||"משתמש",p.jsx("p",{className:"text-xs text-gray-500",children:n.email})]}),p.jsx(Bf,{}),p.jsx(sn,{href:"/profile",children:p.jsxs(jf,{className:"cursor-pointer",children:[p.jsx(mg,{className:"ml-2 h-4 w-4"}),p.jsx("span",{children:"הפרופיל שלי"})]})}),p.jsx(Bf,{}),p.jsxs(jf,{onClick:()=>r(),className:"cursor-pointer",children:[p.jsx(T3,{className:"ml-2 h-4 w-4"}),p.jsx("span",{children:"התנתק"})]})]})]})})]}),n&&p.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-30 p-2",children:p.jsxs("div",{className:"grid grid-cols-5 gap-1",children:[p.jsx(sn,{href:"/",children:p.jsxs("div",{className:`flex flex-col items-center justify-center py-1 ${t==="/"?"text-primary-500":"text-gray-500 dark:text-gray-400"}`,children:[p.jsx(OM,{className:"h-6 w-6"}),p.jsx("span",{className:"text-xs mt-1",children:"בית"})]})}),p.jsx(sn,{href:"/businesses",children:p.jsxs("div",{className:`flex flex-col items-center justify-center py-1 ${t==="/businesses"?"text-primary-500":"text-gray-500 dark:text-gray-400"}`,children:[p.jsx(gg,{className:"h-6 w-6"}),p.jsx("span",{className:"text-xs mt-1",children:"בתי עסק"})]})}),p.jsxs("button",{className:"flex flex-col items-center justify-center bg-primary-500 rounded-full h-14 w-14 mx-auto -mt-2 text-white shadow-lg",onClick:s,type:"button",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),p.jsx("span",{className:"text-xs mt-1",children:"סריקה"})]}),p.jsx(sn,{href:"/users",children:p.jsxs("div",{className:`flex flex-col items-center justify-center py-1 ${t==="/users"?"text-primary-500":"text-gray-500 dark:text-gray-400"}`,children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),p.jsx("span",{className:"text-xs mt-1",children:"משתמשים"})]})}),p.jsx(sn,{href:"/profile",children:p.jsxs("div",{className:`flex flex-col items-center justify-center py-1 ${t==="/profile"?"text-primary-500":"text-gray-500 dark:text-gray-400"}`,children:[p.jsx(bM,{className:"h-6 w-6"}),p.jsx("span",{className:"text-xs mt-1",children:"הפרופיל שלי"})]})})]})})]})}function hQ(){const{user:t,loading:e}=yr();return e?p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):p.jsxs(TD,{children:[p.jsx(Qs,{path:"/login",children:t?p.jsx(Ty,{}):p.jsx(Po,{})}),p.jsx(Qs,{path:"/register",children:t?p.jsx(Ty,{}):p.jsx(N$,{})}),p.jsx(Qs,{path:"/",children:t?p.jsx(Ty,{}):p.jsx(Po,{})}),p.jsx(Qs,{path:"/businesses",children:t?p.jsx(fq,{}):p.jsx(Po,{})}),p.jsx(Qs,{path:"/saved-offers",children:t?p.jsx(Sq,{}):p.jsx(Po,{})}),p.jsx(Qs,{path:"/profile",children:t?p.jsx(Rq,{}):p.jsx(Po,{})}),p.jsx(Qs,{path:"/business/:businessId",children:p.jsx(dK,{})}),p.jsx(Qs,{path:"/business/:businessId/scan",children:t?p.jsx(jq,{}):p.jsx(Po,{})}),p.jsx(Qs,{path:"/users",children:t?p.jsx(kq,{}):p.jsx(Po,{})}),p.jsx(Qs,{path:"/user/:userId",children:t?p.jsx(Dq,{}):p.jsx(Po,{})}),p.jsx(Qs,{path:"/recommendation/:id",children:p.jsx(Bq,{})}),p.jsx(Qs,{path:"/redeem-offer/:offerId",children:t?p.jsx(JK,{}):p.jsx(Po,{})})]})}function fQ(){return O.useEffect(()=>{(async()=>{try{await m6()}catch(e){console.error("Error handling redirect: ",e)}})()},[]),p.jsx(PW,{children:p.jsxs(Q7,{children:[p.jsx(b9,{}),p.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300",children:[p.jsx(uQ,{}),p.jsxs(uK,{children:[p.jsx("div",{className:"container mx-auto pt-4 md:pt-20 pb-24 md:pb-8 px-4",children:p.jsx(hQ,{})}),p.jsx(dQ,{})]})]})]})})}async function gQ(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const mQ=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e[0],{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await gQ(n),await n.json())},pQ=new G$({defaultOptions:{queries:{queryFn:mQ({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});US(document.getElementById("root")).render(p.jsx(tX,{defaultTheme:"light",storageKey:"theme",children:p.jsx(Y$,{client:pQ,children:p.jsx(fQ,{})})}));
